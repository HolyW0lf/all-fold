"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8443],{38388:function(e,n,t){t.d(n,{M:function(){return l}});var r=t(7297);function i(){var e=(0,r.Z)(["\n  fragment PostsFeedNavTag on Tag {\n    id\n    isOfficial\n  }\n"]);return i=function(){return e},e}var l=(0,t(31230).Ps)(i())},64405:function(e,n,t){t.d(n,{b:function(){return a}});var r=t(7297),i=t(31230),l=t(16092);function o(){var e=(0,r.Z)(["\n  fragment ReplPostRecentCommentUser on User {\n    id\n    username\n    image\n    ...UserLinkUser\n  }\n  ","\n"]);return o=function(){return e},e}var a=(0,i.Ps)(o(),l._)},47174:function(e,n,t){t.d(n,{n:function(){return c}});var r=t(7297),i=t(31230),l=t(17674),o=t(35055),a=t(21767),u=t(38388);function s(){var e=(0,r.Z)(["\n  fragment ReplPostReplCardRepl on Repl {\n    id\n    iconUrl\n    description(plainText: true)\n    ...ReplPostReplInfoRepl\n    ...ReplStatsRepl\n    ...ReplLinkRepl\n    tags {\n      id\n      ...PostsFeedNavTag\n    }\n    owner {\n      ... on Team {\n        id\n        username\n        url\n        image\n      }\n      ... on User {\n        id\n        username\n        url\n        image\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return s=function(){return e},e}var c=(0,i.Ps)(s(),l.Zs,o.T,a.Y,u.M)},17674:function(e,n,t){t.d(n,{Gz:function(){return w},U5:function(){return Z},Zs:function(){return m},f_:function(){return g},rP:function(){return R}});var r=t(7297),i=t(31230),l=t(6565),o=t(58121),a=t(32399),u=t(35055),s=t(38388),c=t(64405);function d(){var e=(0,r.Z)(["\n  fragment ReplPostReplInfoRepl on Repl {\n    id\n    title\n    description(plainText: true)\n    imageUrl\n    iconUrl\n    templateInfo {\n      label\n      iconUrl\n    }\n  }\n"]);return d=function(){return e},e}function f(){var e=(0,r.Z)(["\n  fragment ReplPostRepl on Repl {\n    id\n    ...ReplPostReplInfoRepl\n    ...LikeButtonRepl\n    ...ReplStatsRepl\n    tags {\n      id\n      ...PostsFeedNavTag\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return f=function(){return e},e}function p(){var e=(0,r.Z)(["\n  fragment ReplPostReplComment on ReplComment {\n    id\n    body\n    timeCreated\n    user {\n      id\n      ...ReplPostRecentCommentUser\n    }\n  }\n  ","\n"]);return p=function(){return e},e}function h(){var e=(0,r.Z)(["\n  fragment ReplPostPost on Post {\n    id\n    title\n    timeCreated\n    isPinned\n    isAnnouncement\n    ...ReplViewPostActionPermissions\n    replComment {\n      id\n      body(removeMarkdown: true)\n    }\n    repl {\n      id\n      ...ReplViewReplActionsPermissions\n      ...ReplPostRepl\n    }\n    user {\n      id\n      ...ReplPostUserPostUser\n    }\n    recentReplComments {\n      id\n      ...ReplPostReplComment\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return h=function(){return e},e}function v(){var e=(0,r.Z)(["\n  fragment ReplPostCurrentUser on CurrentUser {\n    id\n    isModerator: hasRole(role: MODERATOR)\n    isAdmin: hasRole(role: ADMIN)\n    ...LikeButtonCurrentUser\n  }\n  ","\n"]);return v=function(){return e},e}var m=(0,i.Ps)(d()),g=(0,i.Ps)(f(),m,a.R7,u.T,s.M),w=(0,i.Ps)(p(),c.b),Z=(0,i.Ps)(h(),l.K4,l.jN,g,o.n,w),R=(0,i.Ps)(v(),a.wO)},35055:function(e,n,t){t.d(n,{T:function(){return l}});var r=t(7297);function i(){var e=(0,r.Z)(["\n  fragment ReplStatsRepl on Repl {\n    id\n    likeCount\n    runCount\n    commentCount\n  }\n"]);return i=function(){return e},e}var l=(0,t(31230).Ps)(i())},58121:function(e,n,t){t.d(n,{n:function(){return a}});var r=t(7297),i=t(31230),l=t(16092);function o(){var e=(0,r.Z)(["\n  fragment ReplPostUserPostUser on User {\n    id\n    username\n    image\n    ...UserLinkUser\n  }\n  ","\n"]);return o=function(){return e},e}var a=(0,i.Ps)(o(),l._)},49197:function(e,n,t){t.d(n,{G:function(){return R},Z:function(){return b}});var r=t(26042),i=t(69396),l=t(10253),o=t(35944),a=(t(67294),t(70917)),u=t(32399),s=t(69346),c=t(27843),d=t(81255),f=t(86292),p=t(44044),h=t(29163),v=t(15085),m=t(93160),g=t(81456),w=t(1144),Z=t(49412),R=(0,a.iv)([p.gU.filled,d.l0.p(8),{width:"auto",height:"auto"}]);function b(e){var n=e.repl,t=e.currentUser,a=e.surface,p=void 0===a||a,b=(0,l.Z)((0,u.lU)(),2),y=b[0],k=b[1].loading,x=(0,o.BX)(o.HY,{children:[(null===t||void 0===t?void 0:t.isVerified)&&(0,o.tZ)(v.zx,{css:[p&&R],disabled:k,onClick:function(){n.currentUserDidLike||(0,f.j)(f.U3.REACTED_TO_REPL,{replView:"https://replit.com"+n.url,reaction:"heart",isReplTalk:!1,item:"repl",isCommunityPublish:n.wasPosted,isAppPublish:n.wasPublished}),y({variables:{input:{replId:n.id}},optimisticResponse:{toggleReplLike:(0,i.Z)((0,r.Z)({},n),{likeCount:Math.max(0,n.likeCount+(n.currentUserDidLike?-1:1)),currentUserDidLike:!n.currentUserDidLike})}})},iconLeft:n.currentUserDidLike?(0,o.tZ)(Z.Z,{}):(0,o.tZ)(c.Z,{}),text:n.likeCount>0?(0,g.d)(n.likeCount):"Like"}),t&&!t.isVerified&&(0,o.BX)(s.Z,{css:[d.l0.flex.row,d.l0.align.center,d.l0.backgroundColor.backgroundHigher,d.l0.borderRadius(8),d.l0.pr(8)],children:[(0,o.tZ)(h.Z,{alt:"Verify your email to like",css:p&&R,disabled:!0,children:(0,o.tZ)(c.Z,{})}),(0,o.tZ)(w.x,{color:"dimmer",children:(0,g.d)(n.likeCount)})]}),!t&&(0,o.BX)(s.Z,{css:[d.l0.flex.row,d.l0.align.center,d.l0.backgroundColor.backgroundHigher,d.l0.borderRadius(8),d.l0.pr(8)],children:[(0,o.tZ)(h.Z,{alt:"Log in to like",css:p&&R,disabled:!0,children:(0,o.tZ)(c.Z,{})}),(0,o.tZ)(w.x,{color:"dimmer",children:(0,g.d)(n.likeCount)})]})]});return p?(0,o.tZ)(m.Z,{background:"default",css:[d.l0.borderRadius(8)],children:x}):(0,o.tZ)(s.Z,{children:x})}},48293:function(e,n,t){t.d(n,{cu:function(){return p},rv:function(){return d}});var r=t(26042),i=t(7297),l=t(31230),o=t(6565),a=t(50319);function u(){var e=(0,i.Z)(["\n  fragment ReplViewReplTitleRepl on Repl {\n    id\n    title\n    iconUrl\n    templateInfo {\n      iconUrl\n    }\n    owner {\n      ... on User {\n        id\n        username\n      }\n      ... on Team {\n        id\n        username\n      }\n    }\n    ...ReplViewReplActionsPermissions\n  }\n  ","\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  mutation ReplViewReplTitleUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...ReplViewReplTitleRepl\n      }\n    }\n  }\n  ","\n"]);return s=function(){return e},e}var c={},d=(0,l.Ps)(u(),o.jN),f=(0,l.Ps)(s(),d);function p(e){var n=(0,r.Z)({},c,e);return a.D(f,n)}},23426:function(e,n,t){t.d(n,{Q:function(){return d},r:function(){return f}});var r=t(7297),i=t(31230),l=t(29359),o=t(90610),a=t(32399),u=t(9523);function s(){var e=(0,r.Z)(["\n  fragment ReplViewReplViewerRepl on Repl {\n    id\n    publishedAs\n    runCount\n    publicForkCount\n    publicReleasesForkCount\n    prodUrl: hostedUrl(dotty: true)\n    isProject\n    nextPagePathname\n    lang {\n      id\n      header\n      displayName\n    }\n    ...ReplViewerOutputOverlayRepl\n    ...UseReplViewerRepl\n    ...LikeButtonRepl\n  }\n  ","\n  ","\n  ","\n"]);return s=function(){return e},e}function c(){var e=(0,r.Z)(["\n  fragment ReplViewReplViewerCurrentUser on CurrentUser {\n    id\n    ...LikeButtonCurrentUser\n    ...CrosisContextCurrentUser\n  }\n  ","\n  ","\n"]);return c=function(){return e},e}var d=(0,i.Ps)(s(),l.sI,o.gh,a.R7),f=(0,i.Ps)(c(),a.wO,u.D)},52013:function(e,n,t){t.d(n,{Z:function(){return rn}});var r=t(14924),i=t(26042),l=t(10253),o=t(35944),a=t(67294),u=t(90317),s=t(93160),c=t(81255),d=t(69346),f=t(61756),p=t(51995),h=t(1144),v=t(41307),m=t(22862),g=t(90610),w=t(25602),Z=t(18962),R=t(48920),b=t(45528),y=t(47568),k=t(34051),x=t.n(k),C=t(92876),P=t(11163),U=t.n(P),N=t(66223),E=t(75240),S=t(52867),F=t(64926),D=t(99336),T=t(39791),I=t(59916),L=t(25108);var V=t(86292),B=t(37452),A=t(65456),O=".lesson/lessonplan.md";function _(e){var n=e.fs,t=e.container,r=e.dotReplit,i=e.skip,o=e.preferredFile,u=(0,l.Z)(a.useState(null),2),s=u[0],c=u[1],d=function(e){var n,t=(0,l.Z)(a.useState(null===(n=e.getContext())||void 0===n?void 0:n.repl.id),2),r=t[0],i=t[1];return a.useEffect((function(){return e.onConnectionStateChanged((function(n){var t;n===E.e.CONNECTING&&i(null===(t=e.getContext())||void 0===t?void 0:t.repl.id)}))}),[e]),r}(t);return a.useEffect((function(){if(!i&&d){var e=!1;return Promise.all([(0,B.W)({replId:d,dotReplit:r,fs:n}),"LessonPlan"===(null===o||void 0===o?void 0:o.type)?n.stat(O):null,"FilePath"===(null===o||void 0===o?void 0:o.type)?n.stat(o.path):null]).then((function(n){var t=(0,l.Z)(n,3),r=t[0],i=r.entrypoint,a=r.readmeFile,u=t[1],s=t[2];e||("LessonPlan"===(null===o||void 0===o?void 0:o.type)&&u&&u.exists&&u.type===A.Tv.File?c(O):"FilePath"===(null===o||void 0===o?void 0:o.type)&&s&&s.exists&&s.type===A.Tv.File?c(o.path):"Readme"===(null===o||void 0===o?void 0:o.type)&&a?c(a):i&&c(i))})),function(){e=!0}}}),[n,r,d,i,o]),s}var j,M=t(90123);function z(e){var n,t,r=e.currentUser,i=e.repl,o=e.initialViewMode,s=e.enableDeeplinks,c=(0,l.Z)(a.useState(""),2),d=c[0],f=c[1],p=(0,a.useState)(Z.e.DISCONNECTED),h=p[0],v=p[1],m=(0,a.useState)(R.A.OFFLINE),k=m[0],P=m[1],B=(0,a.useState)((function(){return function(e){var n=e.setBsodSentryEventId,t=(0,E.Z)({onUnrecoverableError:function(e){if(e.message.toLowerCase().includes("repl not found"))U().push("/home","~/");else{L.error(e),C.Tb(e);var t=(0,D.ZP)(e,{tags:{replviewer:"true"}});n(t)}}}),r=(0,N.Z)({container:t}),i=(0,I.Z)({container:t,fs:r}),l=(0,F.Z)({container:t,dotReplit:i}),o=(0,S.Z)({container:t,mode:"shellrunner",beforeRun:(0,y.Z)(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,T.Z)(t,i);case 2:if(!e.sent){e.next=5;break}return e.next=5,l.installPackages();case 5:case"end":return e.stop()}}),e)})))});return{container:t,fs:r,runner:o,dotReplit:i,packager:l}}({setBsodSentryEventId:f})})),A=B[0],O=A.container,z=A.fs,G=A.dotReplit,X=A.runner,H=A.packager,W=(0,a.useRef)((0,w.u9)()),q=(null===(n=i.replViewSettings)||void 0===n?void 0:n.defaultView)===u.dZ.ReplFile&&i.replViewSettings.replFile?i.replViewSettings.replFile:void 0,K={type:"Readme"};i.isProject?K={type:"LessonPlan"}:q&&(K={type:"FilePath",path:q});var $=(null===(t=i.replViewSettings)||void 0===t?void 0:t.defaultView)!==u.dZ.ReplImage&&(i.publishedAs===u.O2.Template||i.isProject),Y=(0,a.useState)((function(){return o===j.Code||W.current||q||$?{type:"code",fs:z,container:O,dotReplit:G}:null})),J=Y[0],Q=Y[1],ee=(0,a.useState)(W.current),ne=ee[0],te=ee[1],re=(0,l.Z)(a.useState(null),2),ie=re[0],le=re[1],oe=Boolean("code"===(null===J||void 0===J?void 0:J.type)&&!J.deeplink&&!W.current),ae=_({fs:z,dotReplit:G,container:O,preferredFile:K,skip:!oe});(0,M.Z)({fs:z,currentDeeplink:"code"===(null===J||void 0===J?void 0:J.type)?J.deeplink:void 0,onChange:function(e){Q(e?{deeplink:e,type:"code",container:O,fs:z,dotReplit:G}:null)},enabled:s});var ue=(0,l.Z)((0,g.yo)({variables:{replId:i.id}}),1)[0];(0,a.useEffect)((function(){if((0,w.u9)()){var e=!1;return(0,w.mv)(z).then((function(n){var t=n.path,r=n.line,i=n.col;e||t&&Q({type:"code",container:O,fs:z,dotReplit:G,deeplink:{path:t,line:r,col:i}})})),function(){e=!0}}}),[O,z,G]),(0,a.useEffect)((function(){oe&&ae&&Q({type:"code",container:O,fs:z,dotReplit:G,deeplink:{path:ae}})}),[oe,ae,O,z,G]),(0,a.useEffect)((function(){ie&&Q("server"!==ie?{type:"vnc",container:O,fs:z}:{type:"server",previewUrl:i.previewUrl})}),[O,z,ie,i.previewUrl]),(0,a.useEffect)((function(){h!==Z.e.CONNECTED&&le(null)}),[h]);var se=(0,b.b)({repl:i,currentUser:r}),ce=function(e){return!!["html","web_project","kaboom"].includes(e.lang.id)||Boolean(e.config.isServer)}(i),de=ne||Boolean(J&&("code"===J.type||"vnc"===J.type||"replboxDisplay"===J.type||"terminal"===J.type));(0,a.useEffect)((function(){if(de&&O.getConnectionState()===Z.e.DISCONNECTED){O.connect({context:se});var e=ce?[O.close]:[X.onStateChanged(P),O.onConnectionStateChanged(v),O.onPortOpened((function(e){var n=e.isVnc;le(n?"vnc":"server")})),O.close];return function(){e.forEach((function(e){return e()}))}}}),[de,O,X,se,ce]);var fe=(0,a.useRef)(!1);return(0,a.useEffect)((function(){k===R.A.IDLE&&fe.current&&(fe.current=!1,"terminal"===(null===J||void 0===J?void 0:J.type)&&X.run())}),[k,J,X]),{fs:z,openFile:function(e){"server"!==(null===J||void 0===J?void 0:J.type)&&"replboxDisplay"!==(null===J||void 0===J?void 0:J.type)||P(R.A.IDLE),Q({type:"code",container:O,fs:z,deeplink:{path:e},dotReplit:G}),X.getRunState()===R.A.RUNNING&&X.stopRun()},viewState:J,runRepl:function(){if(te(!1),r&&ue(),(0,V.j)(V.U3.REACTED_TO_REPL,{replView:"https://replit.com"+i.url,reaction:"repl_ran",isReplTalk:!1,item:"repl",isCommunityPublish:i.wasPosted,isAppPublish:i.wasPublished}),ce){var e,n,t=(null===(e=i.deployment)||void 0===e||null===(n=e.activeRelease)||void 0===n?void 0:n.previewUrl)||i.previewUrl;return Q({type:"server",previewUrl:t}),void P(R.A.RUNNING)}return i.lang.canUseShellRunner?(Q("server"===ie?{type:"server",previewUrl:i.previewUrl}:"vnc"===ie?{type:"vnc",container:O,fs:z}:{type:"terminal",runner:X,packager:H}),X.getRunState()!==R.A.IDLE?void(fe.current=!0):void X.run()):i.lang.hasReplboxWebview?(Q({type:"replboxDisplay",fs:z}),void P(R.A.RUNNING)):void Q({type:"deprecationNotice"})},stopRepl:function(){Q(null),te(!1),P(R.A.IDLE),ce||X.getRunState()===R.A.RUNNING&&X.stopRun()},runState:k,isFileTreeOpen:ne,setIsFileTreeOpen:te,didBsod:Boolean(d),showUrlOutput:ce,devClearBsod:function(){f("")}}}!function(e){e.Code="Code",e.Output="Output"}(j||(j={}));var G=t(24337),X=t(60536),H=t.n(X),W=t(48551),q=t(63872),K=t(58794),$=t(57263),Y=$.j.tabletMin,J=t(5152),Q=t.n(J),ee=t(67003),ne=function(){var e=(0,y.Z)(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(2738),t.e(4474)]).then(t.t.bind(t,74474,23)).then((function(e){return e.default})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=Q()(ne,{ssr:!1,loading:function(){return null}});function re(e){var n=e.contents,t={scrollToContent:!0};try{t=(0,i.Z)({},t,JSON.parse(n||"{}"))}catch(l){}var r=(0,ee.Fg)().isDarkColorScheme;return(0,o.BX)("div",{className:"jsx-f04e2237e6284377 excalidraw-wrapper",children:[(0,o.tZ)(te,{viewModeEnabled:!0,zenModeEnabled:!0,initialData:t,theme:r?"dark":"light"}),(0,o.tZ)(H(),{id:"f04e2237e6284377",children:".excalidraw-wrapper.jsx-f04e2237e6284377{cursor:all-scroll;height:100%;width:100%}"})]})}var ie=t(34837),le=t.n(ie),oe=t(28497);function ae(e){var n=e.contents,t=e.isKbmsprite,r=a.useRef(null);return a.useEffect((function(){var e=r.current;if(e){e.width=e.offsetWidth,e.height=e.offsetHeight;var i=JSON.parse(n),l=le()({canvas:e,data:t?(0,oe.C)(i):i,readonly:!0});return function(){l.cleanUp()}}}),[n,t]),(0,o.tZ)("canvas",{ref:r,className:"jsx-93826966b3fae22 pedit",children:(0,o.tZ)(H(),{id:"93826966b3fae22",children:".pedit.jsx-93826966b3fae22{width:100%;height:100%}"})})}var ue=t(54568),se=t(68928),ce=t(78244),de=t(77402),fe=t(66681);function pe(e){var n=e.fs,t=e.deeplink,r=null===t||void 0===t?void 0:t.path,i=(0,ue.Z)({fs:n,path:r});return(0,o.BX)("div",{className:H().dynamic([["bfde0a756867257d",[Y]]])+" file-viewer",children:[(0,o.BX)("div",{className:H().dynamic([["bfde0a756867257d",[Y]]])+" content",children:[i.result&&i.result.fileViewerType===de.D.Media?(0,o.tZ)("div",{className:H().dynamic([["bfde0a756867257d",[Y]]])+" media",children:(0,o.tZ)(q.A,{content:K.Z.from(i.result.content).toString("base64"),mime:(0,W.yC)(i.result.path)})}):null,i.isLoading&&i.fileViewerType===de.D.Media?(0,o.tZ)("div",{className:H().dynamic([["bfde0a756867257d",[Y]]])+" file-loader",children:(0,o.tZ)(se.Z,{})}):null,i.result&&i.result.fileViewerType===de.D.Markdown?(0,o.tZ)("div",{className:H().dynamic([["bfde0a756867257d",[Y]]])+" markdown",children:(0,o.tZ)(fe.Z,{path:i.result.path,source:i.result.content.toString(),fs:n,sourcePos:!1})}):null,i.isLoading&&i.fileViewerType===de.D.Markdown?(0,o.tZ)("div",{className:H().dynamic([["bfde0a756867257d",[Y]]])+" file-loader",children:(0,o.tZ)(se.Z,{})}):null,i.result&&i.result.fileViewerType===de.D.Draw?(0,o.tZ)("div",{className:H().dynamic([["bfde0a756867257d",[Y]]])+" draw",children:(0,o.tZ)(re,{contents:i.result.content.toString()})}):null,i.isLoading&&i.fileViewerType===de.D.Draw?(0,o.tZ)("div",{className:H().dynamic([["bfde0a756867257d",[Y]]])+" file-loader",children:(0,o.tZ)(se.Z,{})}):null,i.result&&i.result.fileViewerType===de.D.Code?(0,o.tZ)(ce.ZP,{filePath:i.result.path,code:i.result.content.toString(),fontSize:14}):null,i.isLoading&&i.fileViewerType===de.D.Code?(0,o.tZ)("div",{className:H().dynamic([["bfde0a756867257d",[Y]]])+" file-loader",children:(0,o.tZ)(se.Z,{})}):null,i.result&&i.result.fileViewerType===de.D.Pedit?(0,o.tZ)(ae,{contents:i.result.content.toString(),isKbmsprite:!!(null===r||void 0===r?void 0:r.endsWith(".kbmsprite"))}):null,!i.isLoading&&i.error?(0,o.tZ)("div",{className:H().dynamic([["bfde0a756867257d",[Y]]])+" error",children:(0,o.BX)("div",{className:H().dynamic([["bfde0a756867257d",[Y]]]),children:["Could not load ",i.error.path]})}):null]}),(0,o.tZ)(H(),{id:"bfde0a756867257d",dynamic:[Y],children:".file-viewer.__jsx-style-dynamic-selector{position:absolute;top:0;left:0;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;align:stretch;height:100%;width:100%}.markdown.__jsx-style-dynamic-selector{word-break:break-word;max-width:840px;margin:0 auto;padding:var(--space-16);overflow-y:auto;position:relative;height:100%}.draw.__jsx-style-dynamic-selector{height:100%;width:100%}.file-tree.__jsx-style-dynamic-selector{background-color:var(--background-root);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);overflow:auto;display:none}.content.__jsx-style-dynamic-selector{-webkit-box-flex:1;-webkit-flex:1 1 auto;-moz-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;width:100%;height:100%;overflow-y:auto;position:relative}.file-loader.__jsx-style-dynamic-selector{width:100%;padding-top:var(--space-8);padding-left:var(--space-8);position:absolute;top:0;left:0;z-index:100;opacity:0;-webkit-animation:fadeIn ease 0s forwards;-moz-animation:fadeIn ease 0s forwards;-o-animation:fadeIn ease 0s forwards;animation:fadeIn ease 0s forwards;-webkit-animation-delay:200ms;-moz-animation-delay:200ms;-o-animation-delay:200ms;animation-delay:200ms}.media.__jsx-style-dynamic-selector,.error.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%}@-webkit-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@-moz-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@-o-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@media screen and (min-width:".concat(Y,"px){.file-tree.__jsx-style-dynamic-selector{display:block;width:260px}}")})]})}var he=t(65967),ve=t(61622),me=t(81456),ge=t(70240),we=t(12061),Ze=d.K.div;function Re(e){var n=e.replId,t=e.language,r=(0,l.Z)(a.useState((function(){return(0,ge.Z)({beforeRun:function(){return Promise.resolve()},getMainFileContents:function(){return(0,we.Z)({language:e.language,fs:e.fs})}})})),1)[0],i=a.useRef(null);return a.useEffect((function(){if(i.current){var e=!1;return r.load({replId:n,language:t,iframeParent:i.current}).then((function(){e||r.run()})),function(){e=!0,r.getRunState()!==R.A.OFFLINE&&r.destroy()}}}),[r,n,t]),(0,o.tZ)(Ze,{ref:i,css:[c.l0.width("100%"),c.l0.height("100%"),{backgroundColor:"white",borderBottomRightRadius:8,borderBottomLeftRadius:8,iframe:[c.l0.width("100%"),c.l0.height("100%"),{display:"block",utline:"none",border:"none",borderBottomRightRadius:8,borderBottomLeftRadius:8}]}]})}var be=t(31066),ye=t(30243),ke=t(92098),xe=t(70917),Ce=t(46609),Pe=t(38935),Ue=t(12365),Ne=t(83043),Ee=t(69183),Se=t(84810),Fe=t(15519);function De(e){return(0,o.tZ)(Ue.D,{children:(0,o.tZ)(Te,(0,i.Z)({},e))})}function Te(e){var n=e.activePath,t=e.fs,r=e.language,i=e.onNodeClick;(0,Ne.Yc)({fs:t});var u=(0,l.Z)(a.useState(!1),2),s=u[0],f=u[1],p=function(e){var n=e.language,t=e.areHiddenFilesVisible;return a.useCallback((function(e){return!!(0,Ee.MF)(e)||!t&&((0,Ee.uC)(e)||(0,Se.C)(e)||(0,Ee.yb)(e,n))}),[n,t])}({language:r,areHiddenFilesVisible:s}),v=Fe.Z.getMainFileName(r),m=a.useCallback((function(e,n){return(0,W.x$)(e,n,v)}),[v]);return(0,Ue.S)({flags:{flagFiletreeMultiselect:!1},activeFile:n,openFile:function(e){return i({path:e,type:A.Tv.File})},shouldHideFile:p,sortNode:m}),(0,o.tZ)(Ce.i.Provider,{value:{fs:t,setPendingFileType:function(){},uploadFiles:function(){},pendingFileType:null,getNodeType:function(){var e=(0,y.Z)(x().mark((function e(n){var r;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.readFile(n);case 2:return r=e.sent,e.abrupt("return",r.error===A.Df.IsDirectory?A.Tv.Directory:A.Tv.File);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),pendingUploads:[],currentRenamePath:null,setCurrentRenamePath:function(){},pendingDelete:null,setPendingDelete:function(){},overwriteNode:function(){},renameNode:function(){},deleteNode:function(){},duplicateFile:(0,y.Z)(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),currentOp:null,nodeOpError:null},children:(0,o.tZ)(ke.Z,{children:(0,o.BX)(d.Z,{css:[c.l0.flex.column,c.l0.p(8),(0,xe.iv)({overflow:"auto",height:"100%"})],children:[(0,o.BX)(d.Z,{css:[c.l0.rowWithGap(4),c.l0.p(8),c.l0.justify.spaceBetween],children:[(0,o.tZ)(h.h,{level:3,variant:"subheadDefault",children:"Files"}),(0,o.tZ)(Pe.Z,{actions:[s?Pe.s.HideHiddenFiles:Pe.s.ShowHiddenFiles],onAction:function(e){switch(e){case Pe.s.ShowHiddenFiles:return void f(!0);case Pe.s.HideHiddenFiles:f(!1)}}})]}),(0,o.tZ)(ye.Z,{siblings:[],readOnly:!0,path:be.Ql})]})})})}var Ie=t(46702),Le=t(96189),Ve=t(49197),Be=t(26451),Ae=t(29163),Oe=t(35621),_e=t(89295),je=t(94860),Me=t(93058);function ze(){return Boolean(function(){var e=document;return e.fullscreenElement||e.webkitFullscreenElement||e.mozFullscreenElement}())}var Ge=t(62794),Xe=t(10164),He=t(83241),We=t(21131),qe="1px solid "+c.TV.outlineDimmer;function Ke(e){var n=e.children;return(0,o.tZ)(d.Z,{tag:"header",css:[{borderBottom:qe},c.l0.p(8),c.l0.rowWithGap(8),c.l0.align.center],children:n})}var $e=d.K.a;function Ye(e){var n=e.runCount,t=e.runState,r=e.onClick,l=e.publishedAs,a=t===R.A.RUNNING?(0,o.tZ)(he.Z,{fill:"currentColor"}):(0,o.tZ)(p.Z,{fill:"currentColor"}),s=l===u.O2.Template?"Run example":"Run";return t===R.A.RUNNING&&(s="Stop"),(0,o.tZ)(d.Z,{css:[c.l0.rowWithGap(8),c.l0.align.center],children:(0,o.tZ)(f.ZP,(0,i.Z)({colorway:t===R.A.RUNNING||l===u.O2.Template?void 0:"positive",onClick:r,iconLeft:a,text:s},n>0&&{secondaryText:(0,me.d)(n)}))})}function Je(e){var n=e.innerRef,t=e.children;return(0,o.tZ)(s.Z,{elevated:!0,css:[{border:qe},c.l0.borderRadius(8)],innerRef:n,children:t})}function Qe(e){var n=e.src;return(0,o.tZ)(d.Z,{css:[c.l0.width("100%"),c.l0.height("100%")],children:(0,o.tZ)(d.Z,(0,i.Z)({tag:"iframe",src:n,css:[c.l0.width("100%"),c.l0.height("100%"),{borderBottomRightRadius:8,borderBottomLeftRadius:8,position:"absolute",backgroundColor:"white",display:"block",border:"none",top:0,left:0}]},He.Z))})}function en(e){var n=e.fs,t=e.isOpen,r=e.language,i=e.activePath,l=e.onNodeClick;return(0,o.tZ)(d.Z,{css:[{zIndex:101,position:"absolute",top:0,left:0,height:"100%",overflow:"hidden",borderBottomLeftRadius:8},!t&&{pointerEvents:"none"}],children:(0,o.tZ)(s.Z,{elevated:!0,css:[{height:"100%",width:200,transition:"transform ".concat(160,"ms"),transform:"translateX(".concat(t?0:-200,"px)")}],children:(0,o.tZ)(De,{fs:n,language:r,activePath:i,onNodeClick:l})})})}var nn=d.K.div;function tn(e){var n=e.repl,t=e.currentUser,i=e.enableDeeplinks,u=e.isFromProfile,p=z({enableDeeplinks:Boolean(i),repl:n,currentUser:t}),g=p.openFile,w=p.viewState,Z=p.fs,b=p.runRepl,y=p.stopRepl,k=p.runState,x=p.didBsod,C=p.devClearBsod,P=p.isFileTreeOpen,U=p.setIsFileTreeOpen,N=p.showUrlOutput,E=a.useRef(null),S=(0,Me.Z)().showNotice,F=(0,a.useState)(!1),D=F[0],T=F[1],I=function(){var e=(0,l.Z)(a.useState(ze()),2),n=e[0],t=e[1];return a.useEffect((function(){var e=function(){t(ze())};return document.addEventListener("fullscreenchange",e),function(){document.removeEventListener("fullscreenchange",e)}})),n}(),L=(0,Le.Z)((function(e){void 0!==e.width&&T(e.width<=500)})),B="code"===(null===w||void 0===w?void 0:w.type)&&w.deeplink,O=(0,l.Z)(a.useState(B?B.path:null),2),_=O[0],j=O[1];return(0,a.useEffect)((function(){j(B?B.path:null)}),[B,null===w||void 0===w?void 0:w.type]),x?(0,o.tZ)(m.Z,{devHide:C}):(0,o.BX)(Je,{innerRef:E,children:[(0,o.BX)(Ke,{children:[(0,o.BX)(d.Z,{css:[c.l0.flex.growAndShrink(1),c.l0.rowWithGap(8)],children:[(0,o.BX)(d.Z,{css:[c.l0.rowWithGap(4),c.l0.align.center],children:[(0,o.tZ)(f.ZP,{iconLeft:(0,o.tZ)(Be.Z,{}),text:P?"Hide files":"Show files",onClick:function(){return U((function(e){return!e}))},css:(0,r.Z)({},"@media (max-width: ".concat($.j.mobileMax,"px)"),{display:"none"})}),(0,o.tZ)(s.Z,{background:"default",css:[c.l0.borderRadius(8),(0,r.Z)({},"@media (min-width: ".concat($.j.mobileMax+1,"px)"),{display:"none"})],children:(0,o.tZ)(Ae.Z,{css:Ve.G,alt:P?"Hide files":"Show files",onClick:function(){return U((function(e){return!e}))},children:(0,o.tZ)(Be.Z,{})})})]}),N||"server"===(null===w||void 0===w?void 0:w.type)?(0,o.tZ)(d.Z,{css:[c.l0.center,{borderLeft:"1px solid "+c.TV.outlineDimmest}],children:(0,o.BX)($e,{css:[c.l0.rowWithGap(4),c.l0.color.foregroundDimmer,c.l0.px(8)],href:n.prodUrl,target:"_blank",children:[(0,o.tZ)(Ie.Z,{}),(0,o.tZ)(h.x,{children:(0,o.tZ)("span",{css:(0,r.Z)({},"@media (max-width: ".concat($.j.mobileMax+20,"px)"),{display:"none"}),children:"Open website"})})]})}):null]}),(0,o.BX)(d.Z,{css:[c.l0.rowWithGap(8),c.l0.align.center],children:[E.current&&document.fullscreenEnabled&&(0,o.tZ)(Ae.Z,{alt:I?"Exit fullscreen":"Enter fullscreen",css:Ve.G,onClick:function(){var e=E.current;e?I?function(){var e=document;e.exitFullscreen?e.exitFullscreen():e.mozExitFullScreen?e.mozExitFullScreen():e.webkitExitFullScreen&&e.webkitExitFullScreen()}():(!function(e){var n=e;n.requestFullscreen?n.requestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.webkitRequestFullScreen&&n.webkitRequestFullScreen()}(e),(0,V.j)(V.U3.REPL_VIEWER_FULLSCREEN_ENTERED,{location:u?"profile":"coverpage"})):S("Failed to enter fullscreen mode")},children:I?(0,o.tZ)(je.Z,{}):(0,o.tZ)(_e.Z,{})}),(0,o.tZ)(Ve.Z,{repl:n,currentUser:t}),(0,o.tZ)(Ye,{runCount:n.runCount,runState:k,publishedAs:n.publishedAs,onClick:function(){if(k===R.A.IDLE||k===R.A.OFFLINE)return(0,V.j)(V.U3.RUN_BUTTON_CLICKED,{context:"replView"}),void b();k===R.A.RUNNING&&y()}})]})]}),(0,o.BX)(nn,{ref:function(e){L(e)},css:[c.l0.flex.growAndShrink(1),{position:"relative"}],children:[null===w?(0,o.tZ)(v.Z,{repl:n,onClick:b}):null,"server"===(null===w||void 0===w?void 0:w.type)?(0,o.tZ)(Qe,{src:w.previewUrl}):null,"vnc"===(null===w||void 0===w?void 0:w.type)?(0,o.tZ)(G.Z,{fs:w.fs,container:w.container}):null,"replboxDisplay"===(null===w||void 0===w?void 0:w.type)?(0,o.tZ)(Re,{replId:n.id,language:n.language,fs:w.fs}):null,"deprecationNotice"===(null===w||void 0===w?void 0:w.type)?(0,o.BX)(d.Z,{css:[c.l0.center,c.l0.p(16),c.l0.height("100%")],children:[(0,o.BX)(h.x,{multiline:!0,variant:"subheadDefault",children:['Running "',n.lang.displayName,'" is no longer supported.'," "]}),(0,o.tZ)(Ge.Z,{feature:Xe.l.General})]}):null,"terminal"===(null===w||void 0===w?void 0:w.type)?(0,o.tZ)(d.Z,{css:[c.l0.height("100%"),c.l0.width("100%"),c.l0.position.relative,{overflow:"hidden",borderBottomLeftRadius:8,borderBottomRightRadius:8}],children:(0,o.tZ)(ve.Z,{packager:w.packager,runner:w.runner})}):null,"code"===(null===w||void 0===w?void 0:w.type)?(0,o.tZ)(d.Z,{css:[c.l0.height("100%"),c.l0.flex.growAndShrink(1),{position:"relative",overflow:"hidden",borderBottomLeftRadius:8,borderBottomRightRadius:8,transition:"margin ".concat(160,"ms"),marginLeft:P&&!D?200:0}],onClick:function(){D&&U(!1)},children:(0,o.tZ)(pe,{fs:w.fs,deeplink:w.deeplink})}):null,(0,o.tZ)(en,{isOpen:P,language:n.lang.id,activePath:_,onNodeClick:function(e){e.type!==A.Tv.Directory&&(g(e.path),D&&U(!1))},fs:Z})]})]})}function rn(e){var n=e.repl,t=e.currentUser,r=e.enableDeeplinks,i=e.isFromProfile,l=(0,a.useState)(!1),u=l[0],s=l[1];(0,a.useEffect)((function(){return s(!0)}),[]);var c=(0,We.Z)((function(){return{id:n.id,language:n.language}}),[n.id,n.language]);return u?(0,o.tZ)(Oe.Z.Provider,{value:c,children:(0,o.tZ)(tn,{isFromProfile:i,repl:n,currentUser:t,enableDeeplinks:r})}):(0,o.tZ)(Je,{})}},90123:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(47568),i=t(34051),l=t.n(i),o=t(67294),a=t(11163),u=t.n(a),s=t(25602);function c(e){var n=e.currentDeeplink,t=e.onChange,i=e.fs,a=e.enabled,c=(0,o.useRef)(!1),d=(0,o.useCallback)((0,r.Z)(l().mark((function e(){var n,r,o,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.current){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,s.mv)(i);case 4:if(n=e.sent,r=n.path,o=n.line,a=n.col,r){e.next=11;break}return t(null),e.abrupt("return");case 11:t({path:r,line:o,col:a});case 12:case"end":return e.stop()}}),e)}))),[i,t]),f=(0,o.useState)(!1),p=f[0],h=f[1];(0,o.useEffect)((function(){p||d().then((function(){return h(!0)}))})),(0,o.useEffect)((function(){if(a)return window.addEventListener("hashchange",d),function(){window.removeEventListener("hashchange",d)}}),[a,d]),(0,o.useEffect)((function(){if(a&&n){var e=(0,s.YM)(n),t=u().asPath;try{t=window.decodeURI(t)}catch(i){}if(!t.endsWith(e)){var r=u().asPath.includes("#")?u().asPath.slice(0,u().asPath.indexOf("#")):u().asPath;c.current=!0,u().push({pathname:u().pathname,query:u().query},"".concat(r).concat(e),{shallow:!0}),c.current=!1}}}),[i,n,a])}},54568:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(26042),i=t(10253),l=t(67294),o=t(77402);function a(e,n){return(0,r.Z)({},e,n)}var u={isLoading:!1,result:null,error:null,fileViewerType:null};function s(e){var n=e.fs,t=e.path,r=(0,i.Z)(l.useReducer(a,u),2),s=r[0],c=r[1];return l.useEffect((function(){if(t){var e=!1,r=(0,o.V)(t);return c({isLoading:!0,fileViewerType:r}),n.readFile(t).then((function(n){e||(n.error?c({isLoading:!1,result:null,error:{path:t,fileViewerType:r,error:n.error}}):c({isLoading:!1,result:{path:t,fileViewerType:r,content:n.content},error:null}))})),function(){e=!0}}c(u)}),[n,t]),s}},90610:function(e,n,t){t.d(n,{gh:function(){return d},yo:function(){return p}});var r=t(26042),i=t(7297),l=t(31230),o=t(9523),a=t(50319);function u(){var e=(0,i.Z)(["\n  fragment UseReplViewerRepl on Repl {\n    id\n    previewUrl: hostedUrl(dotty: false, dev: false)\n    url\n    wasPosted\n    wasPublished\n    publishedAs\n    isProject\n    lang {\n      id\n      canUseShellRunner\n      hasReplboxWebview\n    }\n    config {\n      isServer\n      isVnc\n    }\n    deployment {\n      id\n      activeRelease {\n        id\n        previewUrl: hostedUrl\n      }\n    }\n    replViewSettings {\n      id\n      defaultView\n      replFile\n    }\n    ...CrosisContextRepl\n  }\n  ","\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  mutation UserReplViewCreateReplRun($replId: String!) {\n    createReplRun(replId: $replId) {\n      ... on Repl {\n        id\n        runCount\n      }\n    }\n  }\n"]);return s=function(){return e},e}var c={},d=(0,l.Ps)(u(),o.C),f=(0,l.Ps)(s());function p(e){var n=(0,r.Z)({},c,e);return a.D(f,n)}},28497:function(e,n,t){function r(e){var n=document.createElement("canvas"),t=n.getContext("2d");if(n.width=e.width,n.height=e.height,!t)throw new Error("failed to get canvas ctx");return{version:"1",width:e.width,height:e.height,palette:[[0,0,0,255],[255,255,255,255],[255,255,128,255],[255,128,255,255],[0,128,128,255],[128,0,255,255],[255,0,128,255],[0,255,255,255]],anims:{},frames:e.frames.map((function(r){var i=new window.ImageData(new Uint8ClampedArray(r.pixels),e.width,e.height);return t.putImageData(i,0,0),n.toDataURL()}))}}function i(e){return new Promise((function(n,t){var r=new window.Image;r.src=e,r.onload=function(){n(r)},r.onerror=t}))}function l(e){return new Promise((function(n,t){Promise.all(e.frames.map(i)).then((function(r){var i=document.createElement("canvas");i.width=e.width,i.height=e.height;var l=i.getContext("2d");if(l){var o=r.map((function(n){return l.drawImage(n,0,0),{pixels:Array.from(l.getImageData(0,0,e.width,e.height).data),width:e.width,height:e.height}}));n({frames:o,preview:e.frames[0],width:e.width,height:e.height})}else t(new Error("failed to get canvas ctx"))})).catch(t)}))}t.d(n,{C:function(){return r},u:function(){return l}})}}]);
//# sourceMappingURL=8443-dfa04758803dfd36.js.map