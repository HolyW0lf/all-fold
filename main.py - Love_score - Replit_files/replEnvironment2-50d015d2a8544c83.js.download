(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9460],{60937:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/replEnvironment2",function(){return t(28038)}])},41709:function(e,n,t){"use strict";t.d(n,{q:function(){return R},J:function(){return C}});var r=t(26042),i=t(99534),o=t(10253),a=t(35944),l=t(51438),c=t(28668),u=t(25171),s=t(78120),d=t(14456),p=t(99094),f=d.tk.baseTheme({".cm-diff-inserted":{backgroundColor:"#0053A644",borderLeft:"#0053A6 solid 3px"},".cm-diff-deleted":{backgroundColor:"#c93c3733",borderLeft:"#c93c37 solid 3px"}}),v=d.p.line({attributes:{class:"cm-diff-inserted"}}),h=d.p.line({attributes:{class:"cm-diff-deleted"}}),m=s.Py.define({map:function(e,n){return e.map(n)}}),g=function(e){(0,c.Z)(t,e);var n=(0,u.Z)(t);function t(){return(0,l.Z)(this,t),n.apply(this,arguments)}var r=t.prototype;return r.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-alignment cm-line",e.innerHTML="&nbsp;",e},r.ignoreEvent=function(){return!1},t}(d.l9);function Z(e){var n=new s.f_,t=new g;e.sort((function(e,n){return e.character-n.character}));var r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0)for(var c=a.value,u=c.character,p=c.padding,f=0;f<p;f++)n.add(u,u,d.p.widget({widget:t,side:-1,block:!0}))}catch(v){i=!0,o=v}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n.finish()}function y(e){var n=e.coloredLines,t=e.colorDecoration,r=d.lg.fromClass((function e(r){(0,l.Z)(this,e);var i=new s.f_,o=!0,a=!1,c=void 0;try{for(var u,d=n[Symbol.iterator]();!(o=(u=d.next()).done);o=!0){var p=u.value,f=r.state.doc.line(p);i.add(f.from,f.from,t)}}catch(v){a=!0,c=v}finally{try{o||null==d.return||d.return()}finally{if(a)throw c}}this.decorations=i.finish()}),{decorations:function(e){return e.decorations}}),i=s.QQ.define({create:function(){return d.p.none},update:function(e,n){var t=!0,r=!1,i=void 0;try{for(var o,a=n.effects[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l.is(m))return l.value}}catch(c){r=!0,i=c}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n.docChanged?e.map(n.changes):e},provide:function(e){return d.tk.decorations.from(e)}});return[f,r,i]}var b=function(){var e=function(e,n){return d.tk.domEventHandlers({scroll:function(t,r){if(r===e&&t.target){var i=t.target;if(i.scrollTop){var o=i.scrollTop;n.scrollDOM.scrollTo({top:o})}}}})},n=new s.F6,t=new s.F6;return{extensions:function(){return{right:n.of([]),left:t.of([])}},setup:function(r,i){r.dispatch({effects:t.reconfigure(e(r,i))}),i.dispatch({effects:n.reconfigure(e(i,r))})}}},x=t(67294),w=t(80159),k=t(78244),P=b(),I=P.extensions,S=P.setup;function C(e){var n=e.left,t=e.right,a=n.code,l=(0,i.Z)(n,["code"]),c=t.code,u=(0,i.Z)(t,["code"]),d=(0,w.Z)((0,r.Z)({readOnly:!0,lineWrapping:!1,initialDoc:a,extensions:[I().left]},l)),f=d.view,g=d.ref,b=(0,w.Z)((0,r.Z)({readOnly:!0,lineWrapping:!1,initialDoc:c,extensions:[I().right]},u)),k=b.view,P=b.ref,C=(0,o.Z)(x.useState(!1),2),R=C[0],E=C[1],T=(0,o.Z)(x.useState(!1),2),D=T[0],U=T[1];return x.useEffect((function(){if(f&&k&&R&&D){var e=setTimeout((function(){S(f,k),function(e,n){var t=(0,p.Bz)(e.state.doc.sliceString(0),n.state.doc.sliceString(0));e.dispatch({effects:[s.Py.appendConfig.of(y({coloredLines:t.leftColored.sort((function(e,n){return e-n})),colorDecoration:h})),m.of(Z(t.leftPadded))]}),n.dispatch({effects:[s.Py.appendConfig.of(y({coloredLines:t.rightColored.sort((function(e,n){return e-n})),colorDecoration:v})),m.of(Z(t.rightPadded))]})}(f,k)}));return function(){return clearTimeout(e)}}}),[f,k,R,D]),x.useEffect((function(){f&&(f.dispatch({changes:{from:0,to:f.state.doc.length,insert:a}}),E(!0))}),[a,f]),x.useEffect((function(){k&&(k.dispatch({changes:{from:0,to:k.state.doc.length,insert:c}}),U(!0))}),[c,k]),{left:{view:f,ref:g,code:a,options:l,ready:R},right:{view:k,ref:P,code:c,options:u,ready:D}}}function R(e){var n,t=e.diffViewer,o=(0,i.Z)(e,["diffViewer"]);return(0,a.BX)(a.HY,{children:[(0,a.tZ)("div",{css:{height:t.ready?0:"auto"},ref:t.ref}),!t.ready&&(0,a.tZ)(k.PH,(0,r.Z)({code:null!==(n=t.code)&&void 0!==n?n:""},t.options,o))]})}},42699:function(e,n,t){"use strict";t.d(n,{l:function(){return o},x:function(){return i}});var r=t(86292),i=function(e){(0,r.j)(r.U3.COURSE_ACTION,e)},o=function(e){(0,r.j)(r.U3.LESSON_ACTION,e)}},21767:function(e,n,t){"use strict";t.d(n,{Y:function(){return o}});var r=t(7297);function i(){var e=(0,r.Z)(["\n  fragment ReplLinkRepl on Repl {\n    id\n    url\n    nextPagePathname\n  }\n"]);return i=function(){return e},e}var o=(0,t(31230).Ps)(i())},52008:function(e,n,t){"use strict";t.d(n,{JM:function(){return p},SL:function(){return s}});var r=t(26042),i=t(7297),o=t(31230),a=t(37887);function l(){var e=(0,i.Z)(['\n  fragment ReplEnvironment2CurrentUserLayoutFlags on CurrentUser {\n    id\n    flagSaveLayoutState: gate(feature: "flag-save-layout-state")\n    flagThreadsPane: gate(feature: "flag-threads-pane")\n    flagThreads2: gate(feature: "flag-threads-2")\n    flagGhostrunner: gate(feature: "flag-ghostrunner")\n    flagLayoutNavigator: gate(feature: "flag-layout-navigator")\n  }\n']);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  query ReplEnvironment2LayoutFlags {\n    currentUser {\n      id\n      ...ReplEnvironment2CurrentUserLayoutFlags\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var u={},s=(0,o.Ps)(l()),d=(0,o.Ps)(c(),s);function p(e){var n=(0,r.Z)({},u,e);return a.a(d,n)}},79611:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var r=t(67294),i=t(11163);function o(e,n){var t=(0,i.useRouter)();(0,r.useEffect)((function(){}),[e,t]),(0,r.useEffect)((function(){if("SubscriptionExpiredError"===(null===e||void 0===e?void 0:e.__typename)){var r=e.replId,i=e.isOwner,o=n.split("/")[1].slice(1);t.replace({pathname:"/expiredPrivateRepl",query:{isOwner:i,ownerUsername:o,replId:r}},t.asPath)}}),[e,t,n])}},19923:function(e,n,t){"use strict";t.d(n,{Gp:function(){return U},Oh:function(){return Y},V3:function(){return O},Xl:function(){return X},Yd:function(){return z},_b:function(){return K},gX:function(){return ne},h2:function(){return N},on:function(){return _},q7:function(){return J},vs:function(){return T},w9:function(){return H},zp:function(){return $}});var r=t(26042),i=t(7297),o=t(31230),a=t(7900),l=t(37887),c=t(50319);function u(){var e=(0,i.Z)(["\n  fragment TeamProfileReplTemplateModelSolution on ReplTemplateModelSolution {\n    id\n    visibleAfterSubmitting\n    visibleAfterPassingTests\n    visibleAfterDueDate\n    repl {\n      id\n      url\n      nextPagePathname\n    }\n    canStudentFork\n    studentFork {\n      id\n      url\n      nextPagePathname\n    }\n  }\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  fragment TeamProfileReplTemplate on ReplTemplate {\n    id\n    isPublished\n    isGroupProject\n    allowSelfGrouping\n    imageUrl\n    url\n    dueDate\n    modelSolution {\n      id\n      ...TeamProfileReplTemplateModelSolution\n    }\n    userSubmissionGroup {\n      ...TeamTemplateSubmissionGroup\n    }\n  }\n  ","\n  ","\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  fragment TeamProfileRepl on Repl {\n    id\n    title\n    description\n    slug\n    timeCreated\n    url\n    pinnedToProfile\n    nextPagePathname\n    templateInfo {\n      label\n      iconUrl\n    }\n    template {\n      id\n      ...TeamProfileReplTemplate\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function p(){var e=(0,i.Z)(["\n  fragment TeamProfileStack on Stack {\n    id\n    title\n    repls {\n      id\n      ...TeamProfileRepl\n    }\n  }\n  ","\n"]);return p=function(){return e},e}function f(){var e=(0,i.Z)(['\n  fragment TeamEduProfile on Team {\n    id\n    username\n    displayName\n    isAdmin\n    archived\n    needsMigrationToStacks\n    defaultTemplateStack {\n      id\n      ...TeamProfileStack\n    }\n    stacks {\n      id\n      ...TeamProfileStack\n    }\n    members {\n      id\n      permissions\n    }\n    organization {\n      id\n      capabilities {\n        isExpired: isExpiring(daysFromNow: 0)\n      }\n    }\n    hideTeamRepls: gate(\n      feature: "flag-filter-team-repls"\n      subscriptionType: EDUCATION\n    )\n  }\n  ',"\n"]);return f=function(){return e},e}function v(){var e=(0,i.Z)(["\n  fragment TeamProProfile on Team {\n    id\n    username\n    displayName\n    isMember\n    isAdmin\n    archived\n    defaultReplStack {\n      id\n      ...TeamProfileStack\n    }\n    stacks {\n      id\n      ...TeamProfileStack\n    }\n    members {\n      id\n      permissions\n    }\n    organization {\n      id\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function h(){var e=(0,i.Z)(["\n  fragment TeamProfileAllStacks on Team {\n    id\n    defaultReplStack {\n      id\n      ...TeamProfileStack\n    }\n    defaultReplStack {\n      id\n      ...TeamProfileStack\n    }\n    stacks {\n      id\n      ...TeamProfileStack\n    }\n  }\n  ","\n"]);return h=function(){return e},e}function m(){var e=(0,i.Z)(["\n  fragment TeamCreateReplSubmissionOutput on CreateReplSubmissionOutput {\n    ... on Repl {\n      id\n      nextPagePathname\n      url\n      template {\n        id\n        ...TeamProfileReplTemplate\n      }\n    }\n    ... on UserError {\n      message\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function g(){var e=(0,i.Z)(["\n  query TeamProProfile($teamname: String!) {\n    team: teamByUsername(username: $teamname) {\n      ... on Team {\n        id\n        ...TeamProProfile\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return g=function(){return e},e}function Z(){var e=(0,i.Z)(["\n  query TeamEduProfile($teamname: String!) {\n    team: teamByUsername(username: $teamname) {\n      ... on Team {\n        id\n        ...TeamEduProfile\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return Z=function(){return e},e}function y(){var e=(0,i.Z)(["\n  mutation TeamProProfilePinRepl($replId: String!) {\n    pinReplToProfile2(replId: $replId) {\n      ... on Repl {\n        id\n        pinnedToProfile\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return y=function(){return e},e}function b(){var e=(0,i.Z)(["\n  mutation TeamProProfileUnpinRepl($replId: String!) {\n    unpinReplFromProfile2(replId: $replId) {\n      ... on Repl {\n        id\n        pinnedToProfile\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return b=function(){return e},e}function x(){var e=(0,i.Z)(["\n  mutation TeamProfileArrangeStackItem($input: ArrangeStackItemInput!) {\n    arrangeStackItem(input: $input) {\n      ... on Team {\n        id\n        ...TeamProfileAllStacks\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return x=function(){return e},e}function w(){var e=(0,i.Z)(["\n  mutation TeamProfileUpdateReplTemplate($input: UpdateReplTemplateInput!) {\n    updateReplTemplate(input: $input) {\n      ... on ReplTemplate {\n        id\n        repl {\n          id\n          ...TeamProfileRepl\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return w=function(){return e},e}function k(){var e=(0,i.Z)(["\n  mutation TeamProfileMigrateTeamToStacks($teamId: Int!) {\n    migrateTeamToStacks(teamId: $teamId) {\n      ... on Team {\n        id\n        ...TeamEduProfile\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return k=function(){return e},e}function P(){var e=(0,i.Z)(["\n  mutation TeamProfileCreateReplTemplateModelSolution(\n    $input: CreateReplTemplateModelSolutionInput!\n  ) {\n    createReplTemplateModelSolution(input: $input) {\n      ... on Repl {\n        id\n        ...TeamProfileRepl\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return P=function(){return e},e}function I(){var e=(0,i.Z)(["\n  mutation TeamProfileCreateReplTemplateModelSolutionFork(\n    $input: CreateReplTemplateModelSolutionForkInput!\n  ) {\n    createReplTemplateModelSolutionFork(input: $input) {\n      ... on Repl {\n        id\n        ...TeamProfileRepl\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return I=function(){return e},e}function S(){var e=(0,i.Z)(["\n  mutation TeamCreateReplSubmission($templateId: Int!) {\n    createReplSubmission(templateId: $templateId) {\n      ...TeamCreateReplSubmissionOutput\n    }\n  }\n  ","\n"]);return S=function(){return e},e}var C={},R=(0,o.Ps)(u()),E=(0,o.Ps)(s(),R,a.Pc),T=(0,o.Ps)(d(),E),D=(0,o.Ps)(p(),T),U=(0,o.Ps)(f(),D),M=(0,o.Ps)(v(),D),_=(0,o.Ps)(h(),D),B=(0,o.Ps)(m(),E),G=(0,o.Ps)(g(),M);function N(e){var n=(0,r.Z)({},C,e);return l.a(G,n)}var A=(0,o.Ps)(Z(),U);function O(e){var n=(0,r.Z)({},C,e);return l.a(A,n)}var j=(0,o.Ps)(y());function X(e){var n=(0,r.Z)({},C,e);return c.D(j,n)}var L=(0,o.Ps)(b());function z(e){var n=(0,r.Z)({},C,e);return c.D(L,n)}var F=(0,o.Ps)(x(),_);function H(e){var n=(0,r.Z)({},C,e);return c.D(F,n)}var W=(0,o.Ps)(w(),T);function $(e){var n=(0,r.Z)({},C,e);return c.D(W,n)}var V=(0,o.Ps)(k(),U);function K(e){var n=(0,r.Z)({},C,e);return c.D(V,n)}var q=(0,o.Ps)(P(),T);function Y(e){var n=(0,r.Z)({},C,e);return c.D(q,n)}var Q=(0,o.Ps)(I(),T);function J(e){var n=(0,r.Z)({},C,e);return c.D(Q,n)}var ee=(0,o.Ps)(S(),B);function ne(e){var n=(0,r.Z)({},C,e);return c.D(ee,n)}},26082:function(e,n,t){"use strict";var r=t(5152),i=t.n(r);n.Z=i()((function(){return Promise.all([t.e(4885),t.e(8966),t.e(5499),t.e(6063),t.e(1432)]).then(t.bind(t,87068)).then((function(e){return e.EditReplTemplate}))}),{loadableGenerated:{webpack:function(){return[87068]}}})},54677:function(e,n,t){"use strict";t.d(n,{JU:function(){return p},qC:function(){return d}});var r=t(26042),i=t(7297),o=t(31230),a=t(37887),l=t(73359);function c(){var e=(0,i.Z)(["\n  query WorkspaceHeaderUsersOnline($ids: [Int!]!) {\n    currentUser {\n      id\n    }\n    usersByIds(ids: $ids) {\n      id\n      username\n      image\n    }\n  }\n"]);return c=function(){return e},e}var u={},s=(0,o.Ps)(c());function d(e){var n=(0,r.Z)({},u,e);return a.a(s,n)}function p(e){var n=(0,r.Z)({},u,e);return l.t(s,n)}},43832:function(e,n,t){"use strict";t.d(n,{I$:function(){return y},Du:function(){return b},Cd:function(){return w}});var r=t(26042),i=t(7297),o=t(31230),a=t(9523),l=t(52008),c=t(65711),u=t(6695);function s(){var e=(0,i.Z)(["\n  fragment ReplEnvironmentHeaderLeftCurrentUser on CurrentUser {\n    id\n    isFirewallMode\n  }\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  fragment ReplEnvironmentHeaderLeftRepl on Repl {\n    id\n    isAlwaysOn\n    slug\n    url\n    ...WorkspaceHeaderReplMetadataRepl\n  }\n  ","\n"]);return d=function(){return e},e}var p=(0,o.Ps)(s()),f=(0,o.Ps)(d(),u.s),v=t(37887);function h(){var e=(0,i.Z)(['\n  fragment ReplEnvironment2CurrentUser on CurrentUser {\n    id\n    image\n    isFirewallMode\n    ...CrosisContextCurrentUser\n    ...ReplEnvironment2CurrentUserLayoutFlags\n    editorPreferences {\n      ...CurrentUserPreferences\n    }\n    flagFiletreeSearch: gate(feature: "flag-filetree-search")\n    ...ReplEnvironmentHeaderLeftCurrentUser\n  }\n  ',"\n  ","\n  ","\n  ","\n"]);return h=function(){return e},e}function m(){var e=(0,i.Z)(["\n  fragment ReplEnvironment2Repl on Repl {\n    id\n    title\n    layoutState\n    description\n    multiplayers {\n      id\n    }\n    currentUserPermissions {\n      containerWrite\n    }\n    origin {\n      id\n    }\n    language\n    config {\n      isVnc\n      isServer\n    }\n    lesson {\n      id\n    }\n    ...CrosisContextRepl\n    ...ReplEnvironmentHeaderLeftRepl\n  }\n  ","\n  ","\n"]);return m=function(){return e},e}function g(){var e=(0,i.Z)(["\n  query ReplEnvironment2($url: String!) {\n    repl(url: $url) {\n      ... on Repl {\n        id\n        ...CrosisContextRepl\n        ...ReplEnvironment2Repl\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        replId\n        isOwner\n      }\n    }\n    currentUser {\n      id\n      ...ReplEnvironment2CurrentUser\n    }\n  }\n  ","\n  ","\n  ","\n"]);return g=function(){return e},e}var Z={},y=(0,o.Ps)(h(),a.D,l.SL,c.wO,p),b=(0,o.Ps)(m(),a.C,f),x=(0,o.Ps)(g(),a.C,b,y);function w(e){var n=(0,r.Z)({},Z,e);return v.a(x,n)}},28038:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return Qp}});var r=t(47568),i=t(10253),o=t(34051),a=t.n(o),l=t(35944),c=t(67294),u=t(91131),s=t(11163),d=t(22862),p=t(70338),f=t(67903),v=t(15519),h=t(43832),m=t(15085),g=t(61756),Z=t(1879),y=t(67629),b=t(69346),x=t(1144),w=t(81255),k=t(88075);var P=function(e){return(0,l.tZ)(Z.Z,{preventClose:!0,isOpen:!0,onRequestClose:e.onCancel,children:(0,l.BX)(b.Z,{css:[w.l0.colWithGap(24)],children:[(0,l.tZ)(x.h,{variant:"headerDefault",level:2,css:w.l0.maxWidth("100%"),children:"Replit needs your permission to enable notifications."}),(0,l.tZ)(x.x,{multiline:!0,children:"Never miss messages from your collaborators if you\u2019re in another tab or window."}),(0,l.BX)(b.Z,{css:[w.l0.rowWithGap(12),w.l0.justify.end],children:[(0,l.tZ)(g.ZP,{onClick:e.onCancel,text:"Deny",iconLeft:(0,l.tZ)(y.Z,{})}),(0,l.tZ)(g.ZP,{text:"Allow notifications",colorway:"positive",iconLeft:(0,l.tZ)(k.Z,{}),onClick:e.onConfirm})]})]})})},I=t(92098),S=t(86292),C=t(90317),R=t(26042),E=t(7297),T=t(31230),D=t(50319);function U(){var e=(0,E.Z)(["\n  fragment MarkLessonCompleteLesson on UserCourseLesson {\n    id\n    lessonSlug\n    timeCompleted\n    course {\n      id\n      courseSlug\n    }\n  }\n"]);return U=function(){return e},e}function M(){var e=(0,E.Z)(["\n  mutation MarkLessonAsComplete($input: CompleteUserCourseLessonInput!) {\n    completeUserCourseLesson(input: $input) {\n      ... on UpdatedUserCourseLesson {\n        __typename\n        userCourseLesson {\n          id\n          timeCompleted\n        }\n      }\n      ... on NotFoundError {\n        __typename\n        message\n      }\n      ... on UnauthorizedError {\n        __typename\n        message\n      }\n      ... on UserError {\n        __typename\n        message\n      }\n    }\n  }\n"]);return M=function(){return e},e}var _={},B=(0,T.Ps)(U()),G=(0,T.Ps)(M());var N=t(6695),A=t(37887);function O(){var e=(0,E.Z)(["\n  fragment ReplEnvironmentHeaderCurrentUser on CurrentUser {\n    id\n    isSubscribed\n    isFirewallMode\n    isExplorer: hasRole(role: EXPLORER)\n  }\n"]);return O=function(){return e},e}function j(){var e=(0,E.Z)(["\n  fragment ReplEnvironmentHeaderRepl on Repl {\n    id\n    slug\n    url\n    isAlwaysOn\n    isOwner\n    isPrivate\n    workspaceCta\n    rootOriginReplUrl\n    lang {\n      id\n      engine\n    }\n    origin {\n      id\n    }\n    currentUserPermissions {\n      editMultiplayers\n      inviteGuests\n      containerWrite\n    }\n    owner {\n      ... on Team {\n        id\n        capabilities {\n          isEducationPlan\n        }\n      }\n      ... on User {\n        id\n      }\n    }\n    template {\n      id\n      isGroupProject\n    }\n    lesson {\n      id\n      ...MarkLessonCompleteLesson\n    }\n  }\n  ","\n"]);return j=function(){return e},e}function X(){var e=(0,E.Z)(["\n  query ReplEnvironmentHeader($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        ...ReplEnvironmentHeaderRepl\n        ...WorkspaceHeaderReplMetadataRepl\n      }\n    }\n    currentUser {\n      id\n      ...ReplEnvironmentHeaderCurrentUser\n    }\n  }\n  ","\n  ","\n  ","\n"]);return X=function(){return e},e}var L={},z=(0,T.Ps)(O()),F=(0,T.Ps)(j(),B),H=(0,T.Ps)(X(),F,N.s,z);var W=t(26473),$=t(70804),V=t(99408),K=t(58502),q=t(83475),Y=t(60536),Q=t.n(Y),J=t(54677),ee=t(57263),ne=t(69396),te=t(57731),re=t(66060);function ie(e){var n=function(){e.canClick&&e.onClick&&e.onClick({username:e.username,id:e.id})};return(0,l.tZ)(re.ZP,{placement:"bottom",tooltip:"Observe ".concat(e.username),children:function(t,r){return(0,l.tZ)(b.Z,(0,ne.Z)((0,R.Z)({},t),{innerRef:r,onClick:n,children:(0,l.tZ)(te.Z,{size:e.size||35,src:e.image,alt:e.username,css:[e.canClick&&w.l0.cursor.pointer,{transition:"all 0.2s ease",border:"2px solid "+e.color,"&:hover":{filter:"brightness(95%)",boxShadow:w.TV.shadow1}}]})}))}})}var oe=t(94184),ae=t.n(oe),le=t(77365);function ce(){var e=(0,E.Z)(["\n  fragment UserListModalUser on User {\n    id\n    username\n    image\n  }\n"]);return ce=function(){return e},e}function ue(){var e=(0,E.Z)(["\n  fragment UserListModalReplPermission on ReplPermission {\n    id\n    type\n    user {\n      id\n      ...UserListModalUser\n    }\n  }\n  ","\n"]);return ue=function(){return e},e}function se(){var e=(0,E.Z)(["\n  query UserListModal($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        user {\n          id\n          ...UserListModalUser\n        }\n        permissions {\n          id\n          ...UserListModalReplPermission\n        }\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        replId\n      }\n    }\n    currentUser {\n      id\n    }\n  }\n  ","\n  ","\n"]);return se=function(){return e},e}var de={},pe=(0,T.Ps)(ce()),fe=(0,T.Ps)(ue(),pe),ve=(0,T.Ps)(se(),pe,fe);var he=t(63377);function me(){var e=(0,V.Z)(),n=e.session,t=e.presence;return c.useCallback((function(e){var r=e.username,i=e.id,o=t.getFollowedUser();if((null===o||void 0===o?void 0:o.username)!==r){t.followUser(r);var a=t.getActiveFileForUser(i),l=n.getActiveFile();a&&a!==l&&n.openFile(a)}else t.unfollowUser()}),[n,t])}var ge=t(34140);function Ze(e){var n=e.hideModal,t=e.onUserClick,r=e.isOpen,i=(0,he.Z)(),o=(0,V.Z)().presence,a=(0,K.Z)({presence:o});return(0,l.tZ)(m.u_,{isOpen:r,onRequestClose:n,children:(0,l.tZ)(be,{replId:i,onUserClick:t,activeUsers:a,hideModal:n})})}function ye(e,n){return n.some((function(n){return n.id===e}))}function be(e){var n=e.replId,t=e.activeUsers,r=e.onUserClick,i=e.hideModal,o=function(e){var n=(0,R.Z)({},de,e);return A.a(ve,n)}({variables:{replId:n}}),a=o.data,c=o.loading,u=o.error;if(c)return(0,l.tZ)(m.G7,{css:[m.l0.flex.row,m.l0.justify.center,m.l0.p(32)],children:(0,l.tZ)(le.Z,{})});if(u)return(0,l.tZ)("div",{children:u.message});if("Repl"===(null===a||void 0===a?void 0:a.repl.__typename)){var s=a.repl,d=a.currentUser,p=s.user,f=p&&t.find((function(e){return e.username===p.username})),v=s.permissions.filter((function(e){var n=e.user;return n&&ye(n.id,t)})),h=s.permissions.filter((function(e){var n=e.user;return n&&!ye(n.id,t)}));return(0,l.BX)(m.G7,{css:[m.l0.colWithGap(24)],children:[(0,l.tZ)(m.h4,{level:1,variant:"headerDefault",children:"Multiplayers"}),(0,l.tZ)(m.xv,{multiline:!0,children:"Users can interact with this Repl in real time."}),(0,l.tZ)(m.G7,{css:[m.l0.maxHeight(330),{overflowY:"auto"}],children:(0,l.BX)(m.G7,{children:[p?(0,l.tZ)(we,(0,ne.Z)((0,R.Z)({},p),{onClick:r,isOnline:Boolean(f),color:f?f.color:"transparent",isOwner:!0,hideModal:i,canClickAvatar:Boolean(f)&&p.id!==(null===d||void 0===d?void 0:d.id),type:C.aQ.Rw})):null,v.map((function(e){var n=e.type,o=e.user;if(!o)throw new Error("Expected user");var a=t.find((function(e){return e.username===o.username}));if(!a)throw new Error("Expected user online");var c=o.id!==(null===d||void 0===d?void 0:d.id);return(0,l.tZ)(we,(0,ne.Z)((0,R.Z)({onClick:r,type:n},o),{isOnline:!0,canClickAvatar:c,color:a.color,hideModal:i,isOwner:!1}),"chat-user-list-".concat(o.username))})),h.map((function(e){var n=e.type,t=e.user;if(!t)throw new Error("Expected user");return(0,l.tZ)(we,(0,ne.Z)((0,R.Z)({onClick:r,type:n},t),{canClickAvatar:!1,isOnline:!1,color:"transparent",hideModal:i,isOwner:!1}),"chat-user-list-".concat(t.username))}))]})})]})}return"ReplRedirect"===(null===a||void 0===a?void 0:a.repl.__typename)?(0,l.BX)("div",{children:["This Repl has moved to"," ",(0,l.tZ)("a",{href:a.repl.replUrl,children:a.repl.replUrl})]}):"SubscriptionExpiredError"===(null===a||void 0===a?void 0:a.repl.__typename)?(0,l.BX)("div",{children:["Your subscription has expired.",(0,l.tZ)("a",{href:"/pricing",children:"Upgrade here"})]}):null}var xe={r:"read only",rw:"can edit"};function we(e){var n=e.type,t=e.id,r=e.username,i=e.image,o=e.isOnline,a=e.isOwner,c=e.color,u=e.onClick,s=e.hideModal,d=e.canClickAvatar,p=me(),f=function(){d&&(p({username:r,id:t}),s())};return(0,l.BX)("div",{className:Q().dynamic([["8abf4fce485dcead",[d?"pointer":"auto",c]]])+" "+(ae()("user-list-item-wrapper",{online:o})||""),children:[(0,l.BX)("div",{role:"button",onClick:f,onKeyDown:f,tabIndex:0,className:Q().dynamic([["8abf4fce485dcead",[d?"pointer":"auto",c]]])+" image",children:[(0,l.tZ)("img",{src:i,alt:"",className:Q().dynamic([["8abf4fce485dcead",[d?"pointer":"auto",c]]])+" "+((o?"":"offline")||"")}),(0,l.BX)(ge.T,{children:["Observe ",r]})]}),(0,l.BX)("div",{className:Q().dynamic([["8abf4fce485dcead",[d?"pointer":"auto",c]]])+" info",children:[(0,l.BX)("div",{className:Q().dynamic([["8abf4fce485dcead",[d?"pointer":"auto",c]]]),children:[(0,l.BX)("a",{href:"/@".concat(r),target:"_blank",onClick:u,className:Q().dynamic([["8abf4fce485dcead",[d?"pointer":"auto",c]]]),children:["@",r]}),!o&&" (offline)"]}),(0,l.tZ)("div",{className:Q().dynamic([["8abf4fce485dcead",[d?"pointer":"auto",c]]]),children:a?"owner":xe[n]})]}),(0,l.tZ)(Q(),{id:"8abf4fce485dcead",dynamic:[d?"pointer":"auto",c],children:".user-list-item-wrapper.__jsx-style-dynamic-selector{padding:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-ordinal-group:2;-webkit-order:1;-moz-box-ordinal-group:2;-ms-flex-order:1;order:1}.image.__jsx-style-dynamic-selector{-webkit-box-flex:0;-webkit-flex:0 0 auto;-moz-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;cursor:".concat(d?"pointer":"auto","}img.__jsx-style-dynamic-selector{width:40px;height:40px;-webkit-border-radius:20px;-moz-border-radius:20px;border-radius:20px;border:3px solid ").concat(c,";background:white;-o-object-fit:cover;object-fit:cover}.info.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-left:var(--space-8)}img.offline.__jsx-style-dynamic-selector{-webkit-filter:grayscale(100%);filter:grayscale(100%)}.user-list-item-wrapper.online.__jsx-style-dynamic-selector{-webkit-box-ordinal-group:1;-webkit-order:0;-moz-box-ordinal-group:1;-ms-flex-order:0;order:0}")})]})}function ke(e){var n=(0,i.Z)(c.useState(!1),2),t=n[0],r=n[1],o=(0,he.Z)(),a=(0,J.qC)({variables:{ids:e.users.map((function(e){return e.id}))},ssr:!1,skip:!e.users.length}),u=a.data,s=a.loading,d=a.error,p=e.users.reduce((function(e,n){return e[n.id]=n.color,e}),{});if(s)return null;if(d)return null;if(!(null===u||void 0===u?void 0:u.currentUser))return null;var f=u.usersByIds,v=u.currentUser,h=f.filter((function(e){return e.id!==v.id})),g=h.length-3;return 0===h.length?null:(0,l.BX)(m.G7,{tag:"ul",className:"multiplayer-users-container",css:[m.l0.px(8),m.l0.rowWithGap(4),m.l0.align.center],"aria-live":"polite","aria-relevant":"additions removals","aria-label":"online users",children:[g>0?(0,l.tZ)("li",{className:Q().dynamic([["9e6f75ce31331994",[ee.j.mobileMax+100]]]),children:(0,l.tZ)(m.zx,{onClick:function(){return r(!0)},text:"+ ".concat(g),css:{background:"none"}})}):null,h.slice(0,3).map((function(n){return(0,l.tZ)("li",{className:Q().dynamic([["9e6f75ce31331994",[ee.j.mobileMax+100]]]),children:(0,l.tZ)(ie,{id:n.id,username:n.username,image:n.image,color:p[n.id],onClick:e.onAvatarClick,canClick:!0})},n.id)})),(0,l.tZ)(Ze,{isOpen:t,hideModal:function(){return r(!1)},onUserClick:function(){(0,S.j)(S.U3.MP2_VISITED_PROFILE,{replId:o,from:"OnlineUsers"})}}),(0,l.tZ)(Q(),{id:"9e6f75ce31331994",dynamic:[ee.j.mobileMax+100],children:".multiplayer-users-container.__jsx-style-dynamic-selector li.__jsx-style-dynamic-selector{list-style-type:none}@media only screen and (max-width:".concat(ee.j.mobileMax+100,"px){.multiplayer-users-container.__jsx-style-dynamic-selector{display:none}}")})]})}var Pe=t(34193),Ie=t(29815);function Se(){var e=(0,E.Z)(["\n  fragment MultiplayerUser on User {\n    id\n    image\n    username\n  }\n"]);return Se=function(){return e},e}function Ce(){var e=(0,E.Z)(["\n  fragment MultiplayerReplPermission on ReplPermission {\n    id\n    type\n    user {\n      id\n      ...MultiplayerUser\n    }\n  }\n  ","\n"]);return Ce=function(){return e},e}function Re(){var e=(0,E.Z)(["\n  query MultiplayerManageTeamMultiplayers($replId: String!) {\n    currentUser {\n      id\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isOwner\n        permissions {\n          id\n          ...MultiplayerReplPermission\n        }\n        currentUserPermissions {\n          editMultiplayers\n          inviteGuests\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n        owner {\n          ... on User {\n            id\n          }\n          ... on Team {\n            id\n            members {\n              id\n              permissions\n              user {\n                id\n                ...MultiplayerUser\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return Re=function(){return e},e}function Ee(){var e=(0,E.Z)(["\n  mutation MultiplayerManageTeamMultiplayersAddMultiplayerUser(\n    $replId: String!\n    $username: String!\n    $type: String!\n  ) {\n    addMultiplayerUser(replId: $replId, username: $username, type: $type) {\n      id\n      type\n      user {\n        id\n        ...MultiplayerUser\n      }\n      repl {\n        id\n        permissions {\n          id\n          ...MultiplayerReplPermission\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return Ee=function(){return e},e}function Te(){var e=(0,E.Z)(["\n  mutation MultiplayerManageTeamMultiplayersRemoveMultiplayerUser(\n    $replId: String!\n    $username: String!\n  ) {\n    removeMultiplayerUser(replId: $replId, username: $username) {\n      id\n      user {\n        id\n        ...MultiplayerUser\n      }\n      repl {\n        id\n        permissions {\n          id\n          ...MultiplayerReplPermission\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return Te=function(){return e},e}var De={},Ue=(0,T.Ps)(Se()),Me=(0,T.Ps)(Ce(),Ue),_e=(0,T.Ps)(Re(),Me,Ue);var Be=(0,T.Ps)(Ee(),Ue,Me);var Ge=(0,T.Ps)(Te(),Ue,Me);function Ne(){var e=(0,E.Z)(["\n  fragment MultiplayerControlUser on User {\n    id\n    image\n    username\n    url\n  }\n"]);return Ne=function(){return e},e}function Ae(){var e=(0,E.Z)(["\n  fragment MultiplayerControlReplPermission on ReplPermission {\n    id\n    type\n    user {\n      id\n      ...MultiplayerControlUser\n    }\n  }\n  ","\n"]);return Ae=function(){return e},e}function Oe(){var e=(0,E.Z)(["\n  fragment MultiplayerControlEmailInviteReplPermission on ReplPermission {\n    id\n    type\n    user {\n      id\n      image\n      username\n      url\n    }\n  }\n"]);return Oe=function(){return e},e}function je(){var e=(0,E.Z)(["\n  query MultiplayerControl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isOwner\n        permissions {\n          id\n          ...MultiplayerReplPermission\n        }\n        currentUserPermissions {\n          editMultiplayers\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n    currentUser {\n      id\n      isSubscribed\n    }\n  }\n  ","\n"]);return je=function(){return e},e}function Xe(){var e=(0,E.Z)(["\n  mutation MultiplayerControlAddMultiplayerUser(\n    $replId: String!\n    $username: String!\n    $type: String!\n  ) {\n    addMultiplayerUser(replId: $replId, username: $username, type: $type) {\n      id\n      type\n      user {\n        id\n        ...MultiplayerControlUser\n      }\n      repl {\n        id\n        permissions {\n          id\n          ...MultiplayerControlReplPermission\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return Xe=function(){return e},e}function Le(){var e=(0,E.Z)(["\n  mutation MultiplayerControlRemoveMultiplayerUser(\n    $replId: String!\n    $username: String!\n  ) {\n    removeMultiplayerUser(replId: $replId, username: $username) {\n      id\n      user {\n        id\n        ...MultiplayerControlUser\n      }\n      repl {\n        id\n        permissions {\n          id\n          ...MultiplayerControlReplPermission\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return Le=function(){return e},e}function ze(){var e=(0,E.Z)(["\n  mutation MultiplayerControlCreateMultiplayerInvite(\n    $replId: String!\n    $email: String!\n    $type: String!\n  ) {\n    createMultiplayerInvite2(replId: $replId, email: $email, type: $type) {\n      ... on MultiplayerInvite {\n        email\n        repl {\n          id\n          permissions {\n            id\n            ...MultiplayerReplPermission\n          }\n          multiplayerInvites {\n            email\n            type\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on ReplPermission {\n        id\n        ...MultiplayerControlEmailInviteReplPermission\n      }\n    }\n  }\n  ","\n  ","\n"]);return ze=function(){return e},e}function Fe(){var e=(0,E.Z)(["\n  mutation MultiplayerControlDeleteMultiplayerInvite(\n    $replId: String!\n    $email: String!\n  ) {\n    deleteMultiplayerInvite(replId: $replId, email: $email) {\n      ... on MultiplayerInvite {\n        email\n        type\n        repl {\n          id\n          permissions {\n            id\n            ...MultiplayerReplPermission\n          }\n          multiplayerInvites {\n            email\n            type\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return Fe=function(){return e},e}var He={},We=(0,T.Ps)(Ne()),$e=(0,T.Ps)(Ae(),We),Ve=(0,T.Ps)(Oe()),Ke=(0,T.Ps)(je(),Me);var qe=(0,T.Ps)(Xe(),We,$e);var Ye=(0,T.Ps)(Le(),We,$e);var Qe=(0,T.Ps)(ze(),Me,Ve);function Je(e){var n=(0,R.Z)({},He,e);return D.D(Qe,n)}var en=(0,T.Ps)(Fe(),Me);function nn(e){var n=(0,R.Z)({},He,e);return D.D(en,n)}var tn=t(19526),rn=t(18757),on=t(64184),an=t(82893),ln=t(28898),cn=t(93058),un=t(92002),sn=t(30019),dn=t(44781),pn=t(27206),fn=t(50009),vn=t(3218),hn=t(96594),mn=t(6951),gn=t(24351);function Zn(){var e=(0,E.Z)(["\n  fragment MultiplayerUsernameSearchUser on User {\n    id\n    firstName\n    lastName\n    username\n    image\n  }\n"]);return Zn=function(){return e},e}function yn(){var e=(0,E.Z)(["\n  query MultiplayerUsernameSearch($query: String!, $limit: Int) {\n    usernameSearch(query: $query, limit: $limit) {\n      id\n      ...MultiplayerUsernameSearchUser\n    }\n  }\n  ","\n"]);return yn=function(){return e},e}var bn={},xn=(0,T.Ps)(Zn()),wn=(0,T.Ps)(yn(),xn);function kn(e){var n=e.onSubmit,t=e.existingUsernames,r=e.isDisabled,o=e.onChange,a=e.placeholder,u=(0,i.Z)(c.useState(""),2),s=u[0],d=u[1],p=!!s.match(/.+@.+/),f=(0,gn.Z)(s.trim().replace(/^@/,""),250),v=function(e){var n=(0,R.Z)({},bn,e);return A.a(wn,n)}({skip:!f||p,variables:{query:f,limit:6}}),h=v.data,m=v.loading,g=v.error,Z=(0,cn.Z)().showError;c.useEffect((function(){g&&Z(g.message)}),[g,Z]);var y=null===h||void 0===h?void 0:h.usernameSearch;return(0,l.BX)("form",{onSubmit:function(e){e.preventDefault(),n(s),d("")},className:"jsx-d408485a86637a91",children:[(0,l.BX)("div",{className:"jsx-d408485a86637a91 form-content",children:[(0,l.tZ)(hn.ZP,{onChange:function(e){e&&d(e.username)},itemToString:function(e){return(null===e||void 0===e?void 0:e.username)||""},initialHighlightedIndex:0,defaultHighlightedIndex:0,children:function(e){var r=e.getInputProps,i=e.getItemProps,c=e.getMenuProps,u=e.isOpen,p=e.highlightedIndex;return(0,l.BX)("div",{className:"jsx-d408485a86637a91 dropdown",children:[(0,l.tZ)(pn.ZP,(0,R.Z)({},r({ref:null,value:s,onChange:function(e){d(e.currentTarget.value),null===o||void 0===o||o(e.currentTarget.value)},placeholder:null!==a&&void 0!==a?a:"Search by username or invite by email",autoComplete:"off",onKeyDown:function(e){"Enter"===e.key&&s.match(/.+@.+/)&&(n(s),d(""),e.currentTarget.blur())}}))),(0,l.BX)("div",(0,ne.Z)((0,R.Z)({},c()),{className:"jsx-d408485a86637a91",children:[u&&y&&y.length?(0,l.tZ)("div",{className:"jsx-d408485a86637a91 dropdown-menu",children:y.map((function(e,n){return(0,l.tZ)("div",(0,ne.Z)((0,R.Z)({},i({item:e,index:n})),{className:"jsx-d408485a86637a91 "+(ae()("result",{"is-active":p===n})||""),children:(0,l.BX)(tn.Ug,{align:"center",spacing:1,children:[(0,l.tZ)(ln.Z,{size:"s",url:e.image}),(0,l.tZ)("div",{className:"jsx-d408485a86637a91",children:e.username}),t.includes(e.username)?(0,l.tZ)("div",{className:"jsx-d408485a86637a91 check-icon",children:(0,l.tZ)(k.Z,{})}):null]})}),e.username)}))}):null,u&&m?(0,l.tZ)("div",{className:"jsx-d408485a86637a91 dropdown-menu is-loading",children:"loading..."}):null,u&&y&&0===y.length?(0,l.BX)("div",{className:"jsx-d408485a86637a91 dropdown-menu is-empty",children:['no results found for "',s,'"']}):null]}))]})}}),(0,l.tZ)("div",{className:"jsx-d408485a86637a91",children:(0,l.tZ)(mn.Z,{color:"primary",type:"submit",filled:!0,disabled:r||!s,children:"Invite"})})]}),(0,l.tZ)(Q(),{id:"d408485a86637a91",children:".form-content.jsx-d408485a86637a91{display:grid;position:relative;width:100%;grid-template-columns:1fr auto;grid-column-gap:var(--space-8);-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.dropdown.jsx-d408485a86637a91{position:relative;z-index:5}.dropdown-menu.jsx-d408485a86637a91{position:absolute;z-index:1;top:100%;left:0;width:100%;background-color:var(--background-default);border:1px solid var(--foreground-dimmest);border-top:0 none;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);max-height:300px;overflow:auto}.dropdown-menu.is-loading.jsx-d408485a86637a91,.dropdown-menu.is-empty.jsx-d408485a86637a91{color:var(--foreground-dimmer);padding:var(--space-8)}.dropdown.jsx-d408485a86637a91:focus-within .dropdown-menu.jsx-d408485a86637a91{border-color:var(--accent-primary-default)}.spacer.jsx-d408485a86637a91{width:var(--space-8);pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.result.jsx-d408485a86637a91{cursor:pointer;padding:var(--space-8)var(--space-16)}.result.jsx-d408485a86637a91:hover,.is-active.jsx-d408485a86637a91{background-color:var(--accent-primary-dimmer)}.check-icon.jsx-d408485a86637a91{margin-left:auto;color:var(--accent-positive-default)}"})]})}function Pn(e){var n=e.value,t=e.onButtonPress,r=e.statusText,i=void 0===r?"":r,o=e.image,a=e.filterValue,c=e.type,u=e.Icon;return(0,l.BX)("div",{className:"jsx-a16e88ad40d0e05c "+(ae()("multiplayer-item",{"is-editable":!!t})||""),children:[(0,l.BX)(tn.Ug,{align:"center",spacing:1,children:[(0,l.tZ)(ln.Z,{size:"s",url:null!==o&&void 0!==o?o:""}),(0,l.tZ)("div",{className:"jsx-a16e88ad40d0e05c label",children:a?(0,l.tZ)(fn.gr,{source:n,match:a}):"".concat(n," ").concat(i)}),!!t&&(0,l.tZ)(mn.Z,{className:"remove-button",border:!1,filled:!1,"aria-label":"Remove ".concat(c||"email invite"),role:"tooltip","data-microtip-position":"left",onClick:t,children:u&&(0,l.tZ)(u,{size:12,className:"jsx-a16e88ad40d0e05c"})})]}),(0,l.tZ)(Q(),{id:"a16e88ad40d0e05c",children:".multiplayer-item.jsx-a16e88ad40d0e05c{padding:var(--space-4)var(--space-16)}.multiplayer-item.is-editable.jsx-a16e88ad40d0e05c{padding-right:var(--space-8)}.multiplayer-item.is-editable.jsx-a16e88ad40d0e05c:hover{background-color:var(--background-root)}.label.jsx-a16e88ad40d0e05c{margin-right:auto}"})]})}var In=t(4158);function Sn(e){var n=e.email,t=e.onInvite,r=e.onCancel;return(0,l.BX)("div",{className:"jsx-1a6ae4ac10e8f1fa root",children:[(0,l.tZ)(sn.Z,{level:3,align:"center",children:"Are you sure?"}),(0,l.BX)(dn.Z,{align:"center",children:[(0,l.tZ)("p",{className:"jsx-1a6ae4ac10e8f1fa message",children:"Adding an external user as a guest to this repl will give the user read and write access. Please confirm the below email address before inviting the user as a guest."}),(0,l.tZ)("p",{className:"jsx-1a6ae4ac10e8f1fa email",children:n})]}),(0,l.BX)("div",{className:"jsx-1a6ae4ac10e8f1fa controls",children:[(0,l.tZ)(mn.Z,{onClick:r,children:"Cancel"}),(0,l.tZ)(mn.Z,{filled:!0,color:"primary",onClick:t,children:"Invite"})]}),(0,l.tZ)(Q(),{id:"1a6ae4ac10e8f1fa",children:".root.jsx-1a6ae4ac10e8f1fa{color:var(--foreground-default);padding:var(--space-24);display:grid;grid-gap:var(--space-24)}.controls.jsx-1a6ae4ac10e8f1fa{display:grid;grid-gap:var(--space-8);grid-auto-flow:column}.message.jsx-1a6ae4ac10e8f1fa{padding-bottom:var(--space-16)}"})]})}var Cn=t(75474),Rn=t(34847);function En(e){var n,t,r=e.replId,o=function(e){var n=(0,R.Z)({},De,e);return A.a(_e,n)}({variables:{replId:r}}),a=o.data,u=o.loading,s=(null===a||void 0===a||null===(n=a.currentUser)||void 0===n?void 0:n.id)||null,d=(0,cn.Z)(),p=d.showConfirm,f=d.showError,v=(0,i.Z)(c.useState(""),2),h=v[0],m=v[1],g=(0,i.Z)(function(e){var n=(0,R.Z)({},De,e);return D.D(Be,n)}({onError:function(e){return f(e.message)},onCompleted:function(e){var n=e.addMultiplayerUser.user;(0,S.j)(S.U3.MULTIPLAYER_INVITED,{replId:r,inviteMethod:"username"});var t=n?"@".concat(n.username):"Member";p("".concat(t," added"))}}),2),Z=g[0],b=g[1],x=(0,i.Z)(function(e){var n=(0,R.Z)({},De,e);return D.D(Ge,n)}({onError:function(e){return f(e.message)},onCompleted:function(e){var n=e.removeMultiplayerUser.user,t=n?"@".concat(n.username):"Member";p("".concat(t," removed"))}}),2),w=x[0],k=x[1],P="Repl"===(null===a||void 0===a?void 0:a.repl.__typename)?a.repl:null,I=(0,i.Z)(Je({onError:function(e){f(e.message)},update:function(e,n){var t,i=null===(t=n.data)||void 0===t?void 0:t.createMultiplayerInvite2;if(i)if("UserError"!==i.__typename){if("MultiplayerInvite"===i.__typename){var o=i.email;return(0,S.j)(S.U3.MULTIPLAYER_INVITED,{replId:r,inviteMethod:"email"}),void p("Invited ".concat(o," via email"))}if("ReplPermission"===i.__typename){e.modify({id:e.identify({__typename:"Repl",id:r}),fields:{permissions:function(n){var t=e.writeFragment({data:i,fragment:Ve});return(0,Ie.Z)(n).concat([t])}}});var a=i.user;(0,S.j)(S.U3.MULTIPLAYER_INVITED,{replId:r,inviteMethod:"email"});var l=a?"@".concat(a.username):"Member";p("".concat(l," added"))}}else f(i.message)}}),2),E=I[0],T=I[1],U=(0,i.Z)(nn({onError:function(e){return f(e.message)},onCompleted:function(e){if("UserError"!==e.deleteMultiplayerInvite.__typename){if("MultiplayerInvite"===e.deleteMultiplayerInvite.__typename){var n=e.deleteMultiplayerInvite.email;(0,S.j)(S.U3.MP2_REMOVED_EMAIL_INVITE,{replId:r,email:n}),p("Invite for ".concat(n," deleted"))}}else f(e.deleteMultiplayerInvite.message)}}),2),M=U[0],_=U[1];if(P&&!P.owner)throw new Error("Cannot manage members on anon repls");if((null===P||void 0===P?void 0:P.owner)&&"Team"!==(null===P||void 0===P?void 0:P.owner.__typename))throw new Error("Expect repl owned by a team");var B,G,N,O="Team"===(null===P||void 0===P||null===(t=P.owner)||void 0===t?void 0:t.__typename)?P.owner:null,j=null!==(B=null===P||void 0===P?void 0:P.permissions.reduce((function(e,n){return n.user?(0,Ie.Z)(e).concat([n.user.username]):e}),[]))&&void 0!==B?B:[],X=null===P||void 0===P?void 0:P.permissions.reduce((function(e,n){if(!n.user)return e;var t=n.user;return!h||vn.Z.filter(h,[t.username]).length>0?((null===O||void 0===O?void 0:O.members.some((function(e){var n;return(null===(n=e.user)||void 0===n?void 0:n.id)===t.id})))||e.users.push(t),e):e}),{users:[]}),L=null===P||void 0===P?void 0:P.multiplayerInvites.filter((function(e){return!h||vn.Z.filter(h,[e.email]).length>0})),z=null===O||void 0===O?void 0:O.members.reduce((function(e,n){if(!n.user)return e;var t=n.user;if(!(!h||vn.Z.filter(h,[t.username]).length>0))return e;var r=n.permissions&&n.permissions!==C.SV.Member,i=null===P||void 0===P?void 0:P.permissions.find((function(e){var n;return e.user&&(null===(n=e.user)||void 0===n?void 0:n.id)===t.id}));return r?e.teamAdmins.push(t):(null===i||void 0===i?void 0:i.type)?e.withPermission.push(t):e.withoutPermission.push(t),e}),{teamAdmins:[],withPermission:[],withoutPermission:[]}),F=null===z||void 0===z?void 0:z.teamAdmins.some((function(e){return e.id===s})),H=(null!==(G=null===X||void 0===X?void 0:X.users.length)&&void 0!==G?G:0)+(null!==(N=null===L||void 0===L?void 0:L.length)&&void 0!==N?N:0),W=null===P||void 0===P?void 0:P.currentUserPermissions.editMultiplayers,$=null===P||void 0===P?void 0:P.currentUserPermissions.inviteGuests,V=Boolean(z&&!z.teamAdmins.length&&!z.withPermission.length&&(!(null===X||void 0===X?void 0:X.users.length)&&!(null===L||void 0===L?void 0:L.length)&&$||!$&&!z.withoutPermission.length)),K=(0,i.Z)(c.useState(null),2),q=K[0],Y=K[1];return(0,l.BX)("div",{className:Q().dynamic([["dc131772cdbb2add",[ee.j.mobileMax]]])+" root",children:[(0,l.BX)(tn.gC,{spacing:2,align:"stretch",children:[(0,l.BX)(tn.Ug,{children:[(0,l.BX)(sn.Z,{level:5,foreground:u?3:1,children:[W?"Add or remove members from this repl":null,u?"Loading...":null]}),W&&$&&!u&&(0,l.tZ)("div",{"aria-label":" Add team members or invite external guests via email or username","data-microtip-position":"bottom","data-microtip-size":"medium",role:"tooltip",className:Q().dynamic([["dc131772cdbb2add",[ee.j.mobileMax]]])+" information-icon-container",children:(0,l.tZ)(In.Z,{})})]}),$?(0,l.tZ)(kn,{existingUsernames:j,onSubmit:function(e){!!e.match(/.+@.+/)&&!T.loading?Y(e):b.loading||Z({variables:{username:e,replId:r,type:"rw"}}),m("")},placeholder:W?"Search for users or invite guests":"Filter users",isDisabled:u,onChange:function(e){return m(e)}}):(0,l.tZ)(pn.ZP,{disabled:u,value:h,onChange:function(e){return m(e.currentTarget.value)},placeholder:W?"Filter team members to add or remove":"Filter team members"}),(0,l.tZ)(Pe.Z,{isOpen:!!q,onRequestClose:function(){return Y(null)},children:q?(0,l.tZ)(Sn,{email:q,onInvite:function(){E({variables:{email:q,replId:r,type:"rw"}}),Y(null)},onCancel:function(){return Y(null)}}):null}),(0,l.BX)("div",{className:Q().dynamic([["dc131772cdbb2add",[ee.j.mobileMax]]])+" "+(ae()("multiplayers-list",{"is-empty":V})||""),children:[(null===z||void 0===z?void 0:z.withPermission.length)?(0,l.tZ)("div",{className:Q().dynamic([["dc131772cdbb2add",[ee.j.mobileMax]]])+" list-heading",children:(0,l.BX)(tn.Ug,{align:"center",spacing:1,children:[(0,l.tZ)(rn.Z,{size:12}),(0,l.BX)(dn.Z,{foreground:2,size:"small",children:[null===z||void 0===z?void 0:z.withPermission.length," member",1===(null===z||void 0===z?void 0:z.withPermission.length)?"":"s"," with access"]})]})}):null,null===z||void 0===z?void 0:z.withPermission.map((function(e){return(0,l.tZ)(Pn,{value:e.username,image:e.image,statusText:"(can edit)",type:"member",onButtonPress:F?function(){k.loading||w({variables:{replId:r,username:e.username}})}:void 0,Icon:y.Z},e.id)})),!!H&&(0,l.tZ)("div",{className:Q().dynamic([["dc131772cdbb2add",[ee.j.mobileMax]]])+" list-heading",children:(0,l.BX)(tn.Ug,{align:"center",spacing:1,children:[(0,l.tZ)(rn.Z,{size:12}),(0,l.BX)(dn.Z,{foreground:2,size:"small",children:[(0,Rn.Z)("guest",H,!0),"with access"]})]})}),null===X||void 0===X?void 0:X.users.map((function(e){return(0,l.tZ)(Pn,{value:e.username,image:e.image,statusText:"(can edit)",type:"guest",onButtonPress:F?function(){k.loading||w({variables:{replId:r,username:e.username}})}:void 0,Icon:y.Z},e.id)})),null===L||void 0===L?void 0:L.map((function(e){return(0,l.tZ)(Pn,{value:e.email,statusText:"(pending)",onButtonPress:F?function(){_.loading||M({variables:{replId:r,email:e.email}})}:void 0,Icon:y.Z},e.email)})),!$&&(null===z||void 0===z?void 0:z.withoutPermission.length)?(0,l.tZ)("div",{className:Q().dynamic([["dc131772cdbb2add",[ee.j.mobileMax]]])+" list-heading",children:(0,l.BX)(tn.Ug,{align:"center",spacing:1,children:[(0,l.tZ)(on.Z,{size:12}),(0,l.BX)(dn.Z,{foreground:2,size:"small",children:[(0,Rn.Z)("member",null===z||void 0===z?void 0:z.withoutPermission.length,!0),"without access"]})]})}):null,!$&&(null===z||void 0===z?void 0:z.withoutPermission.map((function(e){return(0,l.tZ)(Pn,{value:e.username,image:e.image,type:"member",onButtonPress:W?function(){b.loading||Z({variables:{replId:r,username:e.username,type:"rw"}})}:void 0,Icon:un.Z},e.id)}))),(null===z||void 0===z?void 0:z.teamAdmins.length)?(0,l.tZ)("div",{className:Q().dynamic([["dc131772cdbb2add",[ee.j.mobileMax]]])+" list-heading",children:(0,l.BX)(tn.Ug,{align:"center",spacing:1,children:[(0,l.tZ)(an.Z,{size:12}),(0,l.tZ)(dn.Z,{foreground:2,size:"small",children:"Team admins cannot be removed from repls"})]})}):null,null===z||void 0===z?void 0:z.teamAdmins.map((function(e){return(0,l.tZ)("div",{className:Q().dynamic([["dc131772cdbb2add",[ee.j.mobileMax]]])+" "+(ae()("multiplayer-item",{"is-editable":W})||""),children:(0,l.BX)(tn.Ug,{align:"center",spacing:1,children:[(0,l.tZ)(ln.Z,{size:"s",url:e.image}),(0,l.tZ)("div",{className:Q().dynamic([["dc131772cdbb2add",[ee.j.mobileMax]]])+" label",children:h?(0,l.tZ)(fn.gr,{source:e.username,match:h}):e.username})]})},e.id)})),V?(0,l.BX)(dn.Z,{foreground:2,align:"center",children:['No members matching "',h,'" found']}):null]}),W||u?null:(0,l.tZ)(dn.Z,{foreground:2,size:"small",children:"Only admins can add and remove members to multiplayer"}),W&&$&&(0,l.tZ)(Cn.Z,{replId:r})]}),(0,l.tZ)(Q(),{id:"dc131772cdbb2add",dynamic:[ee.j.mobileMax],children:".root.__jsx-style-dynamic-selector{padding:var(--space-16);color:var(--foreground-default)}.multiplayers-list.__jsx-style-dynamic-selector{background-color:var(--background-root);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);height:300px;overflow-y:auto}.multiplayers-list.is-empty.__jsx-style-dynamic-selector{display:grid;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:var(--space-16);word-break:break-word}.multiplayer-item.__jsx-style-dynamic-selector{padding:var(--space-4)var(--space-16)}.multiplayer-item.is-editable.__jsx-style-dynamic-selector{padding-right:var(--space-8)}.multiplayer-item.is-editable.__jsx-style-dynamic-selector:hover{background-color:var(--background-root)}.list-heading.__jsx-style-dynamic-selector{padding:var(--space-16)var(--space-16)0}.label.__jsx-style-dynamic-selector{margin-right:auto}.information-icon-container.__jsx-style-dynamic-selector{margin-left:5px}@media screen and (min-width:".concat(ee.j.mobileMax,"px){.root.__jsx-style-dynamic-selector{padding:var(--space-48)}}")})]})}var Tn=t(15153),Dn=t(12215);function Un(e){var n=e.children,t=e.showPopover,r=(0,Dn.Z)("announcement","add-guest-new-user"),o=r.shouldDisplay,a=r.register,u=r.dismiss,s=(0,i.Z)(c.useState(!1),2),d=s[0],p=s[1],f=(0,i.Z)(c.useState(!1),2),v=f[0],h=f[1];c.useEffect((function(){t&&!v&&a()}),[v,a,t]);var m=o&&!v;return(0,l.BX)($.Z,{onClickOutside:function(){return h(!0)},isOpen:m,showArrow:!0,borderColor:"var(--accent-purple-default)",children:[n,(0,l.BX)(tn.gC,{spacing:2,align:"stretch",children:[(0,l.BX)(tn.Ug,{spacing:1,children:[(0,l.tZ)(Tn.Z,{}),(0,l.tZ)(sn.Z,{level:5,children:"Invite guests to your repl!"})]}),(0,l.BX)(dn.Z,{children:[" ","Add external guests to your repl for interviews and collaborative projects."," "]}),(0,l.tZ)(tn.Ug,{spacing:1,justify:"end",children:(0,l.tZ)(mn.Z,{loading:d,onClick:function(){p(!0),(0,S.j)(S.U3.ADD_GUEST_POPOVER_DISMISSED),u()},children:"Got it"})})]})]})}var Mn=t(78162);function _n(e){var n=e.replId,t=function(e){var n=(0,R.Z)({},He,e);return A.a(Ke,n)}({variables:{replId:n},pollInterval:8e3}),r=t.data,o=t.loading,a=(0,cn.Z)(),u=a.showConfirm,s=a.showError,d=(0,i.Z)(c.useState(!1),2),p=d[0],f=d[1],v=(0,i.Z)(function(e){var n=(0,R.Z)({},He,e);return D.D(qe,n)}({onCompleted:function(e){var t,r=null===(t=e.addMultiplayerUser.user)||void 0===t?void 0:t.username;r&&((0,S.j)(S.U3.MULTIPLAYER_INVITED,{replId:n,inviteMethod:"username"}),u("Added @".concat(r)))}}),2),h=v[0],m=v[1],g=(0,i.Z)(function(e){var n=(0,R.Z)({},He,e);return D.D(Ye,n)}({onError:function(e){return s(e.message)},onCompleted:function(e){var t,r=null===(t=e.removeMultiplayerUser.user)||void 0===t?void 0:t.username;r&&((0,S.j)(S.U3.MP2_REMOVED_USER_PERMISSION,{replId:n,username:r}),u("".concat(r," removed")))}}),2),Z=g[0],b=g[1],x=(0,i.Z)(Je({update:function(e,t){var r,i=null===(r=t.data)||void 0===r?void 0:r.createMultiplayerInvite2;if(i)if("UserError"!==i.__typename){if("MultiplayerInvite"===i.__typename){var o=i.email;return(0,S.j)(S.U3.MULTIPLAYER_INVITED,{replId:n,inviteMethod:"email"}),void u("Invited ".concat(o," via email"))}if("ReplPermission"===i.__typename){var a;e.modify({id:e.identify({__typename:"Repl",id:n}),fields:{permissions:function(n){var t=e.writeFragment({data:i,fragment:Ve});return(0,Ie.Z)(n).concat([t])}}});var l=null===(a=i.user)||void 0===a?void 0:a.username;if(!l)return;(0,S.j)(S.U3.MULTIPLAYER_INVITED,{replId:n,inviteMethod:"email"}),u("Invited @".concat(l))}}else s(i.message)}}),2),w=x[0],k=x[1],P=(0,i.Z)(nn({onError:function(e){return s(e.message)},onCompleted:function(e){if("UserError"!==e.deleteMultiplayerInvite.__typename){if("MultiplayerInvite"===e.deleteMultiplayerInvite.__typename){var t=e.deleteMultiplayerInvite.email;(0,S.j)(S.U3.MP2_REMOVED_EMAIL_INVITE,{replId:n,email:t}),u("invite for ".concat(t," deleted"))}}else s(e.deleteMultiplayerInvite.message)}}),2),I=P[0],E=P[1];c.useEffect((function(){var e=m.error||k.error;e&&(e.message.includes("reached the limit")?f(!0):s(e.message))}),[m.error,k.error,s]);var T="Repl"===(null===r||void 0===r?void 0:r.repl.__typename)?r.repl:null,U=null===r||void 0===r?void 0:r.currentUser,M=null===T||void 0===T?void 0:T.permissions.reduce((function(e,n){return n.user?(0,Ie.Z)(e).concat([n.user.username]):e}),[]),_=null===T||void 0===T?void 0:T.currentUserPermissions.editMultiplayers,B=Boolean(T&&!T.permissions.length&&!T.multiplayerInvites.length),G=(null===T||void 0===T?void 0:T.permissions)?T.permissions.length:null;return(0,l.BX)("div",{className:"jsx-7043475ed4bd7433 root",children:[(0,l.BX)(tn.gC,{spacing:2,align:"stretch",children:[_&&M&&T?(0,l.tZ)("div",{className:"jsx-7043475ed4bd7433",children:(0,l.tZ)(kn,{existingUsernames:M,onSubmit:function(e){!!!e.match(/.+@.+/)||k.loading?m.loading||h({variables:{username:e,replId:T.id,type:"rw"}}):w({variables:{email:e,replId:T.id,type:"rw"}})}})}):null,(0,l.tZ)("div",{className:"jsx-7043475ed4bd7433",children:(0,l.BX)(sn.Z,{level:5,foreground:o?3:1,children:[null!==G&&(null===U||void 0===U?void 0:U.isSubscribed)?"".concat((0,Rn.Z)("multiplayer",G,!0)):null,null===G||(null===U||void 0===U?void 0:U.isSubscribed)?null:"".concat(G,"/").concat(50," ").concat((0,Rn.Z)("multiplayer",G))," ",!o&&!(null===U||void 0===U?void 0:U.isSubscribed)&&(0,l.tZ)("a",{onClick:function(){return f(!0)},"aria-label":"Click to upgrade for unlimited invites","data-microtip-position":"top",role:"tooltip",className:"jsx-7043475ed4bd7433 info-tooltip",children:(0,l.tZ)(In.Z,{})}),o?"Loading...":null]})}),B?(0,l.tZ)("div",{className:"jsx-7043475ed4bd7433 empty-list",children:(0,l.BX)(tn.Ug,{align:"center",justify:"center",children:[(0,l.tZ)("div",{className:"jsx-7043475ed4bd7433",children:"No one is here"}),(0,l.tZ)("div",{className:"jsx-7043475ed4bd7433",children:(0,l.tZ)("img",{src:"/public/images/rainy-computer.png",alt:"raindrops falling onto an open laptop",className:"jsx-7043475ed4bd7433"})})]})}):(0,l.BX)("div",{className:"jsx-7043475ed4bd7433 multiplayers-list",children:[null===T||void 0===T?void 0:T.permissions.map((function(e){var t=e.user,r=e.type;return t?(0,l.BX)("div",{className:"jsx-7043475ed4bd7433 "+(ae()("multiplayer-item",{"is-editable":T.currentUserPermissions.editMultiplayers})||""),children:[(0,l.tZ)(ln.Z,{size:"s",url:t.image}),(0,l.BX)("div",{className:"jsx-7043475ed4bd7433 label",children:[t.username," ",r===C.aQ.Rw?" (can edit)":null]}),T.currentUserPermissions.editMultiplayers?(0,l.tZ)(mn.Z,{border:!1,filled:!1,"aria-label":"Remove member",role:"tooltip","data-microtip-position":"left",onClick:function(){b.loading||Z({variables:{replId:n,username:t.username}})},children:(0,l.tZ)(y.Z,{size:12})}):null]},t.id):null})),null===T||void 0===T?void 0:T.multiplayerInvites.map((function(e){return(0,l.BX)("div",{className:"jsx-7043475ed4bd7433 "+(ae()("multiplayer-item",{"is-editable":_})||""),children:[(0,l.tZ)(ln.Z,{size:"s"}),(0,l.BX)("div",{className:"jsx-7043475ed4bd7433 label",children:[e.email," (pending)"]}),_?(0,l.tZ)(mn.Z,{border:!1,filled:!1,"aria-label":"Remove email invite",role:"tooltip","data-microtip-position":"left",onClick:function(){E.loading||I({variables:{replId:n,email:e.email}})},children:(0,l.tZ)(y.Z,{size:12})}):null]},e.email)}))]})]}),(0,l.tZ)(Mn.Z,{isOpen:p,onClose:function(){return f(!1)},trackingInfo:{context:"workspace-multiplayer-header"}}),(0,l.tZ)(Q(),{id:"7043475ed4bd7433",children:".root.jsx-7043475ed4bd7433{color:var(--foreground-default)}.multiplayers-list.jsx-7043475ed4bd7433,.empty-list.jsx-7043475ed4bd7433{background-color:var(--background-root);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);height:200px}.multiplayers-list.jsx-7043475ed4bd7433{overflow-y:auto;padding:var(--space-8)0}.multiplayer-item.jsx-7043475ed4bd7433{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;padding:var(--space-4)var(--space-16);-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.multiplayer-item.is-editable.jsx-7043475ed4bd7433{padding-right:var(--space-8)}.multiplayer-item.is-editable.jsx-7043475ed4bd7433:hover{background-color:var(--background-root)}.label.jsx-7043475ed4bd7433{margin-right:auto;padding-left:var(--space-8)}.info-tooltip.jsx-7043475ed4bd7433{display:inline-block}.info-tooltip.jsx-7043475ed4bd7433,.info-tooltip.jsx-7043475ed4bd7433:hover,.info-tooltip.jsx-7043475ed4bd7433:focus{color:var(--foreground-default);border:none;outline:none}.empty-list.jsx-7043475ed4bd7433 img.jsx-7043475ed4bd7433{display:block;height:200px;opacity:60%}"})]})}function Bn(e){var n=e.replId;return(0,l.BX)("div",{className:Q().dynamic([["73cdb9c447ce4102",[ee.j.mobileMax]]]),children:[(0,l.BX)(tn.gC,{spacing:2,align:"stretch",children:[(0,l.tZ)(sn.Z,{level:4,children:"Invite"}),(0,l.tZ)(_n,{replId:n}),(0,l.tZ)(Cn.Z,{replId:n})]}),(0,l.tZ)(Q(),{id:"73cdb9c447ce4102",dynamic:[ee.j.mobileMax],children:"div.__jsx-style-dynamic-selector{padding:var(--space-16)}@media screen and (min-width:".concat(ee.j.mobileMax,"px){div.__jsx-style-dynamic-selector{padding:var(--space-32)}}")})]})}var Gn=t(18172),Nn=t(71171),An=t.n(Nn),On=t(68963),jn=t(95068),Xn=t(12727),Ln=t(88055),zn=t(8357),Fn=t(72676),Hn=t(57416),Wn=t(66421),$n=((0,u.cn)(null,(function(e,n,t){var r=e(Xn.Eh).find((function(e){return e.isDialog}));r?n(Ln.$,r.paneId):n(Vn,t)})),(0,u.cn)(null,(function(e,n,t){var r=e(Xn.Eh).find((function(e){return e.isDialog}));if(r){var i=e(r.data);i.type!==i.type?(n(Ln.$,r.paneId),n(Vn,t)):n(zn.v,{paneId:r.paneId,data:t.pane})}else n(Vn,t)}))),Vn=(0,u.cn)(null,(function(e,n,t){if(!e(Xn.Eh).find((function(e){return e.isDialog}))){var r=e(jn.g4),i=e(Xn.CK),o=An()(),a=i.x+i.width,l=i.y+i.height,c=t.maxWidth||a,u=t.maxHeight||l,s=Math.min(c,.8*a),d=Math.min(u,.8*l),p={width:s,height:d,x:a/2-s/2-i.x,y:l/2-d/2-i.y},f=(0,Gn.ZP)(r,(function(e){try{(0,On.m)(e,{id:An()(),isFloating:!0,panes:[o],rect:p})}catch(t){throw n(Wn.xm,{error:t}),t}}));n(Fn.iH,f),n(Hn.W1,o);var v=(0,Xn.z)(o),h=e(v);n(Hn.W1,o),n(v,(0,ne.Z)((0,R.Z)({},h),{isDialog:!0})),n(h.data,t.pane)}})),Kn=(0,u.cn)(null,(function(e,n){var t=e(Xn.Eh).find((function(e){return e.isDialog}));t&&n(Ln.$,t.paneId)})),qn=t(14924),Yn=t(35642),Qn=t(26082),Jn=t(17495),et=t(42325);function nt(e){var n,t=e.replId,r=e.onDone,o=e.isResubmit,a=e.lastUpdated,c=e.openIOtesterPane,u=(0,V.Z)().iotester,s=(0,et.CH)({variables:{replId:t}}),d=u.lastRunAt.getTime()>a,p=(0,Jn.xh)({variables:{replId:t}}).data,f="Repl"===(null===p||void 0===p?void 0:p.repl.__typename)?p.repl:null,v=(null===f||void 0===f?void 0:f.template)||null,h=(null===v||void 0===v?void 0:v.dueDate)||null,m=(new Date).toISOString(),Z=(0,cn.Z)(),y=Z.showConfirm,P=Z.showError,I=(0,i.Z)((0,Jn.xA)({variables:{replId:t},onCompleted:function(e){var n=e.submitRepl;"UserError"!==n.__typename?"Repl"===n.__typename&&(y("Repl submitted"),r()):P(n.message)},onError:function(e){P(e.message)}}),2),S=I[0],C=I[1],R=d&&u.lastRunDidPass;return"Repl"===(null===(n=s.data)||void 0===n?void 0:n.repl.__typename)&&s.data.repl.ioTests.length>0&&!R?(0,l.BX)(b.Z,{css:[w.l0.colWithGap(24)],children:[(0,l.tZ)(x.h,{variant:"headerDefault",level:2,children:d?"Fix test failures before submitting":"Run tests before submitting"}),(0,l.tZ)(x.x,{multiline:!0,children:d?"Input/Output tests did not pass.":"Input/Output tests have not been run since this Repl was last changed."}),(0,l.BX)(b.Z,{css:[w.l0.rowWithGap(12),w.l0.justify.end],children:[(0,l.tZ)(g.ZP,{disabled:C.loading,colorway:"primary",onClick:function(){c(),r()},text:"View tests"}),(0,l.tZ)(g.ZP,{disabled:C.loading,onClick:function(){return S()},iconLeft:(0,l.tZ)(k.Z,{}),text:"Submit anyway"})]})]}):(0,l.BX)(b.Z,{css:[w.l0.colWithGap(24)],children:[(0,l.tZ)(x.h,{variant:"headerDefault",level:2,children:o?" Resubmit Repl":"Submit Repl"}),(0,l.tZ)(x.x,{multiline:!0,children:o?"This will re-notify Team admins about your submission.":"This will submit your Repl for review and notify the Team's admins."}),h&&h<m&&(0,l.tZ)(x.x,{multiline:!0,css:[w.l0.color.accentNegativeStronger],children:"Note: Your submission is past the due date and will be marked late."}),(0,l.BX)(b.Z,{css:[w.l0.rowWithGap(12),w.l0.justify.end],children:[(0,l.tZ)(g.ZP,{disabled:C.loading,onClick:r,text:"Cancel"}),(0,l.tZ)(g.ZP,{colorway:"primary",disabled:C.loading,onClick:function(){return S()},iconLeft:(0,l.tZ)(k.Z,{}),text:o?"Submit again":"Submit"})]})]})}var tt=t(40381),rt=t(65456),it=t(48551),ot=t(37424),at=t(19923);function lt(){var e=(0,E.Z)(["\n  query UpdateModelSolutionModal($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n        origin {\n          id\n          ...TeamProfileRepl\n          template {\n            id\n            dueDate\n          }\n          unitTests {\n            tests {\n              id\n            }\n          }\n          ioTests {\n            id\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return lt=function(){return e},e}function ct(){var e=(0,E.Z)(["\n  mutation UpdateModelSolution($input: UpdateReplTemplateModelSolutionInput!) {\n    updateReplTemplateModelSolution(input: $input) {\n      ... on Repl {\n        id\n        ...TeamProfileRepl\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return ct=function(){return e},e}var ut={},st=(0,T.Ps)(lt(),at.vs);var dt=(0,T.Ps)(ct(),at.vs);var pt,ft=t(28479),vt=function(e){var n,t,r,o,a,u,s,d,p,f=e.replId,v=e.onDone,h=(0,cn.Z)(),g=h.showConfirm,Z=h.showError,y=function(e){var n=(0,R.Z)({},ut,e);return A.a(st,n)}({variables:{replId:f},onCompleted:function(e){var n,t,r=e.repl;"Repl"===r.__typename&&(null===(n=r.origin)||void 0===n||null===(t=n.template)||void 0===t?void 0:t.modelSolution)&&"ReplTemplateModelSolution"===r.origin.template.modelSolution.__typename&&(E(r.origin.template.modelSolution.visibleAfterSubmitting),M(r.origin.template.modelSolution.visibleAfterPassingTests),G(r.origin.template.modelSolution.visibleAfterDueDate))}}),b=y.data,x=y.loading,w=(0,i.Z)(function(e){var n=(0,R.Z)({},ut,e);return D.D(dt,n)}({onError:function(e){return Z(e)},onCompleted:function(){g("Updated solution"),v()}}),2),P=w[0],I=w[1],S=(0,i.Z)(c.useState(!1),2),C=S[0],E=S[1],T=(0,i.Z)(c.useState(!1),2),U=T[0],M=T[1],_=(0,i.Z)(c.useState(!1),2),B=_[0],G=_[1],N=(0,i.Z)(c.useState(),2),O=N[0],j=N[1],X=(0,ot.H)();if(c.useEffect((function(){var e="Students can ";if(C||B||U){e+="view the solution after";var n=[];C&&n.push("submitting their project"),U&&n.push("passing all tests"),B&&n.push("the due date has passed");for(var t=0;t<n.length;t++)t>0&&(e+=",",t===n.length-1&&(e+=" and")),e+=" "+n[t];e+="."}else e+="never view the solution.";j(e)}),[C,U,B]),x)return(0,l.tZ)(m.G7,{css:[m.l0.center],children:(0,l.tZ)(le.Z,{})});var L="Repl"===(null===b||void 0===b?void 0:b.repl.__typename)&&"Team"===(null===(n=b.repl.owner)||void 0===n?void 0:n.__typename)&&(null===(t=b.repl.owner)||void 0===t?void 0:t.id),z="Repl"===(null===b||void 0===b?void 0:b.repl.__typename)&&(null===(r=b.repl.origin)||void 0===r||null===(o=r.template)||void 0===o?void 0:o.modelSolution);if(!z)return null;var F=z.id,H="Repl"===(null===b||void 0===b?void 0:b.repl.__typename)&&((null===(a=b.repl.origin)||void 0===a?void 0:a.ioTests.length)||(null===(u=b.repl.origin)||void 0===u||null===(s=u.unitTests)||void 0===s?void 0:s.tests.length)),W="Repl"===(null===b||void 0===b?void 0:b.repl.__typename)&&(null===(d=b.repl.origin)||void 0===d||null===(p=d.template)||void 0===p?void 0:p.dueDate);return(0,l.tZ)("form",{onSubmit:function(e){e.preventDefault(),L&&F&&P({variables:{input:{teamId:L,solutionId:F,visibleAfterSubmitting:C,visibleAfterPassingTests:U,visibleAfterDueDate:B}}})},children:(0,l.BX)(m.G7,{css:[m.l0.colWithGap(24)],children:[(0,l.tZ)(m.h4,{level:1,variant:"headerDefault",children:"Update solution"}),(0,l.BX)(m.G7,{css:[m.l0.colWithGap(16)],children:[(0,l.BX)(m.G7,{css:[m.l0.rowWithGap(8)],children:[(0,l.tZ)(m.XZ,{id:X("availableAfterSubmitting"),checked:C,onChange:function(){return E(!C)}}),(0,l.tZ)("label",{htmlFor:X("availableAfterSubmitting"),children:(0,l.tZ)(m.xv,{children:"Available after submitting"})})]}),(0,l.BX)(m.G7,{css:[m.l0.rowWithGap(8)],children:[(0,l.tZ)(m.XZ,{id:X("availableAfterPassingTests"),checked:U,onChange:function(){return M(!U)}}),(0,l.tZ)("label",{htmlFor:X("availableAfterPassingTests"),children:(0,l.BX)(m.G7,{css:[m.l0.rowWithGap(4)],children:[(0,l.tZ)(m.xv,{children:"Available after passing tests"}),(0,l.BX)(m.xv,{children:["(",H?"".concat(H," ").concat((0,Rn.Z)("test",H)," defined"):"no tests exist yet",")"]})]})})]}),(0,l.BX)(m.G7,{css:[m.l0.rowWithGap(8),{verticalAlign:"baseline"}],children:[(0,l.tZ)(m.XZ,{id:X("availableAfterDueDate"),checked:B,onChange:function(){return G(!B)}}),(0,l.tZ)("label",{htmlFor:X("availableAfterDueDate"),children:(0,l.BX)(m.G7,{css:[m.l0.rowWithGap(4)],children:[(0,l.tZ)(m.xv,{children:"Available after due date"}),(0,l.BX)(m.xv,{css:{textDecoration:"italic"},children:["(",W?(0,ft.p)(W):"no due date set yet",")"]})]})})]})]}),(0,l.tZ)(m.E_,{text:"".concat(O),colorway:C||U||B?"positive":"negative"}),(0,l.tZ)(m.G7,{css:{alignItems:"end"},children:(0,l.tZ)(m.zx,{stretch:!1,colorway:"primary",text:"".concat(I.loading?"Saving...":"Save"),iconLeft:(0,l.tZ)(k.Z,{}),disabled:I.loading})})]})})},ht=(pt={},(0,qn.Z)(pt,C.Sy.PublishTemplate,"Publish project"),(0,qn.Z)(pt,C.Sy.EditTemplate,"Edit project"),(0,qn.Z)(pt,C.Sy.Submit,"Submit"),(0,qn.Z)(pt,C.Sy.Resubmit,"Resubmit"),(0,qn.Z)(pt,C.Sy.UpdateModelSolution,"Update solution"),pt);function mt(e){var n=e.cta,t=e.replId,r=e.isGroupProject,o=e.openIOtesterPane,a=(0,i.Z)(c.useState(null),2),u=a[0],s=a[1],d=function(){return s(null)},p=(0,tt.Z)(),f=(0,V.Z)().fs,v=(0,i.Z)(c.useState(0),2),h=v[0],m=v[1];c.useEffect((function(){if(p&&!(0,it.T3)(p)&&!(0,it.sL)(p)){var e=f.watchOtFile(p,{onChange:function(e){e.changeSource===rt.Fl.Local&&m(Date.now())}});return e}}),[p,f,m]);var y=Boolean(u&&[C.Sy.PublishTemplate,C.Sy.EditTemplate].includes(u));return c.useEffect((function(){n===C.Sy.ReviewSubmission&&(Yn.Z.get("annotations/educationModalDismissed")||(s(n),Yn.Z.set("annotations/educationModalDismissed",!0)))}),[n]),(0,l.BX)(l.HY,{children:[ht[n]&&(0,l.tZ)(g.ZP,{onClick:function(){return s(n)},text:ht[n],iconLeft:(0,l.tZ)(k.Z,{})}),(0,l.tZ)(Z.Z,{isOpen:u===C.Sy.Submit||u===C.Sy.Resubmit,onRequestClose:d,maxWidth:512,children:(0,l.tZ)(nt,{replId:t,onDone:d,isResubmit:u===C.Sy.Resubmit,lastUpdated:h,openIOtesterPane:o})}),(0,l.tZ)(Pe.Z,{preventClose:!0,isOpen:y,onRequestClose:d,width:r?"large":"medium",children:(0,l.tZ)(Qn.Z,{replId:t,onDone:d})}),(0,l.tZ)(Z.Z,{isOpen:u===C.Sy.UpdateModelSolution,onRequestClose:d,maxWidth:600,children:(0,l.tZ)(vt,{replId:t,onDone:d})})]})}var gt=t(87653),Zt=t(41238),yt={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:"K"},bt={type:"context",icon:(0,l.tZ)(Zt.Z,{}),label:"",description:"Type a command...",keyboardShortcut:yt},xt=(0,u.cn)(!1),wt=(0,u.cn)(null,(function(e,n,t){if(e(xt))return n(kt,null),void n(xt,!1);t&&n(kt,t),n(xt,!0)})),kt=(0,u.cn)(null),Pt=(0,u.cn)((function(e){var n=e(It);return{data:bt,commands:function(){return n}}})),It=(0,u.cn)([]),St=(0,u.cn)((function(e){var n=e(Pt),t=e(kt);return t?[n,t]:n})),Ct=t(70917),Rt=t(29163),Et=t(5257),Tt=t(99534),Dt=(0,Ct.iv)([m.l0.align.center,m.l0.p(4),m.l0.borderRadius(8),m.l0.rowWithGap(4),{fontSize:m.TV.fontSizeDefault,lineHeight:"normal"}]),Ut=(0,Ct.iv)({color:"inherit"});function Mt(e){var n,t=null===(n=e.highlightRanges)||void 0===n?void 0:n.filter((function(e){return e.to>0}));return(0,l.BX)(m.Tg,{elevated:!0,style:{color:e.active?m.TV.foregroundDefault:m.TV.foregroundDimmer},css:Dt,children:[e.icon,(0,l.tZ)(m.xv,{css:Ut,children:(null===t||void 0===t?void 0:t.length)?(0,l.tZ)(fn.xK,{style:{color:(e.active,m.TV.foregroundDimmest)},matchStyle:{fontWeight:m.TV.fontWeightBold,color:m.TV.foregroundDefault},source:e.label,matches:t.map((function(e){return{column:e.from,length:e.to-e.from}}))}):e.label})]})}var _t=m.KD.button;function Bt(e){var n=e.onClick,t=(0,Tt.Z)(e,["onClick"]);return(0,l.tZ)(_t,{css:[m.l0.reset.button],onClick:n,children:(0,l.tZ)(Mt,(0,R.Z)({},t))})}var Gt=t(33279),Nt=(0,Ct.iv)([m.l0.p(8),m.l0.rowWithGap(4),m.l0.align.center,m.l0.justify.spaceBetween]),At=(0,Ct.iv)([m.l0.rowWithGap(4),m.l0.align.center,m.l0.flex.growAndShrink(1)]);function Ot(e){var n=e.content||(0,l.BX)(l.HY,{children:[(Array.isArray(e.item)?e.item:[e.item]).map((function(e,n){return(0,l.tZ)(Mt,{icon:e.icon,label:e.label,active:e.active,highlightRanges:e.highlightRanges},e.label+n)})),e.description?(0,l.tZ)(m.xv,{variant:"small",color:e.active?"dimmer":"dimmest",css:[m.l0.flex.growAndShrink(1)],children:e.description}):null]});return(0,l.BX)(m.Tg,{elevated:e.active,css:Nt,children:[(0,l.tZ)(m.G7,{css:At,children:n}),e.keyboardShortcut?(0,l.tZ)(Gt.Z,{shortcut:e.keyboardShortcut}):null]})}var jt=b.K.div;function Xt(e){var n=e.isLoading||e.items.length?e.items.map((function(n,t){var r=n.data,i=r.label,o=r.icon,a=n.match.render,c=t===e.highlightedIndex,u=a&&"content"in a?a.content:void 0,s=a&&"ranges"in a?a.ranges:void 0;return(0,l.tZ)(jt,(0,ne.Z)((0,R.Z)({css:[{cursor:"pointer"}]},e.getItemProps({item:n,index:t})),{children:u?(0,l.tZ)(Ot,{active:c,description:r.description,keyboardShortcut:r.keyboardShortcut,content:u}):(0,l.tZ)(Ot,{active:c,description:r.description,keyboardShortcut:r.keyboardShortcut,item:{icon:o,label:i,active:c,highlightRanges:s}})}),(0,Et.k)(n))})):null;return(0,l.tZ)(jt,(0,ne.Z)((0,R.Z)({},e.getMenuProps()),{css:[w.l0.flex.growAndShrink(1),w.l0.overflow("auto")],children:n}))}var Lt=(0,c.memo)(Xt),zt=b.K.div,Ft=b.K.input,Ht=(0,Ct.iv)([w.l0.height("100%"),w.l0.flex.growAndShrink(1),w.l0.color.foregroundDefault,w.l0.display.block,w.l0.py(8),{fontSize:w.TV.fontSizeSubheadDefault,backgroundColor:"transparent",border:"0 none",outline:"0 none","::placeholder":{color:w.TV.foregroundDimmest},"&:hover::placeholder":{color:w.TV.foregroundDimmer},"&:focus::placeholder, &:hover:focus::placeholder":{color:w.TV.foregroundDimmest}}]);function Wt(e){var n=(0,Et.Z)({onSelect:e.onSelect,initialCommand:e.initialCommand}),t=n.combobox;return(0,l.BX)(m.Tg,{elevated:!0,className:e.className,css:[w.l0.flex.growAndShrink(1),w.l0.borderRadius(8),w.l0.overflow("hidden"),w.l0.maxHeight("70vh")],children:[(0,l.BX)(zt,(0,ne.Z)((0,R.Z)({},t.getComboboxProps()),{css:[w.l0.rowWithGap(4),w.l0.pl(4),w.l0.pr(8),w.l0.align.center],children:[(0,l.tZ)(b.Z,{css:[w.l0.py(8),w.l0.rowWithGap(4)],children:n.path.map((function(e,t){var r=e.data,i=r.label,o=r.icon,a=i+t,c=function(){n.resetToIndex({index:t,focus:!0})};return 0===t?(0,l.tZ)(Rt.Z,{alt:"Commands",onClick:c,children:n.isLoading?(0,l.tZ)(le.Z,{}):(0,l.tZ)(Zt.Z,{})},a):(0,l.tZ)(Bt,{label:i,icon:o,onClick:c},a)}))}),(0,l.tZ)(Ft,(0,R.Z)({css:[Ht]},t.getInputProps({value:n.inputValue,autoFocus:!0,ref:n.inputRef,onChange:function(e){return n.setInputValue(e.currentTarget.value)},onKeyDown:function(t){"Enter"===t.key&&0===n.items.length&&e.onSubmit?e.onSubmit(t.currentTarget.value):"ArrowLeft"!==t.key&&"ArrowRight"!==t.key?"Backspace"===t.key&&n.handleBackspace():n.handleLeftRightArrow(t.key)},placeholder:n.placeholder}))),n.keyboardShortcut?(0,l.tZ)(Gt.Z,{shortcut:n.keyboardShortcut}):null]})),(0,l.tZ)(Lt,{items:n.items,getMenuProps:t.getMenuProps,getItemProps:t.getItemProps,highlightedIndex:t.highlightedIndex,isLoading:n.isLoading})]})}var $t=t(58967),Vt=t(16965),Kt=t(21131),qt=t(88961),Yt=t(47875);function Qt(e,n){if("object"!==typeof n)return null;var t="string"===typeof n.action?n.action:null;if(!t)return null;if("layout"===e){if("split"===t){var r="string"===typeof n.pane?{type:n.pane}:{type:"commands",data:{autoFocus:!1}};return{action:n.action,placement:n.placement,pane:r}}if("reset"===t)return{action:"resetLayout"}}if("file"===e){var i="string"===typeof n.path?n.path:null;return i&&("openOrCreate"===n.action||"delete"===n.action)?{action:n.action,path:i}:null}if("tabs"===e){if("close"===t&&"string"===typeof n.type)return{action:"closeTab",type:n.type};if("open"===t)return{action:"openTab",pane:"string"===typeof n.type?{type:n.type}:{type:"commands",data:{autoFocus:!1}}}}return"codegen"===e&&"generate"===t&&"string"===typeof n.prompt?{action:"generate",prompt:n.prompt}:null}function Jt(e){if("object"!==typeof e)return{error:"not an object",actions:null};var n=e&&"result"in e?e.result:null;if(!Array.isArray(n))return{error:"no commands",actions:null};var t=[],r=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value;if("object"===typeof u){var s=!0,d=!1,p=void 0;try{for(var f,v=Object.entries(u)[Symbol.iterator]();!(s=(f=v.next()).done);s=!0){var h=(0,i.Z)(f.value,2),m=Qt(h[0],h[1]);m&&t.push(m)}}catch(g){d=!0,p=g}finally{try{s||null==v.return||v.return()}finally{if(d)throw p}}}}}catch(g){o=!0,a=g}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return 0===t.length?{error:"no commands",actions:null}:{error:null,actions:t}}var er=t(15961),nr=t(50146),tr=t(74275),rr=t(12771),ir=t(11731),or=t(54992),ar=(0,u.cn)(null,(function(e,n,t){var r=e((0,Xn.z)(t.fromPaneId));if(r.isDialog){n(Ln.$,r.paneId);var i=e(Xn.Eh).some((function(e){return"tile"===e.type}));n(er.g2,i?{pane:t.data,placement:"leftOf",makeActive:!0}:{pane:t.data,placement:"replace",makeActive:!0})}else n(zn.v,{paneId:t.fromPaneId,data:t.data,makeActive:!0})})),lr=(0,u.cn)(null,(function(e,n,t){var r=e(jn.g4),i=(0,rr._F)(r,"topLeft"),o=e(Xn.Eh).find((function(n){return e(n.data).type===t.pane.type}));if(o)n(ir.Oe,o.paneId);else if(i){var a=i.paneGroup.panes.find((function(n){var t=e((0,Xn.z)(n));if(t.isHidden)return!1;var r=e(t.data);return"filetree"!==r.type&&(!t.isCommited&&!(0,or.Zh)(r.type))}));a?n(zn.v,{paneId:a,data:t.pane,makeActive:!0}):("debugger"===t.pane.type&&n(er.gN,{pane:t.pane,edge:"left"}),n(ir.Et,{pane:t.pane,paneGroupPath:i.path,activate:!0,index:0}))}else n(er.g2,{pane:t.pane,placement:"leftOf",relativeTo:["tiling"],makeActive:!0})}));function cr(){return(0,u.b9)(lr)}var ur=t(90914),sr=t(17780),dr=t(39),pr=t(3032);function fr(e){return vr.apply(this,arguments)}function vr(){return(vr=(0,r.Z)(a().mark((function e(n){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(sr.l){e.next=2;break}throw new Error("Expected apolloClient");case 2:return e.next=4,sr.l.query({query:ur.R1,variables:{input:n}});case 4:if("GenerateCodeResult"===(t=e.sent.data).generateCode.__typename){e.next=7;break}throw new Error(t.generateCode.__typename);case 7:return e.abrupt("return",t.generateCode.code);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var hr=(0,u.cn)(null,(function(e,n){n(Fn.iH,{tiling:null,floating:[]})})),mr=((0,u.cn)(null,(function(e,n){var t=An()(),r=e(jn.g4);n(Fn.iH,(0,Gn.ZP)(r,(function(e){(0,On.m)(e,{id:An()(),relativeTo:["tiling"],placement:"replace",panes:[t]})})))})),(0,u.cn)(null,function(){var e=(0,r.Z)(a().mark((function e(n,t,r){var i,o,l,c,u,s,d,p;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=r.action,o=r.fs,e.t0=i.action,e.next="openOrCreate"===e.t0?4:"delete"===e.t0?16:"split"===e.t0?19:"openTab"===e.t0?22:"closeTab"===e.t0?24:"resetLayout"===e.t0?26:"clearLayout"===e.t0?28:"generate"===e.t0?30:41;break;case 4:return e.next=6,o.stat(i.path);case 6:if(e.sent.exists){e.next=14;break}return e.next=10,o.writeFile(i.path,"");case 10:return e.next=12,o.flush();case 12:return e.next=14,o.persist({skipDebounce:!0});case 14:return t(pr.U,{path:i.path}),e.abrupt("break",41);case 16:return e.next=18,o.deleteFile(i.path);case 18:case 40:return e.abrupt("break",41);case 19:return l=n(Hn.J1),t(er.g2,{pane:i.pane,placement:i.placement,makeActive:!1,relativeTo:l||["tiling"]}),e.abrupt("break",41);case 22:return t(lr,{pane:i.pane}),e.abrupt("break",41);case 24:return"*"===i.type?t(hr,{}):t(nr.AW,i.type),e.abrupt("break",41);case 26:return t(tr.B,{}),e.abrupt("break",41);case 28:return t(hr,{}),e.abrupt("break",41);case 30:if((c=n(jn.QP))||(u=n(Xn.Eh).find((function(e){return"codeEditor"===n(e.data).type})))&&"codeEditor"===(s=n(u.data)).type&&(c=s.data.path),c){e.next=34;break}return e.abrupt("return");case 34:return d=(0,dr.Sf)(c),e.next=37,fr({language:d,replId:r.replId,prompt:i.prompt});case 37:return p=e.sent,e.next=40,new Promise((function(e,n){if(c)var t=o.watchOtFile(c,{onError:function(t){n(t),e()},onReady:function(n){var r=n.writeOp,i=n.initialContent;r(i.length?[i.length,p]:[p]),t(),e()}});else n(new Error("Expected path"))}));case 41:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}())),gr="https://llmide.amasad.repl.co";function Zr(e){return yr.apply(this,arguments)}function yr(){return(yr=(0,r.Z)(a().mark((function e(n){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(gr+"/"+encodeURIComponent(n),{mode:"cors"});case 3:return t=e.sent,e.next=6,t.json();case 6:return r=e.sent,e.abrupt("return",{json:r,error:null});case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",{json:null,error:e.t0});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var br=(0,u.cn)(!1),xr=(0,u.cn)(!1);function wr(){var e=(0,u.Dv)(br);return(0,u.Dv)(xr)?(0,l.tZ)(kr,{}):e?(0,l.tZ)(m.Tg,{elevated:!0,css:[m.l0.coverContainer,m.l0.borderRadius(8),m.l0.center],children:(0,l.tZ)(le.Z,{})}):null}function kr(){var e=(0,u.b9)(xr);return(0,c.useEffect)((function(){var n=setTimeout((function(){e(!1)}),600);return function(){clearTimeout(n)}}),[e]),(0,l.tZ)(m.Tg,{elevated:!0,css:[m.l0.coverContainer,m.l0.borderRadius(8),m.l0.center],children:(0,l.BX)(m.G7,{css:[m.l0.rowWithGap(8),m.l0.align.center],children:[(0,l.tZ)(qt.Z,{color:m.TV.accentNegativeDefault}),(0,l.tZ)(m.xv,{children:"Something went wrong, try again"})]})})}function Pr(e){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{enabled:!0}).enabled,t=(0,u.b9)(It);(0,c.useEffect)((function(){if(n)return t((function(n){return(0,Ie.Z)(n).concat([e])})),function(){t((function(n){return n.filter((function(n){return n!==e}))}))}}),[t,e,n])}function Ir(){var e=(0,u.Dv)(xt),n=(0,u.b9)(wt),t=(0,u.Dv)(St),i=(0,V.Z)().session,o=(0,$t.Z)("commandBar").trackTimeToLoadFileStart;(0,c.useEffect)((function(){return i.onCommandBarToggled((function(t){t!==e&&n()}))}),[i,n,e]),(0,c.useEffect)((function(){i.setIsCommandBarOpen(e)}),[i,e]);var s=function(e){var n=e.isOpen,t=e.onDone,i=(0,V.Z)().fs,o=(0,Vt.Z)(t),l=(0,Yt.Q)("flagGhostrunner"),s=(0,he.Z)(),d=(0,Kt.Z)((function(){return(0,u.cn)(null,function(){var e=(0,r.Z)(a().mark((function e(n,t,r){var l,c,u,d,p,f,v,h;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n(Yt.H).flagGhostrunner){e.next=2;break}return e.abrupt("return");case 2:return t(br,!0),e.next=5,Zr(r);case 5:if(!(l=e.sent).error){e.next=10;break}return t(br,!1),t(xr,!0),e.abrupt("return");case 10:if((c=Jt(l.json)).actions){e.next=15;break}return t(br,!1),t(xr,!0),e.abrupt("return");case 15:u=!0,d=!1,p=void 0,e.prev=16,f=c.actions[Symbol.iterator]();case 18:if(u=(v=f.next()).done){e.next=25;break}return h=v.value,e.next=22,t(mr,{fs:i,action:h,replId:s});case 22:u=!0,e.next=18;break;case 25:e.next=31;break;case 27:e.prev=27,e.t0=e.catch(16),d=!0,p=e.t0;case 31:e.prev=31,e.prev=32,u||null==f.return||f.return();case 34:if(e.prev=34,!d){e.next=37;break}throw p;case 37:return e.finish(34);case 38:return e.finish(31);case 39:t(br,!1),o.current();case 41:case"end":return e.stop()}}),e,null,[[16,27,31,39],[32,,34,38]])})));return function(n,t,r){return e.apply(this,arguments)}}())}),[o,i,s]),p=(0,u.b9)(d);return(0,c.useEffect)((function(){if(l&&n&&window.webkitSpeechRecognition){var e=new window.webkitSpeechRecognition;e.onresult=function(e){var n=e.results[0][0].transcript;p(n)},e.start()}}),[p,l,n]),p}({onDone:n,isOpen:e});return(0,l.BX)(Pe.Z,{isOpen:e,onRequestClose:function(){n()},hideCloseButton:!0,children:[(0,l.tZ)(Wt,{onSubmit:s,onSelect:function(e){if("openFile"===e.data.type){var t=e.data.deeplink;o(t.path),i.openFile(t.path),i.updateDeeplink(t)}"action"===e.data.type&&e.data.run(),n()},initialCommand:t}),(0,l.tZ)(wr,{})]})}var Sr=(0,c.memo)(Ir),Cr=t(95596),Rr=t(39715),Er=t(95901),Tr=t(9117),Dr=t(43804),Ur=t(48869),Mr=t(6625),_r=t(88679),Br=t(48287),Gr=function(e){return e&&e.args?(e.args&&e.args.length>=3&&"sh"===e.args[0]&&"-c"===e.args[1]?e.args.slice(2):e.args).join(" "):""},Nr=function(e){var n=e.hideModal,t=(0,V.Z)(),o=t.dotReplit,u=t.session,s=(0,Mr.Z)(),d=(0,cn.Z)().showError,p=(0,i.Z)(c.useState(!1),2),f=p[0],v=p[1],h=(0,i.Z)(c.useState(""),2),Z=h[0],y=h[1],b=c.useCallback((function(){n(),u.openFile(_r.Z)}),[u,n]),x=c.useCallback((function(){return d("Failed to update run command, please try again or contact support")}),[d]),k=(0,i.Z)(c.useState(null),2),P=k[0],I=k[1];c.useEffect((function(){var e=function(){var e=(0,r.Z)(a().mark((function e(){var n,t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,o.getConfig();case 3:if(t=e.sent,s.current){e.next=6;break}return e.abrupt("return");case 6:t.errorMessage?I({error:t.error,errorMessage:t.errorMessage}):I(null),r=null===t||void 0===t||null===(n=t.config)||void 0===n?void 0:n.run,y(Gr(r));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[o,s]);var S=c.useCallback((0,r.Z)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=Z?(0,Br.KQ)(Z):(0,Br.xz)("run"),v(!0),e.next=5,o.updateDotReplit([t]);case 5:n(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),x();case 11:return e.prev=11,v(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])}))),[Z,x,o,n]);return(0,l.BX)(m.G7,{css:[w.l0.colWithGap(8),w.l0.p(2),f&&w.l0.cursor.progress],children:[(0,l.tZ)(m.h4,{level:1,variant:"text",css:[w.l0.fontWeight.normal,w.l0.color.foregroundDimmer],children:"Run Command"}),P?(0,l.tZ)(m.xv,{children:P.errorMessage}):(0,l.BX)(l.HY,{children:[(0,l.tZ)(m.II,{value:Z,onChange:function(e){return y(e.target.value)},spellCheck:!1}),(0,l.BX)(m.G7,{css:[w.l0.rowWithGap(12),w.l0.mt(12)],children:[(0,l.tZ)(g.ZP,{onClick:b,text:"Advanced"}),(0,l.tZ)(m.G7,{css:w.l0.flex.grow(1)}),(0,l.tZ)(g.ZP,{colorway:"blue",text:"Save",onClick:S})]})]})]})},Ar=t(42895),Or=t(98146),jr=t(42699),Xr=t(71255),Lr=t(85565),zr=t(80437),Fr=t(97808),Hr=t(41034),Wr=t(79500),$r=t(30880),Vr=t(57981),Kr="https://linkedin.com/sharing/share-offsite";var qr="https://www.facebook.com/dialog/share?display=page&app_id=1775481339348651";var Yr=function(e){var n=e.lessonSlug,t=e.courseSlug,r=(0,cn.Z)().showConfirm;if(!n||!t)return null;var i=(0,Fr.QW)(t),o=(0,Fr.qv)(t,n);if(!o)return null;var a=o.ordinalLabel,c=(0,Fr.tD)(i.socialSharingText,o),u="".concat(c," ").concat(i.sharableLink),s=(0,Xr.Z)({text:c,url:i.sharableLink}),d=function(e){var n=e.url;return"".concat(Kr,"?url=").concat(encodeURIComponent(n))}({url:i.sharableLink}),p=function(e){var n=e.url,t=e.hashtag,r=e.redirectBackTo,i=new URLSearchParams;i.append("href",n),r&&i.append("redirect_uri",r),t&&(t.startsWith("#")||(t="#".concat(t)),i.append("hashtag",t));var o=i.toString();return"".concat(qr,"&").concat(o)}({url:i.sharableLink,hashtag:i.socialHashtag}),f=[{url:s,icon:Lr.Z,base:Xr.c,cta:"Share on Twitter",color:zr.Z.brands.twitter},{url:d,icon:Vr.Z,base:Kr,cta:"",color:zr.Z.brands.linkedin},{url:p,icon:$r.Z,base:qr,cta:"",color:zr.Z.brands.facebook}];return(0,l.BX)(b.Z,{children:[(0,l.BX)(b.Z,{css:[w.l0.rowWithGap(16),w.l0.align.center,w.l0.pr(24)],children:[(0,l.tZ)(b.Z,{css:{fontSize:48},children:"\ud83e\udd73"}),(0,l.BX)(x.x,{variant:"headerDefault",children:["Congrats on completing ",a,"!"]})]}),(0,l.tZ)(x.x,{variant:"subheadDefault",css:[w.l0.py(12)],children:"Share your progress"}),(0,l.BX)(b.Z,{css:[w.l0.position.relative,w.l0.borderRadius(8),w.l0.backgroundColor.backgroundHigher,w.l0.py(8),w.l0.px(12)],children:[(0,l.tZ)(b.Z,{css:w.l0.pr(16),children:u}),(0,l.tZ)(m.hU,{css:[w.l0.position.absolute,w.l0.top(8),w.l0.right(8)],alt:"Copy",size:18,tooltipHidden:!0,onClick:function(){r("Copied to clipboard!"),(0,Wr.Z)(u),(0,jr.l)({action:"copied_share_text",lessonSlug:n,courseSlug:t,origin:"lesson_complete_modal"})},children:(0,l.tZ)(Hr.Z,{size:16})})]}),(0,l.BX)(b.Z,{css:[w.l0.rowWithGap(16),w.l0.justify.center,w.l0.pt(16),w.l0.align.center],children:[(0,l.tZ)(m.ZP,{outlined:!0,text:"Back to the learning hub",href:"/learn/".concat(t,"/hub")}),(0,l.tZ)(b.Z,{css:[w.l0.rowWithGap(8),w.l0.align.center],children:f.map((function(e){var r=e.url,i=e.icon,o=e.base,a=e.cta,c=e.color;return(0,l.tZ)(g.ZP,{css:[{backgroundColor:c,color:"white"}],onClick:function(){window.open(r,"_blank"),(0,S.j)(S.U3.EXTERNAL_LINK_VIEWED,{url:o,placement:"lesson-complete-modal",campaign:t,lessonSlug:n})},text:a,iconLeft:(0,l.tZ)(i,{})},r)}))})]})]})},Qr=function(e){var n=e.lesson,t=(0,cn.Z)().showError,r=(0,Or.$0)().fireCircularBurstFrom,o=(0,c.useRef)(null),a=(0,Ar.T)(),u=(0,c.useState)(!1),s=u[0],d=u[1],p=(0,i.Z)(function(e){var n=(0,R.Z)({},_,e);return D.D(G,n)}({onError:function(){return t("Something went wrong")},onCompleted:function(e){var i,l;"UpdatedUserCourseLesson"!==(null===(i=e.completeUserCourseLesson)||void 0===i?void 0:i.__typename)?t((null===(l=e.completeUserCourseLesson)||void 0===l?void 0:l.message)||"Something went wrong"):e.completeUserCourseLesson.userCourseLesson.id===n.id?(o.current&&!a&&r({element:o.current}),d(!0)):t("Something went wrong")}}),2),f=p[0],v=p[1].loading;return(0,l.BX)(l.HY,{children:[null!==n.timeCompleted?(0,l.tZ)(m.zx,{ref:o,disabled:!0,text:"Lesson completed \ud83c\udf89",colorway:"primary"}):(0,l.tZ)(m.zx,{iconLeft:v?(0,l.tZ)(le.Z,{}):void 0,onClick:function(){(0,jr.l)({action:"completed",lessonSlug:n.lessonSlug,courseSlug:n.course.courseSlug}),f({variables:{input:{userLessonId:n.id}}})},text:v?"Verifying\u2026":"Mark lesson as complete",colorway:"primary",css:[v&&m.pt.backgroundPulse()]}),(0,l.tZ)(m.u_,{isOpen:s,onRequestClose:function(){return d(!1)},children:(0,l.tZ)(Yr,{lessonSlug:n.lessonSlug,courseSlug:n.course.courseSlug})})]})},Jr=t(92162),ei=t(87514);function ni(e){var n=e.lesson,t=(0,Jr.Un)(),r=(0,Jr.$x)(),i=(0,Yt.Q)("flagLayoutNavigator");return!t&&i?(0,l.tZ)(m.zx,{colorway:"primary",iconLeft:(0,l.tZ)(ei.Z,{}),text:"Show tutorial",onClick:function(){return r()}}):(0,l.tZ)(Qr,{lesson:n})}var ti=t(41664),ri=t.n(ti),ii=t(89033),oi=t(33773),ai=t(36316),li=t(58204),ci=t(68480);function ui(){return(0,l.tZ)(m.G7,{children:(0,l.tZ)(m.G7,{"aria-label":"Always on","data-microtip-position":"bottom",role:"tooltip",css:[m.l0.width(8),m.l0.height(8),m.l0.borderRadius("full"),m.l0.backgroundColor.accentPositiveDefault,{alignSelf:"start",boxShadow:"0 0 12px "+m.TV.accentPositiveDefault}]})})}function si(e){var n=e.repl,t=(0,i.Z)(c.useState(!1),2),r=t[0],o=t[1];return(0,l.BX)($.Z,{isOpen:r,maxWidth:460,onClickOutside:function(){},padding:0,placement:"bottom-start",growToMaxWidth:!0,zIndex:ci.Is-1,elevated:!1,children:[(0,l.BX)(m.G7,{tag:"button",dataCy:"ws-repl-info-container",onClick:function(){o(!0)},css:[m.l0.flex.growAndShrink(1),m.l0.align.center,m.l0.cursor.pointer,m.l0.rowWithGap(8),m.l0.p(4),m.l0.borderRadius(8),m.l0.color.foregroundDefault,r&&{pointerEvents:"none"},{border:"1px solid transparent",backgroundColor:"transparent","&:hover":{borderColor:m.TV.outlineDimmest}}],children:[(0,l.tZ)(ai.Z,{repl:n}),n.isAlwaysOn?(0,l.tZ)(ui,{}):null,(0,l.tZ)(m.G7,{css:[m.l0.p(4)],children:(0,l.tZ)(oi.Z,{})})]}),(0,l.tZ)(m.Tg,{background:"default",css:[m.l0.borderRadius(8)],children:(0,l.tZ)(li.Z,{setIsEditing:o})})]})}var di=t(18935),pi=t(3462),fi=t(83117),vi=t(92876),hi=t(15794),mi=t(2858),gi=(0,Ct.F4)({"0%":{transform:"scale(0.95)",boxShadow:"0 0 0 0 rgba(235, 64, 52, 0.6)"},"50%":{transform:"scale(1)",boxShadow:"0 0 0 8px rgba(235, 64, 52, 0)"},"80%":{transform:"scale(0.95)",boxShadow:"0 0 0 0 rgba(235, 64, 52, 0)"},"100%":{transform:"scale(0.95)",boxShadow:"0 0 0 0 rgba(235, 64, 52, 0)"}}),Zi=function(){var e=(0,r.Z)(a().mark((function e(n){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="7883c04",e.prev=1,e.next=4,(0,hi.LK)("/data/check_version");case 4:e.sent.version!==t&&n(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),vi.Tb(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n){return e.apply(this,arguments)}}(),yi=function(){var e=(0,c.useState)(!1),n=e[0],t=e[1],i=(0,c.useState)(!1),o=i[0],u=i[1],s=(0,c.useContext)(mi.Z);if((0,c.useEffect)((function(){var e=setInterval((function(){return Zi((function(){(0,S.j)(S.U3.REFRESH_APP_USED,{action:"triggered"}),t(!0)}))}),1728e5);return function(){clearInterval(e)}}),[]),!n)return null;var d=function(){var e=(0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u(!0),(0,S.j)(S.U3.REFRESH_APP_USED,{action:"refresh"}),!(null===s||void 0===s?void 0:s.fs)){e.next=7;break}return e.next=5,s.fs.flush();case 5:return e.next=7,s.fs.persist({skipDebounce:!0});case 7:window.location.reload(),u(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,l.BX)(l.HY,{children:[(0,l.BX)(m.G7,{css:[m.l0.position.relative,m.l0.pl(12)],children:[(0,l.tZ)(m.u,{delay:500,tooltip:"You're using an old version of Replit. Refresh this page to get the latest features!",children:(0,l.tZ)(m.zx,{outlined:!0,iconLeft:(0,l.tZ)(fi.Z,{}),text:"Update Workspace",colorway:"grey",onClick:d})}),(0,l.tZ)(m.G7,{css:{position:"absolute",top:1,right:-1,background:"rgba(235, 64, 52, 1)",borderRadius:"50%",height:5,width:5,boxShadow:"0 0 0 0 rgba(235, 64, 52, 1)",transform:"scale(1)",animation:"".concat(gi," 2s infinite"),zIndex:2}})]}),(0,l.tZ)(m.u_,{isOpen:o,onRequestClose:function(){u(!1)},children:(0,l.BX)(m.G7,{children:[(0,l.tZ)(m.xv,{variant:"subheadDefault",css:[m.l0.pb(8)],children:"Saving your work"}),(0,l.tZ)(m.xv,{children:"Making sure you'll find your work after reloading\u2026"})]})})]})},bi=t(85485),xi=t(28592),wi=t(57996),ki=t(16647),Pi=t(14868),Ii=t(73092),Si=t(197),Ci=t(27668),Ri=m.KD.a;function Ei(){var e=(0,Pi.Iv)(),n=(0,Pi.W8)();return(0,l.tZ)(m.hU,{alt:(n?"Close":"Open")+" sidebar",onClick:function(){return e()},tooltipPlacement:"right",children:(0,l.tZ)(ki.Z,{})})}function Ti(e){var n,t=e.repl,r=e.currentUser,i=(0,xi.useLDClient)(),o=null===i||void 0===i?void 0:i.variation("flag-new-logo",void 0),a=(0,Yt.Q)("flagLayoutNavigator");return n=void 0===o?null:o?(0,l.tZ)(wi.N2,{}):(0,l.tZ)(ii.Z,{}),(0,l.BX)(m.G7,{css:[m.l0.flex.row,m.l0.align.center,m.l0.width("calc(50% - ".concat((ci.XD+q.al.small+8)/2,"px)")),(0,qn.Z)({},(0,bi.et)("tabletMax"),[m.l0.width("calc(50% - ".concat((ci.XD+q.al.large+8)/2,"px)"))])],children:[(0,l.tZ)(ri(),{as:"/~",href:"/home",passHref:!0,children:(0,l.tZ)(Ri,{css:[m.l0.center,m.l0.width(32),m.l0.height(32)],children:n})}),(null===r||void 0===r?void 0:r.isFirewallMode)&&(0,l.tZ)(pi.Z,{isWorkspace:!0}),(0,l.BX)(m.G7,{css:[m.l0.flex.growAndShrink(1),m.l0.maxWidth(530),m.l0.rowWithGap(4),m.l0.align.center,{"& > span":[m.l0.viewStyle,m.l0.flex.shrink(1)]}],children:[(0,l.tZ)(si,{repl:t}),a?(0,l.BX)(m.G7,{css:[m.l0.rowWithGap(8),m.l0.align.center],children:[(0,l.tZ)(Ei,{}),(0,l.tZ)(Mi,{})]}):(0,l.tZ)(di.Z,{repl:t}),(0,l.tZ)(yi,{})]})]})}var Di=(0,Ct.F4)("0%,100%{opacity:1;}50%{opacity:0.25;}"),Ui={root:(0,Ct.iv)([m.l0.height(12),m.l0.width(12)]),pulse:(0,Ct.iv)({animation:"".concat(Di," 2s infinite")})};function Mi(){var e=(0,Ii.Z)(),n=e.isSaving,t=e.isOffline;return(0,l.BX)(m.G7,{css:Ui.root,children:[t?(0,l.tZ)(m.u,{tooltip:"Reconnecting, changes will be synced when you\u2019re online",placement:"right",children:(0,l.tZ)(Si.Z,{size:12,color:m.TV.redDefault})}):null,n?(0,l.tZ)(m.u,{tooltip:"Saving",placement:"right",children:(0,l.tZ)(Ci.Z,{css:Ui.pulse,size:12,color:m.TV.foregroundDimmest})}):null]})}var _i=t(61193),Bi=[C.Sy.Submit,C.Sy.Resubmit,C.Sy.UpdateModelSolution,C.Sy.PublishTemplate,C.Sy.EditTemplate,C.Sy.ReviewSubmission],Gi={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!0,key:"M"};function Ni(e){var n,t,r,o,a,s=(0,V.Z)(),d=s.runner,p=s.presence,f=s.replbox,v=(0,he.Z)(),h=(0,K.Z)({presence:p}),g=(0,i.Z)(c.useState(d),2),Z=g[0],y=g[1],b=(0,i.Z)(c.useState(!1),2),x=b[0],w=b[1],k=(0,Er.e)(Dr.H.Run),P=(0,Er.e)(Dr.H.Share),I=(0,i.Z)(c.useState(!1),2),C=I[0],E=I[1],T=function(e){var n=(0,R.Z)({},L,e);return A.a(H,n)}({variables:{id:v}}).data,D=(0,u.b9)($n),U=me(),M=(0,u.b9)(wt),_=(0,_i.c)("flag-run-button-editor"),B=_.enabled,G=_.loading,N="Repl"===(null===T||void 0===T?void 0:T.repl.__typename)?T.repl:null,O="replbox"===(null===N||void 0===N||null===(n=N.lang)||void 0===n?void 0:n.engine)&&"html"!==(null===N||void 0===N?void 0:N.lang.id);(0,c.useEffect)((function(){y(O?f:d)}),[O,f,d]);var j=(0,c.useRef)(null),X=(0,c.useRef)(null),z=(0,c.useRef)(x&&(null===P||void 0===P?void 0:P.isActive)),F=(0,Yt.Q)("flagLayoutNavigator");(0,c.useEffect)((function(){z.current&&!(null===P||void 0===P?void 0:P.isActive)&&w(!1),z.current=x&&(null===P||void 0===P?void 0:P.isActive)}),[P,x]),(0,c.useEffect)((function(){(null===P||void 0===P?void 0:P.isActive)&&(x&&X.current?null===P||void 0===P||P.delegateTooltip(X.current):P.delegateTooltip(j.current))}),[P,x,X]);var Y="Team"===(null===N||void 0===N||null===(t=N.owner)||void 0===t?void 0:t.__typename),Q=Boolean("Team"===(null===N||void 0===N||null===(r=N.owner)||void 0===r?void 0:r.__typename)&&(null===(o=null===N||void 0===N?void 0:N.owner.capabilities)||void 0===o?void 0:o.isEducationPlan)),J=Bi.find((function(e){return e===(null===N||void 0===N?void 0:N.workspaceCta)})),ee=!Q&&(null===N||void 0===N?void 0:N.currentUserPermissions.editMultiplayers);return(0,Tr.x)(Gi,{enabled:!Q,run:function(){w(!0)}}),Pr({match:Rr.pl,data:{type:"action",label:"Multiplayer",icon:(0,l.tZ)(Cr.Z,{}),description:"Open multiplayer mode",run:function(){w(!0)},keyboardShortcut:Gi}},{enabled:!Q}),(0,l.BX)(m.Tg,{elevated:!F,tag:"header",css:[m.l0.height(60),m.l0.flex.row,m.l0.align.center,m.l0.justify.spaceBetween,m.l0.p(8),m.l0.position.relative,{paddingLeft:40},F&&{borderBottom:"1px solid ".concat(m.TV.outlineDimmest)}],children:[(0,l.tZ)(Ti,{repl:e.repl,currentUser:e.currentUser}),(0,l.tZ)(m.G7,{innerRef:null===k||void 0===k?void 0:k.delegateTooltip,dataCy:"ws-run-btn",onClick:function(){(null===k||void 0===k?void 0:k.isActive)&&k.next()},css:[m.l0.position.absolute,m.l0.height(42),{transform:"translate(-50%, -50%)",left:"50%",top:"50%"}],children:!G&&B?(0,l.BX)(l.HY,{children:[(0,l.BX)($.Z,{onClickOutside:function(){return E(!1)},isOpen:C,padding:8,children:[(0,l.tZ)(q.ZP,{runner:Z,disableTooltip:null===k||void 0===k?void 0:k.isActive}),(0,l.tZ)(Nr,{hideModal:function(){return E(!1)}})]}),(0,l.tZ)(m.G7,{css:[m.l0.position.absolute,m.l0.right(-29),m.l0.top(8)],children:(0,l.tZ)(m.hU,{alt:"Configure Repl run",size:28,onClick:function(){E((function(e){return!e}))},css:[m.l0.color.foregroundDimmest],children:(0,l.tZ)(Ur.Z,{})})})]}):(0,l.tZ)(q.ZP,{runner:Z,disableTooltip:null===k||void 0===k?void 0:k.isActive})}),(0,l.BX)(m.G7,{css:[m.l0.rowWithGap(8),m.l0.align.center,m.l0.justify.end],children:[(null===N||void 0===N?void 0:N.lesson)&&(0,l.tZ)(ni,{lesson:N.lesson}),(0,l.tZ)(ke,{users:h,onAvatarClick:U}),J?(0,l.tZ)(m.G7,{css:[m.l0.pr(8)],children:(0,l.tZ)(mt,{cta:J,replId:v,isGroupProject:Boolean(null===N||void 0===N||null===(a=N.template)||void 0===a?void 0:a.isGroupProject),openIOtesterPane:function(){D({pane:{type:"autograder"}})}})}):null,ee?(0,l.tZ)(m.G7,{innerRef:j,children:(0,l.tZ)(Un,{showPopover:N.currentUserPermissions.inviteGuests,children:(0,l.tZ)(m.zx,{onClick:function(){(0,S.j)(S.U3.INVITE_MODAL_OPENED,{language:N.lang.id,replId:N.id,source:"replEnvironment"}),w(!0)},iconLeft:(0,l.tZ)(W.Z,{}),text:"Invite"})})}):null,(0,l.tZ)(m.hU,{size:28,onClick:function(){M()},tooltipDelay:500,alt:"Search & run commands",tooltipPlacement:"bottom-end",children:(0,l.tZ)(gt.Z,{})})]}),(0,l.tZ)(Pe.Z,{isOpen:x,onRequestClose:function(){return w(!1)},children:(0,l.tZ)(m.G7,{innerRef:X,children:Y?(0,l.tZ)(En,{replId:v}):(0,l.tZ)(Bn,{replId:v})})})]})}var Ai=(0,c.memo)(Ni),Oi=t(45589),ji=t(66132),Xi=t(14994),Li=t(53800),zi=t(91550),Fi=t(28173),Hi=t(11533),Wi=t(63736);function $i(e){var n=e.path,t=e.line;return(0,l.BX)(m.G7,{css:[m.l0.colWithGap(4),m.l0.align.start,m.l0.flex.growAndShrink(1),m.l0.py(4)],children:[(0,l.BX)(m.Tg,{elevated:!0,css:[m.l0.rowWithGap(4),m.l0.borderRadius(8),m.l0.p(2)],children:[(0,l.tZ)(Wi.Z,{path:n,size:12}),(0,l.BX)(m.xv,{variant:"small",children:[n,":",t.lineNumber]})]}),(0,l.tZ)(fn.xK,{source:t.content,matches:t.matches})]})}function Vi(){return(0,l.BX)(m.G7,{css:[m.l0.rowWithGap(8)],children:[(0,l.tZ)(qt.Z,{}),(0,l.tZ)(m.xv,{color:"dimmest",children:"Something went wrong searching your Repl's contents. Please try again."})]})}function Ki(){return(0,l.BX)(m.G7,{css:[m.l0.rowWithGap(8)],children:[(0,l.tZ)(qt.Z,{}),(0,l.tZ)(m.xv,{color:"dimmest",children:"Displaying only part of the results, try being more specific with your search."})]})}function qi(){return(0,l.tZ)(m.G7,{children:(0,l.tZ)(m.xv,{color:"dimmest",children:"Nothing came up searching your Repl's content."})})}var Yi={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!0,key:"F"};function Qi(e){var n,t=(0,Fi.Z)((function(e,n,t){(0,Hi.yC)(e).then(n).catch(t)}),200);return(0,Rr.fA)({type:"context",description:"Search through your files",label:"Search",icon:(0,l.tZ)(gt.Z,{}),keyboardShortcut:Yi},{match:(0,Rr.zf)({defaultScore:2}),commands:function(){var o=(0,r.Z)(a().mark((function r(o){var c,u,s,d,p,f,v,h,g,Z,y,b;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o.search){r.next=2;break}return r.abrupt("return",[]);case 2:if(o.active||!e.activeOnly){r.next=4;break}return r.abrupt("return",[]);case 4:return c=Math.random(),n=c,r.next=8,new Promise((function(n,r){t({query:o.search,container:e.container},n,r)}));case 8:if(u=r.sent,s=u.results,d=u.error,p=u.isPartialResult,c===n){r.next=14;break}return r.abrupt("return",[]);case 14:if(null===d){r.next=18;break}if(o.active){r.next=17;break}return r.abrupt("return",[]);case 17:return r.abrupt("return",[{data:{type:"error",label:"error",icon:(0,l.tZ)(qt.Z,{})},match:function(){return{score:1,render:{content:(0,l.tZ)(Vi,{})}}}}]);case 18:for(f=[],v=!0,h=!1,g=void 0,r.prev=20,Z=function(){var e=(0,i.Z)(b.value,2),n=e[0];e[1].forEach((function(e){var t=e.matches[0].column;f.push((0,Rr.fA)({type:"openFile",label:n,icon:(0,l.tZ)(Wi.Z,{path:n}),deeplink:{path:n,line:e.lineNumber,col:t}},{match:function(){var r=vn.Z.match(o.search,e.content);return{score:(null===r||void 0===r?void 0:r.score)||1,render:{content:(0,l.tZ)($i,{path:n,line:e})},key:[n,e.lineNumber,t].join(":")}}}))}))},y=Object.entries(s)[Symbol.iterator]();!(v=(b=y.next()).done);v=!0)Z();r.next=29;break;case 25:r.prev=25,r.t0=r.catch(20),h=!0,g=r.t0;case 29:r.prev=29,r.prev=30,v||null==y.return||y.return();case 32:if(r.prev=32,!h){r.next=35;break}throw g;case 35:return r.finish(32);case 36:return r.finish(29);case 37:if(0!==f.length||!o.active){r.next=39;break}return r.abrupt("return",[{data:{type:"output",label:"",icon:(0,l.tZ)(m.G7,{})},match:function(){return{score:1,render:{content:(0,l.tZ)(qi,{})}}}}]);case 39:if(!o.active){r.next=45;break}if(0!==f.length){r.next=44;break}return r.abrupt("return",[{data:{type:"output",label:"",icon:(0,l.tZ)(m.G7,{})},match:function(){return{score:1,render:{content:(0,l.tZ)(qi,{})}}}}]);case 44:p&&f.push({data:{type:"error",label:"error",icon:(0,l.tZ)(qt.Z,{})},match:function(){return{score:1/0,render:{content:(0,l.tZ)(Ki,{})}}}});case 45:return r.abrupt("return",f);case 46:case"end":return r.stop()}}),r,null,[[20,25,29,37],[30,,32,36]])})));return function(e){return o.apply(this,arguments)}}()})}var Ji=t(42456),eo=t(57353),no=t(18374),to=t(63035);function ro(){var e=(0,V.Z)().session,n=(0,i.Z)(c.useState(e.getInstructionsViewerVisible()),2),t=n[0],r=n[1];return c.useEffect((function(){return r(e.getInstructionsViewerVisible()),e.onInstructionsViewerToggled(r)}),[e]),t}var io=t(65e3),oo=t(40705),ao=t(23445),lo=t(69128),co=t(54519),uo=["education","tutorial","instructions","git","packager","shell","runnerOutput","envEditor","debugger","database","replAuth","markdown","autograder","unitTests","docs","threadInbox","chat","webview","vnc","preferences","adminPanel"];function so(){var e=(0,ao.XP)(),n=e.repl,t=e.currentUser,r=Boolean(null===n||void 0===n?void 0:n.config.isServer),o=Boolean(null===n||void 0===n?void 0:n.config.isVnc),a=Boolean(null===t||void 0===t?void 0:t.isAdmin),l=Boolean(null===n||void 0===n?void 0:n.lang.supportsGit),c=ro(),s=(0,io.Z)().isTutorial,d=Boolean(n&&!(null===n||void 0===n?void 0:n.lang.key.startsWith("html"))),p=(0,oo.x)(),f=Boolean(null===p||void 0===p?void 0:p.packageSearch),v=(0,ao.x5)()||Boolean(null===n||void 0===n?void 0:n.lang.hasDAP),h=Boolean(n&&!(null===n||void 0===n?void 0:n.lang.key.startsWith("html"))),m=Boolean((null===n||void 0===n?void 0:n.isProject)||(null===n||void 0===n?void 0:n.isProjectFork)),g=(0,lo.Z)().language,Z=!m&&null!==g,y=(0,co.$)(),b=(0,_i.c)("flag-repl-auth-sidebar"),x=b.enabled,w=(b.loading,Boolean(x&&p));return(0,Kt.Z)((function(){return(0,u.cn)((function(e){var n=e(to.gM),t=[],u=[[{type:"shell"},!0],[{type:"instructions"},c],[{type:"markdown",data:{path:""}},!0],[{type:"threadInbox"},!0],[{type:"chat"},!0],[{type:"docs"},!0],[{type:"webview"},r],[{type:"vnc"},o],[{type:"runnerOutput"},!n]];e(Yt.H).flagLayoutNavigator&&u.push([{type:"git"},l],[{type:"packager"},f],[{type:"envEditor"},d],[{type:"debugger"},v],[{type:"tutorial"},s],[{type:"database"},h],[{type:"replAuth"},w],[{type:"autograder"},m],[{type:"unitTests"},Z],[{type:"education"},Boolean(y)],[{type:"preferences"},!0],[{type:"adminPanel"},a]);var p=!0,g=!1,b=void 0;try{for(var x,k=u[Symbol.iterator]();!(p=(x=k.next()).done);p=!0){var P=(0,i.Z)(x.value,2),I=P[0];P[1]&&t.push(I)}}catch(S){g=!0,b=S}finally{try{p||null==k.return||k.return()}finally{if(g)throw b}}return function(e){return e.sort((function(e,n){return uo.indexOf(e.type)-uo.indexOf(n.type)}))}(t)}))}),[r,a,o,c,l,f,d,v,y,Z,m,w,h,s])}function po(){return(0,u.Dv)(so())}var fo=function(e,n,t){return{match:t||Rr.pl,data:{type:"openPane",pane:e,label:n.getTitle(e),icon:n.Icon({pane:e})}}};function vo(){var e=(0,Li.Se)();return(0,Kt.Z)((function(){return(0,u.cn)((function(n){var t=n(jn.EP);return{data:{type:"context",label:"Recent",icon:(0,l.tZ)(Xi.Z,{})},commands:function(n){var r=n.search;return t.map((function(n){var t=(0,or.Dp)({path:n});return fo({type:t,data:{path:n}},e,(function(e){return r?(0,Rr.pl)(e):{score:10}}))}))}}}))}),[e])}function ho(){var e=(0,Li.Se)(),n=po();return(0,Kt.Z)((function(){return(0,u.cn)((function(t){var r=t(Xn.Eh).map((function(e){return t(e.data).type})),i=[],o=!0,a=!1,l=void 0;try{for(var c,u=n[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=c.value;(0,or.b)(s.type)&&r.includes(s.type)||i.push(fo(s,e))}}catch(d){a=!0,l=d}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}return i}))}),[n,e])}var mo={type:"context",icon:(0,l.tZ)(Zt.Z,{}),label:"",description:"Search for tools and files"};function go(e){var n=e.paneId,t=(0,V.Z)(),r=t.fs,i=t.container,o=ho(),a=vo(),c=(0,Ji.A)(),s=(0,eo.T)(),d=function(e){var n=e.paneId,t=(0,zn.D)();return(0,Kt.Z)((function(){return function(e){var r=e.path,i={type:(0,or.Dp)({path:r}),data:{path:r}};t({paneId:n,data:i,makeActive:!0})}}),[n,t])}({paneId:n}),p=(0,Kt.Z)((function(){return(0,u.cn)((function(e){var n=e(o),t=e(a),u={data:{type:"context",label:"Tools",icon:(0,l.tZ)(no.Z,{})},commands:function(){return[(0,zi.i)({openFile:d,fs:r,shouldHideFile:s,getRecentFiles:c}),Qi({container:i})].concat((0,Ie.Z)(n))}};return{data:mo,commands:function(){return[t,u]}}}))}),[i,r,c,o,s,a,d]);return(0,u.Dv)(p)}var Zo=m.KD.div,yo=m.KD.input;function bo(e){var n=go({paneId:e.paneId}),t=(0,Et.Z)({onSelect:e.onSelect,initialCommand:n,insertSectionHeaders:!0}),r=t.combobox,i=t.inputRef;return(0,c.useEffect)((function(){var n;e.autoFocus&&(e.isHidden||null===(n=i.current)||void 0===n||n.focus())}),[e.autoFocus,e.isHidden,i]),(0,l.BX)(m.G7,{css:[m.l0.flex.growAndShrink(1)],children:[(0,l.tZ)(Zo,(0,ne.Z)((0,R.Z)({},r.getComboboxProps()),{children:(0,l.BX)(m.Tg,{css:[m.l0.rowWithGap(4),m.l0.align.center,t.path.length>1&&m.l0.pl(8),{borderBottom:"1px solid ",borderColor:m.TV.backgroundHigher,":focus-within":{borderColor:m.TV.backgroundHighest}}],children:[t.path.map((function(e,n){var r=e.data;if(n<=1)return null;var i=r.label,o=r.icon,a=i+n;return(0,l.tZ)(Bt,{label:i,icon:o,onClick:function(){return t.resetToIndex({index:n,focus:!0})}},a)})),(0,l.tZ)(yo,(0,R.Z)({css:[Ht,m.l0.px(8),t.path.length>1&&{paddingLeft:4}]},t.combobox.getInputProps({value:t.inputValue,ref:t.inputRef,onChange:function(e){return t.setInputValue(e.currentTarget.value)},onKeyDown:function(e){"ArrowLeft"!==e.key&&"ArrowRight"!==e.key?"Backspace"!==e.key||e.currentTarget.value?"Escape"===e.key&&e.currentTarget.blur():t.resetToIndex({index:0}):t.handleLeftRightArrow(e.key)},placeholder:t.placeholder})))]})})),(0,l.tZ)(wo,{items:t.itemsWithSections||[],getMenuProps:r.getMenuProps,getItemProps:r.getItemProps,highlightedIndex:r.highlightedIndex,isLoading:t.isLoading})]})}function xo(e){return(0,l.tZ)(Zo,(0,ne.Z)((0,R.Z)({},e.getMenuProps()),{css:[m.l0.flex.growAndShrink(1),m.l0.overflow("auto")],children:e.isLoading||e.items.length?e.items.map((function(n){if(n.isSection){var t=n.name;return(0,l.tZ)(m.xv,{variant:"small",color:"dimmest",css:[m.l0.px(8),m.l0.py(4),{marginTop:8}],children:t},t)}var r=n.item,i=n.index,o=r.data,a=o.label,c=o.icon,u=r.match.render,s=i===e.highlightedIndex,d=u&&"content"in u?u.content:void 0,p=u&&"ranges"in u?u.ranges:void 0;return(0,l.tZ)(Zo,(0,ne.Z)((0,R.Z)({css:[{cursor:"pointer"}]},e.getItemProps({item:r,index:i})),{children:d?(0,l.tZ)(Ot,{active:s,content:d}):(0,l.tZ)(Ot,{active:s,item:{icon:c,label:a,active:s,highlightRanges:p}})}),(0,Et.k)(r))})):null}))}var wo=(0,c.memo)(xo),ko={Content:function(e){var n=e.options,t=n.openPane,r=n.isHidden,i=n.paneId,o=e.pane.data.autoFocus;return(0,l.tZ)(bo,{paneId:i,autoFocus:o,isHidden:r,onSelect:function(e){if("openFile"!==e.data.type)"openPane"!==e.data.type?"action"!==e.data.type||e.data.run():t(e.data.pane);else{var n=e.data.deeplink.path,r={type:(0,or.Dp)({path:n}),data:{path:n}};t(r)}}})},Icon:function(){return null},getTitle:function(){return"New tab"}},Po=t(82947),Io=t(34467),So=t(96769),Co=t(20787),Ro=t(76832),Eo=t(47886),To=t(56483);function Do(){var e=(0,E.Z)(["\n  fragment DeploymentRepl on Repl {\n    id\n    deployment {\n      id\n      activeRelease {\n        id\n      }\n    }\n    releases {\n      items {\n        id\n        pending\n        description\n        timeCreated\n      }\n    }\n  }\n"]);return Do=function(){return e},e}function Uo(){var e=(0,E.Z)(["\n  query Deployment($replId: String!) {\n    currentUser {\n      id\n      username\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...DeploymentRepl\n      }\n    }\n  }\n  ","\n"]);return Uo=function(){return e},e}function Mo(){var e=(0,E.Z)(["\n  mutation CreatePendingRelease($input: CreatePendingReleaseInput!) {\n    createPendingRelease(input: $input) {\n      ... on Repl {\n        id\n        ...DeploymentRepl\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return Mo=function(){return e},e}function _o(){var e=(0,E.Z)(["\n  mutation PromoteRelease($input: PromoteReleaseInput!) {\n    promoteRelease(input: $input) {\n      ... on Repl {\n        id\n        ...DeploymentRepl\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return _o=function(){return e},e}var Bo={},Go=(0,T.Ps)(Do()),No=(0,T.Ps)(Uo(),Go);function Ao(e){var n=(0,R.Z)({},Bo,e);return A.a(No,n)}var Oo=(0,T.Ps)(Mo(),Go);var jo=(0,T.Ps)(_o(),Go);var Xo,Lo=t(30992),zo=t(10449),Fo=t(75240),Ho=t(45528),Wo=t(79985),$o=t(66223),Vo=t(98563),Ko=t(64926),qo=t(59916),Yo=t(52867),Qo=t(39791),Jo=t(61622),ea=t(20311),na=t(13331),ta=t(25108);function ra(){var e=Ao({variables:{replId:(0,he.Z)()}}).data;return(0,l.BX)(m.G7,{css:m.l0.colWithGap(32),children:[(0,l.tZ)(m.xv,{variant:"headerBig",children:"Deployments"}),(0,l.tZ)(sa,{}),(0,l.tZ)(m.G7,{css:m.l0.colWithGap(16),children:(0,l.BX)(m.G7,{tag:"details",children:[(0,l.tZ)(m.G7,{tag:"summary",css:m.l0.cursor.pointer,children:(0,l.tZ)(m.xv,{variant:"subheadDefault",children:"Data dump:"})}),(0,l.tZ)(m.G7,{tag:"pre",children:JSON.stringify(e,null,2)})]})})]})}function ia(e){var n=e.next,t=(0,he.Z)(),o=(0,ot.H)(),u=(0,c.useState)(!1),s=u[0],d=u[1],p=(0,i.Z)(function(e){var n=(0,R.Z)({},Bo,e);return D.D(Oo,n)}(),1),f=p[0],v=(0,Lo.Y)("",(0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}}),e)})))),h=v.value,g=v.setValue,Z=o("releaseDescription");return(0,l.BX)(m.G7,{css:m.l0.colWithGap(16),children:[(0,l.tZ)(m.G7,{tag:"label",htmlFor:Z,children:(0,l.tZ)(m.xv,{variant:"subheadDefault",children:"Add a description to remind you of what you're deploying now"})}),(0,l.tZ)(m.II,{id:Z,value:h,onChange:function(e){return g(e.target.value)},disabled:s,placeholder:"Added a new feature"}),(0,l.tZ)(m.zx,{disabled:s,onClick:(0,r.Z)(a().mark((function e(){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=4,f({variables:{input:{replId:t,releaseDescription:h}}});case 4:i=e.sent,"Repl"===(null===(r=i.data)||void 0===r?void 0:r.createPendingRelease.__typename)?n(i.data.createPendingRelease.releases.items[0].id):(alert("wtf"),ta.log(i));case 6:case"end":return e.stop()}}),e)}))),text:s?"Loading...":"Next (Secrets)"})]})}function oa(e){var n=e.fs,t=e.next,i=(0,c.useState)(!1),o=i[0],u=i[1];return(0,l.BX)(m.G7,{css:m.l0.colWithGap(16),children:[(0,l.tZ)(m.G7,{children:(0,l.tZ)(m.xv,{variant:"subheadDefault",children:"Edit Secrets for this deployment"})}),(0,l.tZ)(Wo.Z,{fs:n,activeFile:null,hideInserterAndIntro:!0}),(0,l.tZ)(m.zx,{disabled:o,onClick:(0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,n.flush();case 3:return e.next=5,n.persist({skipDebounce:!0});case 5:t();case 6:case"end":return e.stop()}}),e)}))),text:o?"Loading...":"Next (Build)"})]})}function aa(e){var n=e.container,t=e.next,i=(0,c.useState)(!1),o=i[0],u=i[1];return(0,l.BX)(m.G7,{css:m.l0.colWithGap(16),children:[(0,l.BX)(m.G7,{children:[(0,l.tZ)(m.xv,{variant:"subheadDefault",children:"Would you like to any build commands"}),(0,l.tZ)(m.xv,{children:"If you're using a framework or a compiled language, you can create a production build now"})]}),(0,l.tZ)(Vo.Z,{container:n,autoFocus:!0}),(0,l.tZ)(m.zx,{disabled:o,onClick:(0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u(!0),t();case 2:case"end":return e.stop()}}),e)}))),text:o?"Loading...":"Next (Customize run)"})]})}function la(e){var n=e.runner,t=e.next,i=(0,c.useState)(!1),o=i[0],u=i[1];return(0,l.BX)(m.G7,{css:m.l0.colWithGap(16),children:[(0,l.BX)(m.G7,{children:[(0,l.tZ)(m.xv,{variant:"subheadDefault",children:"Would you like to change the default run command?"}),(0,l.tZ)(m.xv,{children:"You might want to change the run command to use a production build, or use specific configuration."})]}),(0,l.tZ)(m.xv,{children:"Coming soon... (unimplemented)"}),(0,l.tZ)(m.zx,{disabled:o,onClick:(0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,n.run();case 3:t();case 4:case"end":return e.stop()}}),e)}))),text:o?"Loading...":"Next (Preview)"})]})}function ca(e){var n=e.runner,t=e.releaseId,r=e.next;return(0,l.BX)(m.G7,{css:m.l0.colWithGap(16),children:[(0,l.tZ)(m.G7,{children:(0,l.tZ)(m.xv,{variant:"subheadDefault",children:"Preview website and logs"})}),(0,l.tZ)(m.ZP,{iconLeft:(0,l.tZ)(ea.Z,{}),target:"_blank",rel:"noopener",href:"https://".concat(t,".id.repl.co"),text:"Click here to open a preview of your website"}),(0,l.tZ)(m.xv,{children:"Logs"}),(0,l.tZ)(Jo.Z,{runner:n}),(0,l.tZ)(m.zx,{onClick:function(){return r()},text:"Next"})]})}function ua(e){var n,t=e.releaseId,o=e.next,u=(0,he.Z)(),s=(0,ot.H)(),d=(0,c.useState)(!1),p=d[0],f=d[1],v=(0,i.Z)(function(e){var n=(0,R.Z)({},Bo,e);return D.D(jo,n)}(),1),h=v[0],g=(0,Lo.Y)("",(0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}}),e)})))),Z=g.value,y=g.setValue,b=Ao({variables:{replId:u}}).data,x=s("slug"),w=s("type"),k=(0,c.useState)("replco"),P=k[0],I=k[1];return(0,l.BX)(m.G7,{css:m.l0.colWithGap(16),children:[(0,l.BX)(m.G7,{children:[(0,l.tZ)(m.G7,{htmlFor:w,tag:"label",children:(0,l.tZ)(m.xv,{children:"Domain Type"})}),(0,l.BX)(m.hE,{tag:"fieldset",id:w,name:w,value:P,onChange:function(e){I(e),ta.log(e.currentTarget.value),ta.log(e.target.value)},row:!0,primary:!0,css:[m.l0.width("100%")],children:[(0,l.tZ)(m.rK,{id:s("replco"),value:"replco",text:"Repl.co Domain (free)"}),(0,l.tZ)(m.rK,{id:s("custom"),value:"custom",text:"Custom Domain"})]})]}),"replco"===P?(0,l.BX)(l.HY,{children:[(0,l.tZ)(m.G7,{tag:"label",htmlFor:x,children:(0,l.tZ)(m.xv,{variant:"subheadDefault",children:"Set a URL for your deployment"})}),(0,l.BX)(m.G7,{css:[m.l0.rowWithGap(4),m.l0.align.baseline],children:[(0,l.tZ)(m.II,{id:x,value:Z,onChange:function(e){return y(e.target.value)}}),(0,l.BX)(m.xv,{children:[".",null===b||void 0===b||null===(n=b.currentUser)||void 0===n?void 0:n.username,".repl.co"]})]})]}):(0,l.tZ)(m.xv,{children:"Coming soon...(unimplemented)"}),(0,l.tZ)(m.zx,{iconLeft:(0,l.tZ)(na.Z,{}),disabled:p,onClick:(0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,h({variables:{input:{releaseId:t,slug:Z}}});case 3:o();case 4:case"end":return e.stop()}}),e)}))),text:p?"Loading...":"Launch"})]})}function sa(){var e=(0,c.useState)(null),n=e[0],t=e[1],i=(0,V.Z)().container,o=(0,c.useState)(null),u=o[0],s=o[1];switch(n){case null:return(0,l.tZ)(m.zx,{text:"Create new deployment",onClick:function(){return t(Xo.InitStep)}});case Xo.InitStep:return(0,l.tZ)(ia,{next:function(e){var n=(0,Fo.Z)({onUnrecoverableError:function(e){alert("BSOD"),ta.error(e)}}),o=i.getContext();if(!o)throw new Error("wat");var l=(0,Ho.U)({repl:{id:e,slug:e,language:o.repl.language,user:o.repl.user,currentUserPermissions:o.repl.currentUserPermissions,flagOwnerDotReplitPackager:o.repl.flagOwnerDotReplitPackager},currentUser:o.currentUser,asViewer:!1});n.connect({context:l,fetchConnectionMetadata:(0,r.Z)(a().mark((function n(){var t;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,hi.uz)("/data/repls/".concat(o.repl.id,"/release/").concat(e,"/get_connection_metadata"),{});case 2:return t=n.sent,n.abrupt("return",t);case 4:case"end":return n.stop()}}),n)})))});var c=(0,$o.Z)({container:n}),u=(0,qo.Z)({container:n,fs:c}),d=(0,Ko.Z)({container:n,dotReplit:u}),p=(0,Yo.Z)({container:n,beforeRun:(0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Qo.Z)(n,u);case 2:if(!e.sent){e.next=5;break}return e.next=5,d.installPackages();case 5:case"end":return e.stop()}}),e)})))});s({container:n,fs:c,runner:p}),t(Xo.SecretsStep)}});case Xo.SecretsStep:if(!u)throw new Error("wat");return(0,l.tZ)(oa,{fs:u.fs,next:function(){t(Xo.BuildStep)}});case Xo.BuildStep:if(!u)throw new Error("wat");return(0,l.tZ)(aa,{container:u.container,next:function(){t(Xo.RunStep)}});case Xo.RunStep:if(!u)throw new Error("wat");return(0,l.tZ)(la,{runner:u.runner,next:function(){t(Xo.PreviewStep)}});case Xo.PreviewStep:var d;if(!u)throw new Error("wat");var p=null===(d=u.container.getContext())||void 0===d?void 0:d.repl.id;if(!p)throw new Error("wat");return(0,l.tZ)(ca,{releaseId:p,runner:u.runner,next:function(){t(Xo.UrlStep)}});case Xo.UrlStep:var f,v=null===(f=null===u||void 0===u?void 0:u.container.getContext())||void 0===f?void 0:f.repl.id;if(!v)throw new Error("wat");return(0,l.tZ)(ua,{releaseId:v,next:function(){t(null),null===u||void 0===u||u.container.destroy(),s(null)}});default:(0,zo.Z)(n)}}!function(e){e[e.InitStep=0]="InitStep",e[e.SecretsStep=1]="SecretsStep",e[e.BuildStep=2]="BuildStep",e[e.RunStep=3]="RunStep",e[e.PreviewStep=4]="PreviewStep",e[e.UrlStep=5]="UrlStep"}(Xo||(Xo={}));var da={Content:function(e){var n=e.options,t=n.paneId,r=n.isHidden,i=(0,V.Z)(),o=i.container,a=i.fs,s=i.session,d=i.runner,p=(0,u.b9)(ir.Oe),f=(0,u.Dv)(Ro.f),v=(0,Ro.Z)();(0,Eo.Z)({container:o,runner:d,refreshWebView:v}),(0,To.Z)({runner:d,refreshWebView:v}),(0,Tr.x)(Po.b,{run:function(){p(t),v()}}),Pr({match:Rr.pl,data:{type:"action",label:"Refresh",icon:(0,l.tZ)(Co.Z,{}),description:"Refresh webview",keyboardShortcut:Po.b,run:function(){p(t),v()}}});var h=(0,_i.c)("flag-deployments"),g=h.enabled,Z=(h.loading,(0,c.useState)(!1)),y=Z[0],b=Z[1];return(0,l.BX)(l.HY,{children:[g?(0,l.tZ)(m.u_,{isOpen:y,onRequestClose:function(){return b(!1)},children:(0,l.tZ)(ra,{})}):null,(0,l.tZ)(So.Z,{fs:a,session:s,ref:f,isVisible:!r,onDeployment:g?function(){return b(!0)}:void 0})]})},Icon:function(e){var n=e.size;return(0,l.tZ)(Io.Z,{size:n})},getTitle:function(){return"Webview"}};function pa(){var e=(0,ji.U)();return(0,ne.Z)((0,R.Z)({},e),{webview:da,commands:ko})}var fa=t(25108);var va=t(15682),ha=t(24888),ma=t(19945),ga=t(66477);function Za(){var e=(0,E.Z)(["\n  query ReplEnvironmentHelp {\n    currentUser {\n      id\n      ...HelpCurrentUser\n    }\n  }\n  ","\n"]);return Za=function(){return e},e}var ya={},ba=(0,T.Ps)(Za(),ga.HH);var xa=t(42844),wa=t(75301),ka=t(29780);function Pa(e){var n=e.item,t=e.isActive,r=e.onClick,o=(0,i.Z)(c.useState(!0),2),a=o[0],u=o[1],s=c.useRef(null),d=(0,i.Z)((0,va.XZ)(s,!1),4),p=d[0],f=d[1],v=d[2],h=d[3];(0,va.Ym)(f,s);var g=(0,l.tZ)(m.hU,{innerRef:s,role:"tab",tabIndex:p,tooltipPlacement:"right","aria-selected":t,size:40,alt:n.tooltip,css:[t?[m.l0.backgroundColor.accentPrimaryDimmest,m.l0.color.accentPrimaryStrongest]:m.l0.color.foregroundDimmest,{"&:hover":t?[m.l0.backgroundColor.accentPrimaryDimmest,m.l0.color.accentPrimaryStrongest]:m.l0.color.accentPrimaryStrongest}],onKeyDown:v,onClick:function(e){h(),u(!1),r(e)},children:n.icon},n.type);return n.IconWrapper?(0,l.tZ)(n.IconWrapper,{isVisible:a,onDismiss:function(){return u(!1)},children:g}):g}var Ia={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:","},Sa={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!0,key:"G"};function Ca(){var e=(0,ao.ZP)(),n=e.items,t=e.activeItem,r=(0,ka.vL)(),i=(0,ka.Iv)(),o=function(e){var n=(0,R.Z)({},ya,e);return A.a(ba,n)}().data,a=null===o||void 0===o?void 0:o.currentUser;(0,Tr.x)(Ia,{run:function(){r({type:"preferences"})}}),Pr({match:Rr.pl,data:{type:"action",icon:(0,l.tZ)(xa.Z,{}),label:"Settings",description:"Manage editor settings",keyboardShortcut:Ia,run:function(){r({type:"preferences"})}}});var c=n.some((function(e){return"git"===e.type}));return(0,Tr.x)(Sa,{run:function(){r({type:"git"})},enabled:c}),Pr({match:Rr.pl,data:{icon:(0,l.tZ)(wa.Z,{}),label:"Version control",description:"Open version control sidebar",type:"action",keyboardShortcut:Sa,run:function(){r({type:"git"})}}},{enabled:c}),(0,l.BX)(m.Tg,{elevated:!0,css:[m.l0.borderRadius(8,0,0,8),m.l0.colWithGap(4),m.l0.flex.growAndShrink(1),m.l0.justify.spaceBetween,m.l0.align.center,m.l0.pb(8),m.l0.position.relative,{borderRight:"1px solid "+m.TV.backgroundHigher}],children:[(0,l.tZ)(va.uP,{options:{direction:"vertical"},children:(0,l.BX)(m.G7,{css:[m.l0.p(4),m.l0.overflowY("auto"),m.l0.flex.growAndShrink(1),m.l0.colWithGap(4),m.l0.align.start],role:"tablist","aria-orientation":"vertical","aria-label":"Dock",children:[n.map((function(e){var n=e.type===t;return(0,l.tZ)(m.G7,{children:(0,l.tZ)(Pa,{item:e,isActive:n,onClick:function(){return i({type:e.type})}})},e.type)})),0===n.length?(0,l.tZ)(m.hU,{"aria-disabled":!0,alt:"",size:40,css:{opacity:0},children:(0,l.tZ)(ha.Z,{})}):null]})}),a?(0,l.tZ)(ma.Z,{}):null,(0,l.tZ)(Ra,{direction:"top"}),(0,l.tZ)(Ra,{direction:"bottom"})]})}function Ra(e){return(0,l.tZ)(m.Tg,{css:[m.l0.position.absolute,m.l0.right(-5),m.l0.width(4),m.l0.height(4),"top"===e.direction?m.l0.top(0):m.l0.bottom(0),{pointerEvents:"none"}]})}var Ea=(0,c.memo)(Ca),Ta=t(60523),Da=t(35621);function Ua(e){var n=e.children,t=c.useRef({fileMap:new Map});return(0,l.tZ)(Ta.Z.Provider,{value:t,children:n})}function Ma(e){var n=e.ui,t=e.services,r=e.replId,i=e.replLanguage,o=e.children,a=(0,Kt.Z)((function(){return{id:r,language:i}}),[r,i]);return(0,l.tZ)(Li.kz,{value:n,children:(0,l.tZ)(Ua,{children:(0,l.tZ)(mi.Z.Provider,{value:t,children:(0,l.tZ)(Da.Z.Provider,{value:a,children:o})})})})}var _a=t(51438),Ba=t(28668),Ga=t(25171),Na=t(88662),Aa=t(93160),Oa=t(13482),ja=b.K.div,Xa=(0,Ct.iv)([m.l0.width("100%"),m.l0.position.absolute,m.l0.left(0),{cursor:"ns-resize",zIndex:1,":hover":{transform:"scaleY(4)"}}]),La=(0,Ct.iv)([m.l0.height("100%"),m.l0.position.absolute,m.l0.top(0),{cursor:"ew-resize",zIndex:1,":hover":{transform:"scaleX(4)"}}]),za=(0,Ct.iv)([m.l0.position.absolute,{zIndex:2,transform:"scale(2)",":hover":{transform:"scale(4)"}}]);function Fa(e){var n="topLeft"===e||"topRight"===e?"bottom":"top";return{transformOrigin:"".concat("topLeft"===e||"bottomLeft"===e?"right":"left"," ").concat(n)}}var Ha={topLeft:(0,Ct.iv)([m.l0.top(0),m.l0.left(0),Fa("topLeft")]),topRight:(0,Ct.iv)([m.l0.top(0),m.l0.right(0),Fa("topRight")]),bottomLeft:(0,Ct.iv)([m.l0.bottom(0),m.l0.left(0),Fa("bottomLeft")]),bottomRight:(0,Ct.iv)([m.l0.bottom(0),m.l0.right(0),Fa("bottomRight")])};function Wa(e){var n=e.edge,t=e.size,r=e.onPointerDown;if("top"===n||"bottom"===n)return(0,l.tZ)(ja,{onPointerDown:r,style:(0,qn.Z)({height:t},n,-t),css:Xa});if("right"===n||"left"===n)return(0,l.tZ)(ja,{onPointerDown:r,style:(0,qn.Z)({width:t},n,-t),css:La});var i="topLeft"===n||"bottomRight"===n?"nwse-resize":"nesw-resize";return(0,l.tZ)(ja,{onPointerDown:r,style:{height:t,width:t,cursor:i},css:[za,Ha[n]]})}var $a=["bottom","right","left","bottomRight","bottomLeft"],Va=(0,Ct.iv)([w.l0.coverContainer,w.l0.borderRadius(0,0,8,8)]),Ka="--fixed-position-offset-x",qa="--fixed-position-offset-y",Ya=function(e){return"var(".concat(e,")")},Qa=(0,Ct.iv)({transform:"translate(".concat(Ya(Ka),", ").concat(Ya(qa),")")}),Ja=(0,Ct.iv)([w.l0.coverContainer,!Oa.g&&{"& .cm-editor > .cm-tooltip":Qa,"& .cm-editor > .cm-tooltip.cm-tooltip-thread":{left:"0px !important",transform:"translateY(".concat(Ya(qa),"px)")},".cm-custom-context-menu":Qa}]);function el(e){var n,t=e.resizable&&e.onResizeControlPointerDown?$a.map((function(n){return(0,l.tZ)(Wa,{size:8,edge:n,onPointerDown:function(t){if(!e.onResizeControlPointerDown)throw new Error("Expected onResizeControlMouseDown");e.onResizeControlPointerDown(t,n)}},n)})):null,r=e.rect;return(0,l.tZ)(b.Z,{style:(n={zIndex:e.zIndex,position:"absolute",width:r.width,height:r.height,transform:"translate(".concat(Math.round(r.x),"px, ").concat(Math.round(r.y),"px)"),transition:e.animate?"transform 140ms ease-out":void 0,transitionTimingFunction:"ease-out",visibility:e.hidden?"hidden":void 0,opacity:e.hidden?0:void 0},(0,qn.Z)(n,Ka,-e.viewportInset.x+"px"),(0,qn.Z)(n,qa,-e.viewportInset.y+"px"),n),css:{"&:hover":{zIndex:e.zIndexHovered}},children:(0,l.BX)(Aa.Z,{onClick:e.onClick,onContextMenu:e.onClick,elevated:!0,css:Va,className:e.className,children:[(0,l.tZ)(b.Z,{innerRef:e.innerRef,css:Ja,children:e.children}),t]})})}var nl=t(78648),tl=(0,u.cn)(null),rl=(0,u.cn)(null,(function(e,n,t){var r=e(jn.g4);if("end"===t.type)return n(tl,null),void n(Fn.iH,r);if("update"!==t.type){var i=e(Xn.Eh).find((function(e){return e.paneId===t.paneId}));if(!i){var o=new Error("Expected pane");throw n(Wn.xm,{error:o}),o}n(Hn.W1,t.paneId),n(tl,{paneId:t.paneId,edge:t.edge,rectStart:e(i.rectAtom)})}else{var a=e(tl);if(!a){var l=new Error("Expected floatingResizeState");throw n(Wn.xm,{error:l}),l}var c=(0,nl.XR)(a.rectStart,{delta:t.moveDelta,edge:a.edge}),u=a.paneId,s=(0,Gn.ZP)(r,(function(t){var r=t.floating.find((function(e){return e.panes.includes(u)}));if(!r){var i=new Error("Expected floating");throw n(Wn.xm,{error:i}),i}var o=e(Xn.M0),a=r.rect;a.x=c.x,a.y=c.y-o,a.width=c.width,a.height=c.height+o}));n(Fn.iH,s)}})),il=t(31826);function ol(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,r=e.pageX,i=e.pageY,o={x:r,y:i},a={x:0,y:0};n.start&&n.start({mouse:o,shiftKey:e.shiftKey});var l=(0,il.Z)((function(e){var t={x:e.pageX,y:e.pageY};a={x:t.x-o.x,y:t.y-o.y},n.move({delta:a,shiftKey:e.shiftKey,mouse:t})}),t),c=function(){l.cancel(),document.removeEventListener("pointermove",l),document.removeEventListener("pointerup",c),document.removeEventListener("touchcancel",c),n.end&&n.end({delta:a,shiftKey:e.shiftKey})};document.addEventListener("pointermove",l),document.addEventListener("pointerup",c),document.addEventListener("touchcancel",c)}var al=(0,Ct.iv)([w.l0.width("100%"),w.l0.flex.growAndShrink(1),{overflow:"auto"}]);function ll(e){return(0,l.tZ)(b.Z,{css:al,style:{pointerEvents:e.disableInteractions?"none":void 0,userSelect:e.disableInteractions?"none":void 0},children:e.children})}var cl=(0,u.cn)(!1),ul=(0,u.cn)((function(e){return e(cl)?e(Hn.J1):null})),sl=(0,u.cn)(null,(function(e,n,t){n(cl,!0),n(Hn.W1,t)})),dl=(0,u.cn)(null,(function(e,n){n(cl,!1)})),pl=(0,u.cn)(null,(function(e,n,t){e(ul)===t?n(dl):n(sl,t)})),fl=(0,u.cn)((function(e){var n=e(Xn.CK);return{x:-n.x,y:-n.y,width:n.width+n.x,height:n.height+n.y}})),vl=(0,u.cn)((function(e){var n=e(Xn.M0),t=e(fl);return{x:t.x,y:t.y,width:t.width,height:n}})),hl=(0,u.cn)((function(e){var n=e(Xn.M0),t=e(fl);return{x:t.x,y:t.y+n,width:t.width,height:t.height-n}}));function ml(e){var n=(0,Kt.Z)((function(){return(0,u.cn)((function(n){return e===n(ul)?n(vl):null}))}),[e]);return(0,u.Dv)(n)}function gl(){return{maximizePane:(0,u.b9)(sl),restoreMaximizedPane:(0,u.b9)(dl),toggleMaximized:(0,u.b9)(pl)}}var Zl=t(63848),yl=t(80175);function bl(e,n){var t=n.paneGroupPath,r=n.rect,i=(0,rr.KC)(e,t);if("paneGroup"!==(null===i||void 0===i?void 0:i.type))throw new Error("Expected paneGroup");(0,yl.Z)(e,t),(0,On.m)(e,{id:i.id,isFloating:!0,panes:i.panes,rect:r,activeIndex:i.activeIndex})}var xl=t(35869);var wl=50,kl=(0,u.cn)(null),Pl=(0,u.cn)((function(e){var n;return(null===(n=e(kl))||void 0===n?void 0:n.activePaneId)||null}));function Il(e){var n=e.paneId,t=(0,Kt.Z)((function(){return(0,u.cn)((function(e){var t;return n===(null===(t=e(kl))||void 0===t?void 0:t.activePaneId)}))}),[n]);return(0,u.Dv)(t)}function Sl(e){var n=e.paneId,t=(0,Kt.Z)((function(){return(0,u.cn)((function(e){var t=e(kl);return!!t&&(t.activePaneId!==n&&("floating"!==e((0,Xn.z)(n)).type&&e(jn._E)))}))}),[n]);return(0,u.Dv)(t)}function Cl(e){var n=e.paneId,t=(0,Kt.Z)((function(){return(0,u.cn)((function(e){var t=e(kl);return!!t&&("floating"!==t.startType&&(n===t.activePaneId?{originX:t.transformOriginX,scale:t.scale}:null))}))}),[n]);return(0,u.Dv)(t)}function Rl(e){var n=e.activePaneId,t=(0,u.b9)(El),r=(0,u.b9)(Tl),i=(0,u.b9)(Dl),o=(0,Kt.Z)((function(){return{start:function(e){var r=e.mouse;t({activePaneId:n,mouse:r})},update:function(e){r(e)},end:function(e){i(e)}}}),[n,t,r,i]);return{isDragging:Il({paneId:n}),dnd:o}}var El=(0,u.cn)(null,(function(e,n,t){var r=e(Xn.CK),i=e((0,Xn.z)(t.activePaneId)),o=e(i.rectAtom),a=e(Xn.M0),l={x:o.x,y:o.y-a,width:o.width,height:o.height+a},c=t.mouse.x-(r.x+o.x);n(kl,{startType:i.type,startPoint:{x:t.mouse.x-r.x,y:t.mouse.y-r.y},activePaneId:t.activePaneId,transformOriginX:Math.round(c)+"px",scale:1,fromRect:l})})),Tl=(0,u.cn)(null,(function(e,n,t){var r=e(kl);if(r){var o=t.delta,a=r.activePaneId,l=r.fromRect,c=e(jn.g4),u=(0,rr.Rh)(c,a);if(!u){var s=new Error("Expected pane");throw n(Wn.xm,{error:s}),s}var d=(0,Xn.z)(a),p=(0,Xn.Xs)(u.paneGroup.id),f=e(Xn.M0),v=Math.max(Math.abs(o.x),Math.abs(o.y)),h=v>=wl;if(!h||u.floating){var m=e(p),g=e(d),Z=l.x+o.x,y=l.y+o.y;if(n(m.rectAtom,(function(e){return(0,Gn.ZP)(e,(function(e){e.x=Z,e.y=y}))})),n(g.rectAtom,(function(e){return(0,Gn.ZP)(e,(function(e){e.x=Z,e.y=y+f}))})),"floating"!==r.startType){if(!h&&!u.floating){var b=r.startPoint,x=1-.30000000000000004*(w=v/wl,1-Math.sqrt(1-Math.pow(w,2)));return n(Zl.m,{type:"detachPreview",rect:{x:b.x-wl,y:b.y-wl,width:100,height:100},progress:v/wl}),void n(kl,(0,Gn.ZP)(r,(function(e){e.scale=x})))}var w,k=e(Xn.CK);if(!u.floating)throw new Error("Expected floating pane");var P=e(Xn.Eh).filter((function(e){return"tile"===e.type&&!e.isHidden})).map((function(n){return[n.paneId,e(n.rectAtom)]})),I=e(xl.Ob),S=function(e){var n=e.views,t=e.mouse,r=e.container,o=e.headerHeight,a=e.sidebarWidth,l={x:Math.min(Math.max(t.x-r.x,1),r.width-1),y:Math.min(Math.max(t.y-r.y,1),r.height-1)},c=!0,u=!1,s=void 0;try{for(var d,p=n[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var f=(0,i.Z)(d.value,2),v=f[0],h=f[1],m={x:h.x,y:h.y-o,width:h.width,height:o},g={x:m.x-Fn.SG/2,y:m.y-Fn.SG/2,width:m.width+Fn.SG,height:o+Fn.SG/2};if((0,nl.V0)(l,g))return{dropPreview:m,drop:{type:"insert",paneId:v}};var Z={x:h.x,y:h.y-o,width:h.width,height:h.height+o},y={x:Z.x-Fn.SG/2,y:Z.y-Fn.SG/2,width:Z.width+Fn.SG,height:Z.height+Fn.SG};if((0,nl.V0)(l,y)){var b=(0,nl.QN)(l,Z);return{dropPreview:b.rect,drop:{type:"split",relativeTo:v,placement:b.placement}}}}}catch(w){u=!0,s=w}finally{try{c||null==p.return||p.return()}finally{if(u)throw s}}var x=(0,nl.QN)(l,{x:a,y:0,width:r.width-a,height:r.height});return{dropPreview:x.rect,drop:{type:"split",relativeTo:["tiling"],placement:x.placement}}}({views:P,container:k,mouse:t.mouse,headerHeight:f,sidebarWidth:I}),C=S.drop,R=S.dropPreview;n(Zl.m,{type:"dropPreview",rect:R}),n(kl,{fromRect:r.fromRect,activePaneId:r.activePaneId,startType:r.startType,startPoint:r.startPoint,drop:C,transformOriginX:r.transformOriginX,scale:r.scale})}}else{var E=e(d).rectAtom,T=e(E),D=(0,Gn.ZP)(c,(function(e){try{bl(e,{paneGroupPath:u.paneGroupPath,rect:{x:T.x+o.x,y:T.y-f+o.y,width:T.width,height:T.height+f}})}catch(s){throw n(Wn.xm,{error:s}),s}}));n(Fn.iH,D)}}else n(Zl.m,null)})),Dl=(0,u.cn)(null,(function(e,n,t){var r=t.delta;n(Zl.m,null);var i=e(kl);if(i){var o=i.activePaneId,a=i.drop,l=i.fromRect,c=e(jn.g4),u=(0,rr.Rh)(c,o);if(!u){var s=new Error("Expected pane");throw n(Wn.xm,{error:s}),s}var d=(0,Gn.ZP)(c,(function(e){if(u.floating&&"floating"===i.startType){var t=(0,rr.KC)(e,u.paneGroupPath);if("floatingPaneGroup"!==(null===t||void 0===t?void 0:t.type))return;var c=l.x+r.x,d=l.y+r.y;return t.rect.x=c,void(t.rect.y=d)}if(a)if("split"!==a.type){var p=(0,rr.Rh)(e,a.paneId);u.paneGroup.panes.forEach((function(n){return function(e,n){var t="floatingIndex"in n?e.floating[n.floatingIndex]:(0,rr.KC)(e,n.paneGroupPath);if(!t||!("panes"in t))throw new Error("Expected paneGroup");(0,yl.i)(e,n.paneId);var r=void 0===n.index?t.panes.length:n.index;t.panes.splice(r,0,n.paneId),n.activate?t.activeIndex=r:t.activeIndex>=r&&t.activeIndex++}(e,{paneId:n,paneGroupPath:(null===p||void 0===p?void 0:p.paneGroupPath)||["tiling"],activate:!1})}))}else{if(null===e.tiling){var f=An()();try{(0,On.m)(e,{id:An()(),panes:[f],placement:"leftOf",relativeTo:["tiling"]})}catch(s){throw n(Wn.xm,{error:s}),s}}try{!function(e,n){var t=n.from,r=n.to,i=n.placement,o=(0,rr.Rh)(e,t);if(!o)throw new Error("Expected fromPane");var a=o.paneGroup,l=a.panes,c=a.activeIndex;(0,yl.Z)(e,o.paneGroupPath),(0,On.m)(e,{id:o.paneGroup.id,relativeTo:r,panes:l,placement:i,activeIndex:c})}(e,{from:o,to:a.relativeTo,placement:a.placement})}catch(v){throw n(Wn.xm,{error:v}),v}}}));n(kl,null),n(Fn.iH,d),"insert"===(null===a||void 0===a?void 0:a.type)&&n(ir.Oe,o)}}));var Ul={gutterActive:ci.Is+19,maximizedTooltip:ci.Is+18,maximizedPane:ci.Is+17,maximizedHeader:ci.Is+16,detachPreview:16,draggingPane:15,draggingHeader:14,dropPreview:13,floatingPaneHovered:12,floatingPaneActive:11,floatingHeaderActive:10,floatingPane:9,floatingHeader:8,tiledPaneHovered:7,gutterHovered:6,tiledPaneActive:5,tiledHeaderActive:4,tiledPane:3,tiledHeader:2,gutter:1};function Ml(){return{normal:Ul.gutter,hovered:Ul.gutterHovered,active:Ul.gutterActive}}var _l=t(91885);function Bl(e,n){var t=n.leftPath,r=n.percent,i=n.snapPercent,o=void 0===i?0:i,a=(0,rr.KC)(e,t);if(!a||!(0,_l.r)(a))throw new Error("Expected leftNode");var l=(0,_l.I)(t),c=(0,rr.KC)(e,l);if("split"!==(null===c||void 0===c?void 0:c.type))throw new Error("Expected splitNode");var u=c.children.indexOf(a);if(-1===u)throw new Error("Expected leftNodeIndex");var s=u+1,d=c.children[s];if(!d)throw new Error("Expected rightNode");if(r<=o){if(a.percent=0,r<0&&u>0)for(var p=Math.abs(r),f=u-1;p>0;){var v=c.children[f];if(v.percent>p){v.percent-=p;break}if(p-=v.percent,v.percent=0,0===f)break;f--}var h=c.children.reduce((function(e,n){return n===d?e:e+n.percent}),0);d.percent=100-h}else{var m=a.percent+d.percent,g=c.children.slice(u).reduce((function(e,n){return e+n.percent}),0);if(r>m-o){if(a.percent=Math.min(g,Math.max(m,r)),d.percent=0,r>m&&s<c.children.length-1)for(var Z=r-m,y=s+1;Z>0;){var b=c.children[y];if(b.percent>Z){b.percent-=Z;break}if(Z-=b.percent,b.percent=0,y===c.children.length-1)break;y++}}else{var x=a.percent-r;d.percent=d.percent+x,a.percent=r}}}function Gl(e){var n=e.layout,t=e.splitPath,r=e.tilingOptions,i=function(e,n){var t=n.splitPath,r=(0,rr.KC)(e,t);if(!r||"split"!==r.type)throw new Error("Expected split node");for(var i=100,o=(0,_l.I)(t);o.length;){var a=(0,rr.KC)(e,o);if(!a)break;o=(0,_l.I)(o),"split"===a.type&&a.stacked===r.stacked&&(i*=a.percent/100)}return i}(n,{splitPath:t}),o=(0,rr.KC)(n,t);if("split"!==(null===o||void 0===o?void 0:o.type))throw new Error("Expected split node");var a=r.size,l=r.gap,c=r.headerHeight,u=r.inset,s=void 0===u?{top:0,bottom:0,left:0,right:0}:u,d=o.children.length,p=o.stacked?l*(d-1)+c*d:l*(d-1);return i/100*((o.stacked?a.height-(s.top+s.bottom):a.width-(s.left+s.right))-p)}var Nl=(0,u.cn)(null),Al=(0,u.cn)(null,(function(e,n,t){if("end"!==t.type)if("update"!==t.type){var r=e(jn.g4),i=t.stacked?window.innerHeight:window.innerWidth,o=(0,rr.KC)(r,t.leftPath);if(!o||!(0,_l.r)(o)){var a=new Error("Expected left node");throw n(Wn.xm,{error:a}),a}var l=(0,_l.I)(t.leftPath),c=o.percent,u=Fn.pc/i*100,s=null;try{s=Gl({splitPath:l,layout:r,tilingOptions:e(Fn.Hs)})}catch(x){throw n(Wn.xm,{error:x}),x}if(null===s)throw new Error("Expected resizeDistance");n(Nl,{stacked:t.stacked,leftPath:t.leftPath,startPercent:c,resizeDistance:s,snapPercent:u,initialLayout:r})}else{var d=e(Nl);if(!d){var p=new Error("Expected tilingResize");throw n(Wn.xm,{error:p}),p}var f=d.stacked,v=d.leftPath,h=d.startPercent,m=d.resizeDistance,g=d.initialLayout,Z=d.snapPercent,y=h+(f?t.moveDelta.y:t.moveDelta.x)/m*100,b=(0,Gn.ZP)(g,(function(e){Bl(e,{leftPath:v,percent:y,snapPercent:Z})}));n(Fn.iH,b)}else n(Nl,null)}));var Ol=(0,u.cn)(null),jl=(0,u.cn)(null,(function(e,n){var t=e(xl.TL);n(Ol,{sidebarWidthStart:t.width})})),Xl=(0,u.cn)(null,(function(e,n,t){var r=t.deltaX,i=e(Ol);if(i){var o=e(Xn.CK),a=i.sidebarWidthStart+r;if((a=Math.min(Math.max(a,0),o.width))<xl.ih)a=r>0?a:0;n(xl.TL,(function(e){return{pane:e.pane,width:a}})),n(Fn.iH,e(jn.g4))}})),Ll=(0,u.cn)(null,(function(e,n){if(e(Yt.H).flagLayoutNavigator){if(e(Ol)){var t=e(xl.TL);t.width<xl.ih&&(n(xl.TL,(function(e){return{pane:e.pane,width:0===t.width?0:xl.ih}})),n(Fn.iH,e(jn.g4))),n(Ol,null)}}else n(Ol,null)}));var zl=(0,u.cn)((function(e){return Boolean(e(Ol))}));var Fl=(0,u.cn)((function(e){var n=e(Xn.CK).height;return{x:e(xl.TL).width,y:0,height:n,width:Fn.SG}}));var Hl=(0,u.cn)((function(e){return Boolean(e(kl)||e(tl)||e(Nl)||e(ir.c)||e(zl))}));var Wl=t(7182),$l=t(46091);var Vl=(0,Ct.iv)([m.l0.position.absolute,m.l0.shadow(3),m.l0.borderRadius(8),{pointerEvents:"none",border:"1px solid",borderColor:m.TV.outlineDimmest}]);function Kl(e){var n=function(e){var n=e.paneId,t=(0,Kt.Z)((function(){return(0,u.cn)((function(e){if(e(ul))return null;var t=e((0,Xn.z)(n)),r=n===e(Pl);if("floating"!==t.type&&!r)return null;var i=e(Xn.M0),o=e(t.rectAtom);return{width:o.width+2,height:o.height+i+2,top:-(i+1),left:-1}}))}),[n]);return(0,u.Dv)(t)}({paneId:e.paneId});return n?(0,l.tZ)(m.G7,{css:Vl,style:n}):null}var ql=(0,c.memo)(Kl);var Yl=t(25108);var Ql=function(e){(0,Ba.Z)(t,e);var n=(0,Ga.Z)(t);function t(){var e;return(0,_a.Z)(this,t),(e=n.apply(this,arguments)).state={error:null,errorInfo:null},e}var r=t.prototype;return r.componentDidCatch=function(e,n){this.setState({error:e,errorInfo:n}),this.props.handleError(e,n),Yl.error(e)},r.render=function(){return this.state.error?(0,l.tZ)(m.G7,{css:[m.l0.font.code,m.l0.p(16),{whiteSpace:"pre",overflow:"hidden",color:"white"},m.l0.backgroundColor.blurpleDefault,m.l0.height("100%")],children:(0,l.tZ)(m.G7,{children:this.state.error.stack})}):this.props.children},t}(c.Component);function Jl(e){var n=e.paneId,t=(0,u.Dv)(Xn.CK),r=(0,u.Dv)((0,Xn.z)(n)),o=function(e){var n=(0,Kt.Z)((function(){return(0,u.cn)((function(n){return e===n(ul)?n(hl):null}))}),[e]);return(0,u.Dv)(n)}(n),a=(0,Hn.cr)({paneId:n}),c=(0,Wn.IY)(),s=Cl({paneId:n}),d=(0,u.b9)(rl),p=(0,Hn.Xo)(),f="floating"===r.type&&!r.isDialog,v=Boolean(r.dropBehavior),h=Sl({paneId:n}),m=v||Boolean(o),g=function(e){var n=(0,Kt.Z)((function(){return(0,u.cn)((function(n){var t=n((0,Xn.z)(e)),r=e===n(Hn.J1);return n(ul)===e?{hovered:Ul.maximizedPane,normal:Ul.maximizedPane}:e===n(Pl)?{hovered:Ul.draggingPane,normal:Ul.draggingPane}:"floating"===t.type?{hovered:Ul.floatingPaneHovered,normal:r?Ul.floatingPaneActive:Ul.floatingPane}:{hovered:Ul.tiledPaneHovered,normal:r?Ul.tiledPaneActive:Ul.tiledPane}}))}),[e]);return(0,u.Dv)(n)}(n),Z=(0,u.Dv)(Hl),y=function(e){var n=e.paneId,t=(0,Kt.Z)((function(){return(0,u.cn)((function(e){if(e(ul)===n)return e(hl);var t=e((0,Xn.z)(n));return e(t.rectAtom)}))}),[n]);return(0,u.Dv)(t)}({paneId:n}),b={x:t.x+y.x,y:t.y+y.y},x=function(e){var n=e.paneId,t=(0,i.Z)((0,Na.L)({accept:[rt.Tv.File,Wl.z.Pane,Wl.z.NewPane],collect:function(e){return{isOver:e.isOver()}},hover:function(e,t){var r=t.getClientOffset();r&&a.drag({pageX:r.x,pageY:r.y,over:n})},drop:function(e,t){var r=t.getClientOffset();if(r)if(e.type!==Wl.z.Pane){if(e.type===rt.Tv.File){var i=e.path,o={type:(0,or.Dp)({path:i}),data:{path:i}};a.drop({type:"newPane",pane:o,pageX:r.x,pageY:r.y,over:n})}if(e.type===Wl.z.NewPane){var l=e.pane;a.drop({type:"newPane",pane:l,pageX:r.x,pageY:r.y,over:n})}}else a.drop({type:"pane",paneId:e.paneId,pageX:r.x,pageY:r.y,over:n})}}),2),r=t[0].isOver,o=t[1],a=(0,$l.s)({isOver:r});return o}({paneId:n}),w="tile"===r.type;return(0,l.BX)(l.HY,{children:[r.isDialog?(0,l.tZ)(tc,{}):null,(0,l.BX)(el,{css:{transform:s?"scale(".concat(s.scale,")"):void 0,transformOrigin:s?"".concat(s.originX," top"):void 0},innerRef:w?x:void 0,zIndex:g.normal,zIndexHovered:g.hovered,hidden:r.isHidden,viewportInset:b,active:a,rect:y,animate:h,isBeingDragged:v,floating:m,scaleDown:"tile"===r.dropBehavior,resizable:f,onClick:function(){p(n)},onResizeControlPointerDown:function(e,t){ol(e,{start:function(){d({type:"start",paneId:n,edge:t})},move:function(e){var n=e.delta;d({type:"update",moveDelta:n})},end:function(){d({type:"end"})}})},children:[(0,l.tZ)(ql,{paneId:n}),(0,l.tZ)(Ql,{handleError:function(e,n){c({error:e,extras:{errInfo:n},tags:{layoutv2:"true",bsod:"true",paneType:r.type}})},children:(0,l.tZ)(ll,{disableInteractions:Z,children:(0,l.tZ)(nc,{paneId:n,dataAtom:r.data,isHidden:r.isHidden})})},n)]})]})}function ec(e){var n=e.paneId,t=e.isHidden,r=e.dataAtom,i=(0,u.Dv)(r),o=(0,Li.Se)().Content,a=(0,u.b9)(ar),c=function(e){a({fromPaneId:n,data:e})};return(0,l.tZ)(o,{pane:i,options:{paneId:n,isHidden:t,replacePane:c,openPane:c}})}var nc=(0,c.memo)(ec);function tc(){var e=(0,u.b9)(Kn);return(0,l.tZ)(m.G7,{onClick:function(){return e()},css:[m.l0.coverContainer,m.l0.position.fixed,m.l0.backgroundColor.backgroundOverlay]})}var rc=(0,c.memo)(Jl);var ic=t(48505),oc=t(8941),ac=t(56124);function lc(e,n,t){var r=!!/iPad|iPhone|iPod/.test(navigator.platform)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform)?32:0;if(t){var i=2/3,o=Math.max(e.width,r*i),a=Math.max(e.height,r*i),l="left"===t?1:-1,c=n?0:l*(o-e.width)/2,u=n?l*(a-e.height)/2:0;return{width:n?e.width:o,height:n?a:e.height,x:n?e.x:e.x-(o-e.width)/2+c,y:n?e.y-(a-e.height)/2+u:e.y}}var s=Math.max(e.width,r),d=Math.max(e.height,r);return{width:n?e.width:s,height:n?d:e.height,x:n?e.x:e.x-(s-e.width)/2,y:n?e.y-(d-e.height)/2:e.y}}var cc,uc="--grip-color",sc="var(".concat(uc,")"),dc=(0,Ct.iv)((cc={},(0,qn.Z)(cc,uc,w.TV.outlineDimmest),(0,qn.Z)(cc,":active, :hover",(0,qn.Z)({},uc,w.TV.foregroundDefault)),cc)),pc=(0,Ct.iv)([w.l0.position.absolute,w.l0.center,{minWidth:8,minHeight:8},dc]),fc=(0,Ct.iv)({":hover":{transform:"scaleX(4)"}}),vc=(0,Ct.iv)({":hover":{transform:"scaleY(4)"}}),hc=(0,Ct.iv)([w.l0.height("200vh"),w.l0.width("200vw"),{transform:"translate(-50%, -50%)"}]),mc=(0,Ct.iv)([{backgroundColor:sc,transition:"background-color"},w.l0.borderRadius(4)]),gc=(0,Ct.iv)([mc,{transitionDuration:"140ms"}]);function Zc(e){var n=e.snapped,t=e.stacked;return"left"===n?t?(0,l.tZ)(Ur.Z,{color:sc}):(0,l.tZ)(oc.Z,{color:sc}):t?(0,l.tZ)(ac.Z,{color:sc}):(0,l.tZ)(ic.Z,{color:sc})}function yc(e){var n=e.rect,t=e.onPointerDown,r=e.onDoubleClick,i=e.stacked,o=e.snapped,a=e.zIndexHovered,c=e.zIndex,u=e.isActive,s=lc(n,i,o),d=(i?n.width:n.height)<25;return(0,l.BX)(b.Z,{onPointerDown:t,onDoubleClick:r,onContextMenu:function(e){e.preventDefault(),e.stopPropagation()},style:{width:s.width,height:s.height,transform:"translate(".concat(s.x,"px, ").concat(s.y,"px)"),visibility:d?"hidden":void 0,cursor:i?"row-resize":"col-resize"},css:[pc,{zIndex:c},!u&&{":hover":{zIndex:a}}],children:[(0,l.tZ)(b.Z,{css:[w.l0.coverContainer,!u&&(i?vc:fc),u&&hc]}),o?(0,l.tZ)(Zc,{snapped:o,stacked:i}):(0,l.tZ)(b.Z,{className:"grip-line",style:{width:i?25:2,height:i?2:25},css:gc})]})}var bc=t(64824),xc=(0,u.cn)(null,(function(e,n,t){var r=e(jn.g4),i=(0,Gn.ZP)(r,(function(e){Bl(e,{leftPath:t.leftPath,percent:t.percent})}));n(Fn.iH,i)}));function wc(e){var n=e.handleId,t=(0,u.Dv)((0,Xn.vv)(n)),r=(0,u.b9)(Al),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=(0,c.useRef)(e),t=(0,u.b9)(xc),r=(0,bc.lV)((0,c.useCallback)((function(e){return e(jn.g4)}),[]));return(0,c.useCallback)((function(i){i.snapped?t({leftPath:i.leftPath,percent:n.current}):Promise.resolve(r()).then((function(r){var o=(0,rr.KC)(r,i.leftPath);if(!o||!(0,_l.r)(o))throw new Error("Expected split or paneGroup");n.current=o.percent,t({leftPath:i.leftPath,percent:e})}))}),[e,t,r])}(),o=Ml(),a=function(e){var n=e.handleId,t=(0,Kt.Z)((function(){return(0,u.cn)((function(e){var t=e(Nl);return!!t&&n===(0,nl.xH)({leftPath:t.leftPath})}))}),[n]);return(0,u.Dv)(t)}({handleId:n});return(0,l.tZ)(yc,{isActive:a,zIndex:a?o.active:o.normal,zIndexHovered:o.hovered,snapped:t.snapped,rect:t.rect,stacked:t.stacked,onDoubleClick:function(){i(t)},onPointerDown:function(e){ol(e,{start:function(){r({type:"start",leftPath:t.leftPath,stacked:t.stacked})},move:function(e){var n=e.delta;r({type:"update",moveDelta:n})},end:function(){r({type:"end"})}})}})}var kc=(0,c.memo)(wc),Pc=t(62991),Ic=t.n(Pc),Sc=t(45432),Cc=t.n(Sc);class Rc extends c.Component{constructor(e){super(e),this._osInstance=null,this._osTargetRef=c.createRef()}osInstance(){return this._osInstance}osTarget(){return this._osTargetRef.current||null}componentDidMount(){this._osInstance=Cc()(this.osTarget(),this.props.options||{},this.props.extensions),Ec(this._osInstance,this.props.className)}componentWillUnmount(){Cc().valid(this._osInstance)&&(this._osInstance.destroy(),this._osInstance=null)}componentDidUpdate(e){Cc().valid(this._osInstance)&&(this._osInstance.options(this.props.options),e.className!==this.props.className&&Ec(this._osInstance,this.props.className))}render(){const e=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]])}return t}(this.props,["options","extensions","children","className"]);return c.createElement("div",Object.assign({className:"os-host"},e,{ref:this._osTargetRef}),c.createElement("div",{className:"os-resize-observer-host"}),c.createElement("div",{className:"os-padding"},c.createElement("div",{className:"os-viewport"},c.createElement("div",{className:"os-content"},this.props.children))),c.createElement("div",{className:"os-scrollbar os-scrollbar-horizontal "},c.createElement("div",{className:"os-scrollbar-track"},c.createElement("div",{className:"os-scrollbar-handle"}))),c.createElement("div",{className:"os-scrollbar os-scrollbar-vertical"},c.createElement("div",{className:"os-scrollbar-track"},c.createElement("div",{className:"os-scrollbar-handle"}))),c.createElement("div",{className:"os-scrollbar-corner"}))}}function Ec(e,n){if(Cc().valid(e)){const{host:t}=e.getElements(),r=new RegExp(`(^os-host([-_].+|)$)|${e.options().className.replace(/\s/g,"$|")}$`,"g"),i=t.className.split(" ").filter((e=>e.match(r))).join(" ");t.className=`${i} ${n||""}`}}var Tc=t(67003),Dc={overflowBehavior:{y:"hidden"},scrollbars:{autoHide:"leave"}};var Uc=t(53201),Mc=t(47589),_c=t(37432);var Bc=t(1855),Gc=m.KD.button,Nc=(0,Ct.iv)([m.l0.display.inlineFlex,m.l0.height("100%")]),Ac=(0,Ct.iv)([m.l0.cursor.pointer,m.l0.center,m.l0.rowWithGap(4),m.l0.pl(8),m.l0.pr(4),m.l0.height("100%"),{backgroundColor:"transparent",border:"none",font:"inherit",lineHeight:"normal",color:"inherit"}]);function Oc(e){var n=e.onClick;return(0,l.tZ)(m.hU,{tooltipHidden:!0,onClick:n,alt:"Close",size:18,css:[{"&& svg":{width:12,height:12,minWidth:"unset",minHeight:"unset"},borderRadius:6},m.gU.nofill],children:(0,l.tZ)(y.Z,{})})}function jc(e){var n=(0,V.Z)().fs,t=e.split("/"),r=t.pop(),i=t.join("/"),o=(0,c.useState)(!1),a=o[0],l=o[1],u=function(e){var n=e.path,t=e.initialExpanded,r=(0,V.Z)().fs;return(0,_c.Z)({path:n,initialExpanded:t,fs:r})}({path:i.length>0?i:".",initialExpanded:!0}).children,s=null===u||void 0===u?void 0:u.filter((function(e){return e.filename!==r}));return{fileName:r,parentPath:i,renaming:a,siblings:s,handleRename:function(){l(!0)},handleCancel:function(){l(!1)},handleSubmit:function(t){var r=i.length>0?i+"/"+t:t;n.moveFile(e,r),l(!1)}}}function Xc(e){var n=e.filePath,t=e.title,r=e.onClick,i=e.onClose,o=e.isActive,a=e.innerRef,c=e.icon,u=e.onPointerDown,s=jc(n),d=s.fileName,p=s.parentPath,f=s.renaming,v=s.siblings,h=s.handleRename,g=s.handleSubmit,Z=s.handleCancel,y=t.startsWith("History - ")?"History - ".concat(d):t;return(0,l.tZ)(m.u,{tooltip:n,placement:"bottom",isDisabled:!p,children:function(e,n){return(0,l.BX)(m.Tg,(0,ne.Z)((0,R.Z)({innerRef:(0,Bc.l)(a,n),css:[Nc,o?m.gU.filled:m.gU.nofill,o?m.l0.color.foregroundDefault:m.l0.color.foregroundDimmer,m.l0.flex.row,m.l0.align.center,m.l0.pr(4)]},e),{children:[f?(0,l.tZ)(Mc.Z,{onSubmit:g,onCancel:Z,loading:!1,siblings:v||[],parentPath:p,type:rt.Tv.File,initialValue:d,rename:!0}):(0,l.BX)(Gc,{onPointerDown:u,onDoubleClick:h,css:[Ac],onClick:r,children:[(0,l.tZ)(m.G7,{css:{opacity:o?1:.6},children:c||null}),(0,l.tZ)(m.xv,{children:y})]}),(0,l.tZ)(Oc,{onClick:i})]}))}})}function Lc(e){var n=e.title,t=e.onClick,r=e.onClose,i=e.isActive,o=e.innerRef,a=e.icon,c=e.onPointerDown;return(0,l.BX)(m.Tg,{innerRef:o,css:[Nc,i?m.gU.filled:m.gU.nofill,i?m.l0.color.foregroundDefault:m.l0.color.foregroundDimmer,m.l0.flex.row,m.l0.align.center,m.l0.pr(4)],children:[(0,l.BX)(Gc,{css:[Ac],onClick:t,onPointerDown:c,children:[(0,l.tZ)(m.G7,{css:{opacity:i?1:.6},children:a||null}),(0,l.tZ)(m.xv,{children:n})]}),(0,l.tZ)(Oc,{onClick:r})]})}var zc=m.KD.div;function Fc(e){var n=e.paneId,t=e.isActive,r=e.onClick,o=e.onClose,a=e.dragGroup,s=(0,Kt.Z)((function(){return(0,u.cn)((function(e){return e(e((0,Xn.z)(n)).data)}))}),[n]),d=(0,u.Dv)(s),p=(0,Li.Se)(),f=p.getTitle(d),v=p.Icon({pane:d,size:16}),h=(0,c.useRef)(null),g=(0,i.Z)((0,Uc.c)({type:Wl.z.Pane,item:function(){var e,t=(null===(e=h.current)||void 0===e?void 0:e.getBoundingClientRect().width)||80;return{type:Wl.z.Pane,paneId:n,width:t}},collect:function(e){return{isDragging:e.isDragging()}}}),2),Z=g[0].isDragging,y=g[1],b=(0,u.b9)(ir.c);(0,c.useEffect)((function(){return b(Z)}),[b,Z]);var x,w=Rl({activePaneId:n}).dnd,k=w&&a?function(e){1!==e.button&&ol(e,{start:w.start,move:w.update,end:w.end})}:void 0;return(0,l.tZ)(zc,{css:Z?[m.l0.width(0),m.l0.visibility.hidden]:[m.l0.px(2)],onMouseDown:function(e){1===e.button&&o()},children:(0,or.KM)(d)?(0,l.tZ)(Xc,{onPointerDown:k,innerRef:k?void 0:(0,Bc.l)(y,h),filePath:null!==(x=d.data.path)&&void 0!==x?x:"",title:f,isActive:t,icon:v,onClick:function(){(0,S.j)(S.U3.WS_TAB_OPENED,{paneType:d.type}),r()},onClose:function(){(0,S.j)(S.U3.WS_TAB_CLOSED,{paneType:d.type}),o()}}):(0,l.tZ)(Lc,{onPointerDown:k,innerRef:k?void 0:(0,Bc.l)(y,h),title:f,isActive:t,icon:v,onClick:function(){(0,S.j)(S.U3.WS_TAB_OPENED,{paneType:d.type}),r()},onClose:function(){(0,S.j)(S.U3.WS_TAB_CLOSED,{paneType:d.type}),o()}})})}function Hc(){var e=(0,E.Z)(["\n  query ReplEnvironmentHeaderContainer($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        language\n      }\n    }\n  }\n"]);return Hc=function(){return e},e}var Wc={},$c=(0,T.Ps)(Hc());var Vc=t(25386);function Kc(){var e=(0,V.Z)().presence,n=(0,i.Z)(c.useState(e.getFollowingUsers()),2),t=n[0],r=n[1];return c.useEffect((function(){return r(e.getFollowingUsers()),e.onFollowingUsersChanged((function(e){r(e.followingUsers)}))}),[e]),t}function qc(){var e=Kc();return 0===e.length?null:1===e.length?(0,l.tZ)(Yc,{user:e[0]}):(0,l.BX)("div",{className:"jsx-4f2e88846001c10e followed-indicator",children:[(0,l.BX)(dn.Z,{children:[e.length," users are observing you"]}),(0,l.tZ)(Q(),{id:"4f2e88846001c10e",children:".followed-indicator.jsx-4f2e88846001c10e{white-space:nowrap;height:100%;max-width:100%;width:-webkit-max-content;width:-moz-max-content;width:max-content;padding-left:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}"})]})}function Yc(e){var n=e.user,t=(0,J.qC)({variables:{ids:[n.id]},ssr:!1}).data;if(!t)return null;var r=t.usersByIds,o=(0,i.Z)(r,1)[0].image,a=n.id,c=n.username,u=n.color;return(0,l.BX)("div",{className:"jsx-add9eb548244268a followed-indicator",children:[(0,l.BX)(tn.Ug,{wrap:"nowrap",align:"center",className:"stack",spacing:"var(--space-4)",children:[(0,l.tZ)(ie,{id:a,username:c,image:o,color:u,size:22}),(0,l.tZ)(dn.Z,{className:"username",children:c}),(0,l.tZ)("div",{className:"jsx-add9eb548244268a text",children:(0,l.tZ)(dn.Z,{children:"is observing you"})})]}),(0,l.tZ)(Q(),{id:"add9eb548244268a",children:".followed-indicator.jsx-add9eb548244268a{height:100%;max-width:100%;width:-webkit-max-content;width:-moz-max-content;width:max-content;padding-left:var(--space-8)}.text.jsx-add9eb548244268a{white-space:nowrap}.followed-indicator.jsx-add9eb548244268a .stack{height:100%}.followed-indicator.jsx-add9eb548244268a .username{overflow:clip;max-width:150px;display:inline-block;-o-text-overflow:ellipsis;text-overflow:ellipsis}"})]})}function Qc(e){var n=e.id,t=e.username,r=e.color,o=(0,V.Z)().presence,a=(0,J.qC)({variables:{ids:[n]},ssr:!1}).data;if(!a)return null;var c=a.usersByIds,u=(0,i.Z)(c,1)[0].image;return(0,l.BX)("div",{className:Q().dynamic([["48dd00c96a834430",[r]]])+" following-indicator",children:[(0,l.BX)(tn.Ug,{wrap:"nowrap",className:"stack",spacing:"var(--space-4)",children:[(0,l.tZ)(tn.gC,{className:"stack",align:"center",justify:"center",children:(0,l.tZ)(ie,{id:n,username:t,image:u,color:r,size:22})}),(0,l.tZ)(tn.gC,{className:"text-container",align:"center",justify:"center",children:(0,l.BX)(dn.Z,{className:"following-text",children:["Observing ",t]})}),(0,l.tZ)(tn.gC,{className:"stack",align:"center",justify:"center",children:(0,l.BX)(mn.Z,{size:"small",filled:!1,border:!1,textColor:r,onClick:function(){o.unfollowUser()},children:[(0,l.tZ)(ge.T,{children:"stop observing"}),(0,l.tZ)(y.Z,{})]})})]}),(0,l.tZ)(Q(),{id:"48dd00c96a834430",dynamic:[r],children:".following-indicator.__jsx-style-dynamic-selector{height:100%;max-width:100%;width:-webkit-max-content;width:-moz-max-content;width:max-content;padding-left:var(--space-8)}.following-indicator.__jsx-style-dynamic-selector .stack{height:100%;max-width:100%;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;overflow:clip}.following-indicator.__jsx-style-dynamic-selector .text-container{height:100%;margin-right:-2px}.following-indicator.__jsx-style-dynamic-selector .following-text{color:".concat(r,";white-space:nowrap}")})]})}var Jc=t(22414);var eu=t(86601);function nu(e){var n=e.activeFile,t=e.paneId,r=function(e){var n=(0,R.Z)({},Wc,e);return A.a($c,n)}({variables:{replId:(0,he.Z)()}}).data,i="Repl"===(null===r||void 0===r?void 0:r.repl.__typename)?r.repl.language:"",o=(0,u.Dv)(ir.bg),a=(0,u.b9)(ir.ao),s=(0,u.b9)(ir.Ky),d=n&&(0,it.gK)(n),p=function(e){var n=e.paneId,t=(0,eu.Z)(),r=(0,Hn.cr)({paneId:n});return t&&r?t:null}({paneId:t}),f=function(e){var n=e.paneId,t=Kc();return(0,Hn.cr)({paneId:n})&&t.length>0?t:null}({paneId:t}),v=function(){var e=(0,Vt.Z)((0,u.Dv)(Jc.$));return(0,c.useCallback)((function(){setTimeout((function(){var n;return null===(n=e.current)||void 0===n?void 0:n.focus()}),0)}),[e])}(),h=(0,Hn.cr)({paneId:t}),g=null;return p?g=(0,l.tZ)(Qc,{id:p.id,username:p.username,color:p.color}):d&&n?g=o?(0,l.tZ)(m.zx,{css:{backgroundColor:"transparent"},iconLeft:(0,l.tZ)(on.Z,{}),text:"Close preview",onClick:function(){a({type:"markdown"}),v()}}):(0,l.tZ)(m.zx,{css:{backgroundColor:"transparent"},iconLeft:(0,l.tZ)(rn.Z,{}),text:"Open preview",onClick:function(){n&&(s({type:"markdown",data:{path:n}}),v())}}):n&&(g=(0,l.tZ)(Vc.Z,{filePath:n,replLanguage:i,disableKeyboardShortcut:!h})),null!==g||f?(0,l.BX)(m.G7,{css:[m.l0.px(4),m.l0.rowWithGap(8)],children:[f&&n?(0,l.tZ)(qc,{}):null,g]}):null}var tu=t(59369),ru=t(89295),iu=t(94860),ou=t(73148),au=t(87534),lu=t(99932),cu=t(90849),uu=t(87671),su=t(66843),du=(0,u.cn)(null,(function(e,n,t){var r=e(jn.g4),i=e((0,Xn.z)(t)),o=i.rectAtom,a=i.type,l=e(o),c=(0,rr.Rh)(r,t);if(!c){var u=new Error("Expected pane");throw n(Wn.xm,{error:u}),u}if("tile"!==a){var s=e(Xn.Eh).filter((function(e){return"tile"===e.type&&!e.isHidden})),d=e(Xn.M0),p={x:l.x+l.width/2,y:l.y+l.height/2},f=s.find((function(n){var t=e(n.rectAtom);return(0,nl.V0)(p,{x:t.x,y:t.y-d,width:t.width,height:t.height+d})})),v="leftOf";f&&(v=(0,nl.QN)(p,e(f.rectAtom)).placement),n(Fn.iH,(0,Gn.ZP)(r,(function(e){!function(e,n){var t=n.paneGroupPath,r=n.placement,i=n.to,o=(0,rr.KC)(e,t);if("floatingPaneGroup"!==(null===o||void 0===o?void 0:o.type))throw new Error("Expected floatingPaneGroup");(0,yl.Z)(e,t),null!==i?(0,On.m)(e,{id:o.id,relativeTo:i,panes:o.panes,activeIndex:o.activeIndex,placement:r}):e.tiling={id:o.id,panes:o.panes,percent:100,type:"paneGroup",activeIndex:o.activeIndex}}(e,{paneGroupPath:c.paneGroupPath,to:(null===f||void 0===f?void 0:f.paneId)||["tiling"],placement:v})})))}else n(Fn.iH,(0,Gn.ZP)(r,(function(e){bl(e,{paneGroupPath:c.paneGroupPath,rect:{x:l.x-16,y:l.y-16,width:l.width,height:l.height}})})))}));var pu=t(90145);function fu(e){var n=e.paneId,t=(0,u.b9)(du),r=(0,uu.e3)(),i=(0,uu.CK)(),o=(0,uu.Bd)(),a=function(e){var n=e.paneId,t=(0,Kt.Z)((function(){return(0,u.cn)((function(e){return"floating"===e((0,Xn.z)(n)).type}))}),[n]);return(0,u.Dv)(t)}({paneId:n}),c=gl(),s=c.maximizePane,d=c.restoreMaximizedPane,p=ml(n);if(p)return(0,l.tZ)(m.hU,{onClick:function(){return d()},alt:p?"Restore":"Fullscreen",children:(0,l.tZ)(iu.Z,{})});var f={label:"Maximize",icon:(0,l.tZ)(ru.Z,{}),run:function(){return s(n)}},v=a?[f]:[{label:"Insert Left",icon:(0,l.tZ)(au.Z,{}),run:function(){o({placement:"leftOf",paneId:n}),(0,S.j)(S.U3.WS_SPLIT_USED,{action:"opened",placement:"leftOf"})}},{label:"Insert Right",icon:(0,l.tZ)(lu.Z,{}),run:function(){o({placement:"rightOf",paneId:n}),(0,S.j)(S.U3.WS_SPLIT_USED,{action:"opened",placement:"rightOf"})}},{label:"Insert Up",icon:(0,l.tZ)(cu.Z,{}),run:function(){o({placement:"above",paneId:n}),(0,S.j)(S.U3.WS_SPLIT_USED,{action:"opened",placement:"above"})}},{label:"Insert Down",icon:(0,l.tZ)(ou.Z,{}),run:function(){o({placement:"below",paneId:n}),(0,S.j)(S.U3.WS_SPLIT_USED,{action:"opened",placement:"below"})}},f];return(r||a)&&(v.splice(v.length-1,0,{label:a?"Unfloat":"Float",icon:a?(0,l.tZ)(pu.Z,{}):(0,l.tZ)(su.Z,{}),run:function(){t(n)}}),v.push({label:"Close",icon:(0,l.tZ)(y.Z,{}),run:function(){i(n),(0,S.j)(S.U3.WS_SPLIT_USED,{action:"closed"})}})),(0,l.tZ)(tu.Z,{resetOnSelect:!0,label:"Pane Actions",items:v,onItemClick:function(e){e.run()}})}var vu=(0,c.memo)(fu),hu=m.KD.div,mu=(0,Ct.iv)([m.l0.flex.growAndShrink(1),m.l0.minWidth(16),m.l0.height("100%")]);function gu(e){var n=e.paneId,t=Rl({activePaneId:n}),r=t.isDragging,i=t.dnd,o=gl().toggleMaximized;if(!i)return null;var a=r?"grabbing":"grab";return(0,l.tZ)(hu,{onDoubleClick:function(){o(n)},css:[mu],style:{cursor:a},onPointerDown:function(e){ol(e,{start:i.start,move:i.update,end:i.end})}})}function Zu(e){var n=e.paneId,t=e.onChange,r=(0,Kt.Z)((function(){return(0,u.cn)((function(e){var t=e((0,Xn.z)(n));return e(t.rectAtom).width}))}),[n]),i=(0,u.Dv)(r),o=(0,Vt.Z)(t),a=(0,Kt.Z)((function(){return(0,il.Z)((function(){o.current()}),500)}),[o]);return(0,c.useEffect)(a,[i,a]),null}function yu(e){var n=(0,Xn.Xs)(e),t=(0,Kt.Z)((function(){return(0,u.cn)((function(e){var t=e(n);return e((0,Xn.z)(t.panes[t.activeIndex])).paneId}))}),[n]);return(0,u.Dv)(t)}function bu(e){var n=e.headerId,t=(0,u.b9)(ir.Oe),r=(0,u.b9)(ir.Et),o=(0,u.b9)(ir.SG),a=(0,u.b9)(Ln.U),s=(0,u.Dv)(ir.c),d=function(e){var n=(0,Xn.Xs)(e),t=(0,u.Dv)((0,Kt.Z)((function(){return(0,u.cn)((function(e){return e(n).activeIndex}))}),[n])),r=(0,u.Dv)((0,Kt.Z)((function(){return(0,bc.kv)(n,(function(e){return e.path}),Ic())}),[n])),i=(0,u.Dv)((0,Kt.Z)((function(){return(0,bc.kv)(n,(function(e){return e.panes}),Ic())}),[n])),o=yu(e),a=(0,Kt.Z)((function(){return(0,u.cn)((function(e){var t=e(n),r=e((0,Xn.z)(t.panes[t.activeIndex])),i=e(r.data);return(0,or.KM)(i)?(0,or.DQ)(i):null}))}),[n]);return{activeIndex:t,path:r,panes:i,activeTabPaneId:o,activeFile:(0,u.Dv)(a)}}(n),p=d.activeIndex,f=d.path,v=d.panes,h=d.activeTabPaneId,g=d.activeFile,Z=function(){var e,n=(0,c.useRef)(null),t=null===(e=n.current)||void 0===e?void 0:e.osInstance(),r=(0,c.useRef)(0),i=(0,c.useRef)(0),o=(0,Tc.Fg)().isDarkColorScheme;return{options:Dc,handleWheel:function(e){if(t&&0!==e.deltaY&&0===e.deltaX){var n=e.deltaY<0?-1:1,o=i.current!==n?t.scroll().position.x:r.current,a=25*n,l=t.scroll().max.x;r.current=Math.max(0,Math.min(l,o-a)),i.current=n;var c=function(){if(t){var e=t.scroll().position.x,n=r.current-e,i=Math.round(e+n/10);0!==n&&(t.scroll({x:i}),window.requestAnimationFrame(c))}};window.requestAnimationFrame(c)}},ref:n,className:o?"os-theme-light":"os-theme-dark",update:(null===t||void 0===t?void 0:t.update)?function(){return t.update()}:null}}(),y=(0,i.Z)((0,Na.L)({accept:[rt.Tv.File,Wl.z.Pane,Wl.z.NewPane],hover:function(e,n){var t=n.getSourceClientOffset();t&&P({item:e,panes:v,sourceClientOffset:t.x})},collect:function(e){return{isOver:e.isOver()}},drop:function(e,n){if(!n.didDrop()){var t=null!==(null===I||void 0===I?void 0:I.index)?null===I||void 0===I?void 0:I.index:v.length;if(e.type!==rt.Tv.File)if(e.type!==Wl.z.NewPane){var i=v.includes(e.paneId)?v.length-1:v.length;o({paneId:e.paneId,index:void 0!==t&&t<i?t:i,toPaneGroupPath:f})}else r({activate:!0,paneGroupPath:f,index:t,pane:e.pane});else r({activate:!0,paneGroupPath:f,index:t,pane:{type:"codeEditor",data:{path:e.path}}})}}}),2),b=y[0],x=y[1],w=function(e){var n=e.isOver,t=(0,c.useState)(null),r=t[0],i=t[1],o=(0,c.useRef)(null),a=(0,c.useRef)([]);(0,c.useEffect)((function(){if(!n)return a.current=[],void i(null);o.current&&(a.current=(0,Ie.Z)(o.current.children).map((function(e){var n=e.getBoundingClientRect();return n.x+n.width/2})))}),[n]);var l=(0,c.useCallback)((function(e){if(0!==a.current.length){var n=e.item.type===Wl.z.Pane?e.item:null,t=(null===n||void 0===n?void 0:n.paneId)||null,r=t?e.panes.indexOf(t):-1,o=(null===n||void 0===n?void 0:n.width)||80,l=a.current.map((function(e,n){return-1===r||r<n?e:e+o/2})).findIndex((function(n){return n>e.sourceClientOffset})),c=-1===l,u=-1===r?e.panes.length:e.panes.length-1;i({index:c?u:Math.min(l,u),paneId:t,width:o})}}),[]);return{tabContainerRef:o,hover:l,dropState:r}}({isOver:b.isOver}),k=w.tabContainerRef,P=w.hover,I=w.dropState,S=I?I.index:null;if((null===I||void 0===I?void 0:I.paneId)&&null!==S){var C=v.indexOf(I.paneId);C>-1&&C<S&&S++}var R=I&&null!==S?(0,Ie.Z)(v.slice(0,S)).concat([I],(0,Ie.Z)(v.slice(S))):v;return(0,l.BX)(l.HY,{children:[(0,l.BX)(m.G7,{css:[m.l0.rowWithGap(2),m.l0.flex.growAndShrink(1),m.l0.align.center,m.l0.height("100%")],innerRef:x,children:[(0,l.tZ)(m.G7,{css:[m.l0.flex.row,m.l0.flex.shrink(1),m.l0.align.center,m.l0.height("100%")],children:(0,l.tZ)(Rc,{style:{height:"100%",width:"100%"},className:Z.className,options:{overflowBehavior:{y:"hidden"},scrollbars:{autoHide:"leave",visibility:s?"hidden":"auto"}},onWheel:Z.handleWheel,ref:Z.ref,children:(0,l.tZ)(m.G7,{innerRef:k,css:[m.l0.flex.row,m.l0.height("100%"),m.l0.py(4),m.l0.px(2)],children:R.map((function(e,n){var r=p===n;return"string"!==typeof e?(0,l.tZ)(m.G7,{css:[m.l0.px(2)],children:(0,l.tZ)(m.G7,{css:[m.l0.borderRadius(8),m.l0.width(e.width),m.l0.height(28),m.l0.backgroundColor.accentPrimaryDimmest,{border:"1px dashed ".concat(m.TV.accentPrimaryDefault)}]})},"preview"):(0,l.tZ)(Fc,{dragGroup:1===v.length,paneId:e,isActive:r,onClick:function(){t(e)},onClose:function(){a(e)}},e)}))})})}),(0,l.tZ)(m.hU,{alt:"New tab",tooltipHidden:!0,onClick:function(){r({paneGroupPath:f,activate:!0,pane:{type:"commands",data:{autoFocus:!0}}})},children:(0,l.tZ)(un.Z,{})}),(0,l.tZ)(gu,{paneId:h})]}),(0,l.tZ)(nu,{headerId:n,paneId:h,activeFile:g}),(0,l.tZ)(m.G7,{css:m.l0.px(4),children:(0,l.tZ)(vu,{paneId:h})}),Z.update?(0,l.tZ)(Zu,{paneId:h,onChange:Z.update}):null]})}var xu=(0,c.memo)(bu),wu=(0,Ct.iv)([m.l0.borderRadius(8,8,0,0),m.l0.position.absolute,m.l0.flex.row,m.l0.align.center],{borderBottom:"1px solid ".concat(m.TV.backgroundHigher)}),ku=["top","right","left","topRight","topLeft"];function Pu(e){var n=e.headerId,t=function(e){var n=e.headerId,t=(0,Xn.Xs)(n),r=(0,Kt.Z)((function(){return(0,u.cn)((function(e){return"floating"===e(t).path[0]}))}),[t]);return(0,u.Dv)(r)}({headerId:n}),r=yu(n),i=(0,u.b9)(rl);return t?(0,l.tZ)(l.HY,{children:ku.map((function(e){return(0,l.tZ)(Wa,{size:8,edge:e,onPointerDown:function(n){ol(n,{start:function(){i({type:"start",paneId:r,edge:e})},move:function(e){var n=e.delta;i({type:"update",moveDelta:n})},end:function(){i({type:"end"})}})}},e)}))}):null}var Iu=(0,c.memo)(Pu);function Su(e){var n=e.headerId,t=(0,Xn.Xs)(n),r=yu(n),i=ml(r),o=(0,Kt.Z)((function(){return(0,u.cn)((function(e){return e(e(t).rectAtom)}))}),[t]),a=(0,u.Dv)(o),c=function(e){var n=(0,Kt.Z)((function(){return(0,u.cn)((function(n){var t=n((0,Xn.z)(e)),r=e===n(Hn.J1);return n(ul)===e?Ul.maximizedHeader:e===n(Pl)?Ul.draggingHeader:"floating"===t.type?r?Ul.floatingHeaderActive:Ul.floatingHeader:Ul.tiledHeader}))}),[e]);return(0,u.Dv)(n)}(r),s=Cl({paneId:r}),d=i||a,p=Sl({paneId:r});return(0,l.BX)(m.Tg,{elevated:!0,css:wu,style:{transform:s?"scale(".concat(s.scale,")"):void 0,transformOrigin:s?"".concat(s.originX," bottom"):void 0,width:d.width,height:d.height,top:Math.round(d.y),left:Math.round(d.x),zIndex:c,transitionProperty:p?"all":void 0,transitionDuration:p?"140ms":void 0,transitionTimingFunction:p?"ease-out":void 0},children:[(0,l.tZ)(xu,{headerId:n}),(0,l.tZ)(Iu,{headerId:n})]})}var Cu=(0,c.memo)(Su);function Ru(){var e=(0,Zl.K)(),n=(0,u.Dv)(jn._E),t=function(){var e=(0,Kt.Z)((function(){return(0,u.cn)((function(e){var n=e(Zl.m);return"detachPreview"===(null===n||void 0===n?void 0:n.type)?Ul.detachPreview:Ul.dropPreview}))}),[]);return(0,u.Dv)(e)}();if(!e)return null;var r=e.rect,i="detachPreview"===e.type?e.progress:1,o="detachPreview"===e.type?e.rect.height:8,a="detachPreview"===e.type&&i<.98?w.TV.foregroundDefault:w.TV.accentPrimaryDefault,c="detachPreview"===e.type?void 0:w.TV.accentPrimaryDimmer;return(0,l.tZ)("div",{style:{position:"absolute",border:"1px ".concat(i<.98?"dashed":"solid"),pointerEvents:"none",width:r.width,height:r.height,backgroundColor:c,borderColor:a,borderRadius:o,zIndex:t,opacity:"detachPreview"===e.type?.5*i:.2,transform:"translate(".concat(Math.round(r.x),"px, ").concat(Math.round(r.y),"px)"),transition:n?"transform 140ms, width 140ms, height 140ms, border-radius 140ms":void 0},children:"detachPreview"===e.type?(0,l.tZ)(Eu,{progress:i}):null})}function Eu(e){var n=e.progress;return(0,l.tZ)("div",{style:{width:"100%",height:"100%",transform:"scale(".concat(n,")"),background:"radial-gradient(transparent, ".concat(w.TV.backgroundHighest,")"),borderRadius:"100%"}})}var Tu=(0,c.memo)(Ru),Du=t(96189);var Uu=t(92364);function Mu(){var e=(0,E.Z)(["\n  query BrowserNotifications($username: String!) {\n    user: userByUsername(username: $username) {\n      id\n      image\n    }\n  }\n"]);return Mu=function(){return e},e}var _u=(0,T.Ps)(Mu());function Bu(e){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,r.Z)(a().mark((function e(n){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==sr.l){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,sr.l.query({query:_u,variables:{username:n}});case 5:return r=e.sent.data,e.abrupt("return",null===r||void 0===r||null===(t=r.user)||void 0===t?void 0:t.image);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nu(){return"Notification"in window?"true"===Yn.Z.get(Lu,"string")?"dismissed":window.Notification.permission:"denied"}function Au(){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,window.Notification.requestPermission().then(),e.next=7;break;case 4:return e.prev=4,e.t0=e.catch(0),e.abrupt("return",new Promise((function(e){window.Notification.requestPermission((function(n){e(n)}))})));case 7:return e.abrupt("return",window.Notification.requestPermission());case 8:case"end":return e.stop()}}),e,null,[[0,4]])})))).apply(this,arguments)}function ju(){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,r.Z)(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Au();case 2:n=e.sent,zu(!1),(0,S.j)("granted"===n?S.U3.WEB_NOTIFICATION_PERM_GRANTED:S.U3.WEB_NOTIFICATION_PERM_DENIED);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Lu="notifications/dismissedModal";function zu(e){Yn.Z.set(Lu,String(e)),e&&(0,S.j)(S.U3.WEB_NOTIFICATION_PERM_DISMISSED_MODAL)}var Fu={};function Hu(){return(Hu=(0,r.Z)(a().mark((function e(n){var t,r,i,o,l,c,u,s,d,p,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.title,r=n.body,i=n.badge,o=n.icon,l=n.iconByUsername,c=n.tag,u=n.onClick,s=n.cacheDuration,d=void 0===s?0:s,document.hidden||!document.hasFocus()){e.next=3;break}return e.abrupt("return");case 3:if("granted"===Nu()){e.next=5;break}return e.abrupt("return");case 5:if(p=Date.now(),!(c in Fu)){e.next=9;break}if(!(Fu[c]+d>p)){e.next=9;break}return e.abrupt("return");case 9:if(!l){e.next=13;break}return e.next=12,Bu(l);case 12:o=e.sent;case 13:f=new window.Notification(t,{body:r,badge:i||"/public/images/logo-grayscale.png",icon:o||"/public/images/icon-square.png",tag:c}),setTimeout((function(){f.close()}),1e4),f.addEventListener("click",(function(){window.focus(),f.close()})),u&&f.addEventListener("click",u),Fu[c]=p;case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Wu=t(20431);var $u=44100,Vu=32896,Ku=function e(){var n=this;(0,_a.Z)(this,e),this.audioStart=0,this.feed=function(e){var t=n.getFormatedValue(e),r=new Float32Array(n.samples.length+t.length);r.set(n.samples,0),r.set(t,n.samples.length),n.samples=r},this.getFormatedValue=function(e){for(var n=new Float32Array(e.length),t=0;t<e.length;t++)n[t]=e[t]/2147483648;return n},this.stop=function(){if(n.bufferSource)try{n.bufferSource.stop()}catch(e){if("InvalidStateError"!==e.name&&"RangeError"!==e.name)throw e}},this.flush=function(e){if(n.audioCtx&&n.samples.length){var t=0,r=n.audioCtx.currentTime;if(0===e)n.startTime=r,n.audioStart=r;else{for(var i=r-n.audioStart,o=Math.floor(i*$u);o>e-Vu;)n.audioStart+=.7459410430839002,o-=Vu;o>e&&(t=o-e,n.startTime=r),n.startTime=r}n.samples=n.samples.slice(t,n.samples.length);for(var a,l,c,u=n.audioCtx.createBufferSource(),s=n.samples.length/1,d=n.audioCtx.createBuffer(1,s,$u),p=0;p<1;p++)for(a=d.getChannelData(p),l=p,c=0;c<s;c++)a[c]=n.samples[l],l+=1;n.startTime<n.audioCtx.currentTime&&(n.startTime=n.audioCtx.currentTime),u.buffer=d,u.connect(n.gainNode),u.start(n.startTime),n.stop(),n.bufferSource=u,n.startTime+=d.duration,n.samples=new Float32Array}},this.samples=new Float32Array;var t=window.AudioContext||window.webkitAudioContext;this.audioCtx=new t,this.gainNode=this.audioCtx.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioCtx.destination),this.startTime=this.audioCtx.currentTime};function qu(e){var n=e.container,t=(0,c.useState)(!1),r=t[0],i=t[1],o=(0,c.useRef)(null);(0,c.useEffect)((function(){return n.openChannel({name:"audio",service:"audio"},(function(e){var n=e.channel;if(n){var t=null,r=!1;return n.onCommand((function(e){var n;r||(r=!0,(0,S.j)(S.U3.AUDIO_PLAYING_STARTED),o.current=function(){t=new Ku,o.current=null},i(!0)),t&&(null===e||void 0===e||null===(n=e.audio2)||void 0===n?void 0:n.data)&&(e.audio2.samples||(e.audio2.samples=0),t.feed(Int32Array.from(e.audio2.data)),t.flush(e.audio2.samples))})),function(){i(!1),t&&(t.stop(),t=null),o.current=null}}}))}),[n]);var a=function(){i(!1),(0,S.j)(S.U3.AUDIO_PROMPT_CLOSED,{accepted:!1})};return(0,l.tZ)(m.u_,{isOpen:r,onRequestClose:a,children:(0,l.BX)(m.G7,{css:[m.l0.colWithGap(24)],children:[(0,l.tZ)(m.h4,{variant:"headerDefault",level:1,children:"We hear audio!"}),(0,l.BX)(m.G7,{css:[m.l0.colWithGap(8)],children:[(0,l.tZ)(m.xv,{multiline:!0,children:"Hey! It appears that this Repl is playing audio."}),(0,l.tZ)(m.xv,{multiline:!0,children:"In order for us to hear the audio you\u2019re receiving, please click confirm."})]}),(0,l.BX)(m.G7,{css:[m.l0.rowWithGap(12),m.l0.justify.end],children:[(0,l.tZ)(m.zx,{onClick:a,text:"Cancel"}),(0,l.tZ)(m.zx,{colorway:"positive",onClick:function(){i(!1),(0,S.j)(S.U3.AUDIO_PROMPT_CLOSED,{accepted:!0}),o.current&&o.current()},text:"Confirm",iconLeft:(0,l.tZ)(k.Z,{})})]})]})})}var Yu=t(51995),Qu=t(91082),Ju=t(48920),es=t(11070),ns={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:"Enter"};function ts(){var e=(0,u.b9)(wt),n=(0,c.useState)(!1),t=n[0],r=n[1],i=(0,Ji.A)(),o=(0,V.Z)(),a=o.fs,s=o.container,d=o.runner,p=(0,q.L7)(d),f=(0,eo.T)(),v=(0,pr.C)();(0,Tr.x)(yt,{run:e}),(0,Tr.x)(zi.q,{run:function(){e(zi.i({openFile:v,fs:a,shouldHideFile:f,getRecentFiles:i}))}}),(0,Tr.x)(Yi,{run:function(){e(Qi({container:s}))}}),Pr(zi.i({openFile:v,fs:a,shouldHideFile:f,getRecentFiles:i}));var h=(0,Yt.Q)("flagGhostrunner");return Pr(Qi({container:s,activeOnly:h})),Pr({match:Rr.pl,data:{type:"action",icon:(0,l.tZ)(Yu.Z,{}),label:"Run",description:"Run Repl",run:function(){d.run()},keyboardShortcut:ns}},{enabled:p===Ju.A.IDLE}),(0,Tr.x)(ns,{run:function(){p===Ju.A.RUNNING&&d.stopRun(),d.run()},enabled:p!==Ju.A.OFFLINE}),Pr({match:Rr.pl,data:{type:"action",icon:(0,l.tZ)(Qu.Z,{}),label:"Stop",description:"Stop Repl",run:function(){d.stopRun()}}},{enabled:p===Ju.A.RUNNING}),Pr({match:(0,Rr.zf)({defaultScore:.5}),data:{type:"action",label:"Create",icon:(0,l.tZ)(un.Z,{}),description:"Create a new Repl",run:function(){r(!0)}}}),(0,l.tZ)(Z.Z,{isOpen:t,onRequestClose:function(){return r(!1)},maxWidth:600,centered:!0,children:(0,l.tZ)(es.Z,{})})}var rs=(0,c.memo)(ts),is=t(502),os=t(31066);function as(){var e=(0,E.Z)(["\n  query ContentsDiverged {\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n    }\n  }\n"]);return as=function(){return e},e}var ls={},cs=(0,T.Ps)(as());var us=t(41709);function ss(){var e,n=(0,V.Z)().fs,t=(0,c.useRef)(new Map),i=(0,tt.Z)(),o=(0,c.useState)(!1),s=o[0],d=o[1],p=(0,c.useState)(!1),f=p[0],v=p[1],h=(0,c.useState)([]),g=h[0],Z=h[1],y=function(e){var n=(0,R.Z)({},ls,e);return A.a(cs,n)}().data,b=(null===y||void 0===y||null===(e=y.currentUser)||void 0===e?void 0:e.isAdmin)||window.location.search.includes("debug=1"),w=(0,Wn.IY)(),k=(0,u.b9)(ir.a4),P=g.map((function(e){return e.path})).map((function(e){return{title:e,path:e}})),I=(0,c.useState)(),C=I[0],E=I[1];(0,c.useEffect)((function(){if(i&&!t.current.has(i)&&i!==os.rq){var e=function(e){k(e),t.current.delete(i),Z((function(e){return e.filter((function(e){return e.path!==i}))}))};(0,it.Mb)(i)?n.watchOtFile(i,{onMoveOrDelete:e,onError:function(e,t){e.code||(n.flush(),n.persist({skipDebounce:!0}),w({error:e,extras:t,tags:{ot:!0}}))},onReconnectFail:function(e,n){Z((function(t){return(0,Ie.Z)(t).concat([{path:i,prompt:n,cb:e}])})),d(!0),C||E(i)}}):n.watchFile(i,{onChange:function(){},onMoveOrDelete:e}),t.current.set(i,!0)}}),[i,n,w,k]);var T,D,U=function(){var e=(0,r.Z)(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,S.j)(S.U3.FILE_RECONNECT_FALLBACK_CHOSEN,{choice:n}),(0,S.j)(S.U3.CONTENTS_DIVERGED_ACTION,{action:"local"===n?"client":"server"}),v(!0),e.next=5,Promise.all(g.map((function(e){return Z((function(n){var t=n.filter((function(n){return n.path!==e.path}));return 0===t.length?d(!1):E(t[0].path),t})),e.cb(n)})));case 5:v(!1);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),M=C?g.find((function(e){return e.path===C})):null,_=null===M||void 0===M?void 0:M.prompt,B=C,G=(0,us.J)({left:{code:null!==(T=null===_||void 0===_?void 0:_.localContent)&&void 0!==T?T:"",filePath:B},right:{code:null!==(D=null===_||void 0===_?void 0:_.remoteContent)&&void 0!==D?D:"",filePath:B}}),N=G.left,O=G.right,j=[m.l0.minHeight("7em"),m.l0.maxHeight("50vh"),m.l0.overflowY("auto"),{"> div":{display:"flex",alignItems:"stretch",width:"100%",height:"100%"},"> div > .cm-editor":{flex:"1 1 auto",width:"100%"}}];return(0,l.tZ)(m.u_,{css:[{maxHeight:"90%",maxWidth:"90%"}],preventClose:!0,isOpen:s,onRequestClose:function(){},children:(0,l.BX)(m.G7,{css:[m.l0.colWithGap(24)],children:[(0,l.tZ)(x.h,{level:3,variant:"headerDefault",children:"Replit is out of sync!"}),(0,l.BX)(x.x,{multiline:!0,children:["Sometimes Replit has trouble making sure everyone's code is the same. Let us know which version of"," ",g.length>1?"these files":"this file"," you'd like to keep."," ",g.length>1?(0,l.BX)("strong",{children:["There are ",g.length," files impacted by this."]}):""]}),f?(0,l.tZ)(is.Loader,{}):(0,l.BX)(l.HY,{children:[P.length?(0,l.tZ)(m.Ph,{initialSelectedItem:P[0],selectedItem:P.find((function(e){return e.path===C})),items:P,onChange:function(e){E(e.path)}}):null,b?(0,l.BX)(m.G7,{css:[m.l0.rowWithGap(16),m.l0.justify.start,m.l0.align.center,m.l0.pt(16),m.l0.p(8),m.l0.backgroundColor.redDimmest,m.l0.font.code],children:[(0,l.tZ)(x.x,{variant:"subheadDefault",children:"Debug View"}),(0,l.BX)(x.x,{children:["Divergence type: ",null===_||void 0===_?void 0:_.case]})]}):null,(0,l.BX)(m.G7,{css:[m.l0.rowWithGap(8)],children:[(0,l.BX)(m.G7,{css:[m.l0.flex.growAndShrink(1),{flexBasis:0}],children:[(0,l.tZ)(x.x,{variant:"subheadDefault",children:"My changes"}),(0,l.tZ)(m.Tg,{elevated:!0,css:[m.l0.flex.growAndShrink(1),m.l0.py(8)],children:(0,l.tZ)(m.G7,{css:j,children:(0,l.tZ)(us.q,{diffViewer:N})})}),(0,l.BX)(m.G7,{css:[m.l0.pt(16)],children:[(0,l.tZ)(x.x,{multiline:!0,css:[m.l0.textAlign.center],children:"This might disrupt other people's work or create unexpected bugs."}),(0,l.tZ)(m.zx,{onClick:function(){U("local")},text:"Reset to Mine"})]})]}),(0,l.BX)(m.G7,{css:[m.l0.flex.growAndShrink(1),{flexBasis:0}],children:[(0,l.tZ)(x.x,{variant:"subheadDefault",children:"Shared changes"}),(0,l.tZ)(m.Tg,{elevated:!0,css:[m.l0.flex.growAndShrink(1),m.l0.py(8)],children:(0,l.tZ)(m.G7,{css:j,children:(0,l.tZ)(us.q,{diffViewer:O})})}),(0,l.BX)(m.G7,{css:[m.l0.pt(16),m.l0.justify.end],children:[(0,l.tZ)(x.x,{multiline:!0,css:[m.l0.textAlign.center],children:"This is the safest option and won't disrupt other's work."}),(0,l.tZ)(m.zx,{onClick:function(){U("remote")},text:"Sync to Shared",colorway:"primary"})]})]})]})]})]})})}var ds=t(1557);function ps(){var e=(0,V.Z)().fs,n=(0,c.useState)(!1),t=n[0],r=n[1],i=(0,c.useState)(!1),o=i[0],a=i[1],u=(0,ot.D)();(0,c.useEffect)((function(){if(!o)return e.onDiskQuotaExceeded((function(){r(!0)}))}),[e,o]);var s=function(){r(!1)};return(0,l.tZ)(m.u_,{isOpen:t,onRequestClose:s,children:(0,l.BX)(m.G7,{css:[m.l0.colWithGap(24)],children:[(0,l.BX)(m.h4,{level:3,variant:"headerDefault",children:["Oops! This Repl's disk is full"," ",(0,l.tZ)(ds.Z,{color:m.TV.accentNegativeDefault,size:20})]}),(0,l.BX)(m.xv,{multiline:!0,variant:"subheadDefault",children:["Please free up space by deleting some files. You can open the file tree by clicking the ",(0,l.tZ)(ha.Z,{})," icon on the left."]}),(0,l.tZ)(m.xv,{multiline:!0,children:"You can check how much space you are using from the Repl Resources section under the file tree."}),(0,l.tZ)(m.xv,{multiline:!0,variant:"small",children:"We apologize for the inconvenience. We are working on a solution to allow you to boost your disk limits."}),(0,l.BX)(m.G7,{css:m.l0.rowWithGap(8),tag:"label",children:[(0,l.tZ)(m.XZ,{id:u,checked:o,onChange:function(e){return a(Boolean(e.currentTarget.value))}}),(0,l.tZ)(m.xv,{multiline:!0,variant:"small",children:"Do not show this message again for this session."})]}),(0,l.tZ)(m.zx,{onClick:s,text:"Close"})]})})}var fs=t(46701),vs=t(79611),hs=t(26224),ms=t(7787),gs=!1;var Zs=t(95642);function ys(){var e=(0,E.Z)(["\n  mutation UpdateReplConfig($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        config {\n          isVnc\n          isServer\n        }\n      }\n    }\n  }\n"]);return ys=function(){return e},e}var bs={},xs=(0,T.Ps)(ys());function ws(){var e=(0,he.Z)(),n=(0,V.Z)().container,t=(0,u.b9)(ir._N),r=(0,i.Z)(function(e){var n=(0,R.Z)({},bs,e);return D.D(xs,n)}(),1),o=r[0];(0,c.useEffect)((function(){return n.onPortOpened((function(n){var r,i=n.isVnc;t(i?"vnc":"webview"),r=i?{isVnc:!0}:{isServer:!0},o({variables:{input:(0,R.Z)({id:e},r)}})}))}),[n,t,o,e])}var ks=t(18888),Ps=t(58482),Is=t(87238);var Ss=t(10129);function Cs(){return(Cs=(0,r.Z)(a().mark((function e(n){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(sr.l){e.next=2;break}throw new Error("Expected Apollo client");case 2:return e.next=4,sr.l.query({query:Is.Ux,variables:{id:n}});case 4:return t=e.sent.data,e.abrupt("return","Repl"===(null===t||void 0===t?void 0:t.repl.__typename)?t.repl.title:null);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rs(){var e=(0,V.Z)(),n=e.container,t=e.presence;c.useEffect((function(){var e=t.onUserJoin((function(t){var r,i=null===(r=n.getContext())||void 0===r?void 0:r.repl;if(i){var o=t.username;return function(e){return Cs.apply(this,arguments)}(i.id).then((function(e){e&&function(e){Hu.apply(this,arguments)}({title:"",body:"".concat(o," joined ").concat(e),tag:"".concat(i.id,"-").concat(o,"-joined"),iconByUsername:o,cacheDuration:9e5})})),function(){e()}}}))}),[t,n])}var Es=t(15335),Ts=t(75436);function Ds(){var e=(0,E.Z)(["\n  subscription RegisterReplConnection($replId: String!) {\n    replConnection(replId: $replId)\n  }\n"]);return Ds=function(){return e},e}var Us={},Ms=(0,T.Ps)(Ds());function _s(){!function(e){var n=(0,R.Z)({},Us,e);Ts.m(Ms,n)}({variables:{replId:(0,he.Z)()},skip:(0,Es.Z)()!==Fo.e.CONNECTED})}var Bs=t(95716);function Gs(){var e=(0,E.Z)(["\n  query GitRepoIsNewFork($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        origin {\n          id\n        }\n        timeCreated\n        timeUpdated\n      }\n    }\n  }\n"]);return Gs=function(){return e},e}var Ns={},As=(0,T.Ps)(Gs());var Os=t(16799),js=t(67128);function Xs(){var e=(0,he.Z)(),n=(0,V.Z)().container,t=function(e){var n=(0,R.Z)({},Ns,e);return A.a(As,n)}({variables:{replId:e}}).data,r=null===t||void 0===t?void 0:t.repl;(0,c.useEffect)((function(){if(r){var e,t=null!==r.origin,i=new Date(r.timeUpdated).getTime()-new Date(r.timeCreated).getTime()<1e3;if(t&&i)(e=n).exec.apply(e,(0,Ie.Z)(Os.rO.format(js.Xe)))}}),[n,r])}function Ls(){var e=(0,cn.Z)(),n=e.showConfirm,t=e.showNotice,r=e.hideMessage,i=e.showError,o=(0,V.Z)().container;(0,c.useEffect)((function(){var e=o.onToast((function(e){e.startsWith("PANIC")||t(e,function(e){var n=e.length/.025+1e3;return Math.max(1e4,n)}(e))})),a=null,l=!1,c=o.onConnectionStateChanged((function(e){if(a&&(r(a),a=null),e===Fo.e.CONNECTED)return l=!0,void(a=n("Connected",1500));l&&(e!==Fo.e.CONNECTING?e!==Fo.e.DISCONNECTED||(a=i("Disconnected")):a=t("Reconnecting"))}));return function(){a&&r(a),e(),c()}}),[o,n,t,i,r])}var zs=t(9523);function Fs(){var e=(0,E.Z)(["\n  query ReplEnvironment2LoadCurriculum($id: String!) {\n    currentUser {\n      id\n      isTeacher: hasRole(role: TEACHER)\n      ...CrosisContextCurrentUser\n    }\n    repl(id: $id) {\n      ... on Repl {\n        id\n        isProject\n        isProjectFork\n        isModelSolution\n        isModelSolutionFork\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n        language\n        origin {\n          id\n          ...CrosisContextRepl\n          origin {\n            id\n            ...CrosisContextRepl\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return Fs=function(){return e},e}var Hs={},Ws=(0,T.Ps)(Fs(),zs.D,zs.C);var $s=t(50217),Vs=t(18962),Ks=t(25108);function qs(){var e,n,t=(0,he.Z)(),i=(0,V.Z)(),o=i.fs,l=i.session,u=function(e){var n=(0,R.Z)({},Hs,e);return A.a(Ws,n)}({variables:{id:t}}).data,s="Repl"===(null===u||void 0===u?void 0:u.repl.__typename)?u.repl:null,d="CurrentUser"===(null===u||void 0===u||null===(e=u.currentUser)||void 0===e?void 0:e.__typename)?u.currentUser:null,p="Repl"===(null===u||void 0===u?void 0:u.repl.__typename)&&u.repl.isModelSolutionFork,f=p?s&&(null===(n=s.origin)||void 0===n?void 0:n.origin):s&&s.origin||null,v=(0,Ho.b)("Repl"===(null===f||void 0===f?void 0:f.__typename)?{repl:f,currentUser:d||void 0}:null);c.useEffect((function(){s&&d&&s.isProject&&o.stat(".lesson").then((function(e){e.exists||o.createDir(".lesson")}))}),[o,d,s]),c.useEffect((function(){if(s&&(s.isProjectFork||p)&&f&&v){var e=(0,Fo.Z)({onUnrecoverableError:function(e){Ks.error(e),vi.$e((function(n){n.setTag("curriculum-authoring",!0),n.setExtra("originId",f.id),vi.Tb(e)}))}}),n=(0,$o.Z)({container:e});e.connect({context:v,fetchConnectionMetadata:function(){return(0,$s.Z)({url:"/data/repls/".concat(s.id,"/get_repl_origin_guest_connection_metadata")})}});var t=e.onConnectionStateChanged(function(){var i=(0,r.Z)(a().mark((function r(i){var c;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i!==Vs.e.CONNECTED){r.next=22;break}return t(),r.prev=2,r.next=5,o.copyDirFromRemote(".lesson",".lesson",n);case 5:if(!(c=r.sent).error){r.next=10;break}vi.$e((function(e){e.setTag("curriculum-authoring",!0),e.setExtra("originId",f.id),vi.Tb({message:"Error copying lesson: ".concat(c.error)})})),r.next=14;break;case 10:return r.next=12,o.stat(".lesson/instructions.md");case 12:r.sent.exists&&l.setInstructionsViewerVisible(!0);case 14:r.next=19;break;case 16:r.prev=16,r.t0=r.catch(2),vi.$e((function(e){e.setTag("curriculum-authoring",!0),vi.Tb(r.t0)}));case 19:return r.prev=19,e.destroy(),r.finish(19);case 22:case"end":return r.stop()}}),r,null,[[2,16,19,22]])})));return function(e){return i.apply(this,arguments)}}());return function(){return e.destroy()}}}),[o,v,s,f,p,l])}var Ys=t(68122),Qs=t(39571);function Js(){var e=(0,E.Z)(["\n  fragment WorkspaceUseDebuggerRepl on Repl {\n    id\n    lang {\n      id\n      hasDAP\n    }\n  }\n"]);return Js=function(){return e},e}function ed(){var e=(0,E.Z)(["\n  query WorkspaceUseDebugger($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...WorkspaceUseDebuggerRepl\n      }\n    }\n  }\n  ","\n"]);return ed=function(){return e},e}var nd={},td=(0,T.Ps)(Js()),rd=(0,T.Ps)(ed(),td);function id(e){var n=e.onOpenFile,t=e.onOutput,r=(0,V.Z)(),i=r.debuggest,o=r.dotReplit,a=function(e){var n=(0,R.Z)({},nd,e);return A.a(rd,n)}({variables:{replId:(0,he.Z)()}}).data,l=function(e){var n=e.repl,t=e.dotReplit,r=e.debuggest;return(0,c.useEffect)((function(){if(n){if(!n.lang.hasDAP)return t.watch((function(e){var n;e.error||(null===(n=e.config.debugger)||void 0===n?void 0:n.support)&&r.connect()}));r.connect()}}),[n,r]),(0,Ys.Z)(r.mainClient)}({debuggest:i,dotReplit:o,repl:"Repl"===(null===a||void 0===a?void 0:a.repl.__typename)?a.repl:null});!function(e){(0,c.useEffect)((function(){if(e){var n=e.onStarted((function(e){(0,S.j)(S.U3.DEBUGGER_USED,{action:"started",joined:e})})),t=e.onPaused((function(e){(0,S.j)(S.U3.DEBUGGER_USED,{action:"paused",reason:e})})),r=e.onBreakpoint((function(n){(0,S.j)(S.U3.DEBUGGER_USED,{action:"breakpointToggled",breakpointAction:n,state:e.state.current})}));return function(){n(),t(),r()}}}),[e])}(l),function(e,n){var t,r=n.onOutput,i=n.onOpenFile,o=(0,Vt.Z)(r),a=(0,Vt.Z)(i);(0,c.useEffect)((function(){if(e)return e.onOutput((function(e){o.current(e)}))}),[e]);var l=(0,Ys.Z)(e?e.stackFrames:null),u=null===l||void 0===l?void 0:l[0],s=null===u||void 0===u||null===(t=u.source)||void 0===t?void 0:t.path,d=null===u||void 0===u?void 0:u.line;(0,c.useEffect)((function(){if(s&&d&&e){var n=(0,Qs.om)(s);n?a.current({path:n,line:d}):e.stepOut()}}),[e,s,d])}(l,{onOpenFile:n,onOutput:t})}var od=t(75338),ad={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!0,key:"S"};var ld=t(536),cd=t(45435);var ud=t(52008);var sd=t(99336);var dd=t(5442),pd=t(22371),fd=t(1864),vd="video.json",hd=(0,fd.join)(pd.V,vd);function md(e,n){return gd.apply(this,arguments)}function gd(){return(gd=(0,r.Z)(a().mark((function e(n,t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.find((function(e){return e.type===rt.Tv.File&&e.filename===vd}))){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,n.readFile(hd);case 5:if(!(r=e.sent).error){e.next=8;break}return e.abrupt("return",null);case 8:return e.abrupt("return",r.content.toString());case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zd(){!function(e){var n=(0,V.Z)().fs,r=(0,io.Z)().isTutorial,o=(0,Vt.Z)(e);(0,c.useEffect)((function(){if(r){var e=!1,a=n.watchDir(pd.V,{onChange:function(r){Promise.all([t.e(1142).then(t.t.bind(t,11142,23)),md(n,r)]).then((function(n){var t=(0,i.Z)(n,2),r=t[0],a=t[1];if(!e)if(a){var l=null;try{l=r.parse(a)}catch(u){}var c="object"===typeof l&&"string"===typeof l.embedUrl?l.embedUrl:null;o.current(c?{embedUrl:c}:null)}else o.current(null)}))},onMoveOrDelete:function(){o.current(null)},onError:function(){o.current(null)}});return function(){e=!0,a()}}}),[n,r,o])}((0,Jr.gQ)())}var yd=t(55528),bd=t(4862),xd=t(58823);function wd(e){var n,t=e.repl,r=e.currentUser,o=r.id===(null===(n=t.user)||void 0===n?void 0:n.id),a=(0,hs.Z)().preferences,l=(0,V.Z)().session;!function(){var e=(0,V.Z)(),n=e.lspnix,t=e.lsp,r=e.fs,i=(0,hs.Z)().preferences.codeIntelligence,o=(0,tt.Z)()||"",a=(0,yd.Z)(o);c.useEffect((function(){if(!i)return t.stop(),void n.disable();t.start(),n.enable()}),[n,t,i]),c.useEffect((function(){if(a&&o&&(0,it.Mb)(o))return a.onWorkspaceEdit((function(e){var n=e.edit;return(0,xd.w)({edit:n,fs:r,client:a}),{applied:!0}}))}),[r,a,o]),c.useEffect((function(){if(a&&o&&(0,it.Mb)(o)&&(0,bd.Z)(a).isTextDocumentSyncSupported)return r.watchOtFile(o,{onFlush:function(){a.isOpen(o)&&a.notify.didSave(o)}})}),[r,o,a])}(),function(){var e=(0,tr.ne)();(0,c.useEffect)((function(){var n=function(){e.flush()};return window.addEventListener("beforeunload",n),function(){window.removeEventListener("beforeunload",n)}}),[e]),(0,c.useEffect)((function(){var n=function(){"hidden"===document.visibilityState&&e({force:!1})};return document.addEventListener("visibilitychange",n),function(){document.removeEventListener("visibilitychange",n)}}),[e]),(0,c.useEffect)((function(){var n=null;return function t(){n=setTimeout((function(){e({force:!1}),t()}),6e4)}(),function(){n&&clearTimeout(n)}}),[e]),(0,c.useEffect)((function(){return function(){e.flush()}}),[e])}(),(0,ks.Z)(),(0,ld.Z)({workspaceType:"desktop"}),c.useEffect((function(){var e=function(e){"s"===e.key&&(0,Ss.j)(e)&&e.preventDefault()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[]),Rs(),_s(),function(){var e=(0,V.Z)().presence;c.useEffect((function(){return e.onFollowingUsersChanged((function(e){var n=e.followingUsers,t=e.type,r=n.length;"follow"===t?(0,S.j)(Bs.U3.REMOTE_USER_CURSOR_FOLLOWED,{numFollowers:r}):(0,S.j)(Bs.U3.REMOTE_USER_CURSOR_UNFOLLOWED,{numFollowers:r})}))}),[e])}(),function(e){var n=e.isAnon,t=e.isOwner,r=e.ignoreUnloadPrompt,i=(0,he.Z)();(0,Is.Vg)({skip:n||t,variables:{replId:i},onData:function(e){var n=e.data.data;!1===(null===n||void 0===n?void 0:n.currentUserCanWrite)&&(r(!0),window.location.reload())}})}({isAnon:!1,isOwner:o,ignoreUnloadPrompt:(0,Ps.Z)()}),Xs(),function(){var e=(0,V.Z)().presence,n=(0,tt.Z)();(0,c.useEffect)((function(){e.updateOpenFile(n)}),[e,n])}(),Ls(),qs(),(0,od.ZP)(),function(){var e=(0,V.Z)().runner,n=(0,u.b9)(ir.im),t=(0,u.b9)(ir.Ky),r=(0,u.b9)(ir.ao),i=ro(),o=(0,u.Dv)(tr.Mn),a=(0,Er.e)(Dr.H.Output);c.useEffect((function(){if(o&&(null===a||void 0===a?void 0:a.isActive)){var e=setInterval((function(){n()}),200);return function(){clearInterval(e)}}}),[null===a||void 0===a?void 0:a.isActive,n,o]),c.useEffect((function(){if(o)return e.onStateChanged((function(e){e===Ju.A.RUNNING&&n()}))}),[e,n,o]),c.useEffect((function(){o&&(i?t({type:"instructions"}):r({type:"instructions"}))}),[i,t,r,o]),(0,Tr.x)(ad,{run:function(){return t({type:"shell"})},enabled:Boolean(o)})}(),function(){var e=(0,s.useRouter)(),n=(0,V.Z)().container,t=(0,i.Z)((0,u.KO)(cd.a0),2),r=t[0],o=t[1],a=(0,u.b9)(cd.Th);(0,c.useEffect)((function(){e.query.debug&&o(!0)}),[o,e.query.debug]),(0,c.useEffect)((function(){if(r)return n.client().onDebugLog((function(e){"log"===e.type&&a((function(n){return(0,Ie.Z)(n).concat([{index:n[n.length-1]?n[n.length-1].index+1:0,dir:e.log.direction,cmd:e.log.cmd,timestamp:window.performance.now()}])}))}))}),[r,a,n])}(),function(){var e=(0,V.Z)(),n=e.presence,t=e.session;(0,c.useEffect)((function(){return n.onUserOpenedFile((function(e){var r=e.user,i=e.file,o=n.getFollowedUser();o&&o.id===r.id&&i&&t.openFile(i)}))}),[n,t]);var r=(0,c.useState)(null),i=r[0],o=r[1];(0,c.useEffect)((function(){return n.onFollowedUserChanged(o)}),[n,t]),(0,c.useEffect)((function(){var e=function(){n.unfollowUser()};if(i){var t=setTimeout((function(){document.addEventListener("click",e)}),0);return function(){clearTimeout(t),document.removeEventListener("click",e)}}}),[i])}(),(0,dd.Z)(),Zd(),(0,co.z)(),id({onOpenFile:function(e){l.openFile(e.path),l.updateDeeplink(e)},onOutput:function(){}}),function(){var e=(0,ud.JM)().data,n=null===e||void 0===e?void 0:e.currentUser,t=(0,u.b9)(Yt.H);(0,c.useEffect)((function(){t({flagSaveLayoutState:Boolean(null===n||void 0===n?void 0:n.flagSaveLayoutState),flagThreadsPane:Boolean(null===n||void 0===n?void 0:n.flagThreadsPane),flagThreads2:Boolean(null===n||void 0===n?void 0:n.flagThreads2),flagGhostrunner:Boolean(null===n||void 0===n?void 0:n.flagGhostrunner),flagLayoutNavigator:Boolean(null===n||void 0===n?void 0:n.flagLayoutNavigator)})}),[t,n])}();var d=["html","html_beta"].includes(t.language);(0,Zs.Z)({initialLayoutState:t.layoutState||null}),(0,c.useEffect)((function(){return vi.YA("replId",t.id),sd.c_.setTag("replId",t.id),function(){vi.YA("replId",void 0),sd.c_.setTag("replId",void 0)}}),[t.id]),function(e){var n=e.repl,t=e.currentUser,r=(0,V.Z)().container,i=(0,s.useRouter)(),o=(0,Ho.b)({repl:n,currentUser:t});(0,c.useEffect)((function(){var e;return gs||(gs=!0,e=i.query.initialConnectionMetadata),r.connect({customConnectionMetadata:e,context:o}),function(){r.close()}}),[o,r]),(0,c.useEffect)((function(){return function(){r.destroy()}}),[r])}({repl:t,currentUser:r}),ws(),(0,c.useEffect)((function(){var e,n="Repl"===(null===(e=t.origin)||void 0===e?void 0:e.__typename)?t.origin.id:null;return(0,ms.Fy)({id:t.id,slug:t.slug,originId:n,roles:r.roles&&r.roles.map((function(e){return e.name}))}),function(){(0,ms.dv)()}}),[t,r.roles]);var p=(0,u.b9)(jn._E),f=(0,Ar.T)();(0,c.useEffect)((function(){p(!f)}),[f,p]);var v=a.isLayoutStacked,h=(0,u.b9)(to.h$);(0,c.useEffect)((function(){return h(v)}),[h,v]);var m=(0,u.b9)(to.gM);return(0,c.useEffect)((function(){return m(d)}),[m,d]),null}var kd=t(25602),Pd=t(89390),Id=function(){var e=(0,r.Z)(a().mark((function e(n,t){var r,i,o,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,kd.u9)()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,(0,kd.mv)(n);case 4:if(r=e.sent,i=r.path,o=r.line,l=r.col,i){e.next=10;break}return e.abrupt("return",!1);case 10:return t.openFile(i,{line:o,col:l}),e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();function Sd(){return function(){var e=(0,V.Z)(),n=e.fs,t=e.session,i=e.dotReplit,o=(0,he.Z)(),l=(0,c.useRef)(!1),s=(0,u.Dv)(jn.QP),d=(0,Vt.Z)(s),p=(0,c.useState)(!1),f=p[0],v=p[1],h=(0,u.Dv)(tr.Mn);(0,c.useEffect)((function(){if(f&&s){var e=(0,kd.YM)({path:s}),n=window.location.hash;n===s||n.startsWith(e+":")||(l.current=!0,window.location.hash=e)}}),[f,s]),(0,c.useEffect)((function(){function e(){return(e=(0,r.Z)(a().mark((function e(){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h){e.next=2;break}return e.abrupt("return");case 2:if(!d.current){e.next=5;break}return v(!0),e.abrupt("return");case 5:return e.next=7,Id(n,t);case 7:if(r=e.sent,v(!0),!r&&!d.current&&"saved"!==h){e.next=11;break}return e.abrupt("return");case 11:(0,Pd.P)(n,t,i,o);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n,t,i,o,d,h]),(0,c.useEffect)((function(){if(h){var e=function(){var e=(0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l.current){e.next=3;break}return l.current=!1,e.abrupt("return");case 3:return e.next=5,Id(n,t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return window.addEventListener("hashchange",e),function(){window.removeEventListener("hashchange",e)}}}),[h,n,t])}(),null}var Cd=t(4368);function Rd(){var e=(0,E.Z)(["\n  query ExtensionStore {\n    extensionList {\n      id\n      url\n      name\n      description\n      user {\n        id\n        username\n        displayName\n      }\n    }\n  }\n"]);return Rd=function(){return e},e}var Ed=(0,T.Ps)(Rd());function Td(){var e=(0,_i.c)("flag-iframe-extensions"),n=e.enabled,t=e.loading,i=(0,u.b9)(er.g2),o=c.useCallback((function(e){i({pane:{data:e,type:"extension"},makeActive:!0,placement:"rightOf"})}),[i]);return Pr({match:Rr.pl,commands:function(e){return e.active||""!==e.search?[{match:Rr.pl,data:{type:"action",label:"URL",icon:(0,l.tZ)(un.Z,{}),description:"Add an extension by URL",run:function(){var e=prompt("insert extension url");e&&o({url:e,name:"Extension"})}}},{match:Rr.pl,data:{type:"context",label:"Store",icon:(0,l.tZ)(Cd.Z,{}),description:"Browse the extension store"},commands:function(){var e=(0,r.Z)(a().mark((function e(n){var t,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.active){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,null===sr.l||void 0===sr.l?void 0:sr.l.query({query:Ed});case 5:if((t=e.sent)&&!t.error){e.next=8;break}return e.abrupt("return",[]);case 8:if(r=t.data.extensionList){e.next=11;break}return e.abrupt("return",[]);case 11:return e.abrupt("return",r.map((function(e){return{match:Rr.pl,data:{type:"action",label:e.name,icon:(0,l.tZ)(Cd.Z,{}),description:null!==(i=e.description)&&void 0!==i?i:"",run:function(){e.url&&o({url:e.url,name:e.name})}}}})));case 13:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}]:[]},data:{type:"context",label:"Extensions",icon:(0,l.tZ)(Cd.Z,{}),description:"Manage extensions"}},{enabled:!t&&n}),null}var Dd=(0,u.cn)((function(e){var n=e(Hn.J1);if(!n)return null;var t=e((0,Xn.z)(n)).rectAtom,r=e(t),i=e(Xn.M0);return{x:r.x,y:r.y-i,width:r.width,height:r.height+i}}));function Ud(){var e=(0,u.Dv)(Dd),n=(0,eu.Z)();return e&&n?(0,l.tZ)("div",{css:[w.l0.position.absolute,w.l0.width(e.width),w.l0.height(e.height),w.l0.borderRadius(4),{boxShadow:"0 0 0 3px ".concat(n.color),pointerEvents:"none",zIndex:3,transform:"translate(".concat(Math.round(e.x),"px, ").concat(Math.round(e.y),"px)")}]}):null}var Md=(0,c.memo)(Ud),_d=t(2548),Bd=32,Gd=(0,u.cn)({}),Nd=(0,u.cn)(null,(function(e,n,t){n(Gd,(function(e){return(0,Gn.ZP)(e,(function(e){e[t.id]=t.preferredHeight}))}))}));var Ad=(0,u.cn)([]),Od=(0,u.cn)(0),jd=(0,u.cn)(null,(function(e,n,t){var r=t.height,i=t.sections,o=r-i.length*Bd;n(Od,r),n(Ad,i.map((function(e){var n=e.id,t=e.percent;return{id:n,height:0===t?0:o*(t/100)}})))}));function Xd(e){return(0,u.Dv)(function(e){return(0,Kt.Z)((function(){return(0,u.cn)((function(n){var t;return Bd+((null===(t=n(Ad).find((function(n){return n.id===e})))||void 0===t?void 0:t.height)||0)}))}),[e])}(e))}var Ld=(0,u.cn)((function(e){return e(Ad).map((function(e){return e.id}))}));var zd=(0,u.cn)(null,(function(e,n,t){n(Od,t),n(Ad,(function(e){return(0,Gn.ZP)(e,(function(e){var n=e.reduce((function(e,n){return e+n.height}),0),r=t-e.length*Bd,i=e.filter((function(e){return e.height>0})),o=(r-n)/i.length,a=!0,l=!1,c=void 0;try{for(var u,s=i[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value;d.height=Math.max(0,d.height+o)}}catch(p){l=!0,c=p}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}}))}))}));var Fd=t(15912),Hd=t(96199),Wd=t(44044),$d={root:m.l0.px(4),rowWrap:(0,Ct.iv)([m.l0.borderRadius(8)]),row:(0,Ct.iv)([Wd.gU.nofill,m.l0.rowWithGap(8),m.l0.p(4),m.l0.minHeight(32),m.l0.align.center,{transition:"initial"}]),icon:{"& > svg":m.l0.color.foregroundDimmer},textWrap:[m.l0.colWithGap(2),m.l0.flex.growAndShrink(1)],heading:[m.l0.flex.growAndShrink(1),{opacity:.5}],text:[m.l0.flex.growAndShrink(1)]};function Vd(e){var n=e.pane,t=cr(),r=(0,Li.Se)(),o=r.Icon({pane:n}),a=r.getTitle(n),c=(0,$l.N)(),u=(0,i.Z)((0,Uc.c)({type:Wl.z.Pane,item:function(){return{type:Wl.z.NewPane,pane:n}},end:function(){c()}}),2)[1];return(0,l.tZ)(m.G7,{css:$d.root,children:(0,l.BX)(m.Tg,{innerRef:u,onClick:function(){t({pane:n})},css:$d.row,children:[(0,l.tZ)(m.G7,{css:$d.icon,children:o}),(0,l.tZ)(m.xv,{css:$d.text,color:"dimmest",children:a})]})})}function Kd(e){var n=e.title,t=e.icon,r=e.active,i=e.highlightRanges,o=e.heading,a=e.dragRef;return(0,l.tZ)(m.G7,{css:$d.root,children:(0,l.tZ)(m.Tg,{elevated:r,css:$d.rowWrap,children:(0,l.BX)(m.Tg,{innerRef:a,css:$d.row,children:[(0,l.tZ)(m.G7,{css:$d.icon,children:t}),(0,l.BX)(m.G7,{css:$d.textWrap,children:[o?(0,l.tZ)(m.xv,{variant:"small",color:"dimmest",css:$d.heading,children:o}):null,(0,l.tZ)(m.xv,{css:$d.text,color:(null===i||void 0===i?void 0:i.length)?"dimmest":"default",children:(null===i||void 0===i?void 0:i.length)?(0,l.tZ)(fn.xK,{style:{color:m.TV.foregroundDimmest},matchStyle:{fontWeight:m.TV.fontWeightBold,color:m.TV.foregroundDefault},source:n,matches:i.map((function(e){return{column:e.from,length:e.to-e.from}}))}):n})]})]})})})}function qd(e){var n=e.pane,t=e.active,r=e.highlightRanges,o=e.title,a=e.heading,c=(0,Li.Se)().Icon({pane:n}),u=(0,i.Z)((0,Uc.c)({type:Wl.z.Pane,item:function(){return{type:Wl.z.NewPane,pane:n}}}),2)[1];return(0,l.tZ)(Kd,{active:t,icon:c,title:o,heading:a,dragRef:u,highlightRanges:r})}function Yd(){var e=po(),n=e.length,t=(0,u.b9)(Nd);return(0,c.useEffect)((function(){var e=Math.min(300,40*n);t({id:"dock",preferredHeight:e})}),[n,t]),(0,l.tZ)(l.HY,{children:e.map((function(e){return(0,l.tZ)(Vd,{pane:e},e.type)}))})}var Qd=t(58360);function Jd(e){var n=e.sections,t=e.id,r=n.findIndex((function(e){return e.id===t}));if(-1===r)throw new Error("");var i=n[r],o=i.height;i.height=0;var a=r===n.length-1?n.slice(0,r).reverse():n.slice(r),l=!0,c=!1,u=void 0;try{for(var s,d=a[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var p=s.value;if(0!==p.height)return void(p.height+=o)}}catch(v){c=!0,u=v}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}var f=n[r+1];f&&(f.height=o)}var ep=(0,u.cn)(null),np=(0,u.cn)(null,(function(e,n,t){var r=e(Ad);if("start"!==t.type){var i=e(ep);if(!i)throw new Error("");if("update"!==t.type)n(Ad,(0,Gn.ZP)(r,(function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;a.height>=32||Jd({sections:e,id:a.id})}}catch(l){t=!0,r=l}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}}))),n(ep,null);else{var o=e(Od);n(Ad,(0,Gn.ZP)(i.sectionStart,(function(e){var n=i.heightStart+t.delta;!function(e){var n=e.sections,t=e.id,r=e.totalHeight-n.reduce((function(n,t){return n+(t.height+e.headerHeight)}),0),i=n.findIndex((function(e){return e.id===t}));if(-1===i)throw new Error("Expected sectionIndex");var o=r+n.slice(i).reduce((function(e,n){return e+n.height}),0),a=n[i],l=e.height>a.height,c=Math.min(o,e.height),u=Math.abs(a.height-c);if(l){a.height=Math.max(0,c);var s=!0,d=!1,p=void 0;try{for(var f,v=n.slice(i+1)[Symbol.iterator]();!(s=(f=v.next()).done);s=!0){var h=f.value;if(0!==h.height){if(!(h.height<u)){h.height-=u;break}u-=h.height,h.height=0}}}catch(I){d=!0,p=I}finally{try{s||null==v.return||v.return()}finally{if(d)throw p}}}else{var m=n[i+1];if(e.height>=0)return a.height=e.height,void(m&&(m.height+=u));var g=a.height;a.height=0;var Z=-1*e.height,y=!0,b=!1,x=void 0;try{for(var w,k=n.slice(0,i).reverse()[Symbol.iterator]();!(y=(w=k.next()).done);y=!0){var P=w.value;if(P.height>Z){g+=Z,P.height-=Z;break}g+=P.height,Z-=P.height,P.height=0}}catch(I){b=!0,x=I}finally{try{y||null==k.return||k.return()}finally{if(b)throw x}}m&&(m.height+=g)}}({headerHeight:Bd,totalHeight:o,sections:e,id:i.id,height:n})})))}}else{var a=r.find((function(e){return e.id===t.id}));if(!a)throw new Error("");n(ep,{id:t.id,heightStart:a.height,sectionStart:r})}}));function tp(e){var n=e.id,t=(0,Kt.Z)((function(){return(0,u.cn)((function(e){var t;return(null===(t=e(ep))||void 0===t?void 0:t.id)===n}))}),[n]);return(0,u.Dv)(t)}var rp=(0,u.cn)((function(e){return e(jn._E)&&!e(ep)}));var ip=(0,u.cn)(null,(function(e,n,t){var r=e(Ad),i=e(Gd)[t],o=r.find((function(e){return e.id===t}));if(!o)throw new Error("");0===o.height?n(Ad,(0,Gn.ZP)(r,(function(n){!function(e){var n=e.sections,t=e.preferredHeight,r=e.id,i=n.findIndex((function(e){return e.id===r}));if(-1===i)throw new Error("Expected sectionIndex");var o=n.reduce((function(n,t){return n+(t.height+e.headerHeight)}),0),a=e.totalHeight-o,l=n[i];if(a>0)l.height=a;else{var c=n.slice(i+1).find((function(e){return e.height>0}))||n.slice(0,i).reverse().find((function(e){return e.height>0}));if(c){if(void 0!==t&&t<c.height)return l.height=t,void(c.height-=t);l.height=c.height,c.height=0}}}({sections:n,id:t,totalHeight:e(Od),headerHeight:Bd,preferredHeight:i})}))):(n(Nd,{id:o.id,preferredHeight:o.height}),n(Ad,(0,Gn.ZP)(r,(function(e){return Jd({sections:e,id:t})}))))}));var op=t(72466);function ap(){return(0,l.tZ)(m.xv,{css:[m.l0.fontWeight.medium],children:"Files"})}function lp(){var e=(0,Qd.p)();return(0,l.tZ)(Hd.Z,{filetreeApi:e,showHeader:!1,showResources:!1,showActionsRow:!0})}function cp(){var e=(0,pr.C)();return(0,l.tZ)(op.Z,{onFileOpen:function(n){return e({path:n})}})}function up(){return(0,l.tZ)(m.xv,{css:[m.l0.fontWeight.medium],children:"Dock"})}function sp(){return(0,l.tZ)(m.xv,{css:[m.l0.fontWeight.medium],children:"Kaboom"})}var dp={kaboom:{header:(0,l.tZ)(sp,{}),content:(0,l.tZ)(cp,{})},files:{header:(0,l.tZ)(ap,{}),content:(0,l.tZ)(lp,{})},dock:{header:(0,l.tZ)(up,{}),content:(0,l.tZ)(Yd,{})}},pp={header:(0,Ct.iv)([m.l0.pl(8),m.l0.rowWithGap(4),m.l0.align.center,m.l0.height(Bd),m.l0.cursor.pointer]),border:(0,Ct.iv)({borderTop:"1px solid",borderColor:m.TV.outlineDimmest}),content:(0,Ct.iv)([m.l0.flex.growAndShrink(1),m.l0.overflowY("auto")])},fp=(0,c.memo)((function(e){var n=function(e){var n=(0,Kt.Z)((function(){return(0,u.cn)((function(n){var t;return 0===(null===(t=n(Ad).find((function(n){return n.id===e})))||void 0===t?void 0:t.height)}))}),[e]);return(0,u.Dv)(n)}(e.id),t=(0,u.b9)(ip),r=dp[e.id].header;return(0,l.BX)(m.G7,{onClick:function(){return t(e.id)},css:pp.header,children:[(0,l.tZ)(oc.Z,{rotate:n?0:90}),r]})})),vp=(0,c.memo)((function(e){var n=dp[e.id].content;return(0,l.tZ)(m.G7,{css:pp.content,children:(0,l.tZ)(m.G7,{css:m.l0.pb(8),children:n})})})),hp={root:(0,Ct.iv)([m.l0.position.relative,m.l0.height(0),m.l0.width("100%"),{zIndex:1,"&:hover > div":{transform:"scaleY(2)"},cursor:"ns-resize"}]),hoverArea:(0,Ct.iv)([m.l0.position.relative,m.l0.height(8),m.l0.top(-4)])},mp=(0,c.memo)((function(e){var n=(0,u.b9)(np),t=tp({id:e.id});return(0,l.tZ)(m.G7,{css:hp.root,onPointerDown:function(t){ol(t,{start:function(){n({type:"start",id:e.id})},move:function(e){var t=e.delta;n({type:"update",delta:t.y})},end:function(e){var t=e.delta;n({type:"end",delta:t.y})}})},children:(0,l.tZ)(m.G7,{style:t?{transform:"scaleY(100)"}:void 0,css:hp.hoverArea})})}));function gp(e){var n=Xd(e.id),t=(0,u.Dv)(rp),r=tp({id:e.id});return(0,l.BX)(m.G7,{css:e.border&&pp.border,style:{zIndex:r?2:void 0,height:n,position:"relative",transition:t?"height 120ms ease-out":void 0},children:[(0,l.tZ)(fp,{id:e.id}),(0,l.tZ)(vp,{id:e.id}),e.resizable?(0,l.tZ)(mp,{id:e.id}):null]})}var Zp={type:"context",icon:(0,l.tZ)(gt.Z,{}),label:"",description:"Search"};function yp(){var e=(0,V.Z)().fs,n=(0,Ji.A)(),t=(0,eo.T)(),o=(0,pr.C)(),c=vo(),s=ho(),d=function(){var e=(0,V.Z)().presence,n=me(),t=(0,K.Z)({presence:e}),o=(0,i.Z)((0,J.JU)(),1)[0];return(0,Kt.Z)((function(){return{data:{type:"context",label:"Multiplayers",icon:(0,l.tZ)(Cr.Z,{})},commands:(0,r.Z)(a().mark((function e(){var r,i,c,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,o({variables:{ids:t.map((function(e){return e.id}))}});case 4:if(r=e.sent.data){e.next=7;break}return e.abrupt("return",[]);case 7:return i=t.reduce((function(e,n){return e[n.id]=n.color,e}),{}),c=r.currentUser,u=r.usersByIds.filter((function(e){return e.id!==(null===c||void 0===c?void 0:c.id)})),e.abrupt("return",u.map((function(e){return{match:Rr.pl,data:{type:"action",label:e.username,icon:(0,l.tZ)(m.G7,{style:{border:"2px solid",borderColor:i[e.id],borderRadius:"50%"},children:(0,l.tZ)(te.Z,{size:16,src:e.image,alt:e.username})}),run:function(){return n({username:e.username,id:e.id})}}}})));case 11:case"end":return e.stop()}}),e)})))}}),[t,n,o])}(),p=(0,Kt.Z)((function(){return(0,u.cn)((function(r){var i=r(c),a=r(s),u={data:{type:"context",label:"Tools",icon:(0,l.tZ)(no.Z,{})},commands:function(){return a}},p=(0,zi.i)({openFile:o,fs:e,shouldHideFile:t,getRecentFiles:n,lazyLoad:!0});return p.match=void 0,{data:Zp,commands:function(){return[i,p,u,d]}}}))}),[e,s,c,t,o,n,d]);return(0,u.Dv)(p)}var bp=m.KD.div,xp=m.KD.input,wp={inputContainer:(0,Ct.iv)([m.l0.position.relative,m.l0.flex.row,m.l0.align.center,m.gU.filled,{":focus-within":{borderColor:m.TV.outlineDefault}}]),input:(0,Ct.iv)([m.l0.flex.growAndShrink(1),m.l0.p(8),m.l0.color.foregroundDefault,{paddingLeft:26,fontSize:m.TV.fontSizeDefault,outline:"0 none",backgroundColor:"transparent",borderColor:"transparent"}]),menuContainer:(0,Ct.iv)([m.l0.left(0),m.l0.width("100%"),m.l0.overflowY("auto"),m.l0.py(4),m.l0.position.absolute,{top:48,height:"calc(100% - ".concat(48,"px)"),zIndex:1}]),searchIcon:(0,Ct.iv)([m.l0.position.absolute,m.l0.top(0),m.l0.left(0),m.l0.height("100%"),m.l0.center,{paddingLeft:6,pointerEvents:"none"}]),clearButton:(0,Ct.iv)([m.l0.reset.button,m.l0.p(4),m.l0.color.foregroundDimmest,m.l0.cursor.pointer,{"&:hover":m.l0.color.foregroundDefault}])};function kp(){var e=yp(),n=(0,pr.C)(),t=cr(),r=(0,Et.Z)({onSelect:function(e){if(r.combobox.reset(),r.setInputValue(""),"openFile"!==e.data.type)if("openPane"!==e.data.type)"action"!==e.data.type||e.data.run();else{var i=e.data.pane;t({pane:i})}else{var o=e.data.deeplink.path;n({path:o})}},initialCommand:e,insertSectionHeaders:!0}),i=r.combobox;return(0,l.BX)(l.HY,{children:[(0,l.BX)(bp,(0,ne.Z)((0,R.Z)({},i.getComboboxProps()),{css:wp.inputContainer,children:[(0,l.tZ)(m.G7,{css:wp.searchIcon,children:r.isLoading?(0,l.tZ)(le.Z,{}):(0,l.tZ)(gt.Z,{color:m.TV.foregroundDimmest})}),(0,l.tZ)(xp,(0,R.Z)({css:wp.input},r.combobox.getInputProps({value:r.inputValue,ref:r.inputRef,onChange:function(e){return r.setInputValue(e.currentTarget.value)},onKeyDown:function(e){"Escape"===e.key&&e.currentTarget.blur()},placeholder:"Search"}))),r.inputValue.length>0?(0,l.tZ)(m.G7,{css:wp.clearButton,tag:"button",children:(0,l.tZ)(y.Z,{onClick:function(){return r.setInputValue("")}})}):null]})),(0,l.tZ)(m.Tg,(0,ne.Z)((0,R.Z)({style:{display:r.inputValue?void 0:"none"},css:wp.menuContainer},r.combobox.getMenuProps({refKey:"innerRef"})),{children:(0,l.tZ)(Ip,{items:r.itemsWithSections||[],getItemProps:i.getItemProps,highlightedIndex:i.highlightedIndex,isLoading:r.isLoading})}))]})}function Pp(e){var n=(0,c.useRef)(e.items);if(!(e.items!==n.current))return null;var t=e.items.slice(0,100);return e.isLoading||0!==t.length?(0,l.tZ)(m.G7,{css:[m.l0.pt(2)],children:t.map((function(n){if(n.isSection){var t=n.name;return(0,l.tZ)(m.xv,{variant:"small",color:"dimmest",css:[m.l0.px(12),m.l0.py(4)],children:t},t)}var r=n.item,i=n.index,o=i===e.highlightedIndex,a=function(e){var n=e.data,t=e.match.render,r=n.icon,i=n.label,o=null,a=void 0;if("openFile"===n.type){var l=n.deeplink.path;o={type:(0,or.Dp)({path:l}),data:{path:l}}}else"openPane"===n.type&&(o=n.pane);if(o&&(0,or.KM)(o)&&o.data.path){var c=o.data.path;i=(0,it.UO)(c);var u=(0,it.Il)(c);u&&(a=u)}return{pane:o,title:i,heading:a,icon:r,highlightRanges:t&&"ranges"in t?t.ranges:void 0}}(r),c=a.pane,u=a.highlightRanges,s=a.icon,d=a.title,p=a.heading;return(0,l.tZ)(bp,(0,ne.Z)((0,R.Z)({css:[{cursor:"pointer"}]},e.getItemProps({item:r,index:i})),{children:c?(0,l.tZ)(qd,{active:o,highlightRanges:u,pane:c,title:d,heading:p}):(0,l.tZ)(Kd,{active:o,highlightRanges:u,title:d,icon:s})}),(0,Et.k)(r))}))}):(0,l.tZ)(m.xv,{color:"dimmest",css:[m.l0.px(8),m.l0.py(16),{textAlign:"center"}],children:"No results found"})}var Ip=(0,c.memo)(Pp),Sp=t(47979),Cp={container:(0,Ct.iv)([m.l0.position.absolute,m.l0.top(0),m.l0.left(0),m.l0.width("100%"),m.l0.height("100%"),m.l0.minWidth(xl.ih),{borderRight:"1px solid",borderColor:m.TV.outlineDimmest}]),header:(0,Ct.iv)([m.l0.pt(8),m.l0.px(8),{zIndex:3}]),content:(0,Ct.iv)([m.l0.flex.growAndShrink(1)]),footer:(0,Ct.iv)({zIndex:2}),resources:(0,Ct.iv)([m.l0.justify.center,m.l0.position.relative,{"& > div":[{borderColor:m.TV.outlineDimmest}]}]),help:(0,Ct.iv)([m.l0.px(4),m.l0.py(8),m.l0.flex.growAndShrink(1),m.l0.justify.center,{borderTop:"1px solid",borderColor:m.TV.outlineDimmest}])};function Rp(){return(0,l.BX)(m.G7,{css:Cp.footer,children:[(0,l.tZ)(m.G7,{css:Cp.resources,children:(0,l.tZ)(Fd.w,{})}),(0,l.tZ)(m.G7,{css:Cp.help,children:(0,l.tZ)(ma.Z,{big:!0})})]})}function Ep(){var e=(0,u.b9)(jd),n=(0,u.b9)(zd),t=(0,Sp.oj)(),r=(0,c.useRef)(null);(0,c.useEffect)((function(){if(r.current){var n=r.current.getBoundingClientRect().height;e(t?{height:n,sections:[{id:"files",percent:0},{id:"kaboom",percent:60},{id:"dock",percent:40}]}:{height:n,sections:[{id:"files",percent:60},{id:"dock",percent:40}]})}}),[e,t]);var i=(0,Du.Z)((function(e){e&&n(e.height)}),{wait:100,type:"debounce"});return(0,Bc.l)(i,r)}var Tp=(0,c.memo)((function(){var e=(0,u.Dv)(Ld),n=Ep(),t=e[e.length-1];return(0,l.BX)(m.G7,{css:Cp.container,children:[(0,l.tZ)(m.G7,{css:Cp.header,children:(0,l.tZ)(kp,{})}),(0,l.tZ)(m.G7,{css:Cp.content,innerRef:n,children:e.map((function(e,n){return(0,l.tZ)(gp,{id:e,resizable:e!==t,border:0!==n},e)}))}),(0,l.tZ)(Rp,{})]})})),Dp=m.KD.div,Up=(0,Ct.iv)([m.l0.borderRadius(0,8,8,0),m.l0.height("calc(100% - 16px)"),m.l0.top(8),m.l0.position.relative,m.l0.flex.growAndShrink(1),m.l0.overflowY("auto"),m.l0.overflowX("hidden")]);function Mp(){var e=(0,xl.Iu)(),n=(0,Li.Se)().Content;return(0,l.tZ)(m.Tg,{elevated:!0,css:Up,children:(0,l.tZ)(n,{pane:e,options:{paneId:"",isHidden:!1,replacePane:function(){},openPane:function(){}}})})}var _p=(0,c.memo)(Mp),Bp=(0,Ct.iv)([m.l0.position.absolute,m.l0.center,dc,{cursor:"ew-resize",":hover":{zIndex:Ul.gutterHovered}}]),Gp=(0,Ct.iv)([m.l0.height(25),m.l0.width(2),mc]),Np=(0,Ct.iv)([m.l0.coverContainer,{":hover":{transform:"scaleX(4)"}}]),Ap=(0,Ct.iv)([m.l0.position.absolute,m.l0.height("200vh"),m.l0.width("200vw")]);function Op(){var e=(0,u.Dv)(Fl),n={start:(0,u.b9)(jl),update:(0,u.b9)(Xl),end:(0,u.b9)(Ll)},t=(0,u.Dv)(zl),r=Ml();return(0,l.BX)(Dp,{css:[Bp,{zIndex:t?r.active:r.normal}],style:{width:e.width,height:e.height,transform:"translate(".concat(e.x,"px, ").concat(e.y,"px)")},onPointerDown:function(e){ol(e,{start:function(){n.start()},move:function(e){var t=e.delta;n.update({deltaX:t.x})},end:function(){n.end()}})},children:[(0,l.tZ)(m.G7,{className:"grip-line",css:Gp}),(0,l.tZ)(m.G7,{css:t?Ap:Np})]})}var jp=(0,Ct.iv)([m.l0.height("100%"),m.l0.position.absolute,m.l0.top(0),m.l0.left(0),m.l0.flex.row]),Xp=(0,Ct.iv)([jp,m.l0.flex.growAndShrink(1),m.l0.overflow("auto")]);function Lp(){var e=(0,xl.Or)(),n=(0,Yt.Q)("flagLayoutNavigator"),t=0===e;return(0,l.BX)(l.HY,{children:[(0,l.BX)(m.G7,{css:n?Xp:jp,style:{width:e,visibility:t?"hidden":void 0},children:[t||n?null:(0,l.tZ)(_p,{}),n?(0,l.tZ)(Tp,{}):null]}),(0,l.tZ)(Op,{})]})}var zp=(0,c.memo)(Lp),Fp=t(18751),Hp=function(e){var n=e.isOpen,t=(0,s.useRouter)();return(0,l.tZ)(Z.Z,{isOpen:n,centered:!0,onRequestClose:function(){},maxWidth:600,children:(0,l.BX)(b.Z,{css:[w.l0.colWithGap(32)],children:[(0,l.BX)(b.Z,{css:[w.l0.rowWithGap(16),w.l0.align.center],children:[(0,l.tZ)(Fp.Z,{size:24,css:[w.l0.color.orangeStrongest]}),(0,l.tZ)(x.h,{level:2,variant:"headerDefault",children:"You can\u2019t join this Repl from Firewall Mode."})]}),(0,l.BX)(b.Z,{css:[w.l0.pr(32),w.l0.colWithGap(16)],children:[(0,l.tZ)(x.x,{multiline:!0,children:"This Repl was started by someone not in Firewall Mode. If you would like to join, please do one of the following:"}),(0,l.BX)(b.Z,{css:[w.l0.colWithGap(16),w.l0.pl(16)],children:[(0,l.tZ)(x.x,{children:"\u2022 Exit Firewall Mode."}),(0,l.tZ)(x.x,{children:"\u2022 Ask the creator to open this Repl in Firewall Mode."})]})]}),(0,l.BX)(b.Z,{css:[w.l0.rowWithGap(16),w.l0.justify.end],children:[(0,l.tZ)(g.ZP,{text:"Exit Firewall Mode",onClick:function(){window.location.href="https://www.replit.com".concat(t.asPath)}}),(0,l.tZ)(g.ZP,{text:"Leave",onClick:function(){t.push("/home","~/")}})]})]})})};function Wp(e){var n=e.repl,t=e.currentUser,r=function(e){var n=e.repl,t=(0,s.useRouter)(),r=(0,pr.C)(),i=(0,Wn.IY)(),o=(0,c.useState)(!1),a=o[0],l=o[1];return{services:(0,c.useState)((function(){return(0,Oi.Z)({runnerMode:"html"===n.language?"html":"shellrunner",onUnrecoverableError:function(e){if(e.message.toLowerCase().includes("repl not found"))t.push("/home","~/");else{var n={replenvironmentservices:!0,layoutv2:!0};fa.error(e),vi.Tb(e,{tags:n}),i({error:e,tags:n})}},openFile:r,onFirewallDenied:function(){return l(!0)}})}))[0],ui:(0,c.useState)((function(){return(0,Li.fK)({config:pa()})}))[0],isFirewallDenied:a}}({repl:n}),i=r.services,o=r.ui,a=r.isFirewallDenied,d=(0,u.Dv)(jn.dD),p=(0,Yt.Q)("flagLayoutNavigator");return(0,l.BX)(Ma,{ui:o,services:i,replId:n.id,replLanguage:n.language,children:[(0,l.tZ)(Tr.h,{}),(0,l.tZ)(rs,{}),(0,l.tZ)(Uu.Z,{}),(0,l.tZ)(Ai,{repl:n,currentUser:t}),(0,l.tZ)(Sr,{}),(0,l.tZ)(Sd,{}),(0,l.tZ)(wd,{repl:n,currentUser:t}),(0,l.tZ)(fs.ZP,{}),p?(0,l.tZ)(qp,{}):(0,l.BX)(m.G7,{css:[m.l0.flex.row,m.l0.flex.growAndShrink(1)],children:[(0,l.tZ)(m.G7,{css:[m.l0.py(8),m.l0.pl(8),!d&&m.l0.visibility.hidden],children:(0,l.tZ)(Ea,{})}),(0,l.tZ)(qp,{})]}),(0,l.tZ)(qu,{container:i.container}),(0,l.tZ)(ss,{}),(0,l.tZ)(ps,{}),(0,l.tZ)(Vp,{isMultiplayerSession:n.multiplayers.length>0}),(0,l.tZ)($p,{image:t.image,username:t.username}),(0,l.tZ)(Hp,{isOpen:a}),(0,l.tZ)(Td,{})]})}function $p(e){var n=e.image,t=e.username,r=(0,i.Z)((0,Wn.yF)(),2),o=r[0],a=r[1],u=(0,tr.n7)();return(0,c.useEffect)((function(){o&&u({})}),[o,u]),o?(0,l.tZ)(d.Z,{devHide:function(){return a(null)},eventId:o,currentUserImage:n,currentUserUsername:t}):null}function Vp(e){var n=function(e){var n=(0,i.Z)(c.useState(!1),2),t=n[0],o=n[1],l=(0,Wu.X)(),u=l&&!l.isDone&&!l.isLoading;return c.useEffect((function(){u||e&&"default"===Nu()&&o(!0)}),[e,u]),{shouldShowModal:t,hideModal:c.useCallback((function(){zu(!0),o(!1)}),[]),confirm:c.useCallback((0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ju();case 2:o(!1);case 3:case"end":return e.stop()}}),e)}))),[])}}(e.isMultiplayerSession),t=n.shouldShowModal,o=n.hideModal,u=n.confirm;return t?(0,l.tZ)(P,{onCancel:o,onConfirm:u}):null}var Kp=m.KD.div;function qp(){var e=function(){var e=(0,u.b9)(Fn.rR),n=(0,c.useRef)(null),t=(0,Du.Z)((function(t){var r=t.width,i=t.height;if(r&&i&&n.current){var o=n.current.getBoundingClientRect(),a=o.top,l=o.left;e({width:r,height:i,x:l,y:a})}}));return(0,c.useCallback)((function(e){n.current=e,t(e)}),[t])}(),n=(0,u.Dv)(jn.dD),t=(0,u.Dv)(Xn.gg),r=(0,u.Dv)(Xn.g3),i=(0,u.Dv)(Xn.If);return(0,l.tZ)(Kp,{ref:e,css:[m.l0.position.relative,m.l0.flex.growAndShrink(1)],children:n?(0,l.BX)(l.HY,{children:[(0,l.tZ)(zp,{}),r.map((function(e){return(0,l.tZ)(kc,{handleId:e},e)})),i.map((function(e){return(0,l.tZ)(Cu,{headerId:e},e)})),t.map((function(e){return(0,l.tZ)(rc,{paneId:e},e)})),(0,l.tZ)(Tu,{}),(0,l.tZ)(Md,{})]}):null})}var Yp=function(){var e=null,n=(0,s.useRouter)().query;if(!n.replUrl)throw new Error("Expected replUrl to be set");var t=n.replUrl.toString(),r=(0,h.Cd)({variables:{url:t},ssr:Boolean(n.ssr)}),i=r.data,o=r.loading,a=r.error,u=i&&"Repl"===i.repl.__typename?i.repl:null,d=(null===i||void 0===i?void 0:i.currentUser)||void 0,p=null!=(null===u||void 0===u?void 0:u.lesson),g="https://replit.com".concat(t),Z=function(e){if(e){if(e.description)return e.description;var n=v.Z.get(e.language).displayName;return"A ".concat(n," Repl")}}(u),y=(0,c.useState)(!1),b=y[0],x=y[1];return(0,c.useEffect)((function(){return x(!0)}),[]),(0,vs.Z)((null===i||void 0===i?void 0:i.repl)||null,t),e=a?(0,l.tZ)(m.G7,{css:[m.l0.center,m.l0.flex.growAndShrink(1)],children:(0,l.tZ)(m.xv,{children:"Something went wrong loading the Repl. Please reload the page and try again."})}):o||!b?(0,l.tZ)(m.G7,{css:[m.l0.center,m.l0.flex.growAndShrink(1)],children:(0,l.tZ)(_d.Z,{height:100})}):u&&d?(0,l.tZ)(Wp,{repl:u,currentUser:d},u.id):(0,l.tZ)(m.G7,{css:[m.l0.center,m.l0.flex.growAndShrink(1)],children:(0,l.tZ)(_d.Z,{height:100})}),(0,l.tZ)(Dr.E,{hideTour:!d||o||p,children:(0,l.tZ)(I.Z,{children:(0,l.tZ)(f.Z,{dataCy:"workspace-page",title:"".concat((null===u||void 0===u?void 0:u.title)||""),oembedUrl:g,description:Z,noHeader:!0,noFooter:!0,forceDrawer:!0,hideSidebar:!0,hideEmailVerify:!0,children:(0,l.tZ)(m.Tg,{css:[m.l0.position.absolute,m.l0.top(0),m.l0.left(0),m.l0.height("100vh"),m.l0.width("100vw"),m.l0.overflow("hidden")],children:e})})})})};Yp.getInitialProps=function(){var e=(0,r.Z)(a().mark((function e(n){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.req,r=n.store,e.next=3,(0,p.Z)(t,r);case 3:return e.abrupt("return",{});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();var Qp=Yp},7900:function(e,n,t){"use strict";t.d(n,{Pc:function(){return b},Pu:function(){return P}});var r=t(26042),i=t(7297),o=t(31230),a=t(21767);function l(){var e=(0,i.Z)(["\n  fragment TeamTemplateReplTemplateMember on TeamMembership {\n    id\n    user {\n      id\n      image\n      username\n      firstName\n      lastName\n    }\n    nickname\n    email\n    permissions\n  }\n"]);return l=function(){return e},e}var c=(0,o.Ps)(l()),u=t(16092),s=t(37887);function d(){var e=(0,i.Z)(["\n  fragment TeamTemplateUser on User {\n    id\n    username\n    displayName\n    fullName\n    image\n    url\n  }\n"]);return d=function(){return e},e}function p(){var e=(0,i.Z)(["\n  fragment TeamTemplateReplSubmission on ReplSubmission {\n    id\n    timeSubmitted\n    timeLastReviewed\n    author {\n      id\n      ...TeamTemplateUser\n    }\n    repl {\n      id\n      title\n      timeCreated\n      template {\n        id\n        dueDate\n      }\n      ...ReplLinkRepl\n    }\n  }\n  ","\n  ","\n"]);return p=function(){return e},e}function f(){var e=(0,i.Z)(["\n  fragment TeamTemplateSubmissionGroup on ReplSubmissionGroup {\n    submission {\n      id\n      timeSubmitted\n      timeLastReviewed\n      isGroupSubmission\n      repl {\n        id\n        url\n        nextPagePathname\n      }\n    }\n    users {\n      id\n      ...TeamTemplateUser\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function v(){var e=(0,i.Z)(["\n  fragment TeamTemplateReplTemplate on ReplTemplate {\n    id\n    isGroupProject\n    isPublished\n    imageUrl\n    url\n    dueDate\n    repl {\n      id\n    }\n    team {\n      id\n      username\n      displayName\n      members {\n        id\n        ...TeamTemplateReplTemplateMember\n      }\n    }\n    author {\n      id\n      username\n      image\n      ...UserLinkUser\n    }\n    submissions {\n      id\n      ...TeamTemplateReplSubmission\n    }\n    submissionGroups {\n      ...TeamTemplateSubmissionGroup\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return v=function(){return e},e}function h(){var e=(0,i.Z)(["\n  fragment TeamTemplateRepl on Repl {\n    id\n    title\n    slug\n    description\n    ...ReplLinkRepl\n    template {\n      id\n      ...TeamTemplateReplTemplate\n    }\n  }\n  ","\n  ","\n"]);return h=function(){return e},e}function m(){var e=(0,i.Z)(["\n  query TeamTemplate($replUrl: String!) {\n    repl(url: $replUrl) {\n      ... on Repl {\n        id\n        ...TeamTemplateRepl\n      }\n      ... on ReplRedirect {\n        replUrl\n        repl {\n          id\n        }\n      }\n      ... on SubscriptionExpiredError {\n        replId\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}var g={},Z=(0,o.Ps)(d()),y=(0,o.Ps)(p(),Z,a.Y),b=(0,o.Ps)(f(),Z),x=(0,o.Ps)(v(),c,u._,y,b),w=(0,o.Ps)(h(),a.Y,x),k=(0,o.Ps)(m(),w);function P(e){var n=(0,r.Z)({},g,e);return s.a(k,n)}}},function(e){var n=function(n){return e(e.s=n)};e.O(0,[3662,3443,2240,6344,6351,8764,8063,8966,4778,5395,9998,8944,8813,7485,5499,6165,4837,1889,1674,4508,2027,9641,6743,9230,7073,7903,4286,7046,2350,3497,3576,634,843,7737,1622,977,8583,6456,7838,6496,749,4522,9774,2888,179],(function(){return n(25436),n(60937)}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=replEnvironment2-50d015d2a8544c83.js.map