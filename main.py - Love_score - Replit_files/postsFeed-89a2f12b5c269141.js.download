(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7428],{64063:function(e){"use strict";e.exports=function e(n,t){if(n===t)return!0;if(n&&t&&"object"==typeof n&&"object"==typeof t){if(n.constructor!==t.constructor)return!1;var r,i,o;if(Array.isArray(n)){if((r=n.length)!=t.length)return!1;for(i=r;0!==i--;)if(!e(n[i],t[i]))return!1;return!0}if(n.constructor===RegExp)return n.source===t.source&&n.flags===t.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===t.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===t.toString();if((r=(o=Object.keys(n)).length)!==Object.keys(t).length)return!1;for(i=r;0!==i--;)if(!Object.prototype.hasOwnProperty.call(t,o[i]))return!1;for(i=r;0!==i--;){var l=o[i];if(!e(n[l],t[l]))return!1}return!0}return n!==n&&t!==t}},21880:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/postsFeed",function(){return t(64639)}])},68368:function(e,n,t){"use strict";t.d(n,{Z:function(){return a}});var r=t(35944),i=(t(67294),t(94184)),o=t.n(i),l=t(15085);function a(e){return(0,r.tZ)("div",{className:o()("dialog",{"is-destructive":e.isDestructive}),children:(0,r.BX)(l.G7,{css:[l.l0.colWithGap(24)],children:[(0,r.tZ)(l.h4,{variant:"headerDefault",level:2,children:e.title}),"string"===typeof e.children?(0,r.tZ)(l.xv,{multiline:!0,children:e.children}):e.children,(0,r.BX)(l.G7,{css:[l.l0.rowWithGap(12),l.l0.justify.end],children:[(0,r.tZ)(l.zx,{onClick:e.onCancel,text:"Cancel"}),(0,r.tZ)(l.zx,{colorway:e.isDestructive?"negative":"primary",onClick:e.onConfirm,text:e.confirmLabel||"Confirm"})]})]})})}},65632:function(e,n,t){"use strict";t.d(n,{Z:function(){return s}});var r=t(35944),i=t(60536),o=t.n(i),l=(t(67294),t(94184)),a=t.n(l);function s(e){var n=e.unreadDot,t=e.size,i=void 0===t?12:t,l=e.count,s=void 0===l?null:l,c=s&&s>99,u=c?"99+":null===s||void 0===s?void 0:s.toString();return(0,r.BX)("span",{className:"jsx-1c7f3b9066c4c334",children:[(0,r.tZ)("svg",{width:i,height:i,viewBox:"0 0 24 24",fill:"none",style:{color:"currentColor"},xmlns:"http://www.w3.org/2000/svg",className:"jsx-1c7f3b9066c4c334",children:(0,r.tZ)("path",{d:"M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"jsx-1c7f3b9066c4c334"})}),n&&(0,r.tZ)("div",{className:"jsx-1c7f3b9066c4c334 unread-indicator"}),Boolean(s)&&(0,r.tZ)("div",{className:"jsx-1c7f3b9066c4c334 "+(a()("count",{overflow:c})||""),children:u}),(0,r.tZ)(o(),{id:"1c7f3b9066c4c334",children:"span.jsx-1c7f3b9066c4c334{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}.unread-indicator.jsx-1c7f3b9066c4c334{width:5px;height:5px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;background-color:var(--accent-red-default);-webkit-transform:translate(8px,-1px);-moz-transform:translate(8px,-1px);-ms-transform:translate(8px,-1px);-o-transform:translate(8px,-1px);transform:translate(8px,-1px);position:absolute}.count.jsx-1c7f3b9066c4c334{-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;background-color:var(--accent-negative-default);-webkit-transform:translate(50%,-50%);-moz-transform:translate(50%,-50%);-ms-transform:translate(50%,-50%);-o-transform:translate(50%,-50%);transform:translate(50%,-50%);position:absolute;min-width:16px;padding:2px 3px;height:16px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;color:white;font-size:var(--font-size-small)}.overflow.jsx-1c7f3b9066c4c334{-webkit-transform:translate(25%,-50%);-moz-transform:translate(25%,-50%);-ms-transform:translate(25%,-50%);-o-transform:translate(25%,-50%);transform:translate(25%,-50%)}"})]})}},70338:function(e,n,t){"use strict";var r=t(47568),i=t(34051),o=t.n(i),l=t(15794);n.Z=function(){var e=(0,r.Z)(o().mark((function e(n,t){var r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=5;break}r=n.user,e.next=14;break;case 5:if(!((i=t.getState().user)&&i.userInfo.isLoggedIn&&i.userInfo)){e.next=10;break}r=i.userInfo,e.next=14;break;case 10:return e.next=12,(0,l.LK)("/is_authenticated");case 12:(a=e.sent).success&&(r=a.user);case 14:return r&&(n&&(r=JSON.parse(JSON.stringify(r))),t.dispatch({type:"FETCH_USER_INFO_SUCCESS",user:r})),e.abrupt("return",{user:r});case 16:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},32703:function(e,n,t){"use strict";t.d(n,{L0:function(){return s},Xy:function(){return l},pV:function(){return a}});var r,i=t(82670);!function(e){e.ArrayBuffer="ARRAY_BUFFER",e.BinaryString="BINARY_STRING",e.DataURL="DATA_URL",e.Text="TEXT"}(r||(r={}));var o=function(e,n){return(0,i.Z)(e,window.File)?new Promise((function(t,i){var o=new window.FileReader;switch(o.onload=function(n){var r;(null===(r=n.target)||void 0===r?void 0:r.result)?t(n.target.result):i(new Error('Failed to read file "'.concat(e.name,'"')))},o.onerror=i,n){case r.ArrayBuffer:o.readAsArrayBuffer(e);break;case r.BinaryString:o.readAsBinaryString(e);break;case r.DataURL:o.readAsDataURL(e);break;case r.Text:o.readAsText(e)}})):Promise.all(Array.from(e).filter((function(e){return!!e})).map((function(e){return o(e,n)})))},l=function(e){return o(e,r.Text)},a=function(e){return o(e,r.ArrayBuffer)},s=function(e){return o(e,r.DataURL)}},49197:function(e,n,t){"use strict";t.d(n,{G:function(){return x},Z:function(){return k}});var r=t(26042),i=t(69396),o=t(10253),l=t(35944),a=(t(67294),t(70917)),s=t(32399),c=t(69346),u=t(27843),d=t(81255),p=t(86292),f=t(44044),h=t(29163),Z=t(15085),g=t(93160),m=t(81456),v=t(1144),b=t(49412),x=(0,a.iv)([f.gU.filled,d.l0.p(8),{width:"auto",height:"auto"}]);function k(e){var n=e.repl,t=e.currentUser,a=e.surface,f=void 0===a||a,k=(0,o.Z)((0,s.lU)(),2),y=k[0],P=k[1].loading,w=(0,l.BX)(l.HY,{children:[(null===t||void 0===t?void 0:t.isVerified)&&(0,l.tZ)(Z.zx,{css:[f&&x],disabled:P,onClick:function(){n.currentUserDidLike||(0,p.j)(p.U3.REACTED_TO_REPL,{replView:"https://replit.com"+n.url,reaction:"heart",isReplTalk:!1,item:"repl",isCommunityPublish:n.wasPosted,isAppPublish:n.wasPublished}),y({variables:{input:{replId:n.id}},optimisticResponse:{toggleReplLike:(0,i.Z)((0,r.Z)({},n),{likeCount:Math.max(0,n.likeCount+(n.currentUserDidLike?-1:1)),currentUserDidLike:!n.currentUserDidLike})}})},iconLeft:n.currentUserDidLike?(0,l.tZ)(b.Z,{}):(0,l.tZ)(u.Z,{}),text:n.likeCount>0?(0,m.d)(n.likeCount):"Like"}),t&&!t.isVerified&&(0,l.BX)(c.Z,{css:[d.l0.flex.row,d.l0.align.center,d.l0.backgroundColor.backgroundHigher,d.l0.borderRadius(8),d.l0.pr(8)],children:[(0,l.tZ)(h.Z,{alt:"Verify your email to like",css:f&&x,disabled:!0,children:(0,l.tZ)(u.Z,{})}),(0,l.tZ)(v.x,{color:"dimmer",children:(0,m.d)(n.likeCount)})]}),!t&&(0,l.BX)(c.Z,{css:[d.l0.flex.row,d.l0.align.center,d.l0.backgroundColor.backgroundHigher,d.l0.borderRadius(8),d.l0.pr(8)],children:[(0,l.tZ)(h.Z,{alt:"Log in to like",css:f&&x,disabled:!0,children:(0,l.tZ)(u.Z,{})}),(0,l.tZ)(v.x,{color:"dimmer",children:(0,m.d)(n.likeCount)})]})]});return f?(0,l.tZ)(g.Z,{background:"default",css:[d.l0.borderRadius(8)],children:w}):(0,l.tZ)(c.Z,{children:w})}},45528:function(e,n,t){"use strict";t.d(n,{U:function(){return l},b:function(){return a}});var r=t(67294),i=t(64063),o=t.n(i);function l(e){var n=e.repl,t=e.currentUser;return{asViewer:e.asViewer,repl:{__typename:"Repl",currentUserPermissions:n.currentUserPermissions,flagOwnerDotReplitPackager:n.flagOwnerDotReplitPackager,id:n.id,language:n.language,slug:n.slug},currentUser:t?{__typename:"CurrentUser",id:t.id,username:t.username,flagTrackOtClientDataLoss:t.flagTrackOtClientDataLoss,isSubscribed:t.isSubscribed,roles:t.roles}:void 0}}function a(e){var n=e?l(e):null,t=r.useRef(n);return o()(n,t.current)||(t.current=n),t.current}},9523:function(e,n,t){"use strict";t.d(n,{C:function(){return s},D:function(){return a}});var r=t(7297),i=t(31230);function o(){var e=(0,r.Z)(['\n  fragment CrosisContextCurrentUser on CurrentUser {\n    id\n    username\n    isSubscribed\n    roles {\n      id\n      name\n    }\n    flagTrackOtClientDataLoss: gate(\n      feature: "flag-ot-data-loss-client-tracking"\n    )\n  }\n']);return o=function(){return e},e}function l(){var e=(0,r.Z)(['\n  fragment CrosisContextRepl on Repl {\n    id\n    language\n    slug\n    user {\n      id\n      username\n    }\n    currentUserPermissions {\n      containerWrite\n    }\n    flagOwnerDotReplitPackager: gateOnOwner(feature: "flag-dotreplit-packager")\n  }\n']);return l=function(){return e},e}var a=(0,i.Ps)(o()),s=(0,i.Ps)(l())},64639:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return je}});var r=t(47568),i=t(14924),o=t(10253),l=t(34051),a=t.n(l),s=t(35944),c=t(67294),u=t(70338),d=t(67903),p=t(27182),f=t(86292),h=t(90317),Z=t(26042),g=t(7297),m=t(31230),v=t(38388),b=t(37887);function x(){var e=(0,g.Z)(["\n  fragment PostsFeedPageTag on Tag {\n    id\n    ...PostsFeedNavTag\n  }\n  ","\n"]);return x=function(){return e},e}function k(){var e=(0,g.Z)(["\n  query PostsFeedPage {\n    currentUser {\n      id\n    }\n    boards {\n      id\n      name\n      slug\n      color\n      description\n    }\n  }\n"]);return k=function(){return e},e}function y(){var e=(0,g.Z)(["\n  query PostsFeedPage2($limit: Int, $tags: [String!]!) {\n    currentUser {\n      id\n      isModerator: hasRole(role: MODERATOR)\n      isAdmin: hasRole(role: ADMIN)\n      hasPrivacyRole\n      isVerified\n    }\n    tags(tags: $tags) {\n      id\n      ...PostsFeedPageTag\n    }\n    tagGroups {\n      official(limit: $limit) {\n        id\n        ...PostsFeedPageTag\n      }\n      community(limit: $limit) {\n        id\n        ...PostsFeedPageTag\n      }\n    }\n  }\n  ","\n"]);return y=function(){return e},e}var P={},w=(0,m.Ps)(x(),v.M);k();var C=(0,m.Ps)(y(),w);var R=t(11163),A=t.n(R),U=t(34193),S=t(1879),B=t(81255),T=t(15085),G=t(69396),O=t(29815),W=t(17674),L=t(35087),X=t(22411);function D(){var e=(0,g.Z)(["\n  query ReplPostsFeed($options: ReplPostsQueryOptions) {\n    currentUser {\n      id\n      ...ReplPostCurrentUser\n    }\n    replPosts(options: $options) {\n      pageInfo {\n        nextCursor\n      }\n      items {\n        id\n        ...ReplPostPost\n        ...ReplCardPostPost\n        ...OldPostPost\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return D=function(){return e},e}var N={},j=(0,m.Ps)(D(),W.rP,W.U5,L.mx,X.h);var _=t(69346),E=t(1144),F=t(77365),V=t(4472),z=t(65338),I=t(5886),M=t(92850),q=t(4972);function H(e){var n=function(n){n&&n.preventDefault(),r||((0,f.j)(f.U3.POSTS_LOAD_MORE_CLICKED,{board:"all"}),l({variables:{options:(0,G.Z)((0,Z.Z)({},e),{after:g})},updateQuery:function(e,n){var t;if(!n||!(null===n||void 0===n||null===(t=n.fetchMoreResult)||void 0===t?void 0:t.replPosts.items))return e;var r=n.fetchMoreResult,i=e?e.replPosts.items:[],o=(0,Z.Z)({},r),l=r.replPosts.items;return l.length>0&&c.replace({pathname:c.pathname,query:(0,Z.Z)({},c.query)},{pathname:h,query:{}},{shallow:!0}),o.replPosts.items=(0,O.Z)(i).concat((0,O.Z)(l)),o}}))},t=function(e){var n=(0,Z.Z)({},N,e);return b.a(j,n)}({variables:{options:e},notifyOnNetworkStatusChange:!0,context:{noBatch:!0}}),r=t.loading,i=t.data,o=t.error,l=t.fetchMore,a=(0,q.Z)({onLoadMore:function(){return g&&n()},rootMargin:"0px 0px 1000px 0px"}).targetRef,c=(0,R.useRouter)();if(o)return(0,s.tZ)(E.x,{children:o.message});var u=null===i||void 0===i?void 0:i.replPosts,d=(null===i||void 0===i?void 0:i.currentUser)||void 0;if(!u&&r)return(0,s.tZ)(_.Z,{css:[B.l0.py(64),B.l0.center],children:(0,s.tZ)(F.Z,{size:32})});if(!u)return null;var p=u.items,h=c.asPath.split("?")[0],g=u.pageInfo.nextCursor,m=e.searchQuery&&p?p.length:null;return(0,s.BX)(_.Z,{css:[B.l0.colWithGap(32)],children:[(0,s.BX)(_.Z,{css:[B.l0.colWithGap(16)],children:[null!==m&&m>0?(0,s.tZ)(E.x,{color:"dimmer",children:"REPLS AND POSTS FOUND"}):null,null!==m&&0===m?(0,s.tZ)(E.x,{color:"dimmer",children:"No Repls or Posts Found"}):null,(0,s.tZ)(_.Z,{css:[B.l0.colWithGap(64)],children:p.map((function(e){return e.title?e.replComment?(0,s.tZ)(V.Z,{post:e,currentUser:d||void 0},e.id):(0,s.tZ)(z.Z,{post:e},e.id):(0,s.tZ)(M.Z,{post:e,currentUser:d||void 0},e.id)}))})]}),(0,s.tZ)(_.Z,{css:[B.l0.center],children:r?(0,s.tZ)(F.Z,{}):g&&(0,s.tZ)(I.Z,{as:{pathname:h,query:{after:g}},href:{pathname:c.pathname,query:(0,G.Z)((0,Z.Z)({},c.query),{after:g})},onClick:n,text:"Load more",ref:a})})]})}var $=t(13625);function Q(){var e=(0,g.Z)(["\n  fragment ReplPostsPinnedPostsUser on User {\n    id\n    username\n    image\n  }\n"]);return Q=function(){return e},e}function Y(){var e=(0,g.Z)(["\n  fragment ReplPostsPinnedPostsPost on Post {\n    id\n    title\n    commentCount\n    ...PostLinkPost\n    replComment {\n      id\n    }\n    repl {\n      id\n      title\n      url\n      commentCount\n    }\n    user {\n      id\n      ...ReplPostsPinnedPostsUser\n    }\n  }\n  ","\n  ","\n"]);return Y=function(){return e},e}function K(){var e=(0,g.Z)(["\n  query ReplPostsPinnedPosts {\n    pinnedPosts {\n      id\n      ...ReplPostsPinnedPostsPost\n    }\n  }\n  ","\n"]);return K=function(){return e},e}var J={},ee=(0,m.Ps)(Q()),ne=(0,m.Ps)(Y(),$.p,ee),te=(0,m.Ps)(K(),ne);var re=t(41664),ie=t.n(re),oe=t(76149),le=t(93160),ae=t(45273),se=t(12530),ce=t(65632),ue=t(7243),de=t(46197),pe=t(62913),fe=t(70917),he=_.K.a,Ze=function(){return(0,s.tZ)(_.Z,{children:(0,s.tZ)(ie(),{href:"/communityHub",as:"/community-hub",children:(0,s.BX)(_.Z,{css:[{aspectRatio:"1.87"},B.l0.minWidth(230),B.l0.flex.grow(1),B.l0.position.relative,B.l0.borderRadius(8),T.gU.filled,B.l0.overflow("hidden")],children:[(0,s.tZ)(_.Z,{"aria-label":"cover image for communityhub",css:[B.l0.width("100%"),B.l0.height("100%"),(0,fe.iv)({background:"url(".concat((0,pe.X)({src:"/public/images/community-hub/community-hub-preview.png",width:460}),")"),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"})]}),(0,s.tZ)(_.Z,{css:[B.l0.position.absolute,B.l0.bottom(0),B.l0.width("100%"),B.l0.height("65%"),{background:"linear-gradient(rgba(33,36,44,0), rgba(33,36,44,1))"}]}),(0,s.BX)(_.Z,{css:[B.l0.colWithGap(4),B.l0.position.absolute,B.l0.bottom(0),B.l0.left(0),B.l0.p(12),(0,fe.iv)({color:"white"})],children:[(0,s.tZ)(T.xv,{multiline:!0,variant:"subheadBig",css:[{overflowWrap:"break-word",wordBreak:"break-word",display:"block"},{"& > div > p":{color:"white",fontSize:T.TV.fontSizeSubheadBig,fontWeight:T.TV.fontWeightMedium,lineHeight:T.TV.lineHeightSubheadBig}}],children:"Community Hub"}),(0,s.tZ)(_.Z,{css:[B.l0.rowWithGap(8),B.l0.center,B.l0.flex.growAndShrink(1)],children:(0,s.tZ)(T.xv,{css:B.l0.flex.growAndShrink(1),variant:"small",multiline:!0,children:"Get started in the Replit Community"})})]})]})})})};function ge(e){var n=e.link,t=e.title,r=e.user,i=e.commentCount;return(0,s.tZ)(ie(),(0,G.Z)((0,Z.Z)({passHref:!0},n),{children:(0,s.BX)(he,{css:[T.gU.filled,B.l0.p(8),B.l0.rowWithGap(8),B.l0.align.center,B.l0.justify.spaceBetween,{color:"inherit"}],children:[(0,s.BX)(_.Z,{css:[B.l0.rowWithGap(8),B.l0.flex.growAndShrink(1),B.l0.align.center,B.l0.maxWidth("80%")],children:[(0,s.tZ)(ae.Z,{src:r.image,username:r.username,size:24}),(0,s.tZ)(T.xv,{title:t,css:[B.l0.flex.growAndShrink(1)],children:t})]}),(0,s.tZ)(se.Z,{count:i,tooltip:1===i?"1 comments":"".concat(i," comments"),children:(0,s.tZ)(ce.Z,{})})]})}))}function me(){var e=function(e){var n=(0,Z.Z)({},J,e);return b.a(te,n)}(),n=e.loading,t=e.data,r=e.error;if(n)return(0,s.tZ)(_.Z,{css:[B.l0.p(8),B.l0.center],children:(0,s.tZ)(F.Z,{})});if(r)return(0,s.tZ)(T.xv,{children:r.message});if(!t)return null;var o,l,a,c=t.pinnedPosts.map((function(e){var n=e.replComment,t=e.user,r=n&&e.repl?e.repl:null;if(!t)return null;var i=n&&r?r.commentCount:e.commentCount,o=e.title||(null===r||void 0===r?void 0:r.title);return o?(0,s.tZ)(ge,{user:t,title:o,commentCount:i,link:r&&n?(0,V.x)({replUrl:r.url,replCommentId:n.id}):(0,oe.i)(e)},e.id):null}));return(0,s.BX)(le.Z,{background:"root",css:[B.l0.colWithGap(16)],children:[(0,s.tZ)(T.xv,{color:"dimmer",children:"FEATURED"}),(0,s.tZ)(_.Z,{css:(o={},(0,i.Z)(o,de.A.mobile,[B.l0.maxWidth(300),B.l0.flex.growAndShrink(1)]),(0,i.Z)(o,de.A.desktop,[B.l0.colWithGap(8),B.l0.align.stretch]),o),children:(0,s.tZ)(Ze,{})}),(0,s.BX)(_.Z,{children:[(0,s.tZ)(ue.Z,{gap:8,inset:16,css:[(l={},(0,i.Z)(l,de.A.desktop,[B.l0.display.none]),(0,i.Z)(l,de.A.mobile,{a:[B.l0.minWidth("40vw"),B.l0.maxWidth("80vw")]}),(0,i.Z)(l,"marginLeft","calc(-1 * ".concat(T.TV.space16,")")),(0,i.Z)(l,"marginRight","calc(-1 * ".concat(T.TV.space16,")")),l)],children:c}),(0,s.tZ)(_.Z,{css:(a={},(0,i.Z)(a,de.A.mobile,[B.l0.display.none]),(0,i.Z)(a,de.A.desktop,[B.l0.colWithGap(8),B.l0.align.stretch]),a),children:c})]})]})}var ve=t(15589),be=t(98967),xe=t(49619),ke=t(5804),ye=t(44365),Pe=t(24351);function we(){var e=(0,g.Z)(["\n  query ReplPostsSearch(\n    $options: ReplPostsQueryOptions\n    $tagsSearch: String!\n    $tagsLimit: Int = 50\n  ) {\n    currentUser {\n      id\n      ...ReplPostCurrentUser\n    }\n    replPosts(options: $options) {\n      pageInfo {\n        nextCursor\n      }\n      items {\n        id\n        ...ReplPostPost\n        ...ReplCardPostPost\n        ...OldPostPost\n      }\n    }\n    tagGroups {\n      official(search: $tagsSearch, limit: $tagsLimit) {\n        id\n        ...PostsFeedNavTag\n      }\n      community(search: $tagsSearch, limit: $tagsLimit) {\n        id\n        ...PostsFeedNavTag\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return we=function(){return e},e}var Ce={},Re=(0,m.Ps)(we(),W.rP,W.U5,L.mx,X.h,v.M);var Ae=t(61179),Ue={value:"",loading:!1,result:{tags:[],posts:[]}};function Se(e,n){switch(n.type){case"data":var t=n.data,r=t.tagGroups,i=t.replPosts,o=t.currentUser,l=(0,O.Z)(r.official).concat((0,O.Z)(r.community)),a=i.items;return(0,G.Z)((0,Z.Z)({},e),{loading:!1,result:{currentUser:o,tags:(0,Ae.Z)(l,{existing:e.result.tags,getKey:function(e){return e.id}}),posts:(0,Ae.Z)(a,{existing:e.result.posts,getKey:function(e){return e.id}})}});case"value":return(0,G.Z)((0,Z.Z)({},e),{loading:Boolean(n.value),value:n.value});case"clear":return Ue}}function Be(e){var n=e.initialValue,t=void 0===n?"":n,r=e.currentTags,i=(0,c.useReducer)(Se,(0,G.Z)((0,Z.Z)({},Ue),{value:t})),o=i[0],l=i[1],a=(0,Pe.Z)(o.value,200),s=function(e){var n=(0,Z.Z)({},Ce,e);return b.a(Re,n)}({variables:{tagsSearch:a,options:{searchQuery:a,tags:(null===r||void 0===r?void 0:r.length)?r.map((function(e){return e.id})):void 0}},skip:!a,notifyOnNetworkStatusChange:!0}).data;(0,c.useEffect)((function(){s&&l({type:"data",data:s})}),[s]);var u=(0,c.useCallback)((function(e){l({type:"value",value:e})}),[l]),d=(0,c.useCallback)((function(){l({type:"clear"})}),[l]);return{loading:o.loading,value:o.value,setValue:u,result:o.result,clear:d}}var Te=t(72917);function Ge(e){var n=e.posts,t=e.tags,r=e.currentUser,i=e.search,o=e.currentTags,l=e.loading;return(0,s.BX)(_.Z,{css:[B.l0.colWithGap(32)],children:[(null===o||void 0===o?void 0:o.length)?null:(0,s.tZ)(We,{tags:t}),(0,s.BX)(_.Z,{css:[B.l0.colWithGap(16)],children:[n.length>0?(0,s.tZ)(Oe,{children:"REPLS AND POSTS FOUND"}):null,0!==n.length||l?null:(0,s.BX)(_.Z,{css:[B.l0.display.block],children:[(0,s.tZ)(E.x,{color:"dimmer",multiline:!0,children:'No Repls or Posts found for "'}),(0,s.tZ)(E.x,{multiline:!0,children:i}),(0,s.BX)(E.x,{color:"dimmer",multiline:!0,children:['"',(null===o||void 0===o?void 0:o.length)?(0,s.BX)(s.HY,{children:[" in ",o.map((function(e){return"#"+e.id})).join(", ")]}):null]})]}),(0,s.tZ)(_.Z,{css:[B.l0.colWithGap(64)],children:n.map((function(e){return e.title?e.replComment?(0,s.tZ)(V.Z,{post:e,currentUser:r||void 0},e.id):(0,s.tZ)(z.Z,{post:e},e.id):(0,s.tZ)(M.Z,{post:e,currentUser:r||void 0},e.id)}))})]})]})}function Oe(e){var n=e.children;return(0,s.tZ)(E.x,{color:"dimmer",children:n})}function We(e){var n,t=e.tags;return t.length?(0,s.BX)(s.HY,{children:[(0,s.BX)(_.Z,{css:[B.l0.colWithGap(16),(0,i.Z)({},de.A.desktop,[B.l0.display.none])],children:[(0,s.tZ)(Oe,{children:"TAGS FOUND"}),(0,s.tZ)(ue.Z,{gap:8,inset:16,css:[(n={},(0,i.Z)(n,de.A.desktop,[B.l0.display.none]),(0,i.Z)(n,"marginLeft","calc(-1 * ".concat(B.TV.space16,")")),(0,i.Z)(n,"marginRight","calc(-1 * ".concat(B.TV.space16,")")),n)],children:t.map((function(e){return(0,s.tZ)(Te.t,{tag:e,link:(0,ke.M6)(e.id)},e.id)}))})]}),(0,s.BX)(_.Z,{css:[B.l0.colWithGap(16),(0,i.Z)({},de.A.mobile,[B.l0.display.none])],children:[(0,s.tZ)(Oe,{children:"TAGS FOUND"}),(0,s.tZ)(_.Z,{css:[B.l0.flex.row,B.l0.flex.wrap,{margin:"calc(-1 * ".concat(B.TV.space8,")")}],children:t.map((function(e){return(0,s.tZ)(_.Z,{css:[B.l0.m(4)],children:(0,s.tZ)(Te.t,{tag:e,link:(0,ke.M6)(e.id)})},e.id)}))})]}),(0,s.tZ)(_.Z,{css:{borderTop:"1px solid "+B.TV.outlineDimmest}})]}):null}var Le=t(32951),Xe=t(90054),De=t(37838);function Ne(){var e,n=(0,R.useRouter)(),t=(0,ye.Qf)(n.query);(0,Xe.c)("apps");var r=function(e){var n=(0,Z.Z)({},P,e);return b.a(C,n)}({variables:{tags:t.tags||[],limit:10}}),l=r.data,a=r.previousData,u=Boolean((null===l||void 0===l?void 0:l.currentUser)||(null===a||void 0===a?void 0:a.currentUser)),g=(0,o.Z)(c.useState(!1),2),m=g[0],v=g[1],x=(0,o.Z)(c.useState(!1),2),k=x[0],y=x[1],w=(0,o.Z)(c.useState(!1),2),G=w[0],O=w[1],W=(null===l||void 0===l?void 0:l.tagGroups)||(null===a||void 0===a?void 0:a.tagGroups),L=(null===l||void 0===l?void 0:l.tags)||(null===a||void 0===a?void 0:a.tags),X=Be({initialValue:t.searchQuery,currentTags:L}),D=(0,o.Z)(n.asPath.split("?"),1)[0];(0,Le.Z)(X.clear,[D,X.clear]),c.useEffect((function(){var e;if(!X.loading){var n=(0,ye.Qf)(A().query);if((n.searchQuery||null)!==(X.value||null))if(X.value){var t=(0,ke.nr)(X.value,n);A().push(t.href,t.as,{shallow:!0})}else{var r=(null===(e=n.tags)||void 0===e?void 0:e.length)?(0,ke.M6)(n.tags.join(",")):(0,ke.L8)();A().push(r.href,r.as,{shallow:!0})}}}),[X.loading,X.value]);var N,j,F,V,z,I,M=u?function(){v(!0)}:function(){y(!0),(0,f.j)(f.U3.SIGNUP_REQUESTED,{from:"feed",location:"publish-button"})},q=(0,s.BX)(_.Z,{css:[B.l0.rowWithGap(16),B.l0.align.center,B.l0.justify.spaceBetween,(N={},(0,i.Z)(N,de.A.mobile,[B.l0.pb(16)]),(0,i.Z)(N,de.A.desktop,[B.l0.pb(32)]),N)],children:[(0,s.tZ)(_.Z,{css:[B.l0.flex.growAndShrink(1),(0,i.Z)({},de.A.desktop,[B.l0.maxWidth(280)])],children:0===(null===L||void 0===L?void 0:L.length)?(0,s.tZ)(p.Z,{loading:X.loading,value:X.value,onChange:function(e){return X.setValue(e.currentTarget.value)},onClear:X.clear,placeholder:"Search for Repls, Posts, and Tags"}):null}),X.value?null:(0,s.tZ)(_.Z,{children:(0,s.tZ)(ve.Z,{id:"",items:[{value:h.vX.Hot,title:h.vX.Hot},{value:h.vX.New,title:h.vX.New},{value:h.vX.Top,title:h.vX.Top}],initialSelectedItem:{value:t.order,title:t.order},onChange:function(e){var r=(0,ke.QH)(e.value,t);n.push(r.href,r.as)}})})]});return(0,s.tZ)(d.Z,{title:"Community",description:"Your place to share and discover Repls",children:(0,s.BX)(le.Z,{css:[B.l0.maxWidth(1e3),B.l0.py(32),B.l0.px(16),(j={marginLeft:"auto",marginRight:"auto"},(0,i.Z)(j,de.A.mobile,[B.l0.colWithGap(16)]),(0,i.Z)(j,de.A.desktop,[B.l0.colWithGap(24)]),j)],children:[(0,s.tZ)(_.Z,{css:[B.l0.colWithGap(16)],children:(0,s.BX)(_.Z,{css:[(F={},(0,i.Z)(F,de.A.mobile,[B.l0.align.baseline]),(0,i.Z)(F,de.A.desktop,[B.l0.align.center]),F),[B.l0.rowWithGap(8),B.l0.justify.spaceBetween]],children:[(0,s.BX)(_.Z,{css:(V={},(0,i.Z)(V,de.A.mobile,[B.l0.colWithGap(8)]),(0,i.Z)(V,de.A.desktop,[B.l0.rowWithGap(16)]),V),children:[(0,s.tZ)(E.h,{level:1,variant:"headerBig",children:"Community"}),(null===L||void 0===L?void 0:L.length)?(0,s.tZ)(_.Z,{css:[B.l0.rowWithGap(8),B.l0.flex.growAndShrink(1)],children:L.map((function(e){var n=L.filter((function(n){return n.id!==e.id})),t=n.length?(0,ke.M6)(n.map((function(e){return e.id})).join(",")):(0,ke.L8)();return(0,s.tZ)(Te.t,{tag:e,link:t,isActive:!0},e.id)}))}):null]}),(0,s.tZ)(_.Z,{children:(null===l||void 0===l||null===(e=l.currentUser)||void 0===e?void 0:e.hasPrivacyRole)?null:(0,s.tZ)(T.zx,{iconLeft:(0,s.tZ)(xe.Z,{}),css:[B.l0.justify.center],big:!0,colorway:"primary",text:"Publish a Repl",onClick:M})})]})}),(0,s.BX)(_.Z,{css:(z={},(0,i.Z)(z,de.A.mobile,[B.l0.colWithGap(32)]),(0,i.Z)(z,de.A.desktop,[B.l0.rowWithGap(32)]),z),children:[(0,s.BX)(_.Z,{css:(0,i.Z)({},de.A.desktop,[B.l0.width("30%")]),children:[(0,s.tZ)(_.Z,{css:(0,i.Z)({},de.A.desktop,[B.l0.display.none]),children:q}),(0,s.BX)(_.Z,{css:[(I={},(0,i.Z)(I,de.A.mobile,[B.l0.colWithGap(16)]),(0,i.Z)(I,de.A.desktop,[B.l0.colWithGap(32)]),I),X.value&&(0,i.Z)({},de.A.mobile,B.l0.display.none),(null===L||void 0===L?void 0:L.length)&&(0,i.Z)({},de.A.mobile,B.l0.display.none)],children:[(0,s.tZ)(me,{}),W?(0,s.tZ)(ke.JL,{tagGroups:W,params:t}):null]})]}),(0,s.BX)(_.Z,{css:[B.l0.flex.growAndShrink(1)],children:[(0,s.tZ)(_.Z,{css:(0,i.Z)({},de.A.mobile,[B.l0.display.none]),children:q}),(0,s.tZ)(_.Z,{css:[B.l0.colWithGap(16)],children:X.value?(0,s.tZ)(Ge,{tags:X.result.tags,posts:X.result.posts,search:X.value,loading:X.loading,currentTags:L,currentUser:(null===l||void 0===l?void 0:l.currentUser)||(null===a||void 0===a?void 0:a.currentUser)}):(0,s.tZ)(H,{searchQuery:t.searchQuery,tags:t.tags,order:t.order,after:t.after,count:t.count})})]})]}),(0,s.tZ)(S.Z,{onRequestClose:function(){G&&!window.confirm("Are you sure you want to leave? Unsaved changes may be lost.")||(v(!1),O(!1))},isOpen:m,noPadding:!0,maxWidth:872,fitContent:!0,children:(0,s.tZ)(De.Z,{source:"postsFeed"})}),(0,s.tZ)(U.Z,{isOpen:k,onRequestClose:function(){y(!1)},children:(0,s.tZ)(be.Z,{onSuccess:function(){y(!1),v(!0)},source:"postsFeed"})})]})})}Ne.getInitialProps=function(){var e=(0,r.Z)(a().mark((function e(n){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.req,r=n.store,e.next=3,(0,u.Z)(t,r);case 3:return e.abrupt("return",{});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();var je=Ne}},function(e){var n=function(n){return e(e.s=n)};e.O(0,[3662,2240,8764,8063,8966,4778,9998,8944,7485,7073,7903,4286,7046,4718,3497,3576,977,5208,7838,6243,5195,9774,2888,179],(function(){return n(25436),n(21880)}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=postsFeed-89a2f12b5c269141.js.map