"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4522],{99094:function(e,t,n){n.d(t,{Bz:function(){return v},PO:function(){return g}});var r=n(51438),i=n(10253),a=n(34051),o=n.n(a),l=n(52027),s=n.n(l),c=s().DIFF_DELETE,d=s().DIFF_INSERT,u=s().DIFF_EQUAL;function f(e,t){var n=new(s()),r=n.diff_linesToChars_(e,t),i=r.chars1,a=r.chars2,o=r.lineArray,l=n.diff_main(i,a,!1);return n.diff_charsToLines_(l,o),l}function p(e){return e.split("\n").length-1}function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===t)return 0;var r=e.indexOf("\n",n);return-1===r?null:1===t?r+1:h(e,t-1,r+1)}function m(e,t,n){if(e>0){var r=h(n,t);if(null!==r)return{lineNumber:t,character:r,padding:e}}return null}function v(e,t){for(var n,r,a=f(e+((n="\n"===e[e.length-1])?"":"\n"),t+((r="\n"===t[t.length-1])?"":"\n")),o=0,l=0,s=[],h=[],v=[],g=[],b=0,x=0,Z=0;Z<a.length;Z++){var y=(0,i.Z)(a[Z],2),w=y[0],k=p(y[1]);switch(w){case c:var C,j=(0,i.Z)(null!==(C=a[Z+1])&&void 0!==C?C:[],2),_=j[0],T=j[1];o+=k;for(var S=0;S<k;S++)s.push(o-S);var z=k;_===d&&(z-=p(T));var B=m(z,l,t);B&&g.push(B);break;case d:var R,E=(0,i.Z)(null!==(R=a[Z-1])&&void 0!==R?R:[],2),G=E[0],L=E[1];l+=k;for(var I=0;I<k;I++)h.push(l-I);var N=k;G===c&&(N-=p(L));var A=m(N,o,e);A&&v.push(A);break;case u:l>x&&(x=l),o>b&&(b=o),o+=k,l+=k}}var D=v.filter((function(e){return e.lineNumber<x})),X=g.filter((function(e){return e.lineNumber<b}));return{leftPadded:D,rightPadded:X,leftColored:s,rightColored:h,changedTrailingNewline:n!==r,leftTrailingNewline:n,rightTrailingNewline:r}}var g=function(){function e(t,n){(0,r.Z)(this,e),this.deleted=new Set,this.inserted=new Map,this.linePositions=new Map,this.lineLengths=new Map,this.currentTrailingNewline="\n"===t[t.length-1],this.otherTrailingNewline="\n"===n[n.length-1],this.changedTrailingNewline=this.currentTrailingNewline!==this.otherTrailingNewline;var a=f(t,n),o=[],l=!0,s=!1,p=void 0;try{for(var h,m=a[Symbol.iterator]();!(l=(h=m.next()).done);l=!0){var v=(0,i.Z)(h.value,2),g=v[0],b=v[1].split("\n");""===b[b.length-1]&&b.pop();var x=!0,Z=!1,y=void 0;try{for(var w,k=b[Symbol.iterator]();!(x=(w=k.next()).done);x=!0){var C=w.value;o.push([g,C])}}catch(D){Z=!0,y=D}finally{try{x||null==k.return||k.return()}finally{if(Z)throw y}}}}catch(D){s=!0,p=D}finally{try{l||null==m.return||m.return()}finally{if(s)throw p}}this.currentTrailingNewline&&!this.otherTrailingNewline?o.push([c,""]):!this.currentTrailingNewline&&this.otherTrailingNewline?o.push([d,""]):this.currentTrailingNewline&&this.otherTrailingNewline&&o.push([u,""]);var j=1,_=0,T=1,S=!0,z=!1,B=void 0;try{for(var R,E=o[Symbol.iterator]();!(S=(R=E.next()).done);S=!0){var G=(0,i.Z)(R.value,2),L=G[0],I=G[1];switch(L){case c:this.linePositions.set(j,_),this.lineLengths.set(j,I.length),this.deleted.add(j),_+=I.length+1,j++;break;case d:var N=j-1,A=this.inserted.get(N);A||(A=[],this.inserted.set(N,A)),A.push({number:T,content:I}),T++;break;case u:this.linePositions.set(j,_),this.lineLengths.set(j,I.length),_+=I.length+1,j++,T++}}}catch(D){z=!0,B=D}finally{try{S||null==E.return||E.return()}finally{if(z)throw B}}}var t=e.prototype;return t.startInsertions=function(){var e=this.inserted.get(0);return e&&0!==e.length?e:null},t.lineIsDeleted=function(e){return this.deleted.has(e)},t.lineInsertions=function(e){var t=this.inserted.get(e);return t&&0!==t.length?t:null},t.lineInsertedContent=function(e){var t=this.lineInsertions(e);return t?t.map((function(e){return e.content})).join("\n"):null},t.offsetFor=function(e){var t,n,r=0;r+=null!==(n=null===(t=this.inserted.get(0))||void 0===t?void 0:t.length)&&void 0!==n?n:0;for(var i=1;i<e;i++){this.lineIsDeleted(i)&&r--;var a=this.lineInsertions(i);a&&(r+=a.length)}return r},t.linePosition=function(e){var t;return null!==(t=this.linePositions.get(e))&&void 0!==t?t:null},t.lineLength=function(e){var t;return null!==(t=this.lineLengths.get(e))&&void 0!==t?t:null},t.line=function(e){var t=this.linePosition(e),n=this.lineLength(e);return null===t||null===n?null:{number:e,from:t,to:t+n,length:n,offset:this.offsetFor(e),isDeleted:this.lineIsDeleted(e),insertions:this.lineInsertions(e)}},t.lines=o().mark((function e(){var t,n,r,a,l,s,c,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,n=!1,r=void 0,e.prev=1,a=this.linePositions[Symbol.iterator]();case 3:if(t=(l=a.next()).done){e.next=13;break}if(s=(0,i.Z)(l.value,1),c=s[0],d=this.line(c)){e.next=8;break}throw new Error("line should not be null");case 8:return e.next=10,d;case 10:t=!0,e.next=3;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),n=!0,r=e.t0;case 19:e.prev=19,e.prev=20,t||null==a.return||a.return();case 22:if(e.prev=22,!n){e.next=25;break}throw r;case 25:return e.finish(22);case 26:return e.finish(19);case 27:case"end":return e.stop()}}),e,this,[[1,15,19,27],[20,,22,26]])})),e}()},7835:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(35944),i=n(15085);function a(e){var t=e.prompt,n=e.desc,a=e.confirmText,o=e.loading,l=void 0!==o&&o,s=e.onCancel,c=e.onConfirm,d=e.danger,u=e.icon;return(0,r.BX)(i.G7,{css:[i.l0.colWithGap(24)],children:[(0,r.tZ)(i.h4,{level:3,variant:"headerDefault",children:t}),(0,r.tZ)(i.xv,{multiline:!0,children:n}),(0,r.BX)(i.G7,{css:[i.l0.rowWithGap(12),i.l0.justify.end],children:[s&&(0,r.tZ)(i.zx,{disabled:l,onClick:s,text:"Cancel"}),(0,r.tZ)(i.zx,{colorway:d?"negative":"primary",disabled:l,onClick:c,text:a||"Ok",iconLeft:u})]})]})}},23600:function(e,t,n){n.d(t,{p:function(){return r}});var r=16546464e5},61957:function(e,t,n){n.d(t,{HJ:function(){return s},UK:function(){return d},ZK:function(){return p}});var r=n(59637),i=n(29815),a=n(82222),o=n(51207),l=n(37756);function s(e){var t=[],n="",r=!0,i=!1,o=void 0;try{for(var s,c=e[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var d=s.value,p=d.op,h=d.userId,m=d.timestamp,v=[],g=0,b=!0,x=!1,Z=void 0;try{for(var y,w=p[Symbol.iterator]();!(b=(y=w.next()).done);b=!0){var k=y.value;switch("undefined"===typeof k?"undefined":(0,a.Z)(k)){case"object":v.push({d:n.slice((0,l.uniToStrPos)(n,g),(0,l.uniToStrPos)(n,g+k.d))}),g+=k.d;break;case"string":v.push(k);break;case"number":v.push(k),g+=k}}}catch(C){x=!0,Z=C}finally{try{b||null==w.return||w.return()}finally{if(x)throw Z}}t.push({userId:h,timestamp:m,op:v}),n=f(n,1===t.length?u(p):p)}}catch(C){i=!0,o=C}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return t}function c(e){return e.map((function(e){return e.op.map((function(e){switch("undefined"===typeof e?"undefined":(0,a.Z)(e)){case"object":return e.d;case"string":return{d:(0,l.strPosToUni)(e)};case"number":return e}}))}))}function d(e,t){h(e,t);var n=(0,r.Z)(c(t.slice(e,t.length).reverse())),i=n[0];return n.slice(1).reduce((function(e,t){return o.dt.compose(e,t)}),i)}function u(e){return e.filter((function(e){return!function(e){return"string"===typeof e&&0===e.length}(e)}))}function f(e,t){return o.dt.apply(e,t)}function p(e,t,n,r){if(h(t,r),h(n,r),t===n)return{content:e,location:null};var a,o=function(e,t){return[u(t[0])].concat((0,i.Z)(t.slice(1))).reduce(f,e)}(e,a=n>t?r.slice(t,n).map((function(e){return e.op.map((function(e){return"object"===typeof e?{d:(0,l.strPosToUni)(e.d)}:e}))})):c(r.slice(n,t).reverse()));return{content:o,location:function(e,t){var n=0,r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var c=o.value;if("number"!==typeof c)break;n+=c}}catch(f){i=!0,a=f}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}var d=(0,l.uniToStrPos)(t.document,n),u=d;return t.unicode&&(u=n),u-(t.dropCrlf?t.document.slice(0,d).split("\r\n").length-1:0)}(a[a.length-1],{unicode:!1,document:o,dropCrlf:!0})}}function h(e,t){if(e<0)throw new Error("Version number cannot be negative.");if(e>t.length)throw new Error("Version number ".concat(e," cannot be greater than the number of edits ").concat(t.length,"."));return!0}},50522:function(e,t,n){n.d(t,{t:function(){return a}});var r=n(67294);function i(e){if(e<0)throw new Error('Require at least zero ops to compute pace, got "'+e+'"');return 1/Math.log(e+2)*100}function a(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i,o=(0,r.useState)(!1),l=o[0],s=o[1],c=(0,r.useCallback)((function(){t(1)}),[t]),d=(0,r.useCallback)((function(){e+1>n?s(!1):t(e+1)}),[t,e,n]),u=function(){s(!0)},f=function(){s(!1)};return(0,r.useEffect)((function(){if(l){var e=setTimeout((function(){d()}),a(n));return function(){return clearTimeout(e)}}}),[l,d,a,n]),{isPlaying:l,start:u,stop:f,reset:c}}},65915:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(91131),i=n(95068);function a(){return(0,r.Dv)(i.Md)}},61668:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(35944),i=n(60536),a=n.n(i),o=(n(67294),n(44781));function l(e){var t=e.label;return(0,r.BX)(o.Z,{size:"xsmall",children:[(0,r.tZ)("span",{"data-microtip-position":"top",role:"tooltip","aria-label":t,className:"jsx-b2b24242521d2288 help",children:"?"}),(0,r.tZ)(a(),{id:"b2b24242521d2288",children:".help.jsx-b2b24242521d2288{display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;border:1px solid var(--background-higher);-webkit-border-radius:100%;-moz-border-radius:100%;border-radius:100%;width:var(--space-16);height:var(--space-16);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}"})]})}},45435:function(e,t,n){n.d(t,{Sj:function(){return s},Th:function(){return o},UB:function(){return c},a0:function(){return d},ot:function(){return l}});var r=n(26042),i=n(69396),a=n(91131);var o=(0,a.cn)([]),l=(0,a.cn)({regexp:null,direction:"",highlightOnly:!0}),s=(0,a.cn)((function(e){return function(e,t){if(!t.regexp&&!t.direction)return e.map((function(e){return(0,i.Z)((0,r.Z)({},e),{highlighted:!1})}));var n=function(e){var n=e.dir,r=e.cmd;return(!t.direction||n===t.direction)&&!(t.regexp&&t.regexp.test&&!t.regexp.test(JSON.stringify(r)))};return t.highlightOnly?e.map((function(e){return n(e)?(0,i.Z)((0,r.Z)({},e),{highlighted:!0}):e})):e.filter(n)}(e(o),e(l))})),c=(0,a.cn)(null,(function(e,t){t(o,[])})),d=(0,a.cn)(!1)},93803:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return createEvalJet}});var _swc_helpers_src_async_to_generator_mjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(47568),_opt_app_node_modules_next_dist_compiled_regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(34051),_opt_app_node_modules_next_dist_compiled_regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_opt_app_node_modules_next_dist_compiled_regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0__);function createEvalJet(param){var send=param.send,services=param.services;return{eval:function(){var _ref=(0,_swc_helpers_src_async_to_generator_mjs__WEBPACK_IMPORTED_MODULE_1__.Z)(_opt_app_node_modules_next_dist_compiled_regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0___default().mark((function _callee(data){var res;return _opt_app_node_modules_next_dist_compiled_regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_0___default().wrap((function _callee$(_ctx){for(;;)switch(_ctx.prev=_ctx.next){case 0:res=eval("(function(services) {".concat(data.payload.code,"})"))(services),send({id:data.id,payload:{res:res}});case 2:case"end":return _ctx.stop()}}),_callee)})));return function(e){return _ref.apply(this,arguments)}}()}}},72466:function(e,t,n){n.d(t,{Z:function(){return fe}});var r=n(10253),i=n(35944),a=n(67294),o=n(19526),l=n(46702),s=n(24291),c=n(6951),d=n(92350),u=n(15085),f=n(99408),p=n(33773),h=n(64080),m=n(60536),v=n.n(m),g=n(30019);var b=function(e){var t=e.title,n=e.sub,r=void 0!==n&&n,a=e.actions,l=void 0===a?[]:a;return(0,i.BX)(o.Ug,{justify:"space-between",align:"center",children:[(0,i.tZ)(v(),{id:"fd8117a15303f4ca",children:".header-action.jsx-fd8117a15303f4ca{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;width:var(--space-24);height:var(--space-24);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);color:var(--foreground-dimmer)}.header-action.jsx-fd8117a15303f4ca:hover{background:var(--background-higher);cursor:pointer}"}),(0,i.tZ)(g.Z,{level:r?5:4,children:t}),(0,i.tZ)(o.Ug,{spacing:"4px",align:"center",children:l&&l.map((function(e,t){return(0,i.tZ)("div",{onClick:e.action,className:"jsx-fd8117a15303f4ca header-action",children:e.icon},t)}))})]})},x=n(29815),Z=n(94184),y=n.n(Z);var w=function(e){var t=e.fileDrag,n=e.children,o=(0,r.Z)(a.useState(!1),2),l=o[0],s=o[1],c=a.useRef(0);return(0,i.BX)("div",{onDragEnter:function(e){if(t){e.preventDefault(),e.stopPropagation();var n=!0;if(e.dataTransfer.items&&e.dataTransfer.items.length>0){if(t.accept)for(var r=e.dataTransfer.items,i=0;i<r.length;i++){var a=r[i];t.accept.includes(a.type)||(n=!1)}n&&(s(!0),c.current++)}}},onDragLeave:function(e){t&&(e.preventDefault(),e.stopPropagation(),c.current--,0===c.current&&s(!1))},onDrop:function(e){t&&(e.preventDefault(),e.stopPropagation(),c.current=0,s(!1),(0,x.Z)(e.dataTransfer.files).filter((function(e){return t.accept.includes(e.type)})).forEach(t.onDrop))},className:"jsx-68ea6c6d36b196a3 section",children:[(0,i.tZ)(v(),{id:"68ea6c6d36b196a3",children:".section.jsx-68ea6c6d36b196a3{position:relative;width:100%}.dragfilter.jsx-68ea6c6d36b196a3{position:absolute;width:100%;height:100%;top:0;left:0;background:var(--accent-primary-default);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);opacity:.2}.dragfilter.hidden.jsx-68ea6c6d36b196a3{display:none!important}"}),n,(0,i.tZ)("div",{className:"jsx-68ea6c6d36b196a3 "+(y()("dragfilter",{hidden:!l})||"")})]})};var k=function(){var e=(0,f.Z)().session,t=(0,r.Z)(a.useState(!1),2),n=t[0],l=t[1];return(0,i.BX)(w,{children:[(0,i.tZ)(b,{title:"Kaboom",actions:[{icon:(0,i.tZ)(p.Z,{rotate:n?0:-90}),action:function(){return l(!n)}}]}),n&&(0,i.BX)(o.gC,{spacing:1,children:[(0,i.tZ)("div",{}),(0,i.tZ)(c.Z,{Icon:h.Z,size:"small",onClick:function(){return e.openFile("template.html")},children:"Edit HTML Template"})]})]})},C=n(92002),j=n(42941),_=n(27206),T=n(14924),S=n(26042),z=n(69396);var B,R=n(37432),E=n(17556),G=n(58794),L=n(48551),I=n(93058),N=n(40381),A=n(65456),D=n(1879),X=n(7835);function P(e){return function(t){for(var n in e)t.key===n&&e[n](t)}}function M(e,t){B||(B=document.createElement("input")).setAttribute("type","file"),B.setAttribute("accept",t.join(","));var n=function(){B.files&&((0,x.Z)(B.files).forEach(e),B.removeEventListener("change",n))};B.addEventListener("change",n),B.click()}var F=n(502);var O=function(e){var t=e.isActive,n=e.name,l=e.icon,s=e.options,c=e.onClick,d=e.onRename,u=(0,r.Z)(a.useState(!1),2),f=u[0],p=u[1],h=(0,r.Z)(a.useState(null),2),m=h[0],g=h[1],b=(0,E.Z)((function(){p(!1)}),[]),x=(0,E.Z)((function(){g(null)}),[]);return a.useEffect((function(){x.current&&null!==m&&x.current.focus()}),[x,m]),(0,i.BX)("div",{onClick:c,className:"jsx-103c0085cc983ea1 "+(y()("entry",{active:t&&null===m})||""),children:[(0,i.BX)(o.Ug,{spacing:1,align:"center",children:[l,null===m?(0,i.tZ)("p",{className:"jsx-103c0085cc983ea1",children:n}):(0,i.tZ)(_.ZP,{ref:x,value:m,onChange:function(e){g(e.currentTarget.value)},onKeyDown:P({Escape:function(){g(null)},Enter:function(){d&&m&&d(m),g(null)}})})]}),s&&s.length>0&&(0,i.tZ)("div",{onClick:function(e){e.stopPropagation(),p(!f)},className:"jsx-103c0085cc983ea1 "+(y()("options-icon",{active:t})||""),children:(0,i.tZ)(F.MoreVertical,{})}),s&&s.length>0&&f&&(0,i.tZ)("div",{ref:b,onKeyDown:P({Escape:function(){p(!1)}}),className:"jsx-103c0085cc983ea1 options-box",children:s.map((function(e){return e?(0,i.tZ)("div",{onClick:function(t){t.stopPropagation(),p(!1),e.action(),"Rename"===e.name&&g(n)},className:"jsx-103c0085cc983ea1 "+(y()("option",{danger:e.danger})||""),children:e.name},e.name):null}))}),(0,i.tZ)(v(),{id:"103c0085cc983ea1",children:".entry.jsx-103c0085cc983ea1{width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-8);color:var(--foreground-dimmer);position:relative}.entry.active.jsx-103c0085cc983ea1{background:var(--accent-primary-default)!important;color:var(--white)!important;font-weight:var(--font-weight-medium)!important}.entry.jsx-103c0085cc983ea1:hover{color:var(--foreground-default);background:var(--background-higher);cursor:pointer}.options-icon.jsx-103c0085cc983ea1{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;width:var(--space-16);height:var(--space-16);opacity:0;color:var(--foreground-dimmest)}.options-icon.jsx-103c0085cc983ea1:hover{color:var(--foreground-dimmest)}.options-icon.active.jsx-103c0085cc983ea1{opacity:1!important;color:var(--white)!important}.entry.jsx-103c0085cc983ea1:hover .options-icon.jsx-103c0085cc983ea1{opacity:1}.options-box.jsx-103c0085cc983ea1{position:absolute;top:var(--space-32);right:var(--space-16);padding:var(--space-4);background:var(--background-default);border:1px solid var(--outline-dimmest);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);font-size:var(--font-size-subhead-default);font-weight:var(--font-weight-regular)!important;z-index:500}.option.jsx-103c0085cc983ea1{padding:var(--space-8);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);color:var(--foreground-default)}.option.danger.jsx-103c0085cc983ea1{color:var(--accent-negative-default)}.option.jsx-103c0085cc983ea1:hover{background:var(--background-higher)}.option.danger.jsx-103c0085cc983ea1:hover{background:var(--accent-negative-default);color:var(--white)}"})]})},U=n(57704);function W(e){var t=e.close,n=e.entries,o=(0,f.Z)(),l=o.fs,s=o.session,c=(0,E.Z)(t,[]),d=(0,I.Z)().showError,u=(0,r.Z)(function(e){var t=(0,r.Z)(a.useState(e),2),n=t[0],i=t[1];return[n,i,function(e){var t=null;switch(e.currentTarget.type){case"checkbox":t=e.currentTarget.checked;break;case"number":case"range":t=Number(e.currentTarget.value);break;default:t=e.currentTarget.value}i((0,z.Z)((0,S.Z)({},n),(0,T.Z)({},e.currentTarget.name,t)))}]}({name:""}),3),p=u[0],h=u[2];return a.useEffect((function(){c.current&&c.current.focus()}),[c]),(0,i.tZ)(_.ZP,{ref:c,name:"name",onChange:h,onKeyDown:P({Escape:t,Enter:function(){var e="".concat(p.name,".js"),r="code/".concat(e);n.includes(e)?d("file '".concat(p.name,"' already exists")):(l.writeFile(r,G.Z.from("")).then((function(){s.openFile(r)})),t())}})})}var H=function(e){var t=e.onFileOpen,n=(0,f.Z)().fs,o=(0,N.Z)(),l=(0,r.Z)(a.useState(!1),2),s=l[0],c=l[1],d=(0,I.Z)().showError,u=(0,r.Z)(a.useState(null),2),p=u[0],h=u[1],m=((0,R.Z)({path:"code",initialExpanded:!0,fs:n}).children||[]).filter((function(e){return e.type===A.Tv.File})).map((function(e){return e.filename})).sort();return(0,i.BX)(w,{fileDrag:{accept:["text/javascript"],onDrop:function(e){var t="code/".concat(e.name);m.includes(t)?d("scene '".concat((0,L.eb)(e.name),"' already exists")):e.text().then((function(e){n.writeFile(t,G.Z.from(e))}))}},children:[(0,i.tZ)(b,{sub:!0,title:"Code",actions:[{icon:(0,i.tZ)(C.Z,{}),action:function(){return c(!0)}}]}),(0,i.tZ)(j.Z,{height:"4px"}),(0,i.tZ)("div",{children:m.map((function(e){var r="code/".concat(e),a=(0,L.eb)(e),l=[{name:"Rename",action:function(){}}];return"main"!==a&&l.push({name:"Delete",action:function(){return h(r)},danger:!0}),(0,i.tZ)(O,{isActive:r===o,onClick:function(){return t(r)},onRename:function(e){n.moveFile(r,"code/".concat(e,".js")).then((function(e){e.error&&d("failed to rename")}))},name:a,options:l},a)}))}),s&&(0,i.tZ)(W,{entries:m,close:function(){return c(!1)}}),p&&(0,i.tZ)(D.Z,{isOpen:Boolean(p),onRequestClose:function(){return h(null)},children:(0,i.tZ)(X.Z,{danger:!0,prompt:"Delete scene '".concat((0,L.eb)(p),"' ?"),desc:"Are you sure you want to delete this scene? This action cannot be undone.",onCancel:function(){return h(null)},confirmText:"Yes, delete this scene",icon:(0,i.tZ)(U.Z,{}),onConfirm:function(){n.deleteFile(p),h(null)}})})]})},V=n(27668),q=n(49619),Y=n(21128),K=n(91513),Q=n(54098),$=n.n(Q),J=n(44781);var ee=function(e){var t=e.kind,n=e.renderItem,l=e.onRequestClose,s=e.onAdd,d=function(e){var n="".concat(k,"/").concat(e);$()(n).then((function(e){return e.arrayBuffer()})).then((function(r){var i="".concat(t,"/").concat(e);p.writeFile(i,G.Z.from(r)).then((function(t){if(t.error)throw new Error(t.error);h.openFile(i),s&&s(e,n)})),l()})).catch((function(){return C("Failed to fetch ".concat(e))}))},u=(0,f.Z)(),p=u.fs,h=u.session,m=(0,r.Z)(a.useState([]),2),b=m[0],x=m[1],Z=(0,r.Z)(a.useState(""),2),y=Z[0],w=Z[1],k="https://kaboomjs.com/".concat(t),C=(0,I.Z)().showError;return a.useEffect((function(){$()("https://kaboomjs.com/api/assets/".concat(t)).then((function(e){return e.json()})).then((function(e){return x(e)})).catch((function(){return C("Failed to fetch assets lib listing")}))}),[x,C,k]),(0,i.BX)("div",{className:"jsx-d616aed56d26af98 assets",children:[(0,i.BX)(o.gC,{spacing:2,children:[(0,i.tZ)(g.Z,{level:3,children:"Assets Lib (beta)"}),0===b.length?(0,i.tZ)(J.Z,{foreground:2,children:"Loading..."}):(0,i.BX)(i.HY,{children:[(0,i.tZ)(_.ZP,{large:!0,label:"Search",onChange:function(e){w(e.target.value)}}),(0,i.tZ)("div",{className:"jsx-d616aed56d26af98 box",children:b.filter((function(e){return!y||e.includes(y)})).map((function(e){return(0,i.tZ)(a.Fragment,{children:n({name:e,url:"".concat(k,"/").concat(e),add:function(){return d(e)}})},e)}))}),(0,i.tZ)(c.Z,{size:"small",onClick:function(){b.length>0&&d(b[Math.floor(Math.random()*b.length)])},children:"I\u2019m Feeling Lucky"})]})]}),(0,i.tZ)(v(),{id:"d616aed56d26af98",children:".assets.jsx-d616aed56d26af98{padding:var(--space-24)}.box.jsx-d616aed56d26af98{width:100%;height:320px;overflow-x:hidden;overflow-y:scroll}"})]})},te=n(37424);function ne(e){var t=e.url,n=e.add;return(0,i.BX)(i.HY,{children:[(0,i.tZ)("img",{src:t,loading:"lazy",onClick:n,alt:"sprite asset",className:"jsx-4ad892a0258c4ced entry"}),(0,i.tZ)(v(),{id:"4ad892a0258c4ced",children:".entry.jsx-4ad892a0258c4ced{padding:var(--space-16);height:120px;-ms-interpolation-mode:nearest-neighbor;image-rendering:-webkit-optimize-contrast;image-rendering:-moz-crisp-edges;image-rendering:-o-pixelated;image-rendering:pixelated;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4)}.entry.jsx-4ad892a0258c4ced:hover{cursor:pointer;background:var(--background-root)}"})]})}function re(e){var t=e.close,n=e.entries,o=e.onFileOpen,l=(0,f.Z)().fs,s=(0,E.Z)(t,[]),c=a.useRef(null),d=(0,I.Z)().showError,p=(0,r.Z)(a.useState({name:"",width:32,height:32}),2),h=p[0],m=p[1];a.useEffect((function(){c.current&&c.current.focus()}),[c]);var v=function(){if(0!==h.name.length){var e=h.width,r=h.height;if(isNaN(e)||isNaN(r)||e<=0||r<=0)d("invalid width / height!");else if(e>256||r>256)d("only supports sprites smaller than 256x256 yet");else{var i="".concat(h.name,".pedit"),a="sprites/".concat(i);n.includes(i)?d("sprite '".concat(h.name,"' already exists")):(l.writeFile(a,G.Z.from(JSON.stringify({fromKaboom:!0,width:h.width,height:h.height}))).then((function(){o(a)})),t())}}else d("invalid 'name'")},g=(0,te.H)();return(0,i.tZ)("div",{ref:s,className:"dialog",onKeyDown:P({Escape:t,Enter:v}),children:(0,i.tZ)(u.Tg,{elevated:!0,css:[u.l0.borderRadius(8),u.l0.p(8),u.l0.mt(8)],children:(0,i.BX)(u.G7,{css:[u.l0.colWithGap(16)],children:[(0,i.BX)(u.G7,{css:[u.l0.colWithGap(4)],children:[(0,i.tZ)("label",{htmlFor:g("name"),children:(0,i.tZ)(u.xv,{color:"dimmer",variant:"small",children:"Name"})}),(0,i.tZ)(u.II,{id:g("name"),ref:c,value:h.name,onChange:function(e){m((0,z.Z)((0,S.Z)({},h),{name:e.target.value}))}})]}),(0,i.BX)(u.G7,{css:[u.l0.rowWithGap(8)],children:[(0,i.BX)(u.G7,{css:[u.l0.colWithGap(4),{flex:"1 1 0px"}],children:[(0,i.tZ)("label",{htmlFor:g("width"),children:(0,i.tZ)(u.xv,{color:"dimmer",variant:"small",children:"Width"})}),(0,i.tZ)(u.II,{id:g("width"),value:"".concat(h.width),onChange:function(e){return m((0,z.Z)((0,S.Z)({},h),{width:parseInt(e.target.value,10)||0}))}})]}),(0,i.BX)(u.G7,{css:[u.l0.colWithGap(4),{flex:"1 1 0px"}],children:[(0,i.tZ)("label",{htmlFor:g("height"),children:(0,i.tZ)(u.xv,{color:"dimmer",variant:"small",children:"Height"})}),(0,i.tZ)(u.II,{id:g("height"),value:"".concat(h.height),onChange:function(e){return m((0,z.Z)((0,S.Z)({},h),{height:parseInt(e.target.value,10)||0}))}})]})]}),(0,i.BX)(u.G7,{css:[u.l0.rowWithGap(12),u.l0.justify.end],children:[(0,i.tZ)(u.zx,{onClick:t,text:"Cancel"}),(0,i.tZ)(u.zx,{colorway:"primary",onClick:v,text:"Create",iconLeft:(0,i.tZ)(C.Z,{})})]})]})})})}var ie=function(e){var t=e.onFileOpen,n=(0,f.Z)().fs,o=(0,I.Z)().showError,l=(0,N.Z)(),s=(0,r.Z)(a.useState(!1),2),c=s[0],d=s[1],p=(0,r.Z)(a.useState(!1),2),h=p[0],m=p[1],g=(0,r.Z)(a.useState(null),2),Z=g[0],y=g[1],k=(0,K.Z)(l),_=(0,Y.Z)({fs:n,onContentProcess:function(e,t){if(t.endsWith("pedit")){var n=JSON.parse(e.toString());if(!n.fromKaboom)return n.frames[0]}else{var r=(0,L.yC)(t);if(r)return"data:".concat(r,";base64,").concat(e.toString("base64"))}return""}}),T=((0,R.Z)({path:"sprites",initialExpanded:!0,fs:n}).children||[]).filter((function(e){return e.type===A.Tv.File})).map((function(e){return e.filename})).sort(),S=["image/png","image/jpeg",".pedit"],z=function(e){var t="sprites/".concat(e.name);if(T.includes(t))return o("sprite '".concat((0,L.eb)(e.name),"' already exists"));e.arrayBuffer().then((function(e){n.writeFile(t,G.Z.from(e))}))},B=[{icon:(0,i.tZ)(V.Z,{}),action:function(){return m(!0)}},{icon:(0,i.tZ)(q.Z,{}),action:function(){return M(z,S)}},{icon:(0,i.tZ)(C.Z,{}),action:function(){return d(!0)}}];return(0,i.BX)(w,{fileDrag:{accept:S,onDrop:z},children:[(0,i.tZ)(b,{sub:!0,title:"Sprites",actions:B}),(0,i.tZ)(j.Z,{height:"4px"}),(0,i.tZ)("div",{className:"jsx-286709118fe5858",children:T.map((function(e){var r="sprites/".concat(e),a=(0,L.r6)(e),s=(0,L.eb)(e),c=_(r),d=k?[{name:"Insert load code",action:function(){var e="".concat("pedit"===a?"loadPedit":"loadSprite","(").concat(JSON.stringify(s),", ").concat(JSON.stringify(r),");");k({code:e})}}]:[];return(0,i.tZ)(O,{isActive:r===l,onClick:function(){return t(r)},onRename:function(e){n.moveFile(r,"sprites/".concat(e,".").concat(a)).then((function(e){e.error&&o("failed to rename")}))},icon:(0,i.tZ)("div",{className:"jsx-286709118fe5858 preview-img",children:c.state===Y.j.Ready&&(0,i.tZ)("img",{src:c.content,alt:"",className:"jsx-286709118fe5858"})}),name:s,options:(0,x.Z)(d).concat([{name:"Rename",action:function(){}},{name:"Delete",action:function(){return y(r)},danger:!0}])},s)}))}),c&&(0,i.tZ)(re,{entries:T,close:function(){return d(!1)},onFileOpen:t}),Z&&(0,i.tZ)(u.u_,{isOpen:Boolean(Z),onRequestClose:function(){return y(null)},children:(0,i.tZ)(X.Z,{danger:!0,prompt:"Delete sprite '".concat((0,L.eb)(Z),"' ?"),desc:"Are you sure you want to delete this sprite? This action cannot be undone.",confirmText:"Yes, delete this sprite",icon:(0,i.tZ)(U.Z,{}),onCancel:function(){return y(null)},onConfirm:function(){n.deleteFile(Z),y(null)}})}),(0,i.tZ)(u.u_,{isOpen:h,onRequestClose:function(){return m(!1)},maxWidth:872,children:(0,i.tZ)(ee,{kind:"sprites",renderItem:ne,onRequestClose:function(){return m(!1)}})}),(0,i.tZ)(v(),{id:"286709118fe5858",children:".preview-img.jsx-286709118fe5858{width:var(--space-32);height:var(--space-32);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;overflow:hidden}.preview-img.jsx-286709118fe5858 img.jsx-286709118fe5858{width:100%;-ms-interpolation-mode:nearest-neighbor;image-rendering:-webkit-optimize-contrast;image-rendering:-moz-crisp-edges;image-rendering:-o-pixelated;image-rendering:pixelated;image-rendering:-webkit-optimize-contrast;image-rendering:-moz-crisp-edges;image-rendering:crisp-edges}"})]})};function ae(e){var t=e.name,n=e.url,r=e.add;return(0,i.BX)(o.Ug,{justify:"space-between",align:"center",children:[(0,i.BX)(o.gC,{spacing:1,children:[(0,i.tZ)(J.Z,{children:t}),(0,i.tZ)("audio",{src:n,controls:!0})]}),(0,i.tZ)(c.Z,{onClick:r,children:"Import"})]})}var oe=function(e){var t=e.onFileOpen,n=(0,f.Z)().fs,o=(0,N.Z)(),l=(0,I.Z)().showError,s=(0,r.Z)(a.useState(null),2),c=s[0],d=s[1],u=(0,r.Z)(a.useState(!1),2),p=u[0],h=u[1],m=(0,K.Z)(o),v=((0,R.Z)({path:"sounds",initialExpanded:!0,fs:n}).children||[]).filter((function(e){return e.type===A.Tv.File})).map((function(e){return e.filename})).sort(),g=["audio/ogg","audio/mpeg","audio/wav"],Z=function(e){var t="sounds/".concat(e.name);if(v.includes(t))return l("sound '".concat((0,L.eb)(e.name),"' already exists"));e.arrayBuffer().then((function(e){n.writeFile(t,G.Z.from(e))}))},y=[{icon:(0,i.tZ)(V.Z,{}),action:function(){return h(!0)}},{icon:(0,i.tZ)(q.Z,{}),action:function(){return M(Z,g)}}];return(0,i.BX)(w,{fileDrag:{accept:g,onDrop:Z},children:[(0,i.tZ)(b,{sub:!0,title:"Sounds",actions:y}),(0,i.tZ)(j.Z,{height:"4px"}),(0,i.tZ)("div",{children:v.map((function(e){var r=(0,L.eb)(e),a="sounds/".concat(e),s=m?[{name:"Insert load code",action:function(){return m({code:"loadSound(".concat(JSON.stringify(r),", ").concat(JSON.stringify(a),");")})}}]:[];return(0,i.tZ)(O,{isActive:a===o,onClick:function(){return t(a)},onRename:function(t){n.moveFile(a,"sounds/".concat(t,".").concat((0,L.r6)(e))).then((function(e){e.error&&l("failed to rename")}))},name:r,options:(0,x.Z)(s).concat([{name:"Rename",action:function(){}},{name:"Delete",action:function(){return d(a)},danger:!0}])},r)}))}),c&&(0,i.tZ)(D.Z,{isOpen:Boolean(c),onRequestClose:function(){return d(null)},children:(0,i.tZ)(X.Z,{danger:!0,prompt:"Delete sound '".concat((0,L.eb)(c),"' ?"),desc:"Are you sure you want to delete this sound? This action cannot be undone.",confirmText:"Yes, delete this sound",icon:(0,i.tZ)(U.Z,{}),onCancel:function(){return d(null)},onConfirm:function(){n.deleteFile(c),d(null)}})}),(0,i.tZ)(D.Z,{isOpen:p,onRequestClose:function(){return h(!1)},maxWidth:872,children:(0,i.tZ)(ee,{kind:"sounds",renderItem:ae,onRequestClose:function(){return h(!1)},onAdd:function(e,t){return new window.Audio(t).play()}})})]})},le=n(87514),se=n(43530),ce=n(65915);function de(e){var t=e.file,n=e.name,r=(0,f.Z)().session,a=(0,ce.Z)()===t;return(0,i.BX)("div",{onClick:function(){r.setPreviewedFile(null),r.setPreviewedFile(t)},className:"jsx-148e6ca45d3ccd5a entry",children:[(0,i.BX)(o.Ug,{spacing:1,align:"center",children:[a?(0,i.tZ)(le.Z,{}):(0,i.tZ)(se.Z,{}),(0,i.tZ)(J.Z,{foreground:a?1:2,fontWeight:a?"medium":"regular",children:null!==n&&void 0!==n?n:(0,L.eb)(t)})]}),(0,i.tZ)(v(),{id:"148e6ca45d3ccd5a",children:".entry.jsx-148e6ca45d3ccd5a{cursor:pointer}"})]})}var ue=function(){var e=(0,r.Z)(a.useState(!0),2),t=e[0],n=e[1],l=(0,r.Z)(a.useState(!1),2),s=l[0],c=l[1],d=(0,f.Z)().fs,u=(0,R.Z)({path:"learn",initialExpanded:!0,fs:d});a.useEffect((function(){var e=!1;return d.stat("README.md").then((function(t){e||t.exists&&c(!0)})),function(){e=!0}}),[]);var h=(u.children||[]).filter((function(e){return e.type===A.Tv.File&&(0,L.gK)(e.filename)})).map((function(e){return e.filename})).sort();return(0,i.BX)(w,{children:[(0,i.tZ)(b,{sub:!0,title:"Learn",actions:[{icon:(0,i.tZ)(p.Z,{rotate:t?0:-90}),action:function(){return n(!t)}}]}),t&&(0,i.BX)(o.gC,{spacing:1,children:[(0,i.tZ)("div",{}),s&&(0,i.tZ)(de,{name:"Intro",file:"README.md"}),h.map((function(e){return(0,i.tZ)(de,{file:"learn/".concat(e)},e)}))]})]})};function fe(e){var t=e.onFileOpen,n=(0,r.Z)(a.useState(!1),2),f=n[0],p=n[1];return(0,i.BX)(u.G7,{css:[u.l0.p(8),u.l0.flex.growAndShrink(1),u.l0.overflow("scroll"),{userSelect:"none"}],children:[(0,i.BX)(o.gC,{spacing:1,children:[(0,i.tZ)(k,{}),(0,i.tZ)(H,{onFileOpen:t}),(0,i.tZ)(ie,{onFileOpen:t}),(0,i.tZ)(oe,{onFileOpen:t}),(0,i.tZ)(ue,{}),(0,i.tZ)("div",{}),(0,i.tZ)(c.Z,{Icon:l.Z,size:"small",onClick:function(){return window.open("https://kaboomjs.com")},children:"Docs"}),(0,i.tZ)(c.Z,{Icon:l.Z,size:"small",onClick:function(){return window.open("https://kaboomjs.com/play")},children:"Examples"}),(0,i.tZ)(c.Z,{Icon:s.Z,size:"small",onClick:function(){return p(!0)},children:"What\u2019s new"})]}),(0,i.tZ)(u.u_,{isOpen:f,onRequestClose:function(){return p(!1)},maxWidth:872,children:(0,i.tZ)(u.G7,{css:[u.l0.colWithGap(16),u.l0.p(32)],children:(0,i.tZ)(d.ZP,{children:'\n# New Kaboom Workspace\n\n- **No weird delay when run after editing.** Just press Cmd + S to refresh webview and quickly iterate!\n- **Helpful error reporting.** No need to go into browser console every time. The kaboom console displays your errors nicely.\n- **Support NPM packages and typescript by default.** Kaboom dev server builds your code with esbuild on the fly.\n- **Replit DB and Auth integration.** Make a score board even multiplayer with DB and Auth!\n- **In editor tutorial.** The template comes with a nice intro tutorial which you can learn and code along.\n- **Autocomplete.** Updated kaboom lib comes with detailed jsdoc for every function. No need to pull your hair out to figure out how certain functions work!\n- **HTML template.** Easily customize the html for your game.\n- **Total control over which version of Kaboom you use.** it\'s managed by NPM.\n- **Assets Library** Grab some quick assets to test out a game idea.\n- **Transparent dev server.** The dev server scripts are just in the Repl, customize them or toss them out if you want to. Or turn it into a multiplayer game server!\n- **New library version** The template comes with kaboom2000 (beta), with bunch of [new stuff and improvements](https://github.com/replit/kaboom/blob/master/CHANGELOG.md)\n\n## Migration Guide\n\n- The kaboom template now will not generate the initializing and assets loading code (`kaboom()`, `loadSprite()` etc.) for you, allowing more customized setup, and making it more portable with using kaboom outside replit.\n\n```js\nimport kaboom from "kaboom";\n\n// initialize context\nkaboom();\n\n// load assets\nloadSprite("bean", "sprites/bean.png");\nloadSound("coin", "sounds/coin.mp3");\n\n// the rest is the same\nconst player = add([\n\tsprite("bean"),\n\tarea(),\n]);\n```\n\nFor easier assets loading, use the "Insert load code" option in the asset entry option menu.\n\n- The template by default is running `kaboom@next`, which is currently the beta version of kaboom2000. It contains breaking changes, all listed in [CHANGELOG.md](https://github.com/replit/kaboom/blob/master/CHANGELOG.md). If you don\'t feel like migrating now, you can always `npm install kaboom@5.1`\n'})})})]})}},47886:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(67294);function i(e){var t=e.container,n=e.runner,i=e.refreshWebView;(0,r.useEffect)((function(){var e,r=[];return"shellrunner"===n.mode&&r.push(n.onOutput((function(t){t&&t.includes("exit status 1")&&(e=Date.now())}))),r.push(t.onPortOpened((function(t){if(!t.isVnc){var n=Date.now();void 0!==e&&n-e<1e3||i()}}))),function(){return r.forEach((function(e){return e()}))}}),[t,i,n])}},56483:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(67294),i=n(48920);function a(e){var t=e.runner,n=e.refreshWebView;(0,r.useEffect)((function(){if("html"===t.mode)return t.onStateChanged((function(e){e===i.A.RUNNING&&n()}))}),[t,n])}},76832:function(e,t,n){n.d(t,{Z:function(){return l},f:function(){return o}});var r=n(67294),i=n(91131),a=n(16965),o=(0,i.cn)({current:null});function l(){var e=(0,a.Z)((0,i.Dv)(o));return(0,r.useCallback)((function(){var t,n;null===(t=e.current)||void 0===t||null===(n=t.current)||void 0===n||n.refresh()}),[e])}},53800:function(e,t,n){n.d(t,{Se:function(){return l},fK:function(){return a},kz:function(){return s}});var r=n(35944),i=n(67294);function a(e){var t=e.config;return{Icon:function(e){var n=e.pane,i=e.size,a=void 0===i?16:i,o=t[n.type].Icon;return(0,r.tZ)(o,{pane:n,size:a})},Content:function(e){var n=e.pane,i=e.options,a=t[n.type].Content;return(0,r.tZ)(a,{pane:n,options:i})},getTitle:function(e){return(0,t[e.type].getTitle)(e)},getActions:function(e){var n=t[e.type].getActions;if(n)return n(e)}}}var o=(0,i.createContext)(null);function l(){var e=(0,i.useContext)(o);if(!e)throw new Error("Expected PaneUI in context");return e}var s=o.Provider},28497:function(e,t,n){function r(e){var t=document.createElement("canvas"),n=t.getContext("2d");if(t.width=e.width,t.height=e.height,!n)throw new Error("failed to get canvas ctx");return{version:"1",width:e.width,height:e.height,palette:[[0,0,0,255],[255,255,255,255],[255,255,128,255],[255,128,255,255],[0,128,128,255],[128,0,255,255],[255,0,128,255],[0,255,255,255]],anims:{},frames:e.frames.map((function(r){var i=new window.ImageData(new Uint8ClampedArray(r.pixels),e.width,e.height);return n.putImageData(i,0,0),t.toDataURL()}))}}function i(e){return new Promise((function(t,n){var r=new window.Image;r.src=e,r.onload=function(){t(r)},r.onerror=n}))}function a(e){return new Promise((function(t,n){Promise.all(e.frames.map(i)).then((function(r){var i=document.createElement("canvas");i.width=e.width,i.height=e.height;var a=i.getContext("2d");if(a){var o=r.map((function(t){return a.drawImage(t,0,0),{pixels:Array.from(a.getImageData(0,0,e.width,e.height).data),width:e.width,height:e.height}}));t({frames:o,preview:e.frames[0],width:e.width,height:e.height})}else n(new Error("failed to get canvas ctx"))})).catch(n)}))}n.d(t,{C:function(){return r},u:function(){return a}})},22414:function(e,t,n){n.d(t,{D:function(){return x},$:function(){return Z}});var r=n(26042),i=n(69396),a=n(35944),o=n(15902),l=n(77402),s=n(99408),c=n(63736),d=n(11163),u=n.n(d),f=function(){return Boolean(u().query.embed||u().query.lite)},p=n(91131),h=n(67294),m=n(47738),v=n(2581),g=n(60573),b=n(55183),x={Content:function(e){var t=e.pane,n=e.options;return(0,a.tZ)(y,(0,i.Z)((0,r.Z)({},t.data),{isHidden:n.isHidden,replacePane:n.replacePane}))},Icon:function(e){var t=e.pane,n=e.size;return(0,a.tZ)(c.Z,{path:t.data.path||"",size:n})},getTitle:function(e){return e.data.path||"No file open"}},Z=(0,p.cn)(null);function y(e){var t=e.path,n=e.line,r=e.col,i=e.isHidden,c=e.replacePane,u=(0,s.Z)().lsp,x=Boolean(t&&((0,l.V)(t)===l.D.Code||(0,l.V)(t)===l.D.Markdown)),y=(0,b.EI)(t,c);(0,h.useEffect)((function(){x&&u.start()}),[u,x]);var w=(0,g.Z)(),k=function(e){var t=e.isHidden,n=(0,p.b9)(Z);return(0,h.useEffect)((function(){t&&n(null)}),[n,t]),(0,h.useCallback)((function(e){n({focus:function(){e.focus()}})}),[n])}({isHidden:i}),C=(0,d.useRouter)(),j=!f()&&!(0,o.V)(C);return t&&x?(0,a.tZ)(p.zt,{scope:v.d8,children:(0,a.tZ)(b.ox.Provider,{value:y,children:(0,a.tZ)(m.Z,{filePath:t,onType:w,onFocus:k,autoFocus:j,deeplink:{line:n,col:r},hideMobileKeyboardToolbar:!0})})}):null}},82947:function(e,t,n){n.d(t,{R:function(){return f},b:function(){return p}});var r=n(35944),i=n(9117),a=n(99408),o=n(34467),l=n(96769),s=n(91131),c=n(76832),d=n(47886),u=n(56483),f={Content:function(e){var t=e.options.isHidden,n=(0,a.Z)(),o=n.container,f=n.fs,h=n.session,m=n.runner,v=(0,s.Dv)(c.f),g=(0,c.Z)();return(0,d.Z)({container:o,runner:m,refreshWebView:g}),(0,u.Z)({runner:m,refreshWebView:g}),(0,i.x)(p,{run:function(){g()}}),(0,r.tZ)(l.Z,{fs:f,session:h,ref:v,isVisible:!t})},Icon:function(e){var t=e.size;return(0,r.tZ)(o.Z,{size:t})},getTitle:function(){return"Webview"}},p={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:"S"}},66132:function(e,t,n){n.d(t,{U:function(){return Ec}});var r=n(35944),i=n(67294),a=n(14924),o=n(10253),l=n(57263),s=n(18757),c=n(60536),d=n.n(c),u=n(24561),f=n(32027),p=n(15085);function h(e){var t=e.preventHighlightBorder,n=(0,f.Z)();return(0,r.BX)("div",{className:d().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])+" loader",children:[(0,r.tZ)("div",{className:d().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])+" wrap",children:(0,r.BX)(u.ZP,{backgroundColor:p.TV.backgroundHighest,foregroundColor:p.TV.backgroundHigher,uniqueKey:"editorLoader",children:[(0,r.tZ)("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"70",height:"10",className:d().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"80",y:"0",rx:"3",ry:"3",width:"100",height:"10",className:d().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"190",y:"0",rx:"3",ry:"3",width:"10",height:"10",className:d().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"15",y:"20",rx:"3",ry:"3",width:"130",height:"10",className:d().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"155",y:"20",rx:"3",ry:"3",width:"130",height:"10",className:d().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"15",y:"40",rx:"3",ry:"3",width:"90",height:"10",className:d().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"115",y:"40",rx:"3",ry:"3",width:"60",height:"10",className:d().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"185",y:"40",rx:"3",ry:"3",width:"60",height:"10",className:d().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"0",y:"60",rx:"3",ry:"3",width:"30",height:"10",className:d().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"15",y:"80",rx:"3",ry:"3",width:"70",height:"10",className:d().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"95",y:"80",rx:"3",ry:"3",width:"60",height:"10",className:d().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"165",y:"80",rx:"3",ry:"3",width:"30",height:"10",className:d().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"15",y:"100",rx:"3",ry:"3",width:"110",height:"10",className:d().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"135",y:"100",rx:"3",ry:"3",width:"100",height:"10",className:d().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])}),(0,r.tZ)("rect",{x:"0",y:"120",rx:"3",ry:"3",width:"70",height:"10",className:d().dynamic([["b8bdeb39d1178985",[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"]]])})]})}),(0,r.tZ)(d(),{id:"b8bdeb39d1178985",dynamic:[n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)"],children:".loader.__jsx-style-dynamic-selector{z-index:3;height:100%;width:100%;background-color:var(--background-default);overflow:hidden;padding:var(--space-16);-webkit-border-bottom-right-radius:var(--border-radius-4);-moz-border-radius-bottomright:var(--border-radius-4);border-bottom-right-radius:var(--border-radius-4);-webkit-border-bottom-left-radius:var(--border-radius-4);-moz-border-radius-bottomleft:var(--border-radius-4);border-bottom-left-radius:var(--border-radius-4);-webkit-box-shadow:".concat(n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)",";-moz-box-shadow:").concat(n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)",";box-shadow:").concat(n&&!t?"0 3px 0 3px ".concat(n):"var(--shadow-1)","}.wrap.__jsx-style-dynamic-selector{overflow:hidden}.wrap.__jsx-style-dynamic-selector>svg{max-width:640px;min-width:500px;height:auto}@media screen and (min-width:900px){.loader.__jsx-style-dynamic-selector{padding:30px}}")})]})}var m=n(65915),v=n(99408);n(24351);function g(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,v.Z)().session,n=(0,o.Z)(i.useState(t.getCursorPosition()),2),r=n[0],a=n[1];return i.useEffect((function(){if(!e)return a(t.getCursorPosition()),t.onCursorPositionChanged(a)}),[t,e]),r}var b=n(96189),x=n(31826),Z=n(48551),y=n(66681),w=n(65456),k=n(40381),C=(0,x.Z)((function(e){e.scrollIntoView({behavior:"smooth",block:"center"})}),100),j=i.memo(y.Z);function _(){var e=(0,v.Z)().fs,t=(0,v.Z)().session,n=(0,o.Z)(i.useState(!1),2),s=n[0],c=n[1],d=(0,k.Z)(),u=(0,m.Z)(),f=g(d!==u),x=i.useRef(null),y=(0,b.Z)((function(){c(!0),x.current&&clearTimeout(x.current),x.current=setTimeout((function(){c(!1)}),150)}),{type:"throttle",wait:37.5});i.useLayoutEffect((function(){if(!s&&d===u){var e=document.querySelectorAll(".rendered-markdown [data-sourcepos]"),t=Array.from(e).reverse();if(t){var n=f.lineNumber,r=f.column,i=!0,a=!1,l=void 0;try{for(var c,p=t[Symbol.iterator]();!(i=(c=p.next()).done);i=!0){var h=c.value,m=h.dataset.sourcepos;if(!m)throw new Error("Expected data source pos on selected element");var v=(0,o.Z)(m.split("-"),2),g=v[0],b=v[1],x=(0,o.Z)(g.split(":").map(Number),2),Z=x[0],y=x[1],w=(0,o.Z)(b.split(":").map(Number),2),k=w[0],j=w[1];if(n>=Z&&r>=y&&(n<k||n===k&&r<=j))return void C(h)}}catch(_){a=!0,l=_}finally{try{i||null==p.return||p.return()}finally{if(a)throw l}}}}}),[f,s,d,u]);var _=(0,o.Z)(i.useState(null),2),S=_[0],z=_[1];return i.useEffect((function(){if(z(null),u&&(0,Z.Mb)(u))return e.watchOtFile(u,{onReady:function(e){var t=e.initialContent;z(t.toString())},onChange:function(e){var t=e.latestContent;z(t)},onMoveOrDelete:function(e){e.eventType===w.kS.Delete&&t.setPreviewedFile(null)}})}),[u,e,t]),u?null===S?(0,r.tZ)(h,{preventHighlightBorder:!0}):(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8),p.l0.height("100%"),p.l0.width("100%"),p.l0.overflow("auto"),p.l0.backgroundColor.backgroundDefault,p.l0.zIndex(2),p.l0.align.center,p.l0.py(16),p.l0.px(16),(0,a.Z)({margin:"0 auto"},"@media only screen and (min-width: ".concat(l.j.tabletMin,"px)"),p.l0.px(32))],innerRef:y,children:[(0,r.tZ)(p.G7,{css:[p.l0.rowWithGap(0),p.l0.height(30),p.l0.width("100%"),p.l0.justify.spaceBetween,p.l0.align.center,p.l0.backgroundColor.backgroundDefault],children:(0,r.tZ)(T,{})}),(0,r.tZ)(p.G7,{css:[p.l0.width("100%"),{"& .rendered-markdown":[p.l0.flex.column,p.l0.center],"& .rendered-markdown > *":[p.l0.maxWidth(840),p.l0.width("100%")],"& .rendered-markdown > table":p.l0.maxWidth("100%")}],children:(0,r.tZ)(j,{path:u,source:S,fs:e,sourcePos:!0})})]}):(0,r.tZ)(p.G7,{css:[p.l0.height("100%"),p.l0.width("100%"),p.l0.center],children:(0,r.tZ)(p.xv,{children:"No previewed file"})})}var T=function(){var e=(0,m.Z)();return(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(2),p.l0.color.foregroundDimmer,p.l0.width("calc(100% - ".concat(p.TV.space16,")")),p.l0.align.center],children:[(0,r.tZ)(s.Z,{}),(0,r.BX)(p.xv,{css:p.l0.m(4),color:"dimmer",children:["Preview of ",(0,r.tZ)("a",{href:"#".concat(e),children:e})]})]})},S=n(34079),z={Content:function(){return(0,r.tZ)(_,{})},Icon:function(e){var t=e.size;return(0,r.tZ)(S.Z,{size:t})},getTitle:function(){return"Markdown"}},B=n(26451),R=n(96199),E=n(58360),G={Content:function(){return(0,r.tZ)(L,{})},Icon:function(e){var t=e.size;return(0,r.tZ)(B.Z,{size:t})},getTitle:function(){return"Files"}};function L(){var e=(0,E.p)();return(0,r.tZ)(R.Z,{filetreeApi:e})}var I=n(22414),N=n(61622),A=n(71530),D=n(68122),X=n(63805),P={Content:function(e){var t=e.options;return(0,r.tZ)(M,{visible:!t.isHidden})},Icon:function(e){var t=e.size;return(0,r.tZ)(A.Z,{size:t})},getTitle:function(){return"Console"}};function M(e){var t=e.visible,n=(0,v.Z)(),a=n.session,o=n.runner,l=n.packager,s=n.container,c=n.debuggest,d=i.useRef(null),u=(0,D.Z)(c.mainClient);return i.useEffect((function(){if(u)return u.onOutput((function(e){d.current&&d.current.write(e)}))}),[u]),i.useEffect((function(){var e=a.onTerminalClear((function(){d.current&&d.current.clear()})),t=a.onTerminalWrite((function(e){d.current&&d.current.write(e)}));return function(){e(),t()}}),[a]),i.useEffect((function(){t&&d.current&&d.current.focus()}),[t]),i.useEffect((function(){if(!(0,X.isMobile)())return o.onLocalRun((function(){var e,t;null===(e=d.current)||void 0===e||e.clear(),null===(t=d.current)||void 0===t||t.focus()}))}),[o]),(0,r.tZ)(N.Z,{runner:o,debugClient:u,packager:l,ref:d,onBootStatus:s.client().onBootStatus})}var F=n(79985),O=n(30019),U=n(87514),W=n(54992);function H(e){var t=e.children;return(0,r.tZ)(p.G7,{css:[p.l0.height("100%"),p.l0.overflowY("auto"),W.F3],children:(0,r.BX)(p.G7,{css:[p.l0.p(8),p.l0.colWithGap(8),p.l0.flex.grow(1)],children:[(0,r.BX)(p.G7,{css:p.l0.colWithGap(4),children:[(0,r.BX)(p.G7,{css:[p.l0.flex.row,p.l0.justify.spaceBetween,p.l0.flex.wrap],children:[(0,r.tZ)(O.Z,{truncate:!0,level:4,children:"Secrets"}),(0,r.tZ)(p.ZP,{iconLeft:(0,r.tZ)(U.Z,{}),href:"https://docs.replit.com/programming-ide/storing-sensitive-information-environment-variables",small:!0,text:"Docs",target:"_blank"})]}),(0,r.tZ)(p.xv,{variant:"small",color:"dimmer",children:"System environment variables."})]}),(0,r.tZ)(p.G7,{css:[p.l0.flex.grow(1),p.l0.py(8),p.l0.position.relative],children:t})]})})}var V=n(82893),q={Content:function(){return(0,r.tZ)(Y,{})},Icon:function(e){var t=e.size;return(0,r.tZ)(V.Z,{size:t})},getTitle:function(){return"Secrets"}};function Y(){var e=(0,v.Z)().fs,t=(0,k.Z)();return(0,r.tZ)(H,{children:(0,r.tZ)(F.Z,{fs:e,activeFile:t})})}var K=n(81278),Q=n(42844),$={Content:function(){return(0,r.BX)(p.G7,{css:[p.l0.overflow("auto"),W.F3],children:[(0,r.tZ)(p.h4,{variant:"subheadBig",level:3,css:[p.l0.p(8)],children:"Settings"}),(0,r.tZ)(K.Z,{css:[{backgroundColor:"transparent"}]})]})},Icon:function(e){var t=e.size;return(0,r.tZ)(Q.Z,{size:t})},getTitle:function(){return"Settings"}},J=n(22942),ee=n(62944),te={Content:function(){return(0,r.BX)(p.G7,{css:W.F3,children:[(0,r.tZ)(p.h4,{variant:"subheadBig",level:3,css:[p.l0.p(8)],children:"Packages"}),(0,r.tZ)(J.Z,{})]})},Icon:function(e){var t=e.size;return(0,r.tZ)(ee.Z,{size:t})},getTitle:function(){return"Packager"}},ne=n(1557),re=n(29815),ie=n(26473),ae=n(26042),oe=n(7297),le=n(31230),se=n(37887);function ce(){var e=(0,oe.Z)(["\n  fragment DatabaseUsage on Database {\n    id\n    keysCount\n    sizeMB\n  }\n"]);return ce=function(){return e},e}function de(){var e=(0,oe.Z)(["\n  query Database($replID: String!) {\n    repl(id: $replID) {\n      ... on Repl {\n        id\n        database {\n          id\n          ...DatabaseUsage\n        }\n      }\n    }\n    currentUser {\n      id\n      isLoggedIn\n    }\n  }\n  ","\n"]);return de=function(){return e},e}var ue={},fe=(0,le.Ps)(ce()),pe=(0,le.Ps)(de(),fe);var he=n(77365),me=n(79500),ve=n(63377),ge=n(91513),be=n(41034),xe=n(9517),Ze=n(62794),ye=n(10164);function we(e){var t,n,i,a,o=e.activeFile,l=function(e){var t=(0,ae.Z)({},ue,e);return se.a(pe,t)}({variables:{replID:(0,ve.Z)()},pollInterval:1e4}),s=l.data,c=l.error,d=l.loading;s&&("Repl"===s.repl.__typename?i=null===s||void 0===s||null===(a=s.repl)||void 0===a?void 0:a.database:n="Could not fetch Database info");c&&("GraphQL error: You don't have access to this database"===c.message?i=null:n=c.message);var u=null===s||void 0===s||null===(t=s.currentUser)||void 0===t?void 0:t.isLoggedIn;return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(16),p.l0.backgroundColor.backgroundDefault,p.l0.p(8),p.l0.borderRadius(0,4,4,0),W.F3],children:[(0,r.tZ)(p.h4,{level:2,variant:"subheadBig",children:"Database"}),(0,r.tZ)(p.G7,{css:[p.l0.colWithGap(16),{overflowY:"auto",width:"100%",flex:"1"}],children:u?(0,r.BX)(r.HY,{children:[(0,r.BX)(p.xv,{multiline:!0,children:[(0,r.tZ)("a",{href:"https://docs.replit.com/hosting/database-faq",target:"_blank",rel:"noopener",css:[p.l0.color.accentPrimaryStronger,p.l0.pr(4)],children:"Replit Database"}),"is an easy to use key-value store."]}),n&&(0,r.tZ)(p.xv,{multiline:!0,css:[p.l0.color.accentNegativeStronger],children:n}),(i||d)&&(0,r.tZ)(p.G7,{css:[p.l0.pb(16)],children:(0,r.tZ)(ke,{database:i,loading:d})}),!d&&(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8)],children:[(0,r.tZ)(p.xv,{variant:"small",css:{textTransform:"uppercase",fontWeight:p.TV.fontWeightMedium},children:"commands"}),(0,r.tZ)(Ce,{activeFile:o})]})]}):(0,r.tZ)(Le,{})}),(0,r.tZ)(Ge,{})]})}var ke=function(e){var t=e.database;if(e.loading)return(0,r.tZ)(he.Z,{style:{margin:"10px auto",width:"35px",height:"35px"}});if(!t)return null;var n=t.sizeMB||0,i="MB";return n<1&&(n*=1e3,i="KB"),(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8)],children:[(0,r.tZ)(p.xv,{variant:"small",css:{textTransform:"uppercase",fontWeight:p.TV.fontWeightMedium},children:"storage"}),(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4)],children:[(0,r.BX)(p.xv,{color:"dimmer",children:[n.toFixed(2)," ",i]}),(0,r.tZ)(p.xv,{color:"dimmer",children:"|"}),(0,r.tZ)(p.xv,{color:"dimmer",children:"".concat(t.keysCount||0," ").concat(1===t.keysCount?"key":"keys")})]})]})},Ce=function(e){var t=e.activeFile,n=(0,r.tZ)(Ee,{activeFile:t});if(t)switch((0,Z.r6)(t)){case"go":n=(0,r.tZ)(Re,{examples:ze,activeFile:t});break;case"js":case"ts":case"tsx":case"jsx":case"mjs":n=(0,r.tZ)(Re,{examples:Be,activeFile:t});break;case"py":n=(0,r.tZ)(Re,{examples:Se,activeFile:t})}return(0,r.tZ)(p.G7,{css:[p.l0.colWithGap(8)],children:n})},je=function(e){var t=e.title,n=e.content,a=e.activeFile,l=(0,o.Z)(i.useState(n),2),s=l[0],c=l[1],d=(0,o.Z)(function(){var e=t.split(" ");return[e[0],e.slice(1).join(" ")]}(),2),u=d[0],f=d[1];return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(4)],children:[(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4)],children:[(0,r.tZ)(p.xv,{css:{fontWeight:p.TV.fontWeightMedium},children:u}),(0,r.tZ)(p.xv,{color:"dimmer",children:f})]}),(0,r.BX)(p.G7,{css:[p.l0.colWithGap(4),{width:"fit-content"}],children:[(0,r.tZ)(p.G7,{css:[p.l0.rowWithGap(4),p.l0.backgroundColor.backgroundRoot,p.l0.borderRadius(4),p.l0.p(4),p.l0.align.center],children:n.map((function(e,n){return"input"===e.type?(0,r.tZ)(p.II,{onChange:function(e){var t=(0,re.Z)(s);t[n].value=e.target.value,c(t)},placeholder:e.placeholder,value:e.value||"",css:[p.l0.width(64),p.l0.height(24),p.l0.zIndex(1)]},"".concat(t,"-").concat(n)):(0,r.tZ)(p.G7,{css:[p.l0.borderRadius(4),p.l0.backgroundColor.backgroundRoot],children:(0,r.tZ)(p.xv,{css:[p.l0.font.code,p.l0.color.greyStronger,p.l0.p(4)],children:e.value})},"".concat(t,"-").concat(n))}))}),(0,r.tZ)(_e,{code:s.reduce((function(e,t){return"input"===t.type?e+(t.value||t.placeholder):e+t.value}),""),activeFile:a})]})]})},_e=function(e){var t=e.code,n=e.activeFile,i=(0,ge.Z)(n);return i?(0,r.tZ)(p.Tg,{background:"default",children:(0,r.tZ)(p.zx,{small:!0,outlined:!0,onClick:function(){i({code:t})},text:"Insert",iconRight:(0,r.tZ)(xe.Z,{}),css:{width:"fit-content"}})}):(0,r.tZ)(p.Tg,{background:"default",children:(0,r.tZ)(p.zx,{small:!0,outlined:!0,onClick:function(){return(0,me.Z)(t)},text:"Copy",iconLeft:(0,r.tZ)(be.Z,{}),css:{width:"fit-content"}})})},Te=[{title:"Set a key to a value",content:[{type:"code",value:"curl $REPLIT_DB_URL -d '"},{type:"input",placeholder:"key"},{type:"code",value:"="},{type:"input",placeholder:"value"},{type:"code",value:"'"}]},{title:"Get a key's value",content:[{type:"code",value:"curl $REPLIT_DB_URL/"},{type:"input",placeholder:"key"}]},{title:"Delete a key",content:[{type:"code",value:"curl -XDELETE $REPLIT_DB_URL/"},{type:"input",placeholder:"key"}]},{title:"List all keys",content:[{type:"code",value:'curl "$REPLIT_DB_URL?prefix='},{type:"input",placeholder:"key"},{type:"code",value:'"'}]}],Se=[{title:"Import the database",content:[{type:"code",value:"from replit import db"}]},{title:"Set a key to a value",content:[{type:"code",value:'db["'},{type:"input",placeholder:"key"},{type:"code",value:'"] = "'},{type:"input",placeholder:"value"},{type:"code",value:'"'}]},{title:"Get a key's value",content:[{type:"code",value:'value = db["'},{type:"input",placeholder:"key"},{type:"code",value:'"]'}]},{title:"Delete a key",content:[{type:"code",value:'del db["'},{type:"input",placeholder:"key"},{type:"code",value:'"]'}]},{title:"List all keys",content:[{type:"code",value:"keys = db.keys()"}]},{title:"List keys with a prefix",content:[{type:"code",value:'matches = db.prefix("'},{type:"input",placeholder:"prefix"},{type:"code",value:'")'}]}],ze=[{title:"Import the database",content:[{type:"code",value:'import "github.com/replit/database-go"'}]},{title:"Set a key to a value",content:[{type:"code",value:'database.Set("'},{type:"input",placeholder:"key"},{type:"code",value:'", "'},{type:"input",placeholder:"value"},{type:"code",value:'")'}]},{title:"Get a key's value",content:[{type:"code",value:'value, _ := database.Get("'},{type:"input",placeholder:"key"},{type:"code",value:'")'}]},{title:"Delete a key",content:[{type:"code",value:'database.Delete("'},{type:"input",placeholder:"key"},{type:"code",value:'")'}]},{title:"List all keys",content:[{type:"code",value:'keys, _ := database.ListKeys("")'}]},{title:"List keys with a prefix",content:[{type:"code",value:"matches, _ := database.ListKeys("},{type:"input",placeholder:"prefix"},{type:"code",value:'")'}]}],Be=[{title:"Import the database",content:[{type:"code",value:'const Database = require("@replit/database")'}]},{title:"Create a new database",content:[{type:"code",value:"const db = new Database()"}]},{title:"Set a key to a value",content:[{type:"code",value:'db.set("'},{type:"input",placeholder:"key"},{type:"code",value:'", "'},{type:"input",placeholder:"value"},{type:"code",value:'").then(() => {});'}]},{title:"Get a key's value",content:[{type:"code",value:'db.get("'},{type:"input",placeholder:"key"},{type:"code",value:'").then(value => {});'}]},{title:"Delete a key",content:[{type:"code",value:'db.delete("'},{type:"input",placeholder:"key"},{type:"code",value:'").then(() => {});'}]},{title:"List all keys",content:[{type:"code",value:"db.list().then(keys => {});"}]},{title:"List keys with a prefix",content:[{type:"code",value:'db.list("'},{type:"input",placeholder:"prefix"},{type:"code",value:'").then(matches => {});'}]}],Re=function(e){var t=e.examples,n=e.activeFile;return(0,r.tZ)(p.G7,{css:[p.l0.colWithGap(24)],children:t.map((function(e,t){return(0,r.tZ)(je,{title:e.title,content:e.content,activeFile:n},t)}))})},Ee=function(e){var t=e.activeFile;return(0,r.tZ)(r.HY,{children:(0,r.BX)(p.G7,{css:[p.l0.colWithGap(24)],children:[(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4),{flexWrap:"wrap"}],children:[(0,r.tZ)(p.xv,{color:"dimmer",multiline:!0,children:"We\u2019ve set an environment variable called"}),(0,r.tZ)(p.G7,{css:[p.l0.borderRadius(4),p.l0.backgroundColor.backgroundRoot],children:(0,r.tZ)(p.xv,{css:[p.l0.font.code,p.l0.color.greyStronger,p.l0.p(4)],children:"REPLIT_DB_URL"})}),(0,r.tZ)(p.xv,{color:"dimmer",multiline:!0,children:"in your Repl."})]}),Te.map((function(e,n){return(0,r.tZ)(je,{title:e.title,content:e.content,activeFile:t},n)})),(0,r.tZ)(p.xv,{color:"dimmer",multiline:!0,children:"You can use the Database from any Repl by making HTTP requests similar to those above. We have language clients for Python, Go, and Node, switch to a file that uses that language to see how to use the client."})]})})},Ge=function(){return(0,r.tZ)(p.G7,{css:[p.l0.pt(8)],children:(0,r.tZ)(Ze.Z,{feature:ye.l.Database})})},Le=function(){return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(16)],children:[(0,r.BX)(p.xv,{multiline:!0,children:[(0,r.tZ)("a",{href:"https://docs.replit.com/hosting/database-faq",target:"_blank",rel:"noopener",css:[p.l0.color.accentPrimaryStronger,p.l0.pr(4)],children:"Replit Database"}),"is the fastest and easiest way to store data from your Repl. Try it out by logging in or signing up."]}),(0,r.tZ)(p.ZP,{href:"/signup",colorway:"primary",text:"Sign up",iconLeft:(0,r.tZ)(ie.Z,{})})]})},Ie={Content:function(){var e=(0,k.Z)();return(0,r.tZ)(we,{activeFile:e})},Icon:function(e){var t=e.size;return(0,r.tZ)(ne.Z,{size:t})},getTitle:function(){return"Database"}},Ne=n(47568),Ae=n(34051),De=n.n(Ae);function Xe(){var e=(0,oe.Z)(["\n  query ReplAuth($replID: String!) {\n    repl(id: $replID) {\n      ... on Repl {\n        id\n        config {\n          isServer\n        }\n      }\n    }\n    currentUser {\n      id\n      isLoggedIn\n    }\n  }\n"]);return Xe=function(){return e},e}var Pe={},Me=(0,le.Ps)(Xe());var Fe=n(6625),Oe=n(48287),Ue=n(40705),We=n(59916),He=n(4158),Ve=n(58794),qe="Import HTML package",Ye=[{title:"Get user info",content:[{type:"code",value:'<script type="module">const user = await getUserInfo() <\/script>'}]}],Ke=[{title:qe,content:[{type:"code",value:'<script src="https://replit.com/public/js/repl-auth-v2.js"><\/script>'}]}],Qe=[{title:"Insert custom button",content:[{type:"code",value:'<button onclick="LoginWithReplit()"> Login </button>'}]}],$e="Import Node package",Je=[{title:"Get user info",content:[{type:"code",value:"const user = getUserInfo("},{type:"input",placeholder:"req"},{type:"code",value:")"}]}],et=[{title:$e,content:[{type:"code",value:'const { getUserInfo } = require("@replit/repl-auth")'}]}],tt=function(e){var t=e.title,n=e.content,a=e.activeFile,l=(0,o.Z)(i.useState(n),2),s=l[0],c=l[1];return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(4)],children:[(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4)],children:[(0,r.tZ)(p.xv,{css:{fontWeight:p.TV.fontWeightMedium},multiline:!0,children:t}),"Get user info"===t&&(0,r.BX)(p.u,{tooltip:"User object contains 'id', 'name', 'roles', and 'teams'",placement:"top",children:[" ",(0,r.tZ)(He.Z,{})]})]}),(0,r.BX)(p.G7,{css:[p.l0.colWithGap(4),{width:"fit-content",wordBreak:"break-word"}],children:[(0,r.tZ)(p.G7,{css:[p.l0.rowWithGap(4),p.l0.backgroundColor.backgroundRoot,p.l0.borderRadius(4),p.l0.p(4),p.l0.align.center],children:n.map((function(e,n){return"input"===e.type?(0,r.tZ)(p.II,{onChange:function(e){var t=(0,re.Z)(s);t[n].value=e.target.value,c(t)},placeholder:e.placeholder,value:e.value||"",css:[p.l0.width(64),p.l0.height(24),p.l0.zIndex(1)]},"".concat(t,"-").concat(n)):(0,r.tZ)(p.G7,{css:[p.l0.borderRadius(4),p.l0.backgroundColor.backgroundRoot],children:(0,r.tZ)(p.xv,{css:[p.l0.font.code,p.l0.color.greyStronger,p.l0.pb(4),p.l0.pt(4)],children:e.value})},"".concat(t,"-").concat(n))}))}),(0,r.tZ)(nt,{code:s.reduce((function(e,t){return"input"===t.type?e+(t.value||t.placeholder):e+t.value}),""),activeFile:a,packageImport:t===$e||t===qe})]})]})},nt=function(e){var t=e.code,n=e.activeFile,i=e.packageImport,a=(0,ge.Z)(n),o=(0,v.Z)().fs;return a?(0,r.tZ)(p.Tg,{background:"default",children:(0,r.tZ)(p.zx,{small:!0,outlined:!0,onClick:function(){if(i&&n&&o)return"html"!==(0,Z.r6)(n)?void a({code:t,insertAt:0}):void o.readFile(n).then((function(e){if(e.error)throw e.error;var n=Ve.Z.from(e.content).toString(),r=n.indexOf("</head>")-1;-1===r&&(r=n.indexOf("<script")),-1===r&&(r=n.indexOf("</body>")),-1===r&&(r=n.length),a({code:t,insertAt:r})}));a({code:t})},text:i?"Auto add":"Insert",iconRight:(0,r.tZ)(xe.Z,{}),css:{width:"fit-content"}})}):(0,r.tZ)(p.Tg,{background:"default",children:(0,r.tZ)(p.zx,{small:!0,outlined:!0,onClick:function(){return(0,me.Z)(t)},text:"Copy",iconLeft:(0,r.tZ)(be.Z,{}),css:{width:"fit-content"}})})},rt=function(e){var t=e.examples,n=e.activeFile;return(0,r.tZ)(p.G7,{css:[p.l0.colWithGap(16)],children:t.map((function(e,t){return(0,r.tZ)(tt,{title:e.title,content:e.content,activeFile:n},t)}))})},it=function(e){var t=e.activeFile,n=null;switch(e.langKey){case"html":n=Ke;break;case"nodejs":n=et}return n?(0,r.tZ)(p.G7,{css:[p.l0.colWithGap(8)],children:(0,r.tZ)(rt,{examples:n,activeFile:t})}):null},at=n(76832),ot=[{title:"Fetch from client",content:[{type:"code",value:"CURL /__replauthuser"}]},{title:"Or access server request headers",content:[{type:"code",value:"X-Replit-User-Id"}]},{title:"",content:[{type:"code",value:"X-Replit-User-Name"}]},{title:"",content:[{type:"code",value:"X-Replit-User-Teams"}]},{title:"",content:[{type:"code",value:"X-Replit-User-Roles"}]}],lt=function(){var e=(0,k.Z)();return(0,r.tZ)(r.HY,{children:(0,r.tZ)(p.G7,{css:[p.l0.colWithGap(16)],children:ot.map((function(t,n){return(0,r.tZ)(tt,{title:t.title,content:t.content,activeFile:e},n)}))})})},st=function(e){var t=e.activeFile,n=e.langKey,i=(0,r.tZ)(lt,{});switch(n){case"html":i=(0,r.tZ)(rt,{examples:Ye,activeFile:t});break;case"nodejs":i=(0,r.tZ)(rt,{examples:Je,activeFile:t})}return(0,r.tZ)(p.G7,{css:[p.l0.colWithGap(8)],children:i})},ct=function(e){var t=e.activeFile,n=e.langKey;return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8)],children:[" ","html"!==n&&(0,r.tZ)(rt,{examples:Ke,activeFile:t}),(0,r.tZ)(rt,{examples:Qe,activeFile:t})]})},dt=n(93058),ut=n(86292),ft=n(25497);function pt(){var e,t,n,a,l,s=(0,ve.Z)(),c=(0,v.Z)(),d=c.dotReplit,u=c.fs,f=(0,k.Z)(),h=(0,Ue.x)(),m=(0,Fe.Z)(),g=(0,at.Z)(),b=(0,dt.Z)().showError,x=(0,o.Z)(i.useState(!1),2),y=x[0],w=x[1],C=(0,o.Z)(i.useState(!1),2),j=C[0],_=C[1],T=(0,o.Z)(i.useState(!0),2),S=T[0],z=T[1],B=(0,o.Z)(i.useState(!0),2),R=B[0],E=B[1],G=(0,o.Z)(i.useState(null!==(a=null===h||void 0===h?void 0:h.language)&&void 0!==a?a:""),2),L=G[0],I=G[1],N=f?(0,Z.r6)(f):null,A=function(e){var t=(0,ae.Z)({},Pe,e);return se.a(Me,t)}({variables:{replID:s}}),D=A.data,X=A.error,P=A.loading,M="Repl"===(null===D||void 0===D?void 0:D.repl.__typename)&&(null===D||void 0===D||null===(e=D.repl)||void 0===e||null===(t=e.config)||void 0===t?void 0:t.isServer);X&&(l="Couldn't load auth data");var F=null===D||void 0===D||null===(n=D.currentUser)||void 0===n?void 0:n.isLoggedIn,O=y||j,U=i.useCallback((0,Ne.Z)(De().mark((function e(){var t,n,r,i,a,o,l,s,c=arguments;return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]&&c[0],m){e.next=3;break}return e.abrupt("return");case 3:return z(!0),e.prev=4,e.next=8,d.getConfig({bypassCache:!0});case 8:if(!(s=e.sent).error){e.next=17;break}if(s.error!==ft.Yt.NotFound){e.next=14;break}return E(!1),z(!1),e.abrupt("return");case 14:throw b("Couldn't load auth data"),z(!1),new Error(s.errorMessage);case 17:t&&(null===s||void 0===s||null===(n=s.config)||void 0===n||null===(r=n.auth)||void 0===r?void 0:r.pageEnabled)!==j&&g(),w(Boolean(null===s||void 0===s||null===(i=s.config)||void 0===i||null===(a=i.auth)||void 0===a?void 0:a.buttonEnabled)),_(Boolean(null===s||void 0===s||null===(o=s.config)||void 0===o||null===(l=o.auth)||void 0===l?void 0:l.pageEnabled)),z(!1),e.next=27;break;case 23:e.prev=23,e.t0=e.catch(4),b("Couldn't load auth data"),z(!1);case 27:case"end":return e.stop()}}),e,null,[[4,23]])}))),[m,d,b,g]);function W(){return H.apply(this,arguments)}function H(){return(H=(0,Ne.Z)(De().mark((function e(){return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z(!0),(0,ut.j)(ut.U3.AUTH_SIDEBAR_USED,{action:"Login Page Enabled"}),e.next=4,d.updateDotReplit([(0,Oe.$0)(!0),(0,Oe.Jk)(!1)]);case 4:e.sent.error&&m&&(b("Couldn't enable login page, please try again"),z(!1));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return q.apply(this,arguments)}function q(){return(q=(0,Ne.Z)(De().mark((function e(){return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z(!0),(0,ut.j)(ut.U3.AUTH_SIDEBAR_USED,{action:"Login Button Enabled"}),e.next=4,d.updateDotReplit([(0,Oe.$0)(!1),(0,Oe.Jk)(!0)]);case 4:e.sent.error&&m&&(b("Couldn't enable login button, please try again"),z(!1));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){return K.apply(this,arguments)}function K(){return(K=(0,Ne.Z)(De().mark((function e(){return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z(!0),(0,ut.j)(ut.U3.AUTH_SIDEBAR_USED,{action:"Repl auth disabled"}),e.next=4,d.updateDotReplit([(0,Oe.$0)(!1),(0,Oe.Jk)(!1)]);case 4:e.sent.error&&(b("Couldn't disable Log in with Replit, please try again"),z(!1));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}i.useEffect((function(){var e=function(){var e=(0,Ne.Z)(De().mark((function e(){return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u&&m){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,U();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[u,m,U]),i.useEffect((function(){if(u&&m){var e=u.watchOtFile(We.l,{onChange:(0,Ne.Z)(De().mark((function e(){return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,U(!0);case 4:case"end":return e.stop()}}),e)})))});return function(){e(),m&&(_(!1),w(!1),z(!1))}}}),[m,u,_,U]),i.useEffect((function(){"react"!==L&&("jsx"!==N&&"tsx"!==N?h&&I(h.language):I("react"))}),[N,L,I,h]);var Q=function(){var e="html"===L||"nodejs"===L,t=(0,r.tZ)(p.xv,{multiline:!0,color:"dimmer",children:"You can use Log in with Replit with all web Repls. We have language clients for Nodejs and HTML - switch to a Repl that uses that language to see how to use it."});return y?(0,r.BX)(r.HY,{children:[(0,r.BX)(p.xv,{multiline:!0,color:"dimmer",children:["Your users can log in to your Repl using a custom button. Start by importing the package below"," ",(0,r.BX)("span",{onClick:W,css:[p.l0.color.blueStronger,p.l0.cursor.pointer],onKeyDown:W,role:"button",tabIndex:0,children:[" ","or use a prebuilt login page."]})]}),!e&&t]}):j?(0,r.BX)(r.HY,{children:[(0,r.BX)(p.xv,{multiline:!0,color:"dimmer",children:["Your Repl will automatically direct users to a prebuilt login page. Start by importing the package below"," ",(0,r.BX)("span",{onClick:V,css:[p.l0.color.blueStronger,p.l0.cursor.pointer],onKeyDown:V,role:"button",tabIndex:0,children:[" ","or use your own custom button."]})]})," ",!e&&t]}):(0,r.BX)(p.xv,{multiline:!0,css:[p.l0.mb(32),p.l0.pl(8),p.l0.pr(8)],children:["Let users log in to your Repl. Use a prebuilt login page or customize your own button."," ",(0,r.tZ)("a",{href:"https://docs.replit.com/hosting/repl-auth-sidebar",target:"_blank",rel:"noopener",css:[p.l0.color.accentPrimaryStronger,p.l0.pr(4)],children:"Learn more"})]})},$=function(){return S||P?(0,r.tZ)(p.G7,{css:[p.l0.align.center],children:(0,r.tZ)(he.Z,{})}):F?l?(0,r.tZ)(p.xv,{multiline:!0,css:[p.l0.color.accentNegativeStronger],children:l}):R?"html"===L||M?O?(0,r.BX)(p.G7,{children:[(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8),p.l0.pl(8),p.l0.pr(8)],children:[(0,r.tZ)(p.G7,{css:[p.l0.colWithGap(8)]}),(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8)],children:[("nodejs"!==L||!y)&&(0,r.tZ)(it,{activeFile:f,langKey:L}),y&&(0,r.tZ)(ct,{activeFile:f,langKey:L})]})]}),(0,r.BX)(p.G7,{css:[p.l0.pl(8),p.l0.pr(8)],children:[(0,r.tZ)(p.xv,{variant:"small",css:[p.l0.mb(8),p.l0.mt(24),{textTransform:"uppercase",fontWeight:p.TV.fontWeightMedium}],children:"Usage"}),(0,r.tZ)(p.RX,{css:[p.l0.backgroundColor.backgroundHigher]}),(0,r.tZ)(p.G7,{css:[p.l0.mt(16)],children:(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8)],children:[" ","nodejs"===L&&y&&(0,r.tZ)(it,{activeFile:f,langKey:L}),(0,r.tZ)(st,{activeFile:f,langKey:L})]})})," "]}),(0,r.tZ)(p.G7,{css:[p.l0.pr(8),p.l0.pl(8),p.l0.mt(24),p.l0.mb(8)],children:(0,r.tZ)(p.zx,{onClick:Y,text:"Disable Auth"})}),(0,r.tZ)(p.G7,{css:[p.l0.mt(24)],children:(0,r.tZ)(Ze.Z,{feature:ye.l.General})})]}):(0,r.BX)(p.G7,{css:[p.l0.pr(8),p.l0.pl(8)],children:[(0,r.tZ)(p.zx,{colorway:"primary",onClick:W,text:"Enable login page"}),(0,r.BX)(p.xv,{multiline:!0,css:[p.l0.textAlign.center,p.l0.mt(8),p.l0.fontSize(12),p.l0.color],children:["Automatically redirect users to a prebuilt login page"," ",(0,r.tZ)("span",{onClick:V,css:[p.l0.color.blueStronger,p.l0.cursor.pointer],onKeyDown:V,role:"button",tabIndex:0,children:"or use your own custom button."})]})]}):(0,r.BX)(p.G7,{css:[p.l0.textAlign.center],children:[(0,r.tZ)(p.E_,{colorway:"warning",text:"Please start your web app to use Log in with Replit"}),(0,r.tZ)(p.xv,{multiline:!0,css:[p.l0.mt(4)],children:(0,r.tZ)("a",{href:"https://docs.replit.com/hosting/deploying-http-servers",target:"_blank",rel:"noopener",children:"Learn how to start a web app"})})]}):(0,r.BX)(p.G7,{css:[p.l0.textAlign.center],children:[(0,r.tZ)(p.E_,{colorway:"warning",text:"Please create a .replit file to use Log in with Replit"}),(0,r.tZ)(p.xv,{multiline:!0,css:[p.l0.mt(4)],children:(0,r.tZ)("a",{href:"https://docs.replit.com/programming-ide/configuring-repl#replit",target:"_blank",rel:"noopener",children:"Learn more about the .replit file"})})]}):(0,r.tZ)(p.G7,{css:[p.l0.align.center],children:(0,r.tZ)(ht,{})})};return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(16),p.l0.backgroundColor.backgroundDefault,p.l0.p(8),p.l0.borderRadius(0,4,4,0)],children:[(0,r.tZ)(p.h4,{level:2,variant:"subheadBig",children:"Log in with Replit"}),(0,r.BX)(p.G7,{css:[p.l0.colWithGap(16),{overflowY:"auto",width:"100%",flex:"1"}],children:[(0,r.tZ)(Q,{}),(0,r.tZ)($,{})]})]})}var ht=function(){return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(16)],children:[(0,r.BX)(p.xv,{multiline:!0,children:[(0,r.tZ)("a",{href:"https://docs.replit.com/hosting/repl-auth-sidebar",target:"_blank",rel:"noopener",css:[p.l0.color.accentPrimaryStronger,p.l0.pr(4)],children:"Replit Authentication"}),"is the fastest and easiest way to set up authentication in your Repl. Try it out by logging in or signing up."]}),(0,r.tZ)(p.ZP,{href:"/signup",colorway:"primary",text:"Sign up",iconLeft:(0,r.tZ)(ie.Z,{})})]})},mt=n(49012),vt={Content:function(){return(0,r.tZ)(p.G7,{css:[p.l0.height("100%"),p.l0.overflowY("auto"),W.F3],children:(0,r.tZ)(pt,{})})},Icon:function(e){var t=e.size;return(0,r.tZ)(mt.Z,{size:t})},getTitle:function(){return"Authentication"}},gt=n(82947),bt={Content:function(){return null},Icon:function(){return null},getTitle:function(){return""}},xt=n(34467),Zt=n(24337),yt={Content:function(){return(0,r.tZ)(wt,{})},Icon:function(e){var t=e.size;return(0,r.tZ)(xt.Z,{size:t})},getTitle:function(){return"Output"}};function wt(){var e=(0,v.Z)(),t=e.fs,n=e.container;return(0,r.tZ)(p.G7,{css:[p.l0.flex.growAndShrink(1)],children:(0,r.tZ)(Zt.Z,{fs:t,container:n})})}var kt=n(98563),Ct=n(39715),jt=n(57704),_t=n(87653),Tt=n(34054);function St(e){var t=e.pane,n=e.label,r=e.icon,i=e.action;return(0,Ct.fA)({type:"paneAction",label:n,icon:r,action:i,pane:t},{match:Ct.pl})}var zt={Content:function(e){var t=e.options;return(0,r.tZ)(Bt,{visible:!t.isHidden})},Icon:function(e){var t=e.size;return(0,r.tZ)(Tt.Z,{size:t})},getTitle:function(){return"Shell"},getActions:function(e){return function(){return[St({label:"Clear",icon:(0,r.tZ)(jt.Z,{}),action:{type:"clear"},pane:e}),St({label:"Search",icon:(0,r.tZ)(_t.Z,{}),action:{type:"search"},pane:e})]}}};function Bt(e){var t=e.visible,n=(0,v.Z)(),i=n.container,a=n.fs;return(0,r.tZ)(kt.Z,{container:i,fs:a,autoFocus:t})}var Rt=n(52831),Et=n(64080),Gt={Content:function(e){var t=e.pane;return(0,r.tZ)(Lt,{path:t.data.path})},Icon:function(e){var t=e.size;return(0,r.tZ)(Et.Z,{size:t})},getTitle:function(e){return e.data.path}};function Lt(e){var t=e.path,n=(0,v.Z)(),i=n.fs,a=n.broadcast,o=n.presence;return(0,r.tZ)(Rt.Z,{fs:i,broadcast:a,presence:o,filePath:t})}var It=n(63872),Nt=n(63736),At={Content:function(e){var t=e.pane;return(0,r.tZ)(Dt,(0,ae.Z)({},t.data))},Icon:function(e){var t=e.pane,n=e.size;return(0,r.tZ)(Nt.Z,{path:t.data.path,size:n})},getTitle:function(e){return e.data.path}};function Dt(e){var t=e.path,n=(0,v.Z)().fs;return(0,r.tZ)(p.G7,{css:[p.l0.flex.growAndShrink(1),p.l0.center],children:(0,r.tZ)(It.Z,{filePath:t,fs:n})})}var Xt=n(83074),Pt=n(34382),Mt={Content:function(){return(0,r.tZ)(Pt.z,{})},Icon:function(e){var t=e.size;return(0,r.tZ)(Xt.Z,{size:t})},getTitle:function(){return"Git"}},Ft=n(69396),Ot=n(40403),Ut=n(91131),Wt=n(55183),Ht=n(70917),Vt=n(502),qt=n(23600),Yt=n(99086);function Kt(e){var t=e.reversed,n=void 0!==t&&t,a=e.hideName,l=void 0!==a&&a,s=e.color,c=void 0===s?"default":s,d=(0,o.Z)((0,Wt.bA)(),1)[0],u=(0,i.useMemo)((function(){return[n?p.l0.rowReverseWithGap(4):p.l0.rowWithGap(4),p.l0.align.center]}),[n]);if(!d)return null;if(0===d.count)return(0,r.BX)(p.G7,{css:u,children:[(0,r.tZ)(Yt.Z,{size:24}),(0,r.tZ)(p.xv,{color:c,children:"Server Authored"})]});var f=d.ops[d.version],h=d.users[f.userId];return h?(0,r.BX)(p.G7,{css:u,children:[(0,r.tZ)(p.qE,{size:24,src:h.image,username:h.username}),l?null:(0,r.tZ)(p.xv,{color:c,children:h.username})]}):f.timestamp>qt.p?(0,r.BX)(p.G7,{css:u,children:[(0,r.tZ)(Yt.Z,{size:24}),l?null:(0,r.tZ)(p.xv,{color:c,children:"Server Authored"})]}):(0,r.BX)(p.G7,{css:u,children:[(0,r.tZ)(p.qE,{size:24,src:"/public/images/ghost.svg",username:"Unknown"}),l?null:(0,r.tZ)(p.xv,{color:c,children:"Unknown"})]})}var Qt=n(61957);function $t(){var e=(0,oe.Z)(["\n  query WorkspaceHistory2Users($ids: [Int!]!) {\n    currentUser {\n      id\n      username\n      image\n    }\n    usersByIds(ids: $ids) {\n      id\n      username\n      image\n    }\n  }\n"]);return $t=function(){return e},e}var Jt=(0,le.Ps)($t());function en(e,t,n){return new Promise((function(r,i){try{var a=e.watchOtFile(t,{onReady:function(){var e=(0,Ne.Z)(De().mark((function e(t){var o;return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n(t);case 3:o=e.sent,r(o),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),i(e.t0);case 10:a();case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()})}catch(o){i(o)}}))}function tn(e,t){return en(e,t,function(){var e=(0,Ne.Z)(De().mark((function e(t){var n,r;return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.fetchOps,0!==(r=t.version)){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,n(1,r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}function nn(e,t){return rn.apply(this,arguments)}function rn(){return rn=(0,Ne.Z)(De().mark((function e(t,n){var r,i,a,o,l,s,c,d,u,f,p,h,m,v,g,b,x,Z;return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new Set,i=!0,a=!1,o=void 0,e.prev=2,l=n[Symbol.iterator]();case 4:if(i=(s=l.next()).done){e.next=12;break}if(0!==(c=s.value).userId){e.next=8;break}return e.abrupt("continue",9);case 8:r.add(c.userId);case 9:i=!0,e.next=4;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),a=!0,o=e.t0;case 18:e.prev=18,e.prev=19,i||null==l.return||l.return();case 21:if(e.prev=21,!a){e.next=24;break}throw o;case 24:return e.finish(21);case 25:return e.finish(18);case 26:if(0!==r.size){e.next=28;break}return e.abrupt("return",{});case 28:return e.next=30,t.query({query:Jt,variables:{ids:Array.from(r)}});case 30:if(d=e.sent,u=d.data,!(f=d.error)){e.next=35;break}throw f;case 35:for(p=u.currentUser?[u.currentUser].concat((0,re.Z)(u.usersByIds)):u.usersByIds,h={},m=!0,v=!1,g=void 0,e.prev=38,b=p[Symbol.iterator]();!(m=(x=b.next()).done);m=!0)Z=x.value,h[Z.id]={id:Z.id,username:Z.username,image:Z.image};e.next=46;break;case 42:e.prev=42,e.t1=e.catch(38),v=!0,g=e.t1;case 46:e.prev=46,e.prev=47,m||null==b.return||b.return();case 49:if(e.prev=49,!v){e.next=52;break}throw g;case 52:return e.finish(49);case 53:return e.finish(46);case 54:return e.abrupt("return",h);case 55:case"end":return e.stop()}}),e,null,[[2,14,18,26],[19,,21,25],[38,42,46,54],[47,,49,53]])}))),rn.apply(this,arguments)}function an(){return(an=(0,Ne.Z)(De().mark((function e(t,n,r){var i,a;return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tn(t,r);case 2:return i=e.sent,e.next=5,nn(n,i);case 5:return a=e.sent,e.abrupt("return",{ops:i,users:a});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function on(e,t,n){return en(e,t,function(){var t=(0,Ne.Z)(De().mark((function t(r){var i,a,o,l;return De().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=r.fetchOps,a=r.writeOp,o=r.version,!(n>o)){t.next=3;break}throw new Error("Cannot restore to a version that does not exist");case 3:if(n!==o){t.next=5;break}return t.abrupt("return");case 5:return t.t0=Qt.HJ,t.next=8,i(1,o);case 8:return t.t1=t.sent,l=(0,t.t0)(t.t1),a((0,Qt.UK)(n,l),{isUnicode:!0}),t.next=13,e.flush();case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}var ln=n(96929),sn=(0,Ht.iv)({display:"grid",gridTemplateColumns:"auto 1fr",rowGap:"0.5rem",columnGap:"1rem","> dt":{display:"flex",alignItems:"center",fontWeight:"bold"}});function cn(){var e=(0,i.useState)(!1),t=e[0],n=e[1],a=(0,i.useState)(!1),l=a[0],s=a[1],c=(0,i.useContext)(Wt.ox).closeHistory,d=(0,v.Z)().fs,u=(0,o.Z)((0,Wt.bA)(),1)[0],f=(0,ln.j)(),h="Restore",m=!0;function g(){return(g=(0,Ne.Z)(De().mark((function e(){var t,r;return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u&&d&&!l){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,s(!0),(0,ln.p)("versionRestored"),t=u.filePath,r=u.version,e.next=8,on(d,t,r+1);case 8:n(!1),s(!1),null===c||void 0===c||c(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),f(e.t0,"restore");case 16:case"end":return e.stop()}}),e,null,[[2,13]])})))).apply(this,arguments)}return u?0===u.count?(h="No history",m=!0):l||t?(h="Restoring...",m=!0):u.playing?(h="Playing...",m=!0):u.version===u.count-1?(h="Viewing latest",m=!0):(h="Restore to ".concat(u.version+1),m=!1):(h="Loading...",m=!0),(0,r.BX)(r.HY,{children:[(0,r.tZ)(p.zx,{text:h,disabled:m,onClick:function(){return n(!0)},colorway:"primary"}),u&&0!==u.count&&(0,r.tZ)(p.u_,{isOpen:t,onRequestClose:function(){l||n(!1)},children:(0,r.BX)(p.G7,{css:p.l0.colWithGap(12),children:[(0,r.tZ)(p.h4,{variant:"headerDefault",level:2,children:"Restore file version"}),(0,r.tZ)(p.Tg,{elevated:!0,css:[p.l0.px(16),p.l0.py(12),p.l0.borderRadius(8)],children:(0,r.BX)("dl",{css:sn,children:[(0,r.tZ)("dt",{children:"File"}),(0,r.tZ)("dd",{children:u.filePath}),(0,r.tZ)("dt",{children:"Version"}),(0,r.BX)("dd",{children:[u.version+1,(0,r.BX)("span",{css:[p.l0.color.foregroundDimmest],children:[(0,r.tZ)("span",{css:p.l0.mx(8),children:"/"}),u.count]})]}),(0,r.tZ)("dt",{children:"Date"}),(0,r.tZ)("dd",{children:(0,r.tZ)(p.EK,{date:u.ops[u.version].timestamp,dateFormat:"absolute"})}),(0,r.tZ)("dt",{children:"Author"}),(0,r.tZ)("dd",{children:(0,r.tZ)(Kt,{})})]})}),(0,r.tZ)(p.E_,{icon:(0,r.tZ)(Vt.Info,{}),colorway:"positive",text:"Restoring is non-destructive. A new version will be added to the end of the file history with the restored content."}),(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(8),p.l0.justify.end],children:[(0,r.tZ)(p.zx,{text:"Cancel",disabled:l,onClick:function(){return n(!1)}}),(0,r.tZ)(p.zx,{text:l?"Restoring...":"Restore",disabled:l,colorway:"primary",onClick:function(){return g.apply(this,arguments)}})]})]})})]})}var dn=n(51438),un=function(){function e(){(0,dn.Z)(this,e),this.map=new Map}var t=e.prototype;return t.getOrInit=function(e){var t=this.map.get(e);return t||(t=new Map,this.map.set(e,t)),t},t.add=function(e,t,n){this.getOrInit(e).set(t,n)},t.flush=function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.map[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var a=(0,o.Z)(r.value,2),l=a[0],s=a[1];if(l&&"current"in l&&(l=l.current),l){var c=!0,d=!1,u=void 0;try{for(var f,p=s[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var h=(0,o.Z)(f.value,2),m=h[0],v=h[1];l.style.setProperty(m,v)}}catch(g){d=!0,u=g}finally{try{c||null==p.return||p.return()}finally{if(d)throw u}}}}}catch(g){t=!0,n=g}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.map.clear()},e}(),fn=new un,pn=!1;function hn(e,t,n){if(null!==e){if("string"===typeof t){if(void 0===n)throw new Error("value is undefined when prop is string");fn.add(e,t,n)}else for(var r in t)fn.add(e,r,t[r]);pn||(pn=!0,requestAnimationFrame((function(){fn.flush(),pn=!1})))}}function mn(e,t){var n=(0,o.Z)((0,Wt.bA)(),1)[0],a=(0,i.useRef)(null);(0,i.useImperativeHandle)(t,(function(){return a.current})),n&&a.current&&(a.current.setAttribute("aria-valuemin","1"),a.current.setAttribute("aria-valuemax",String(n.count)),a.current.setAttribute("aria-valuenow",String(n.version+1)));var l=(0,i.useMemo)((function(){return(0,r.tZ)("div",{ref:a,role:"slider",tabIndex:0,css:{position:"absolute",top:"0",left:"calc((100% - 16px) * var(--scrubber-progress, 0))",width:"16px",height:"16px",backgroundColor:p.TV.accentPrimaryDefault,borderRadius:"100%",outline:"none",cursor:"pointer",transition:"left var(--scrubber-transition-time, 100ms) ease-out",willChange:"left, transition",":focus":{boxShadow:"0 0 0 1px ".concat(p.TV.foregroundDefault," inset")}}})}),[]);return n&&n.count>1?l:null}var vn=(0,i.forwardRef)(mn);function gn(e,t){var n=(0,o.Z)((0,Wt.bA)(),1)[0],a=(0,i.useMemo)((function(){return(0,r.BX)(r.HY,{children:[(0,r.tZ)("div",{ref:t,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,r.tZ)("div",{"aria-hidden":!0,css:{position:"absolute",top:"6px",left:"0",width:"100%",height:"4px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:p.TV.backgroundHighest,borderRadius:"2px"},children:(0,r.tZ)("div",{"aria-hidden":!0,css:{position:"absolute",top:"0",left:"0",width:"100%",height:"4px",margin:"0",pointerEvents:"none",backgroundColor:p.TV.accentPrimaryDefault,transformOrigin:"left",transform:"scaleX(var(--scrubber-progress, 0))",transition:"transform var(--scrubber-transition-time, 100ms) ease-out",willChange:"transform, transition"}})})]})}),[t]),l=(0,i.useMemo)((function(){return(0,r.tZ)("div",{ref:t,"aria-hidden":!0,css:{width:"100%",height:"16px",pointerEvents:"none"},children:(0,r.tZ)("div",{css:{position:"absolute",width:"100%",height:"4px",top:"6px",left:"0",backgroundColor:p.TV.backgroundHighest,borderRadius:"2px"}})})}),[t]);return n&&n.count>1?a:l}var bn,xn=(0,i.forwardRef)(gn),Zn=["ArrowLeft","ArrowRight","Home","End"];function yn(){var e=(0,o.Z)((0,Wt.bA)(),2),t=e[0],n=e[1],a=(0,i.useState)(!1),l=a[0],s=a[1],c=(0,i.useRef)(null),d=(0,i.useRef)(null),u=(0,i.useRef)(null),f=function(e){hn(c,"--scrubber-transition-time",e)},h=function(e){hn(c,"--scrubber-progress",e.toString())};if(t&&!l){var m=t.version/(t.count-1);h(m),t.playing?f("50ms"):f("100ms")}return(0,i.useEffect)((function(){if(t&&d.current&&u.current&&!l){var e=d.current,r=u.current,i=function(i){if(0===i.button){s(!0),r.focus();var a=e.getBoundingClientRect(),o=r.getBoundingClientRect(),l=a.width,c=o.width,d=i.target===e?c/2:i.clientX-o.left,u=null,p=function(e){var r=e-a.left-d,i=Math.max(0,Math.min(1,r/(l-c)));i!==u&&(u=i,h(i),n({version:Math.round(i*(t.count-1)),playing:!1}))};p(i.clientX);var m=function(e){f("0ms"),p(e.clientX),e.preventDefault(),e.stopPropagation()},v=function(){window.removeEventListener("pointermove",m),window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",v),f("100ms"),s(!1)};window.addEventListener("pointermove",m),window.addEventListener("pointerup",v),window.addEventListener("pointercancel",v),i.preventDefault(),i.stopPropagation()}};return e.addEventListener("pointerdown",i),r.addEventListener("pointerdown",i),function(){e.removeEventListener("pointerdown",i),r.removeEventListener("pointerdown",i)}}}),[t,n,l]),(0,i.useEffect)((function(){if(t&&u.current&&!l){var e=u.current,r=function(e){if(t&&Zn.includes(e.key)){var r=e.shiftKey?10:1,i=t.version,a=t.count-1,o=Math.max(0,i-r),l=Math.min(a,i+r),s=null;switch(e.key){case"ArrowLeft":s=o;break;case"ArrowRight":s=l;break;case"Home":s=0;break;case"End":s=a}null!==s&&(n({version:s,playing:!1}),e.preventDefault(),e.stopPropagation())}};return e.addEventListener("keydown",r),function(){e.removeEventListener("keydown",r)}}}),[t,n,l]),(0,i.useMemo)((function(){return(0,r.BX)(p.G7,{innerRef:c,css:{position:"relative",height:"16px",width:"100%",touchAction:"none","--scrubber-progress":1,"--scrubber-transition-time":"100ms",":hover, :focus-within":{filter:"brightness(1.1)"},":hover:focus-within":{filter:"brightness(1.2)"}},children:[(0,r.tZ)(xn,{ref:d}),(0,r.tZ)(vn,{ref:u})]})}),[])}!function(e){e.None="0ms",e.Normal="100ms",e.Fast="50ms"}(bn||(bn={}));var wn=n(82670),kn=n(66252);function Cn(e){var t=(0,i.useState)({data:null,loading:!0,error:null}),n=t[0],r=t[1],a=(0,v.Z)().fs,o=(0,kn.x)();return(0,i.useEffect)((function(){if(e){r({data:null,loading:!0,error:null});var t=!1;return function(e,t,n){return an.apply(this,arguments)}(a,o,e).then((function(e){t||r({data:e,loading:!1,error:null})})).catch((function(e){t||((0,wn.Z)(e,Error)||(e=new Error(e)),r({data:null,loading:!1,error:e}))})),function(){t=!0}}r({data:null,loading:!1,error:null})}),[e,a,o]),n}var jn=n(11163);function _n(){var e=(0,i.useContext)(Wt.ox).closeHistory;if(!e)throw new Error("history pane context not found");return(0,r.tZ)(p.zx,{text:"Cancel",onClick:function(){(0,ln.p)("historyExplicitlyClosed"),e()}})}var Tn=n(519),Sn=n(37424);function zn(){var e="/replEnvironmentMobile"===(0,jn.useRouter)().pathname,t=(0,o.Z)((0,Wt.bA)(),2),n=t[0],i=t[1],a=(0,Sn.H)();return n?(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,r.tZ)(Tn.Z,{id:a("diffButton"),isOn:n.comparing,onChange:function(e){var t=e.target.checked;i({comparing:t})}}),(0,r.tZ)("label",{css:[{cursor:"pointer",userSelect:"none"},p.l0.flex.column,p.l0.align.center],htmlFor:a("diffButton"),children:(0,r.tZ)(p.xv,{children:e?"Compare":"Compare Latest"})})]}):null}var Bn=n(48505),Rn=n(8941);function En(){var e=(0,o.Z)((0,Wt.bA)(),1)[0],t=0,n=0;e&&0!==e.count&&(t=e.version+1,n=e.count);var i=e?"default":"dimmer";return(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4),p.l0.justify.spaceBetween],children:[(0,r.tZ)(p.xv,{css:{minWidth:"2ch",textAlign:"right"},color:i,children:t}),(0,r.tZ)(p.xv,{css:{width:"1ch",textAlign:"center"},color:"dimmer",children:"/"}),(0,r.tZ)(p.xv,{css:{minWidth:"2ch",textAlign:"left"},color:"dimmer",children:n})]})}var Gn=n(50522);function Ln(){var e,t,n,a,l=(0,o.Z)((0,Wt.bA)(),2),s=l[0],c=l[1],d=(null!==(t=null===s||void 0===s||null===(e=s.ops)||void 0===e?void 0:e.length)&&void 0!==t?t:1)-1,u=null!==(n=null===s||void 0===s?void 0:s.version)&&void 0!==n?n:0,f=null!==(a=null===s||void 0===s?void 0:s.playing)&&void 0!==a&&a,h=!s||0===s.count,m=(0,Gn.t)(u,(function(e){return c({version:e})}),d),v=m.isPlaying,g=m.start,b=m.stop;(0,i.useEffect)((function(){v&&!f?b():!v&&f&&g()}),[f,v,g,b]);var x="Loading...";return s&&(v?x="Pause":s.version===s.count-1?x="Play file history from beginning":0===s.version?x="Play file history":s.version>0&&(x="Play file history from here")),(0,r.tZ)(p.hU,{alt:x,size:24,disabled:h,onClick:function(){c(u===d?{version:0,playing:!0}:{playing:!f})},children:v?(0,r.tZ)(Vt.Pause,{}):(0,r.tZ)(Vt.PlayFilled,{})})}function In(){return(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4),p.l0.align.center],children:[(0,r.tZ)(Ln,{}),(0,r.tZ)(Nn,{}),(0,r.tZ)(En,{}),(0,r.tZ)(An,{})]})}function Nn(){var e=(0,o.Z)((0,Wt.bA)(),2),t=e[0],n=e[1],i=!t||0===t.version;return(0,r.tZ)(p.hU,{alt:"Move backwards one version",size:24,disabled:i,onClick:function(){t&&t.version>0&&n({version:t.version-1})},children:(0,r.tZ)(Bn.Z,{})})}function An(){var e=(0,o.Z)((0,Wt.bA)(),2),t=e[0],n=e[1],i=!t||t.version===t.count-1;return(0,r.tZ)(p.hU,{alt:"Move forwards one version",size:24,disabled:i,onClick:function(){t&&t.version<t.count-1&&n({version:t.version+1})},children:(0,r.tZ)(Rn.Z,{})})}function Dn(){var e=(0,o.Z)((0,Wt.bA)(),1)[0];if(!e||0===e.count)return null;var t=e.ops[e.version].timestamp;return(0,r.tZ)(p.EK,{textColor:"dimmer",dateFormat:"switch",date:t})}function Xn(e){var t=e.filePath,n="/replEnvironmentMobile"===(0,jn.useRouter)().pathname,a=n?p.l0.borderRadius(0):p.l0.borderRadius(0,0,8,8),l=(0,o.Z)((0,Wt.bA)(),2)[1],s=(0,ln.j)(),c=Cn(t),d=c.data,u=c.loading,f=c.error;return(0,i.useEffect)((function(){if(f)s(f,"history2-index",{filePath:t});else if(d&&!u)return l({filePath:t,ops:d.ops,users:d.users}),(0,ln.p)("historyLoaded"),function(){l(null)}}),[t,d,u,f,l,s]),(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8),p.l0.p(8),p.l0.zIndex(3),p.l0.overflow("hidden"),a,p.l0.backgroundColor.backgroundDefault,{borderTop:"2px solid ".concat(p.TV.backgroundHigher),boxShadow:"rgba(2, 2, 3, 0.125) 0px -16px 32px 0px"}],children:[(0,r.BX)(p.Tg,{css:[p.l0.position.relative,p.l0.colWithGap(4),p.l0.px(12),p.l0.pt(8),p.l0.pb(8),p.l0.align.center,p.l0.borderRadius(8),p.l0.overflow("hidden")],elevated:!0,children:[(0,r.tZ)(yn,{}),(0,r.BX)(p.G7,{css:[p.l0.display.flex,p.l0.flex.row,p.l0.align.center,p.l0.justify.spaceBetween,p.l0.width("100%")],children:[(0,r.tZ)(In,{}),(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4),p.l0.align.center],children:[(0,r.tZ)(Dn,{}),u||n?null:(0,r.tZ)(p.xv,{color:"dimmer",children:"\u2022"}),(0,r.tZ)(Kt,{color:"dimmer",hideName:n,reversed:!0})]})]})]}),(0,r.BX)(p.G7,{css:[p.l0.display.flex,p.l0.flex.row],children:[(0,r.tZ)(Pn,{justify:"flex-start",children:(0,r.tZ)(zn,{})}),(0,r.BX)(Pn,{justify:"flex-end",children:[(0,r.tZ)(_n,{}),(0,r.tZ)(cn,{})]})]})]})}function Pn(e){var t=e.children,n=e.justify;return(0,r.tZ)("div",{css:{display:"flex",flexGrow:1,flexBasis:0,alignItems:"center",justifyContent:n,columnGap:p.TV.space8,minWidth:0},children:t})}var Mn=n(80159),Fn=n(2581),On=n(73138),Un=n(4010),Wn=n(68928),Hn=n(11143),Vn=n(14456),qn=n(52951),Yn=n(59637),Kn=n(82222),Qn=n(78120),$n=n(37756),Jn=n(51207),er=function(){function e(t){(0,dn.Z)(this,e),this.changes=[],this.forward=[],this.inverted=[],this.locations=[];var n="",r=!0,i=!1,a=void 0;try{for(var o,l=t[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var s=o.value,c=s.version,d=s.op,u=tr(d,n);this.forward.push(u.forward),this.inverted.push(u.inverted),this.locations.push(u.location);var f=d;0===c&&(f=d.filter((function(e){return!("string"===typeof e&&0===e.length)}))),n=Jn.dt.apply(n,f)}}catch(p){i=!0,a=p}finally{try{r||null==l.return||l.return()}finally{if(i)throw a}}}var t=e.prototype;return t.slice=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;if(e===t)throw new Error("Cannot slice to the same version");if(e>this.length||t>this.length||e<0||t<0)throw new Error("Invalid version range");var n,r=nr(e<t?this.forward.slice(e,t):this.inverted.slice(t,e).reverse()),i=e<t?e:t-1,a=null!==(n=this.locations[i])&&void 0!==n?n:null;return null!==a&&a>r.newLength&&(a=r.newLength),[r,a]},t.get=function(e){if(e>this.length||e<0)throw new Error("Invalid version");return this.changes[e]},t.documentFor=function(e){if(e>this.length||e<0)throw new Error("Invalid version");var t=(0,o.Z)(this.slice(0,e),1)[0],n=Qn.xv.of([""]);return t.apply(n).sliceString(0)},(0,qn.Z)(e,[{key:"length",get:function(){return this.forward.length}}]),e}();function tr(e,t){var n=!1,r=null,i=[],a=[],o=0,l=0,s=!0,c=!1,d=void 0;try{for(var u,f=e[Symbol.iterator]();!(s=(u=f.next()).done);s=!0){var p=u.value;switch("undefined"===typeof p?"undefined":(0,Kn.Z)(p)){case"number":var h=(0,$n.uniToStrPos)(t,o+p)-(0,$n.uniToStrPos)(t,o);o+=h,l+=h;break;case"string":if(0===p.length)break;i.push({from:o,insert:p}),a.unshift({from:l,to:l+p.length}),l+=p.length,n||(r=o,n=!0);break;case"object":var m=t.slice((0,$n.uniToStrPos)(t,o),(0,$n.uniToStrPos)(t,o+p.d));i.push({from:o,to:o+m.length}),a.unshift({from:l,insert:m}),o+=m.length,n||null!==r||(r=l)}}}catch(g){c=!0,d=g}finally{try{s||null==f.return||f.return()}finally{if(c)throw d}}var v=Qn.as.of(i,t.length,"\n");return{forward:v,inverted:Qn.as.of(a,v.newLength,"\n"),location:r}}function nr(e){if(0===e.length)return Qn.as.empty(0);if(1===e.length)return e[0];var t=(0,Yn.Z)(e),n=t[0],r=t.slice(1),i=n,a=!0,o=!1,l=void 0;try{for(var s,c=r[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var d=s.value;i=i.compose(d)}}catch(u){o=!0,l=u}finally{try{a||null==c.return||c.return()}finally{if(o)throw l}}return i}var rr=n(59119),ir=n(28668),ar=n(25171),or=n(27585),lr=n(99094),sr=(0,or.B)();function cr(e){if((0,wn.Z)(e,Qn.YW)){var t=e.state.field(sr.state,!1);return{compareTo:t,changed:e.startState.field(sr.state,!1)!==t}}return{compareTo:e.field(sr.state,!1),changed:!1}}function dr(e,t){e.state.field(sr.state,!1)!==t&&e.dispatch({effects:sr.effect.of(t)})}var ur=Qn.QQ.define({create:function(){return null},update:function(e,t){var n=cr(t),r=n.compareTo,i=n.changed;if(!r)return null;if(!t.docChanged&&!i)return e;var a=t.state.doc.toString();return new lr.PO(a,r)}}),fr=Vn.p.line({class:"cm-diff-deleted"}),pr=function(e){(0,ir.Z)(n,e);var t=(0,ar.Z)(n);function n(e){var r;return(0,dn.Z)(this,n),(r=t.call(this)).insertion=e,r}var r=n.prototype;return r.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-inserted cm-line",this.updateDOM(e),e},r.eq=function(e){return this.insertion===e.insertion},r.updateDOM=function(e){return this.insertion.length?e.textContent=this.insertion:e.innerHTML="&nbsp;",!0},n}(Vn.l9),hr=Qn.QQ.define({create:function(){return Vn.p.none},update:function(e,t){var n=t.state.field(ur,!1);if(!n)return Vn.p.none;var r=cr(t).changed;if(!t.docChanged&&!r)return e.map(t.changes);var i=[],a=function(e,t){i.push({from:e,to:e,value:t})},o=n.startInsertions();if(o){var l=!0,s=!1,c=void 0;try{for(var d,u=o[Symbol.iterator]();!(l=(d=u.next()).done);l=!0){var f=d.value;a(0,Vn.p.widget({widget:new pr(f.content),side:-1,block:!0}))}}catch(j){s=!0,c=j}finally{try{l||null==u.return||u.return()}finally{if(s)throw c}}}var p=!0,h=!1,m=void 0;try{for(var v,g=n.lines()[Symbol.iterator]();!(p=(v=g.next()).done);p=!0){var b=v.value;if(b.isDeleted&&a(b.from,fr),b.insertions){var x=!0,Z=!1,y=void 0;try{for(var w,k=b.insertions[Symbol.iterator]();!(x=(w=k.next()).done);x=!0){var C=w.value;a(b.to,Vn.p.widget({widget:new pr(C.content),side:1,block:!0}))}}catch(j){Z=!0,y=j}finally{try{x||null==k.return||k.return()}finally{if(Z)throw y}}}}}catch(j){h=!0,m=j}finally{try{p||null==g.return||g.return()}finally{if(h)throw m}}return Vn.p.set(i,!0)},provide:function(e){return Vn.tk.decorations.from(e)}}),mr=function(e){(0,ir.Z)(n,e);var t=(0,ar.Z)(n);function n(e){var r;return(0,dn.Z)(this,n),(r=t.call(this)).line=e,r}var r=n.prototype;return r.eq=function(e){return this.line===e.line},r.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-gutter-element-fallback",e.innerText=this.line.toString(),e},n}(Vn.SJ),vr=function(e){(0,ir.Z)(n,e);var t=(0,ar.Z)(n);function n(e,r){var i;return(0,dn.Z)(this,n),(i=t.call(this)).elementClass="cm-diff-gutter-block",i.lines=e,r&&(i.preceding=r),i}var r=n.prototype;return r.eq=function(e){var t,n,r,i;if((null===(t=this.lines)||void 0===t?void 0:t.length)!==(null===e||void 0===e||null===(n=e.lines)||void 0===n?void 0:n.length))return!1;if((null===(r=this.preceding)||void 0===r?void 0:r.length)!==(null===e||void 0===e||null===(i=e.preceding)||void 0===i?void 0:i.length))return!1;if(this.preceding&&e.preceding)for(var a=0;a<this.preceding.length;a++){var o=this.preceding[a],l=e.preceding[a];if(o.height!==l.height||o.left!==l.left||o.right!==l.right)return!1}if(this.lines&&e.lines)for(var s=0;s<this.lines.length;s++){var c=this.lines[s],d=e.lines[s];if(c.height!==d.height||c.left!==d.left||c.right!==d.right)return!1}return!0},r.toDOM=function(){var e,t=this,n=document.createElement("div");if(this.preceding){var r=this.preceding.slice().reverse(),i=0,a=!0,o=!1,l=void 0;try{for(var s,c=r[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var d=s.value;i+=d.height;var u=this.piece(d);u.style.position="absolute",u.style.top="-".concat(i,"px"),n.prepend(u)}}catch(p){o=!0,l=p}finally{try{a||null==c.return||c.return()}finally{if(o)throw l}}}var f=this.lines.map((function(e){return t.piece(e)}));return(e=n).append.apply(e,(0,re.Z)(f)),n},r.piece=function(e){var t=e.height,n=e.left,r=e.right,i=document.createElement("span");i.className="cm-diff-gutter-part",null!==n&&(i.innerText=n.toString());var a=document.createElement("span");a.className="cm-diff-gutter-part",null!==r&&(a.innerText=r.toString());var o=document.createElement("div");return o.className="cm-diff-gutter-element",o.style.height="".concat(t,"px"),o.append(i,a),null!==n&&null!==r||(null===r&&o.classList.add("cm-diff-gutter-deleted"),null===n&&o.classList.add("cm-diff-gutter-inserted")),o},n}(Vn.SJ),gr=(0,Vn.v5)({class:"cm-lineNumbers cm-diff-gutter",markers:function(e){var t=e.viewportLineBlocks,n=[],r=cr(e.state).compareTo,i=e.state.field(ur,!1),a=function(e,t){n.push({from:e,to:e,value:t})};if(!r||!i){var o=!0,l=!1,s=void 0;try{for(var c,d=t[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var u=c.value,f=e.state.doc.lineAt(u.from).number;if(u.type===Vn.kH.Text)a(u.from,new mr(f));else if(Array.isArray(u.type)){var p=!0,h=!1,m=void 0;try{for(var v,g=u.type[Symbol.iterator]();!(p=(v=g.next()).done);p=!0){var b=v.value;if(b.type===Vn.kH.Text){a(b.from,new mr(f));break}}}catch(ie){h=!0,m=ie}finally{try{p||null==g.return||g.return()}finally{if(h)throw m}}}}}catch(ie){l=!0,s=ie}finally{try{o||null==d.return||d.return()}finally{if(l)throw s}}return Qn.Xs.of(n,!0)}var x=!0,Z=!1,y=void 0;try{for(var w,k=t[Symbol.iterator]();!(x=(w=k.next()).done);x=!0){var C=w.value,j=[],_=e.state.doc.lineAt(C.from).number,T=i.line(_);if(T){var S,z=e.defaultLineHeight,B=T.offset,R=T.isDeleted,E=T.insertions,G=1===_?i.startInsertions():null,L=G?G.length:0,I=G?[]:null;if(Array.isArray(C.type)&&C.type.length>=L+(null!==(S=null===E||void 0===E?void 0:E.length)&&void 0!==S?S:0)+1){for(var N=0;N<C.type.length;N++){var A=C.type[N];if((null===A||void 0===A?void 0:A.type)===Vn.kH.Text){if(G&&I)for(var D=0;D<G.length;D++){var X,P=G[D],M=C.type[N-D-1];I.push({height:null!==(X=null===M||void 0===M?void 0:M.height)&&void 0!==X?X:z,left:null,right:P.number})}if(j.push({height:A.height,left:_,right:R?null:_+B}),E)for(var F=0;F<E.length;F++){var O,U=E[F],W=C.type[N+F+1];j.push({height:null!==(O=null===W||void 0===W?void 0:W.height)&&void 0!==O?O:z,left:null,right:U.number})}break}}a(C.from,new vr(j,I))}else{if(G&&I){var H=!0,V=!1,q=void 0;try{for(var Y,K=G[Symbol.iterator]();!(H=(Y=K.next()).done);H=!0){var Q=Y.value;I.push({height:z,left:null,right:Q.number})}}catch(ie){V=!0,q=ie}finally{try{H||null==K.return||K.return()}finally{if(V)throw q}}}if(j.push({height:C.height,left:_,right:R?null:_+B}),E){var $=!0,J=!1,ee=void 0;try{for(var te,ne=E[Symbol.iterator]();!($=(te=ne.next()).done);$=!0){var re=te.value;j.push({height:z,left:null,right:re.number})}}catch(ie){J=!0,ee=ie}finally{try{$||null==ne.return||ne.return()}finally{if(J)throw ee}}}a(C.from,new vr(j,I))}}}}catch(ie){Z=!0,y=ie}finally{try{x||null==k.return||k.return()}finally{if(Z)throw y}}return Qn.Xs.of(n,!0)},lineMarkerChange:function(e){if(e.docChanged)return!0;var t=!0,n=!1,r=void 0;try{for(var i,a=e.transactions[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){if(cr(i.value).changed)return!0}}catch(o){n=!0,r=o}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return!1},initialSpacer:function(e){return new mr(e.state.doc.lines)},updateSpacer:function(e,t){var n=t.state.doc.lines;return cr(t.state).compareTo?new vr([{height:0,left:n,right:n}]):new mr(n)}}),br="#0053A644",xr="#c93c3733",Zr=[Vn.tk.baseTheme({".cm-diff-inserted":{backgroundColor:br},".cm-diff-deleted":{backgroundColor:xr},".cm-diff-gutter .cm-diff-gutter-block":{position:"relative",padding:"0"},".cm-diff-gutter-element":{display:"flex",width:"100%",alignItems:"center",columnGap:"8px",padding:"0 6px",borderLeft:"4px solid transparent"},".cm-diff-gutter-part":{display:"inline-block",height:"100%",width:"50%",textAlign:"center"},".cm-diff-gutter-inserted":{backgroundColor:br,borderLeftColor:"#0053A6"},".cm-diff-gutter-deleted":{backgroundColor:xr,borderLeftColor:"#c93c37"},".cm-diff-gutter + .cm-foldGutter":{width:"0",transform:"translateX(-12px)",overflow:"visible"},".cm-diff-gutter .cm-diff-gutter-element":{paddingRight:"16px"},".cm-diff-gutter .cm-diff-gutter-element-fallback":{paddingRight:"12px"}}),sr.state,ur,hr,gr,(0,rr.mi)({openText:"\u25bc",closedText:"\u25b6\ufe0e"})];function yr(e,t){var n=(0,i.useMemo)((function(){return(null===t||void 0===t?void 0:t.ops)?new er(t.ops):null}),[null===t||void 0===t?void 0:t.ops]),r=(0,i.useMemo)((function(){return n?n.documentFor(n.length):null}),[n]),a=(0,i.useRef)({current:-1,next:0,pending:!1});(0,i.useEffect)((function(){if(e)return function(){a.current.pending=!1,a.current={current:-1,next:0,pending:!1}}}),[e]),(0,i.useEffect)((function(){if(e&&t&&n){t.comparing?dr(e,r):dr(e,null);var i=a.current;i.next=t.version,i.pending||i.current===i.next||(i.pending=!0,requestAnimationFrame((function(){!1!==i.pending&&(i.pending=!1,e&&n&&i.current!==i.next&&(!function(e,t,n,r){var i=(0,o.Z)(t.slice(n+1,r+1),2),a=i[0],l=i[1];if(a.length!==e.state.doc.length){var s=(0,o.Z)(t.slice(0,r+1),1)[0];if(s.length!==e.state.doc.length)throw new Error("Unresolvable mismatch between changes and document");return e.dispatch({changes:{from:0,to:e.state.doc.length}}),void e.dispatch({changes:s})}e.dispatch({changes:a,effects:l?Vn.tk.scrollIntoView(l,{yMargin:10}):void 0})}(e,n,i.current,i.next),i.current=i.next))})))}}),[e,t,n,r])}var wr,kr=n(33227);!function(e){e[e.Insertion=0]="Insertion",e[e.Deletion=1]="Deletion"}(wr||(wr={}));var Cr=Symbol.iterator,jr=function(){function e(t){(0,dn.Z)(this,e),this.map=new Map,this.duration=t}var t=e.prototype;return t.set=function(e,t,n,r){var i=this.map.get(e);i||(i=new Map,this.map.set(e,i)),i.set(t,{from:e,to:t,time:n,type:r})},t.get=function(e,t){var n=this.map.get(e);if(n)return n.get(t)},t.update=function(t){var n=Date.now(),r=new e(this.duration),i=!0,a=!1,o=void 0;try{for(var l,s=this[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;if(!(n-c.time>this.duration)){var d=t.changes.mapPos(c.from,-1,Qn.gc.TrackDel),u=t.changes.mapPos(c.to,-1,Qn.gc.TrackDel);null!==d&&null!==u&&r.set(d,u,c.time,c.type)}}}catch(f){a=!0,o=f}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}return t.changes.iterChangedRanges((function(e,t,i,a){var o=i!==a?wr.Insertion:wr.Deletion;r.set(i,a,n,o)}),!0),r},t[Cr]=function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,a=this.map.values()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value,l=!0,s=!1,c=void 0;try{for(var d,u=o.values()[Symbol.iterator]();!(l=(d=u.next()).done);l=!0){var f=d.value;e.push(f)}}catch(p){s=!0,c=p}finally{try{l||null==u.return||u.return()}finally{if(s)throw c}}}}catch(p){n=!0,r=p}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return e[Symbol.iterator]()},e}(),_r=1e3,Tr="cm-flash-insertion",Sr="cm-flash-deletion",zr="cm-flash-element",Br=Vn.tk.theme((0,a.Z)({},".".concat(Tr,", .").concat(Sr),{display:"inline-block"}));function Rr(e){return Vn.p.mark({class:Sr,tagName:zr,attributes:{"data-time":e.toString()}})}var Er=function(e){(0,ir.Z)(n,e);var t=(0,ar.Z)(n);function n(){return(0,dn.Z)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.isNested=function(){for(var e=this.parentElement;e&&!e.classList.contains("cm-line");){if((0,wn.Z)(e,n)&&e.type===this.type)return!0;e=e.parentElement}return!1},r.stop=function(){var e,t;null===(e=this.animation)||void 0===e||null===(t=e.cancel)||void 0===t||t.call(e)},r.play=function(){var e=this.isPlaying;if(this.stop(),!this.isNested()){var t=Date.now()-parseInt(this.getAttribute("data-time")||"0",10);if(!(t>_r)){var n=this.type===wr.Insertion?"rgba(100, 255, 0, 0.5)":"rgba(255, 0, 0, 0.5)",r={backgroundColor:e?[n,n,"transparent"]:["transparent",n,"transparent"],offset:[0,.05,1]},i={id:"cm-flash-anim",duration:_r,easing:"ease-in-out",delay:-t};this.animation=this.animate(r,i)}}},r.connectedCallback=function(){this.play()},r.attributeChangedCallback=function(e,t,n){"data-time"===e&&n&&this.play()},(0,qn.Z)(n,[{key:"type",get:function(){return this.classList.contains(Tr)?wr.Insertion:wr.Deletion}},{key:"isPlaying",get:function(){var e;return"running"===(null===(e=this.animation)||void 0===e?void 0:e.playState)}}],[{key:"observedAttributes",get:function(){return["data-time"]}}]),n}((0,kr.Z)(HTMLElement));customElements.get(zr)||customElements.define(zr,Er);var Gr=function(){function e(t){(0,dn.Z)(this,e),this.view=t,this.prevFlashes=new jr(_r),this.decorations=Vn.p.set([]),this.hasRenderedOnce=!1}return e.prototype.update=function(e){if(this.hasRenderedOnce){var t,n=this.prevFlashes.update(e),r=[],i=!0,a=!1,o=void 0;try{for(var l,s=n[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;switch(c.type){case wr.Insertion:r.push({from:c.from,to:c.to,value:(t=c.time,Vn.p.mark({class:Tr,tagName:zr,attributes:{"data-time":t.toString()}}))});break;case wr.Deletion:var d=this.view.state.doc.lineAt(c.from);r.push({from:d.from,to:c.to,value:Rr(c.time)})}}}catch(u){a=!0,o=u}finally{try{i||null==s.return||s.return()}finally{if(a)throw o}}this.prevFlashes=n,this.decorations=Vn.p.set(r,!0)}else e.docChanged&&(this.hasRenderedOnce=!0)},e}(),Lr=Vn.lg.fromClass(Gr,{decorations:function(e){return e.decorations}}),Ir=[Qn.Wl.lowest([Br,Lr]),Qn.yy.lineSeparator.of("\n"),Zr];function Nr(e){var t=e.filePath,n=(0,o.Z)((0,Wt.bA)(),1)[0],i=(0,ln.j)(),a=(0,Mn.Z)({filePath:t,noHistory:!0,readOnly:!0,hideGutter:!0,extensions:Ir,onException:function(e){i(e,"viewer-codemirror")}}),l=a.view,s=a.ref;return(0,Fn.VD)(l),(0,Un.ZP)({view:l}),(0,On.Y)({view:l}),yr(l,n),(0,r.tZ)("div",{css:Hn.ev,children:(0,r.BX)("div",{css:Hn.ac,children:[!n&&(0,r.tZ)("div",{css:Hn.ov,children:(0,r.tZ)(Wn.Z,{})}),n&&0!==n.count?(0,r.tZ)("div",{css:Hn.ac,children:(0,r.tZ)("div",{ref:s,css:Hn.Mp})}):(0,r.tZ)(Ar,{})]})})}function Ar(){return(0,r.tZ)("div",{css:[Hn.ac,{display:"flex",alignItems:"center",justifyContent:"center"}],children:(0,r.tZ)("span",{children:"This file has no history."})})}var Dr={Content:function(e){var t=e.pane,n=e.options;return(0,r.tZ)(Xr,(0,Ft.Z)((0,ae.Z)({},t.data),{replacePane:n.replacePane}))},Icon:function(e){var t=e.size;return(0,r.tZ)(Ot.Z,{size:t})},getTitle:function(e){return e.data.path?"History - ".concat(e.data.path):"History - no file open"}};function Xr(e){var t=e.path,n=e.replacePane,i=(0,Wt.EI)(t,n);return t?(0,r.tZ)(Ut.zt,{scope:Fn.d8,children:(0,r.tZ)(Wt.ox.Provider,{value:i,children:(0,r.BX)("div",{css:{position:"relative",display:"flex",flexDirection:"column",overflowY:"hidden",height:"100%",width:"100%"},children:[(0,r.tZ)(Nr,{filePath:t}),(0,r.tZ)(Xn,{filePath:t})]})})}):null}var Pr=n(34837),Mr=n.n(Pr),Fr=n(1879),Or=n(7835),Ur=n(28497),Wr=n(76818);function Hr(e){var t=e.activeFile,n=i.useRef(null),a=i.useRef(null),l=(0,v.Z)().fs,s=(0,dt.Z)(),c=s.showError,u=s.showConfirm,p=(0,f.Z)(),h=(0,o.Z)(i.useState(!1),2),m=h[0],g=h[1],x=(0,b.Z)((function(){var e=n.current;if(!e)return null;e.width=e.offsetWidth,e.height=e.offsetHeight;var t=e.getContext("2d");t&&(t.imageSmoothingEnabled=!1)}),{type:"debounce",wait:100});return i.useEffect((function(){var e=function(){if(!s)throw new Error("Tried to export png but peditCtxRef was null");var e=window.prompt("Export as:");if(e){var t="".concat(e,".png"),n=s.curFrame().toPNG();l.writeFile(t,Ve.Z.from(n)).then((function(){u("Successfully exported to ".concat(t))}))}},r=!1;if(t&&n.current){var i=n.current,o=t,s=null,d=o.endsWith(".kbmsprite");return function(){f.apply(this,arguments)}(),function(){r=!0,s&&(s.cleanUp(),s=null),a.current&&(a.current=null)}}function f(){return(f=(0,Ne.Z)(De().mark((function t(){var n,u,f;return De().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.readFile(o);case 2:if(n=t.sent,!r){t.next=5;break}return t.abrupt("return");case 5:if(!n.error){t.next=8;break}return c("failed to read ".concat(o)),t.abrupt("return");case 8:u=n.content.toString(),f=u&&JSON.parse(u),i.width=i.offsetWidth,i.height=i.offsetHeight,(s=Mr()(f?f.fromKaboom?{canvas:i,width:f.width,height:f.height}:{canvas:i,data:d?(0,Ur.C)(f):f}:{canvas:i,width:64,height:64})).on("change",p),s.on("save",p),s.on("export",e),a.current=s.save,i.focus();case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(){return h.apply(this,arguments)}function h(){return(h=(0,Ne.Z)(De().mark((function e(){var t;return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=2;break}return e.abrupt("return");case 2:if(s){e.next=4;break}throw new Error("Expected peditCtx");case 4:if(t=s.save(),!d){e.next=9;break}return e.next=8,(0,Ur.u)(t);case 8:t=e.sent;case 9:return e.next=11,l.writeFile(o,Ve.Z.from(JSON.stringify(t)));case 11:e.sent.error&&r&&c("Failed to save ".concat(o,", please try again"));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),[l,t,n]),(0,r.BX)("div",{className:d().dynamic([["c86cb3d51fed2583",[p?"0 3px 0 3px ".concat(p):"0"]]])+" pedit",children:[(0,r.tZ)(d(),{id:"c86cb3d51fed2583",dynamic:[p?"0 3px 0 3px ".concat(p):"0"],children:".pedit.__jsx-style-dynamic-selector{width:100%;height:100%;position:relative;z-index:3;-webkit-box-shadow:".concat(p?"0 3px 0 3px ".concat(p):"0",";-moz-box-shadow:").concat(p?"0 3px 0 3px ".concat(p):"0",";box-shadow:").concat(p?"0 3px 0 3px ".concat(p):"0","}canvas.__jsx-style-dynamic-selector{width:100%;height:100%;outline:none;position:absolute;top:0;left:0}.upgrade-button.__jsx-style-dynamic-selector{position:absolute;bottom:0;left:0;z-index:100;padding:var(--space-4);border:solid 2px var(--foreground-default);background:var(--background-default);font-weight:700;outline:none}.upgrade-button.__jsx-style-dynamic-selector:hover{cursor:pointer;background:var(--background-higher)}.upgrade-modal.__jsx-style-dynamic-selector{background:var(--background-default);padding:var(--space-32)}")}),(0,r.tZ)("canvas",{ref:function(e){n.current=e,x(e)},tabIndex:0,className:d().dynamic([["c86cb3d51fed2583",[p?"0 3px 0 3px ".concat(p):"0"]]])},t),t&&t.endsWith(".kbmsprite")&&(0,r.tZ)("button",{onClick:function(){return g(!0)},className:d().dynamic([["c86cb3d51fed2583",[p?"0 3px 0 3px ".concat(p):"0"]]])+" upgrade-button",children:"Upgrade"}),(0,r.tZ)(Fr.Z,{isOpen:m,onRequestClose:function(){return g(!1)},children:(0,r.tZ)(Or.Z,{prompt:"Upgrade to '.pedit'?",desc:"You\u2019re using '.kbmsprite' which is recently deprecated. Do you want to upgrade to the new '.pedit' format? It\u2019ll create a new '.pedit' file with the same content. If you\u2019re using it with Kaboom, the new '.pedit' format won't work with kaboom before v0.4.0.",onCancel:function(){return g(!1)},confirmText:"Upgrade",icon:(0,r.tZ)(Wr.Z,{}),onConfirm:function(){if(a.current)if(t){var e=t.replace(/\.kbmsprite$/,".pedit"),n=Ve.Z.from(JSON.stringify(a.current()));l.writeFile(e,n).then((function(t){t.error?c("Failed to write to ".concat(e)):u("Successfully written to ".concat(e))})),g(!1)}else c("failed to get active file");else c("Please try again after the file loads")}})})]})}var Vr={Content:function(e){var t=e.pane;return(0,r.tZ)(Hr,{activeFile:t.data.path})},Icon:function(e){var t=e.size;return(0,r.tZ)(Et.Z,{size:t})},getTitle:function(e){return e.data.path}},qr=n(88075),Yr=n(42325),Kr=n(92002),Qr=n(64576),$r=n(33773),Jr=n(54168),ei=Qn.q6.define();function ti(e){var t=e.editorRef,n=e.onChange,a=e.placeholder,o=e.skeleton,l=e.language,s=e.skeletonClosingBracket,c=e.indentSize,u=void 0===c?2:c,f=(0,Mn.Z)({language:l,indentIsSpaces:!0,indentSize:2,fontSize:14}),p=f.view,h=f.ref,m=i.useRef(o?"".concat(o,"\n"):""),v=s?"\n".concat(s):"",g=" ".repeat(u);return i.useEffect((function(){if(p&&p.state.doc.length){var e=m.current;m.current=o?"".concat(o,"\n"):"",p.dispatch({changes:{from:0,to:e.length-1,insert:o},annotations:[Qn.YW.addToHistory.of(!1),ei.of(!0)]})}}),[p,o]),i.useEffect((function(){if(p){var e=Qn.yy.changeFilter.of((function(e){return!!e.annotation(ei)||[-1,m.current.length,e.startState.doc.length-v.length,e.startState.doc.length+1]})),r=Vn.tk.updateListener.of((function(e){var t=e.state.doc.slice(m.current.length,e.state.doc.toString().length-v.length).toString();if(t!=="".concat(g).concat(a,"\n").concat(g)?n(t):n(""),e.docChanged&&e.state.doc.length===m.current.length+v.length){var r="\n"+g;p.dispatch({changes:{from:m.current.length-1,insert:"\n"+g},selection:{anchor:m.current.length+r.length-1},annotations:[ei.of(!0)]})}})),i="".concat(m.current).concat(g).concat(a,"\n").concat(v);p.dispatch({changes:{from:0,to:p.state.doc.length,insert:i},effects:Qn.Py.appendConfig.of([e,r]),selection:{anchor:i.length},annotations:Qn.YW.addToHistory.of(!1)}),t({setValue:function(e){if(e){var t=p.state.doc.toString().length;p.dispatch({changes:{from:m.current.length,to:t-v.length,insert:e},annotations:Qn.YW.addToHistory.of(!1)})}},focus:function(){return p.focus()}})}}),[n,l,p,v,t,a,g]),(0,r.BX)("div",{className:"jsx-c0a72647b9c20ef editor",children:[(0,r.tZ)("div",{ref:h,className:"jsx-c0a72647b9c20ef"}),(0,r.tZ)(d(),{id:"c0a72647b9c20ef",children:".editor.jsx-c0a72647b9c20ef{overflow:auto;position:absolute;width:100%;height:100%}.loader.jsx-c0a72647b9c20ef{height:100%;width:100%;z-index:5}"})]})}function ni(e){var t,n,a,l,s=e.isOpen,c=e.meta,d=e.language,u=e.hasMetadata,f=e.onClose,h=(0,ve.Z)(),m=(0,dt.Z)().showConfirm,v=(0,o.Z)(i.useState(null),2),g=v[0],b=v[1],x=(0,o.Z)(i.useState(!0),2),Z=x[0],y=x[1],w=(0,o.Z)(i.useState((null===c||void 0===c?void 0:c.initialization)||""),2),k=w[0],C=w[1],j=(0,o.Z)(i.useState((null===c||void 0===c?void 0:c.imports)||""),2),_=j[0],T=j[1],S=(0,o.Z)(i.useState((null===c||void 0===c?void 0:c.setup)||""),2),z=S[0],B=S[1],R=(0,o.Z)(i.useState((null===c||void 0===c?void 0:c.tearDown)||""),2),E=R[0],G=R[1],L=(0,o.Z)((0,Qr.rU)({onError:function(e){return b(e.message)},update:function(e,t){var n,r=null===(n=t.data)||void 0===n?void 0:n.createReplUnitTestMeta;r&&("UserError"===r.__typename?b(r.message):"ReplUnitTestMeta"===r.__typename&&(e.modify({id:e.identify({__typename:"Repl",id:h}),fields:{unitTests:function(t){var n=e.writeFragment({data:r,fragment:Qr.aA});return t?(0,Ft.Z)((0,ae.Z)({},t),{meta:(0,ae.Z)({},n)}):{__typename:"ReplUnitTestsWithMeta",meta:n,tests:[]}}}}),m("Setup saved!"),f()))}}),2),I=L[0],N=L[1],A=(0,o.Z)((0,Qr.AF)({onError:function(e){return b(e.message)},onCompleted:function(e){var t=e.updateReplUnitTestMeta;t&&("UserError"===t.__typename?b(t.message):"ReplUnitTestMeta"===t.__typename&&(m("Imports updated!"),f()))}}),2),D=A[0],X=A[1],P=(0,Jr.x)(d),M=_!==(null===c||void 0===c?void 0:c.imports)||k!==(null===c||void 0===c?void 0:c.initialization)||z!==(null===c||void 0===c?void 0:c.setup)||E!==(null===c||void 0===c?void 0:c.tearDown),F=N.loading||X.loading;return(0,r.tZ)(p.u_,{isOpen:s,onRequestClose:f,maxWidth:872,children:(0,r.BX)(p.G7,{css:[p.l0.colWithGap(24)],children:[(0,r.tZ)(p.h4,{level:1,variant:"headerDefault",children:"Setup"}),(0,r.tZ)(ri,{unitTestsLib:P,onChange:T,language:d,initialValue:null!==(t=null===c||void 0===c?void 0:c.imports)&&void 0!==t?t:""}),(0,r.tZ)(p.G7,{onClick:function(){return y(!Z)},css:{cursor:"pointer"},children:(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,r.tZ)(p.h4,{level:2,variant:"headerDefault",children:"Advanced"}),(0,r.tZ)($r.Z,{color:"var(--foreground-default)",size:20,rotate:Z?270:0})]})}),Z?null:(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8)],children:[(0,r.tZ)(ii,{unitTestsLib:P,onChange:C,language:d,initialValue:null!==(n=null===c||void 0===c?void 0:c.initialization)&&void 0!==n?n:""}),(0,r.tZ)(ai,{unitTestsLib:P,onChange:B,language:d,initialValue:null!==(a=null===c||void 0===c?void 0:c.setup)&&void 0!==a?a:""}),(0,r.tZ)(oi,{unitTestsLib:P,onChange:G,language:d,initialValue:null!==(l=null===c||void 0===c?void 0:c.tearDown)&&void 0!==l?l:""})]}),(0,r.BX)(p.G7,{css:[p.l0.flex.row,p.l0.justify.spaceBetween],children:[(0,r.tZ)(p.xv,{css:[p.l0.color.accentNegativeStronger],multiline:!0,children:g}),(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(12)],children:[(0,r.tZ)(p.zx,{disabled:F,onClick:f,text:"Cancel"}),(0,r.tZ)(p.zx,{colorway:"primary",disabled:!M||F,onClick:function(){(0,ut.j)(ut.U3.REPL_UNIT_TEST_USED,{action:"modifiedSetup"}),u?D({variables:{input:{initialization:k,imports:_,setup:z,tearDown:E,replId:h}}}):I({variables:{input:{initialization:k,imports:_,setup:z,tearDown:E,replId:h}}})},iconLeft:(0,r.tZ)(qr.Z,{}),text:"".concat(F?"Saving...":"Save")})]})]})]})})}function ri(e){var t=e.unitTestsLib,n=e.onChange,a=e.language,l=e.initialValue,s=(0,o.Z)(i.useState(null),2),c=s[0],d=s[1];i.useEffect((function(){c&&(c.setValue(l),c.focus())}),[c,l]);var u=t.defaultImports().trim();return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8)],children:[(0,r.BX)(p.G7,{css:[p.l0.flex.row,p.l0.justify.spaceBetween,p.l0.align.center],children:[(0,r.tZ)(p.h4,{level:2,variant:"subheadDefault",children:"Imports"}),(0,r.tZ)(p.ZP,{iconLeft:(0,r.tZ)(U.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",outlined:!0})]}),(0,r.tZ)(p.G7,{css:[p.l0.backgroundColor.backgroundDefault,p.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,r.tZ)(p.G7,{css:[p.l0.borderRadius(8),p.l0.height(200),p.l0.position.relative],children:(0,r.tZ)(ti,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add imports here"),editorRef:d,language:a,skeleton:u,skeletonClosingBracket:"",indentSize:0})})})]})}function ii(e){var t=e.unitTestsLib,n=e.onChange,a=e.language,l=e.initialValue,s=(0,o.Z)(i.useState(null),2),c=s[0],d=s[1];i.useEffect((function(){c&&c.setValue(l)}),[c,l]);var u=t.classConstructorName();return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8)],children:[(0,r.BX)(p.G7,{css:[p.l0.flex.row,p.l0.justify.spaceBetween,p.l0.align.center],children:[(0,r.tZ)(p.h4,{level:2,variant:"subheadDefault",children:"Initialization"}),(0,r.tZ)(p.ZP,{iconLeft:(0,r.tZ)(U.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",outlined:!0})]}),u&&(0,r.BX)(p.xv,{multiline:!0,children:["Hint: constructor name is ",(0,r.tZ)("code",{children:u}),"."]}),(0,r.tZ)(p.G7,{css:[p.l0.backgroundColor.backgroundDefault,p.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,r.tZ)(p.G7,{css:[p.l0.borderRadius(8),p.l0.height(200),p.l0.position.relative],children:(0,r.tZ)(ti,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add initialization code here"),editorRef:d,language:a,skeleton:"",skeletonClosingBracket:"",indentSize:0})})})]})}function ai(e){var t=e.unitTestsLib,n=e.onChange,a=e.language,l=e.initialValue,s=(0,o.Z)(i.useState(null),2),c=s[0],d=s[1];i.useEffect((function(){c&&c.setValue(l)}),[c,l]);var u=t.setupIntro().trim();return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8)],children:[(0,r.BX)(p.G7,{css:[p.l0.flex.row,p.l0.justify.spaceBetween,p.l0.align.center],children:[(0,r.tZ)(p.h4,{level:2,variant:"subheadDefault",children:"Setup"}),(0,r.tZ)(p.ZP,{iconLeft:(0,r.tZ)(U.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",outlined:!0})]}),(0,r.tZ)(p.G7,{css:[p.l0.backgroundColor.backgroundDefault,p.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,r.tZ)(p.G7,{css:[p.l0.borderRadius(8),p.l0.height(200),p.l0.position.relative],children:(0,r.tZ)(ti,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add setup code here"),editorRef:d,language:a,skeleton:u,skeletonClosingBracket:t.hasClosingBrackets()?t.getClosingBrackets():""})})})]})}function oi(e){var t=e.unitTestsLib,n=e.onChange,a=e.language,l=e.initialValue,s=(0,o.Z)(i.useState(null),2),c=s[0],d=s[1];i.useEffect((function(){c&&c.setValue(l)}),[c,l]);var u=t.tearDownIntro().trim();return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8)],children:[(0,r.BX)(p.G7,{css:[p.l0.flex.row,p.l0.justify.spaceBetween,p.l0.align.center],children:[(0,r.tZ)(p.h4,{level:2,variant:"subheadDefault",children:"Teardown"}),(0,r.tZ)(p.ZP,{iconLeft:(0,r.tZ)(U.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",outlined:!0})]}),(0,r.tZ)(p.G7,{css:[p.l0.backgroundColor.backgroundDefault,p.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,r.tZ)(p.G7,{css:[p.l0.borderRadius(8),p.l0.height(200),p.l0.position.relative],children:(0,r.tZ)(ti,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add teardown code here"),editorRef:d,language:a,skeleton:u,skeletonClosingBracket:t.hasClosingBrackets()?t.getClosingBrackets():""})})})]})}var li=function(e){var t=e.language,n=e.meta,a=(0,o.Z)(i.useState(!1),2),l=a[0],s=a[1];return(0,r.BX)(r.HY,{children:[(0,r.tZ)(p.zx,{iconLeft:(0,r.tZ)(Q.Z,{}),onClick:function(){return s(!0)},text:"Setup"}),(0,r.tZ)(ni,{language:t,isOpen:l,onClose:function(){return s(!1)},hasMetadata:Boolean(null===n||void 0===n?void 0:n.id),meta:n})]})},si=n(90317),ci=n(77836),di=n(67629),ui=n(43530),fi=n(30992),pi=n(92876),hi=n(51995),mi=n(83160),vi="\x1b[0;31m",gi="\x1b[0m",bi=["\u28fe","\u28fd","\u28fb","\u28bf","\u287f","\u28df","\u28ef","\u28f7","\u2801","\u2802","\u2804","\u2840","\u2880","\u2820","\u2810","\u2808"];function xi(e){var t=e.name,n=e.failureMessage,r=e.stack;return"\u274c\t".concat(vi).concat(t).concat(gi,"\r").concat(n?"\nMessage: ".concat(n,"\r"):"","\nStack Trace:\r\n").concat(r.replace(/\n/g,"\r\n"),"\n\r\n\r\n")}var Zi=function(e){var t=e.language,n=e.unitTests,a=e.onResult,l=e.trackingContext,s=function(e){m.writeToTerminal(e)},c=function(){m.clearTerminal(),s("\r\n")},d=(0,o.Z)(i.useState(!1),2),u=d[0],f=d[1],h=(0,v.Z)(),m=h.session,g=h.container,b=h.packager,x=h.fs,Z=null,y=function(){f(!1),(0,mi.WT)(x),Z&&(Z.stopLogSpinner(),Z=null)},w=function(){var e=(0,Ne.Z)(De().mark((function e(){var r,i,o,d,p,h,m,v,w,k,C,j,_,T,S,z,B,R,E,G,L,I;return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=2;break}return e.abrupt("return");case 2:if(r=null,Z={startLogSpinner:function(e){if(r)throw new Error("A spinner is already active! call stopSpinner first or use the update callback to update the active spinner's message.");var t=e,n=0;return r=setInterval((function(){n++;var e=bi[n%bi.length];if(!Z)throw new Error("Expected logger");Z.clearLine(),Z.logMessage(e+" "+t)}),100),function(e){t=e}},stopLogSpinner:function(){r&&clearInterval(r),r=null},logMessage:s,clearLogs:c,clearLine:function(){if(!Z)throw new Error("Expected logger");Z.logMessage("\x1b[1K\r")}},n){e.next=6;break}throw new Error("Run button should not be active if there are no tests");case 6:return f(!0),(0,ut.j)(ut.U3.REPL_UNIT_TEST_USED,{trackingData:{context:l},action:"ranTests"}),Z.clearLogs(),i=(0,Jr.x)(t),e.next=12,i.buildAndRunTests((0,ae.Z)({container:g,fs:x,packager:b,logger:Z},n));case 12:if(o=e.sent,Z.stopLogSpinner(),Z.clearLine(),Z.clearLogs(),null===o.error){e.next=21;break}return Z.logMessage("".concat(vi).concat(o.error).concat(gi,"\r\n")),y(),n.tests.map((function(e){return{testId:e.id,didPass:!1}})),e.abrupt("return");case 21:if(d=o.result.passed?[]:o.result.failures.map((function(e){return i.parseTestResultName(e.name)})),p=[],h=n.tests.map((function(e){return i.getProperTestName(e.name)})),m=d.filter((function(e){return!h.includes(e)})),!m.length){e.next=29;break}w=m[0],k=o.result.failures[0].stack,Z.logMessage(xi({name:w,failureMessage:"The following error occurred but was not related to a single unit test",stack:k})),(v=p).push.apply(v,(0,re.Z)(n.tests.map((function(e){return{testId:e.id,didPass:!1}})))),e.next=60;break;case 29:C=!0,j=!1,_=void 0,e.prev=30,T=n.tests[Symbol.iterator]();case 32:if(C=(S=T.next()).done){e.next=46;break}if(z=S.value,B=i.getProperTestName(z.name),R=d.indexOf(B),E=-1===R,p.push({testId:z.id,didPass:E}),!E){e.next=41;break}return Z.logMessage((N=B,"\u2705\t".concat("\x1b[0;32m").concat(N).concat(gi,"\r\n\r\n"))),e.abrupt("continue",43);case 41:G=o.result.failures[R].stack,Z.logMessage(xi({name:B,failureMessage:z.failureMessage,stack:G}));case 43:C=!0,e.next=32;break;case 46:e.next=52;break;case 48:e.prev=48,e.t0=e.catch(30),j=!0,_=e.t0;case 52:e.prev=52,e.prev=53,C||null==T.return||T.return();case 55:if(e.prev=55,!j){e.next=58;break}throw _;case 58:return e.finish(55);case 59:return e.finish(52);case 60:if(a(p),L=n.tests.length,!o.result.passed){e.next=66;break}return Z.logMessage("".concat("\x1b[48;5;22m","  All tests have passed ").concat(L,"/").concat(L,"  ").concat(gi,"\r\n")),y(),e.abrupt("return");case 66:I=L-o.result.failures.length,Z.logMessage("".concat("\x1b[48;5;88m","  ").concat(I,"/").concat(L," passed, see errors above  ").concat(gi)),y();case 69:case"end":return e.stop()}var N}),e,null,[[30,48,52,60],[53,,55,59]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=(0,Ne.Z)(De().mark((function e(){return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{w()}catch(t){pi.$e((function(e){e.setTag("unittestsrun","true"),pi.Tb(t)})),Z&&Z.logMessage("\r\n".concat(vi," Sorry, we have failed to run your tests. Please try again or contact support. ").concat(gi,"\r\n")),y()}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Boolean(n&&n.tests.length>0)?(0,r.tZ)(p.G7,{children:(0,r.tZ)(p.zx,{disabled:u,colorway:"primary",iconLeft:(0,r.tZ)(hi.Z,{}),onClick:k,text:u?"Running tests...":"Run tests"})}):null},yi=n(70804);function wi(e){var t=e.isOpen,n=e.test,a=e.language,l=e.onClose,s=e.trackingContext,c=(0,ve.Z)(),d=(0,dt.Z)().showConfirm,u=(0,o.Z)(i.useState(null),2),f=u[0],h=u[1],m=(0,o.Z)(i.useState(""),2),v=m[0],g=m[1],b=(0,o.Z)(i.useState(""),2),x=b[0],Z=b[1],y=(0,o.Z)(i.useState(""),2),w=y[0],k=y[1],C=(0,o.Z)((0,Qr.Hd)({onError:function(e){return k(e.message)},update:function(e,t){var n,r=null===(n=t.data)||void 0===n?void 0:n.createReplUnitTest;r&&("UserError"===r.__typename?k(r.message):"ReplUnitTest"===r.__typename&&(e.modify({id:e.identify({__typename:"Repl",id:c}),fields:{unitTests:function(t){var n=e.writeFragment({data:r,fragment:Qr.Rb});return t?(0,Ft.Z)((0,ae.Z)({},t),{tests:(0,re.Z)(t.tests).concat([n])}):{__typename:"ReplUnitTestsWithMeta",meta:null,tests:[n]}}}}),d("Test created!"),l()))}}),2),j=C[0],_=C[1],T=(0,o.Z)((0,Qr.kO)({onError:function(e){return k(e.message)},onCompleted:function(e){var t=e.updateReplUnitTest;t&&("UserError"===t.__typename?k(t.message):"ReplUnitTest"===t.__typename&&(d("Test updated!"),l()))}}),2),S=T[0],z=T[1],B=(0,fi.Y)("",(function(e){return e.length<=0?{message:"Must include test name"}:e.trim().split(" ").length>1?{message:"Test name must only be one word"}:void 0}));i.useEffect((function(){B.setValue((null===n||void 0===n?void 0:n.name)||"",{preventTouch:!0}),Z((null===n||void 0===n?void 0:n.failureMessage)||""),g((null===n||void 0===n?void 0:n.code)||""),f&&f.setValue((null===n||void 0===n?void 0:n.code)||"")}),[n,f]),i.useEffect((function(){k("")}),[v,k]);var R=(0,Jr.x)(a),E="".concat(R.getCommentChar()," Enter code here"),G=!n||n.name!==B.value||n.code!==v||n.failureMessage!==x,L=_.loading||z.loading,I=R.testIntro(B.value||""),N=R.hasClosingBrackets()?R.getClosingBrackets():"",A=(0,o.Z)(i.useState(!1),2),D=A[0],X=A[1],P=function(){f&&(f.setValue("  "+R.exampleTest.code),f.focus()),g(R.exampleTest.code)};return(0,r.tZ)(p.u_,{isOpen:t,onRequestClose:l,maxWidth:872,children:(0,r.BX)(p.G7,{css:[p.l0.colWithGap(24)],children:[(0,r.tZ)(p.h4,{level:1,variant:"headerDefault",children:"New unit test"}),(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8)],children:[(0,r.tZ)("label",{htmlFor:"name",children:(0,r.tZ)(p.h4,{level:2,variant:"subheadDefault",children:"Name"})}),(0,r.tZ)(p.Zl,{id:"name",label:"Test name",status:null,autoFocus:!0,required:!0,value:B.value,isValid:B.isValid,error:B.error,warning:B.warning,touched:B.touched,onChange:function(e){B.setValue(e.target.value)},placeholder:"Enter test name here"})]}),(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8)],children:[(0,r.BX)(p.G7,{css:[p.l0.flex.row,p.l0.align.center,p.l0.justify.spaceBetween],children:[(0,r.tZ)(p.h4,{level:2,variant:"subheadDefault",children:"Code"}),(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4)],children:[(0,r.BX)(yi.Z,{isOpen:D,onClickOutside:function(){return X(!1)},placement:"bottom-end",children:[(0,r.tZ)(p.zx,{iconLeft:(0,r.tZ)(ci.Z,{}),small:!0,outlined:!0,text:"View an example",onClick:function(){[E,R.exampleTest.code].includes(v.trim())?P():X(!0)}}),(0,r.BX)(p.G7,{children:["This will overwrite your current test. Are you sure?",(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4),p.l0.pt(8)],children:[" ",(0,r.tZ)(p.zx,{text:"No, go back",small:!0,iconLeft:(0,r.tZ)(di.Z,{}),onClick:function(){X(!1)}}),(0,r.tZ)(p.zx,{text:"Yes, delete test",colorway:"negative",small:!0,iconLeft:(0,r.tZ)(qr.Z,{}),onClick:function(){P(),X(!1)}})]})]})]}),(0,r.tZ)(p.ZP,{iconLeft:(0,r.tZ)(ui.Z,{}),small:!0,outlined:!0,text:"View docs",target:"_blank",href:"https://docs.replit.com/teams-edu/unit-testing"})]})]}),(0,r.tZ)(p.G7,{css:[p.l0.backgroundColor.backgroundDefault,p.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,r.tZ)(p.G7,{css:[p.l0.borderRadius(8),p.l0.height(200),p.l0.position.relative],children:(0,r.tZ)(ti,{skeleton:I,skeletonClosingBracket:N,language:a,editorRef:h,onChange:g,placeholder:E})})})]}),(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8)],children:[(0,r.tZ)(p.h4,{level:2,variant:"subheadDefault",children:"Failure message"}),(0,r.tZ)(p.II,{value:x,onChange:function(e){return Z(e.target.value)},placeholder:"This will be displayed on test failure"})]}),(0,r.BX)(p.G7,{css:[p.l0.flex.row,p.l0.align.center,p.l0.justify.spaceBetween],children:[(0,r.tZ)(p.xv,{css:[p.l0.color.accentNegativeStronger],children:w}),(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(12)],children:[(0,r.tZ)(p.zx,{text:"Cancel",onClick:l}),(0,r.tZ)(p.zx,{text:"".concat(L?"Creating test...":"Create test"),iconLeft:(0,r.tZ)(Kr.Z,{}),colorway:"primary",disabled:!G||L,onClick:function(){B.validate()||(v.length<=0?k("Test cannot be empty"):n?(S({variables:{input:{name:B.value,code:v,failureMessage:x,testId:n.id}}}),(0,ut.j)(ut.U3.REPL_UNIT_TEST_USED,{trackingData:{context:s},action:"modifiedTest"})):(j({variables:{input:{name:B.value,code:v,failureMessage:x,replId:c}}}),(0,ut.j)(ut.U3.REPL_UNIT_TEST_USED,{trackingData:{context:s},action:"addedTest"})))}})]})]})]})})}function ki(e){var t=e.testId,n=e.onClose,a=(0,dt.Z)().showConfirm,l=(0,ve.Z)(),s=(0,o.Z)((0,Qr.IV)({onError:function(e){return h(e.message)},update:function(e,r){var i,o=null===(i=r.data)||void 0===i?void 0:i.deleteReplUnitTest;o&&("UserError"===o.__typename?h(o.message):"ReplUnitTest"===o.__typename&&t&&(e.modify({id:e.identify({__typename:"Repl",id:l}),fields:{unitTests:function(e,n){var r=n.readField,i=e.tests.filter((function(e){return r("id",e)!==t}));return(0,Ft.Z)((0,ae.Z)({},e),{tests:(0,re.Z)(i)})}}}),(0,ut.j)(ut.U3.REPL_UNIT_TEST_USED,{action:"removedTest"}),a("Test deleted!"),n()))}}),2),c=s[0],d=s[1],u=(0,o.Z)(i.useState(""),2),f=u[0],h=u[1];return(0,r.tZ)(p.u_,{isOpen:Boolean(t),onRequestClose:n,children:(0,r.BX)(p.G7,{css:[p.l0.colWithGap(24)],children:[(0,r.tZ)(p.h4,{level:1,variant:"headerDefault",children:"Delete test?"}),(0,r.tZ)(p.xv,{multiline:!0,children:"Are you sure you want to delete this test? This cannot be undone."}),(0,r.BX)(p.G7,{css:[p.l0.flex.row,p.l0.justify.spaceBetween,p.l0.align.center],children:[(0,r.tZ)(p.xv,{multiline:!0,css:[p.l0.color.accentNegativeStronger],children:f}),(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(12),p.l0.justify.end],children:[(0,r.tZ)(p.zx,{text:"Cancel",disabled:d.loading,onClick:n}),(0,r.tZ)(p.zx,{text:"Yes, delete this test",colorway:"negative",iconLeft:(0,r.tZ)(jt.Z,{}),disabled:d.loading,onClick:function(){if(!t)throw new Error("Expected a testId");c({variables:{testId:t}})}})]})]})]})})}var Ci=function(e){var t=e.unitTests,n=e.isAddingTest,a=e.onClose,l=e.language,s=e.canWrite,c=e.trackingContext,u=void 0===c?"default":c,f=(0,o.Z)(i.useState(n),2),h=f[0],m=f[1],v=(0,o.Z)(i.useState(null),2),g=v[0],b=v[1],x=(0,o.Z)(i.useState(null),2),Z=x[0],y=x[1],w=(0,ve.Z)(),k=(0,o.Z)((0,Qr.lQ)(),1)[0],C=(null===t||void 0===t?void 0:t.tests)||[];return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(16)],children:[(0,r.tZ)(Zi,{language:l,unitTests:t,onResult:function(e){k({variables:{input:{replId:w,results:e},replId:w}})},trackingContext:u}),C.length>0?(0,r.tZ)(p.G7,{css:[p.l0.colWithGap(8),p.l0.align.center],children:C.map((function(e){var t,n;return"ReplUnitTestLastRun"===(null===(t=e.lastRun)||void 0===t?void 0:t.__typename)&&(e.lastRun.status===si.$I.Passed?n="passed-test":e.lastRun.status===si.$I.Failed&&(n="failed-test")),(0,r.tZ)(p.G7,{className:"test ".concat(n),css:{width:"100%"},children:(0,r.BX)(p.G7,{css:[p.l0.flex.row,p.l0.justify.spaceBetween,p.l0.align.center,p.l0.p(8),p.l0.borderRadius(8),{border:"1px solid var(--background-highest);"}],children:[(0,r.tZ)(p.xv,{children:e.name}),s?(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(8)],children:[(0,r.tZ)(p.hU,{onClick:function(){b(e)},alt:"Edit",children:(0,r.tZ)(Et.Z,{})}),(0,r.tZ)(p.hU,{onClick:function(){y(e.id)},alt:"Delete",children:(0,r.tZ)(jt.Z,{})})]}):null]})},e.id)}))}):(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8),p.l0.align.center],children:[(0,r.tZ)(p.xv,{multiline:!0,css:[p.l0.textAlign.center],children:"Looks like you don\u2019t have any tests yet!"}),s&&(0,r.tZ)(p.zx,{text:"Add test",onClick:function(){return m(!0)},iconLeft:(0,r.tZ)(Kr.Z,{})})]}),(0,r.tZ)(wi,{isOpen:h||Boolean(g)||n,test:g,language:l,onClose:function(){b(null),m(!1),a&&a()},trackingContext:u}),(0,r.tZ)(ki,{testId:Z,onClose:function(){return y(null)}}),(0,r.tZ)(d(),{id:"a2df1ed8108a6cad",children:".tests-wrapper.jsx-a2df1ed8108a6cad{-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-16)0;width:100%}.test.jsx-a2df1ed8108a6cad{padding:var(--space-8)var(--space-8);border:1px solid var(--outline-dimmest);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4)}.passed-test.jsx-a2df1ed8108a6cad{border-color:var(--accent-positive-default);background:var(--accent-positive-dimmer)}.failed-test.jsx-a2df1ed8108a6cad{border-color:var(--accent-negative-default);background:var(--accent-negative-dimmer)}"})]})},ji=n(6951),_i=n(83117);var Ti=function(e){var t=e.onClick,n=e.hasTests,i=n?{"aria-label":"Delete all tests to switch test type","data-microtip-position":"bottom","data-microtip-size":"medium",role:"tooltip"}:{};return(0,r.BX)("div",(0,Ft.Z)((0,ae.Z)({},i),{className:"jsx-44786ca38dd3aa42 "+(i&&null!=i.className&&i.className||"back-button"),children:[(0,r.tZ)(ji.Z,{filled:!1,border:!1,size:"small",Icon:_i.Z,onClick:t,disabled:n,children:"Switch test type"}),(0,r.tZ)(d(),{id:"44786ca38dd3aa42",children:".back-button.jsx-44786ca38dd3aa42{width:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}"})]}))},Si=n(69128);var zi=function(e){var t,n,a,l,s=e.onBack,c=(0,ve.Z)(),d=(0,o.Z)(i.useState(!1),2),u=d[0],f=d[1],h=(0,Si.Z)(),m=h.language,v=h.isLoading,g=(0,Yr.CH)({variables:{replId:c}}),b=null===(t=g.data)||void 0===t?void 0:t.repl;if(g.loading||v)return(0,r.tZ)(p.G7,{css:[p.l0.backgroundColor.backgroundDefault,p.l0.flex.row,p.l0.align.center,p.l0.justify.center,p.l0.p(16)],children:(0,r.tZ)(he.Z,{})});if(!b||"Repl"!==b.__typename)return(0,r.tZ)(p.G7,{css:[p.l0.p(16)],children:(0,r.tZ)(p.xv,{multiline:!0,css:{textAlign:"center"},children:"Unable to fetch tests, please try again."})});if(!m)return(0,r.tZ)(p.G7,{css:[p.l0.p(16)],children:(0,r.tZ)(p.xv,{multiline:!0,css:{textAlign:"center"},children:"Unit tests are currently only supported in Java, Python, and Node.js Repls."})});var x="default";(null===b||void 0===b?void 0:b.isProject)?x="project_repl":(null===b||void 0===b?void 0:b.isProjectFork)&&(x="submission_repl");var Z=Boolean((null===(n=b.unitTests)||void 0===n?void 0:n.tests)&&b.unitTests.tests.length>0);return(null===b||void 0===b||null===(a=b.currentUserPermissions)||void 0===a?void 0:a.writeTests)?(0,r.BX)(p.G7,{css:[p.l0.colWithGap(16),p.l0.align.center],children:[(0,r.BX)(p.G7,{css:[p.l0.flex.row,p.l0.justify.spaceBetween,p.l0.align.center,{width:"100%"}],children:[(0,r.tZ)(O.Z,{truncate:!0,level:4,children:"Unit tests"}),(0,r.tZ)(p.hU,{alt:"Add test",size:32,onClick:function(){return f(!0)},children:(0,r.tZ)(Kr.Z,{})})]}),(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8),p.l0.maxWidth(256),{width:"80%"}],children:[(0,r.tZ)(li,{language:m,meta:(null===(l=b.unitTests)||void 0===l?void 0:l.meta)||null}),(0,r.tZ)(Ci,{isAddingTest:u,unitTests:(null===b||void 0===b?void 0:b.unitTests)||null,onClose:function(){return f(!1)},language:m,canWrite:!0,trackingContext:x}),s?(0,r.tZ)(Ti,{hasTests:Z,onClick:s}):null]})]}):(0,r.BX)(p.G7,{css:[p.l0.colWithGap(16)],children:[(0,r.tZ)(p.h4,{level:1,variant:"headerDefault",children:"Unit tests"}),(0,r.tZ)(p.G7,{css:{width:"100%",overflowY:"auto"},children:(0,r.tZ)(Ci,{unitTests:(null===b||void 0===b?void 0:b.unitTests)||null,language:m,isAddingTest:!1,canWrite:!1,trackingContext:x})})]})},Bi={Content:function(){return(0,r.tZ)(p.G7,{css:[p.l0.p(8),W.F3],children:(0,r.tZ)(zi,{})})},Icon:function(e){var t=e.size;return(0,r.tZ)(qr.Z,{size:t})},getTitle:function(){return"Unit Tests"}},Ri=n(94184),Ei=n.n(Ri),Gi=n(44781),Li=n(19526),Ii=n(99534),Ni=n(19050),Ai=n(27206),Di=n(16449),Xi=n(88961),Pi=n(42941),Mi=n(29245),Fi=i.forwardRef((function(e,t){var n,a,l,s=e.label,c=e.id,u=e.description,f=e.onChange,p=e.fontFamily,h=void 0===p?"sans-serif":p,m=e.fontSize,v=void 0===m?"medium":m,g=e.fontWeight,b=void 0===g?"regular":g,x=e.foreground,Z=void 0===x?1:x,y=e.placeholder,w=void 0===y?"":y,k=e.validationResults,C=e.value,j=(0,Ii.Z)(e,["label","id","description","onChange","fontFamily","fontSize","fontWeight","foreground","placeholder","validationResults","value"]),_=(0,Di.Z)().ref,T=(0,Sn.H)(),S=c||T("input"),z=u?T("input-description"):void 0,B=(0,o.Z)(i.useState(!1),2),R=B[0],E=B[1];(null===k||void 0===k?void 0:k.some((function(e){return"loading"===e.state})))?n="loading":(null===k||void 0===k?void 0:k.some((function(e){return"error"===e.state})))?(n="error",l="var(--accent-negative-default)",a=(0,r.tZ)(Xi.Z,{})):(null===k||void 0===k?void 0:k.every((function(e){return"success"===e.state})))?(n="success",l="var(--accent-positive-default)",a=(0,r.tZ)(qr.Z,{})):n="default";var G=Ai.P3[n],L=(j.className?j.className+" ":"")+G;return(0,r.BX)("div",{className:d().dynamic([["48c1334c65fd9e51",[l,Mi.Z.fontSize[v],Mi.Z.fontFamily[h],Mi.Z.fontWeight[b],Mi.Z.foreground[Z],Mi.Z.lineHeight[v]]]])+" container",children:[s&&(0,r.BX)(r.HY,{children:[j.required?(0,r.BX)(Li.Ug,{spacing:"2px",children:[(0,r.tZ)(Gi.Z,{tag:"label",foreground:R?1:2,size:"large"===v?"small":"xsmall",htmlFor:S,children:s}),(0,r.tZ)("span",{className:d().dynamic([["48c1334c65fd9e51",[l,Mi.Z.fontSize[v],Mi.Z.fontFamily[h],Mi.Z.fontWeight[b],Mi.Z.foreground[Z],Mi.Z.lineHeight[v]]]])+" required",children:"*"})]}):(0,r.tZ)(Gi.Z,{tag:"label",foreground:R?1:2,size:"large"===v?"small":"xsmall",htmlFor:S,children:s}),(0,r.tZ)(Pi.Z,{height:"4px"})]}),(0,r.BX)("div",{className:d().dynamic([["48c1334c65fd9e51",[l,Mi.Z.fontSize[v],Mi.Z.fontFamily[h],Mi.Z.fontWeight[b],Mi.Z.foreground[Z],Mi.Z.lineHeight[v]]]])+" textarea-container",children:[(0,r.tZ)("textarea",(0,Ft.Z)((0,ae.Z)({id:S,placeholder:w,value:C,onChange:f,"aria-busy":"loading"===n,"aria-invalid":"error"===n,"aria-describedby":z},j),{ref:function(e){_(e),t&&("function"!==typeof t?t.current=e:t(e))},onFocus:function(e){E(!0),j.onFocus&&j.onFocus(e)},onBlur:function(e){E(!1),j.onBlur&&j.onBlur(e)},className:d().dynamic([["48c1334c65fd9e51",[l,Mi.Z.fontSize[v],Mi.Z.fontFamily[h],Mi.Z.fontWeight[b],Mi.Z.foreground[Z],Mi.Z.lineHeight[v]]]])+" "+(L||"")})),a&&(0,r.tZ)("div",{onMouseEnter:function(){return E(!0)},onMouseLeave:function(){return E(!1)},className:d().dynamic([["48c1334c65fd9e51",[l,Mi.Z.fontSize[v],Mi.Z.fontFamily[h],Mi.Z.fontWeight[b],Mi.Z.foreground[Z],Mi.Z.lineHeight[v]]]])+" icon-container right",children:a})]}),u&&(0,r.BX)(r.HY,{children:[(0,r.tZ)(Pi.Z,{height:"4px"}),(0,r.tZ)(Gi.Z,{id:z,tag:"span",foreground:3,size:v,children:u})]}),k&&R&&(0,r.tZ)(Ai.QE,{validationResults:k}),(0,r.tZ)(d(),{id:"48c1334c65fd9e51",dynamic:[l,Mi.Z.fontSize[v],Mi.Z.fontFamily[h],Mi.Z.fontWeight[b],Mi.Z.foreground[Z],Mi.Z.lineHeight[v]],children:".container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;position:relative;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;width:100%}.textarea-container.__jsx-style-dynamic-selector{position:relative}.required.__jsx-style-dynamic-selector{color:var(--accent-negative-default);font-size:var(--font-size-small)}.icon-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;position:absolute;top:var(--space-8);right:var(--space-8);background-color:var(--background-default);-webkit-border-radius:100%;-moz-border-radius:100%;border-radius:100%;padding:var(--space-4)}.icon-container.right.__jsx-style-dynamic-selector{right:var(--space-8);color:".concat(l,"}textarea.__jsx-style-dynamic-selector{resize:none;font-size:").concat(Mi.Z.fontSize[v],";font-family:").concat(Mi.Z.fontFamily[h],";font-weight:").concat(Mi.Z.fontWeight[b],";color:").concat(Mi.Z.foreground[Z],";line-height:").concat(Mi.Z.lineHeight[v],";background-color:transparent;padding:var(--space-8);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);outline:none;width:100%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-transition:.1s;-moz-transition:.1s;-o-transition:.1s;transition:.1s;line-height:1.4}textarea.__jsx-style-dynamic-selector:disabled{opacity:.5}textarea.default.__jsx-style-dynamic-selector:hover{border-color:var(--accent-primary-dimmer)}textarea.success.__jsx-style-dynamic-selector{border-color:var(--accent-positive-default)}textarea.success.__jsx-style-dynamic-selector:hover{border-color:var(--accent-positive-dimmer)}textarea.negative.__jsx-style-dynamic-selector{border-color:var(--accent-negative-default)}textarea.negative.__jsx-style-dynamic-selector:hover{border-color:var(--accent-negative-dimmer)}textarea.__jsx-style-dynamic-selector:active,textarea.__jsx-style-dynamic-selector:focus{border-color:var(--accent-primary-default)}")})]})})),Oi=Fi,Ui=n(34193);function Wi(e){switch(e){case si.Fl.Match:return"The test passes if the expected output is in the actual output.";case si.Fl.Exact:return"The test passes if the expected output is equal to the actual output.";case si.Fl.Regex:return"The test passes if the actual output matches the regex expression for the expected output.";case si.Fl.Compatibility:return"The test passes if the expected output is in the actual output; some characters are removed for backwards compatibility."}}var Hi=function(e){(0,ir.Z)(n,e);var t=(0,ar.Z)(n);function n(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];var a;return(0,dn.Z)(this,n),(a=t.call.apply(t,[this].concat((0,re.Z)(r)))).name=a.constructor.name,a}return n}((0,kr.Z)(Error));function Vi(e){var t={id:e.id},n={id:-e.id,input:{input:e.input?e.input+"\n":""}};switch(e.type){case"compatibility":t.output={compatibility:{expected:e.output}};break;case"match":t.output={match:{expected:e.output,ignoreTrailingWhitespace:!0}};break;case"exact":t.output={exact:{expected:e.output,allowTrailingNewline:!0}};break;case"regex":t.output={regex:{expression:e.output}}}return{id:e.id,instructions:[n,t]}}function qi(e){var t=e.args,n=e.env,r=t.indexOf("--ps1"),i=t.indexOf("--ps2"),a=t.indexOf("-i");return-1!==r&&null!=t[r+1]&&(t[r+1]=""),-1!==i&&null!=t[i+1]&&(t[i+1]=""),-1!==a&&t.splice(a,1),t.includes("-q")||t.unshift(t.shift(),"-q"),n.PS1="",n.PS2="",{args:t,env:n}}function Yi(e){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,Ne.Z)(De().mark((function e(t){var n,r,i,a,o,l,s,c,d,u;return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,t.getRunConfig();case 3:if(r=e.sent){e.next=6;break}throw new Hi("unable to fetch dotreplit run config");case 6:if(!r.interp){e.next=17;break}if("stderred"===(null===(a=null===(i=r.interp)||void 0===i?void 0:i.command)||void 0===a?void 0:a.args[0])&&("--"===a.args[1]?a.args.splice(0,2):a.args.shift()),a&&!(a.args.length<1)){e.next=14;break}throw o=new Hi("received interp without command"),pi.Tb(o,(function(e){return e.setExtra("runInfo",u)})),o;case 14:if(!a.args[0].match(/(^|\/)prybar/i)){e.next=16;break}return e.abrupt("return",{execCommand:qi(a)});case 16:return e.abrupt("return",{execCommand:{args:a.args,env:a.env}});case 17:if(null===(n=r.run)||void 0===n?void 0:n.run){e.next=21;break}throw l=new Hi("Bad repl run config received"),pi.Tb(l,(function(e){return e.setExtra("runConfig",r)})),l;case 21:return s=r.run,c=s.run,d=s.compile,c.env.PS1="",c.env.PS2="",u={execCommand:{args:c.args,env:c.env}},d&&(d.env.PS1="",d.env.PS2="",u.buildCommand={args:d.args,env:d.env}),e.abrupt("return",u);case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Qi,$i=function(e){var t=e.test,n=e.onSubmit,l=e.onCancel,s=e.isOpen,c=e.onRequestClose,u=(0,o.Z)(i.useState({}),2),f=u[0],p=u[1],h=function(e){return{name:(null===e||void 0===e?void 0:e.name)||"",type:(null===e||void 0===e?void 0:e.type)||si.Fl.Match,input:(null===e||void 0===e?void 0:e.input)||"",output:(null===e||void 0===e?void 0:e.output)||""}},m=(0,dt.Z)().showError,v=(0,o.Z)(i.useState(h(t)),2),g=v[0],b=v[1];i.useEffect((function(){b(h(t)),p({})}),[t,b]);var x=function(e,t){p((function(n){return(0,Ft.Z)((0,ae.Z)({},n),(0,a.Z)({},e,t?void 0:[{message:e+" expected but not provided.",state:"error"}]))}))};return(0,r.tZ)(Ui.Z,{isOpen:s,onRequestClose:c,children:(0,r.BX)("div",{className:d().dynamic([["550654d38c65c62e",[""===g.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-tests-view",children:[(0,r.tZ)("div",{className:d().dynamic([["550654d38c65c62e",[""===g.type?"--foreground-dimmer":"--foreground-default"]]])+" header-row",children:(0,r.tZ)(O.Z,{level:4,align:"center",children:t?"Edit test: ":"Create test"})}),(0,r.tZ)("div",{className:d().dynamic([["550654d38c65c62e",[""===g.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row",children:(0,r.tZ)(Ai.ZP,{label:"Test name",placeholder:"The name of the test",value:(null===g||void 0===g?void 0:g.name)||"",validationResults:f.name,onChange:function(e){var t;e.persist(),b((function(t){var n;return(0,Ft.Z)((0,ae.Z)({},t),{name:(null===(n=e.target)||void 0===n?void 0:n.value)||""})})),x("name",null===(t=e.target)||void 0===t?void 0:t.value)},maxLength:20})}),(0,r.tZ)("div",{className:d().dynamic([["550654d38c65c62e",[""===g.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row",children:(0,r.tZ)(Oi,{style:{height:"150px"},label:"Input (standard in)",placeholder:"The input for the test",value:g.input,fontFamily:"monospace",translate:"no",onChange:function(e){e.persist(),b((function(t){return(0,Ft.Z)((0,ae.Z)({},t),{input:e.target.value})}))}})}),(0,r.tZ)("div",{className:d().dynamic([["550654d38c65c62e",[""===g.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row",children:(0,r.tZ)(Oi,{style:{height:"150px"},label:"Expected output",validationResults:f.output,placeholder:"The expected output for the test",value:g.output,fontFamily:"monospace",translate:"no",onChange:function(e){var t;e.persist(),b((function(t){return(0,Ft.Z)((0,ae.Z)({},t),{output:e.target.value})})),x("output",null===(t=e.target)||void 0===t?void 0:t.value)}})}),(0,r.tZ)("div",{className:d().dynamic([["550654d38c65c62e",[""===g.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row",children:(0,r.tZ)("div",{className:d().dynamic([["550654d38c65c62e",[""===g.type?"--foreground-dimmer":"--foreground-default"]]])+" dropdown-container",children:(0,r.tZ)(Ni.Z,{items:[si.Fl.Match,si.Fl.Exact,si.Fl.Regex,si.Fl.Compatibility],renderItemChildComponent:function(e){return(0,r.BX)("a",{className:d().dynamic([["550654d38c65c62e",[""===g.type?"--foreground-dimmer":"--foreground-default"]]]),children:[e,(0,r.tZ)("br",{className:d().dynamic([["550654d38c65c62e",[""===g.type?"--foreground-dimmer":"--foreground-default"]]])}),(0,r.tZ)(Gi.Z,{size:"xsmall",children:Wi(e)})]})},renderAnchorComponent:function(e){var t=e.innerRef,n=(0,Ii.Z)(e,["innerRef"]);return(0,r.BX)("a",(0,Ft.Z)((0,ae.Z)({ref:t},n),{className:d().dynamic([["550654d38c65c62e",[""===g.type?"--foreground-dimmer":"--foreground-default"]]])+" dropdown-view dropdown-anchor",children:[(0,r.tZ)(Gi.Z,{children:g.type}),(0,r.tZ)(Gi.Z,{children:(0,r.tZ)($r.Z,{})})]}))},onClick:function(e){b((function(t){return(0,Ft.Z)((0,ae.Z)({},t),{type:e})}))}})})}),(0,r.BX)("div",{className:d().dynamic([["550654d38c65c62e",[""===g.type?"--foreground-dimmer":"--foreground-default"]]])+" manage-test-row align-end",children:[(0,r.tZ)(ji.Z,{onClick:l,children:"Cancel"}),(0,r.tZ)(ji.Z,{color:"primary",filled:!0,onClick:function(){if(!g.name||!g.output)return m("Test name and expected output must be provided."),g.name||x("name"),void(g.output||x("output"));g.type?(n({testId:null===t||void 0===t?void 0:t.id,name:g.name,input:g.input||"",type:g.type,output:g.output}),b(h(void 0))):m("A test type must be provided")},children:"Save"})]}),(0,r.tZ)(d(),{id:"550654d38c65c62e",dynamic:[""===g.type?"--foreground-dimmer":"--foreground-default"],children:".dropdown-container.__jsx-style-dynamic-selector{border:1px solid var(--outline-dimmest);width:100%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4)}.dropdown-anchor.__jsx-style-dynamic-selector{padding:var(--space-8)}.dropdown-container.__jsx-style-dynamic-selector .anchor{z-index:1}.dropdown-container.__jsx-style-dynamic-selector .dropdown-view{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;text-align:right}.dropdown-container.__jsx-style-dynamic-selector .dropdown-view .text{color:var(".concat(""===g.type?"--foreground-dimmer":"--foreground-default",")}.manage-tests-view.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding:var(--space-16)}.manage-test-row.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;padding-top:var(--space-16)}.align-end.__jsx-style-dynamic-selector{-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}.manage-test-row.__jsx-style-dynamic-selector>button{margin-left:var(--space-8)}.manage-test-row-section.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:start;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;margin:0 var(--space-16);width:100%}")})]})})},Ji=function(e){var t=e.test,n=e.onEdit,i=e.onDelete,a=e.onView,o=e.isTeacherView,l=e.status,s=e.isRunning,c=e.onShowFailed,u=e.disableButtons,f="";return l?f=l:s&&(f="Running"),(0,r.BX)("div",{onClick:function(){return a()},className:"jsx-d0055d2df6a917c5 test",children:[(0,r.BX)("div",{className:"jsx-d0055d2df6a917c5 test-row",children:[(0,r.tZ)("div",{className:"jsx-d0055d2df6a917c5 test-text",children:(0,r.tZ)(Gi.Z,{size:"large",children:t.name})}),o&&(0,r.tZ)("div",{onClick:function(e){return e.stopPropagation()},className:"jsx-d0055d2df6a917c5 test-row",children:(0,r.BX)(r.HY,{children:[(0,r.tZ)(ji.Z,{color:"primary",onClick:n,Icon:Et.Z,disabled:u}),(0,r.tZ)(Pi.Z,{width:"var(--space-4)"}),(0,r.tZ)(ji.Z,{onClick:i,color:"negative",Icon:jt.Z,disabled:u})]})})]}),(l||s)&&(0,r.BX)(r.HY,{children:[(0,r.tZ)(Pi.Z,{height:2}),(0,r.BX)("div",{className:"jsx-d0055d2df6a917c5 test-row",children:[(0,r.tZ)("div",{className:"jsx-d0055d2df6a917c5 test-text",children:(0,r.tZ)(Gi.Z,{className:Ei()([{"status-passed":"Passed"===l},{"status-failed":"Failed"===l}]),children:f})}),(0,r.tZ)(ji.Z,{onClick:function(e){return e.stopPropagation(),c(e)},disabled:s,children:"Results"})]})]}),(0,r.tZ)(d(),{id:"d0055d2df6a917c5",children:".test.jsx-d0055d2df6a917c5{background-color:var(--background-higher);margin-top:var(--space-8);padding:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);cursor:pointer}.test-row.jsx-d0055d2df6a917c5 .status-passed{color:var(--accent-positive-default)}.test-row.jsx-d0055d2df6a917c5 .status-failed{color:var(--accent-negative-default)}.test-text.jsx-d0055d2df6a917c5{width:100%;padding:var(--space-4)0;padding-right:var(--space-8);word-break:break-all}.test.jsx-d0055d2df6a917c5:hover{background-color:var(--background-higher)}.test-row.jsx-d0055d2df6a917c5{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:start}"})]})},ea=function(e){var t=e.text;if(!t)return null;var n=t.split("\n").map((function(e,t){return[e,"".concat(t+1)]}));return""===n[n.length-1][0]&&n.pop(),(0,r.BX)(Li.Ug,{children:[(0,r.tZ)("code",{className:"jsx-6ac664c130469a42 gutter",children:(0,r.tZ)("pre",{className:"jsx-6ac664c130469a42",children:n.map((function(e){var t=(0,o.Z)(e,2);t[0];return t[1]})).join("\n")})}),(0,r.tZ)("code",{className:"jsx-6ac664c130469a42 text",children:(0,r.tZ)("pre",{className:"jsx-6ac664c130469a42",children:t})}),(0,r.tZ)(d(),{id:"6ac664c130469a42",children:".gutter.jsx-6ac664c130469a42,.text.jsx-6ac664c130469a42{color:var(--foreground-default)}.gutter.jsx-6ac664c130469a42{min-width:1.5em}.text.jsx-6ac664c130469a42{max-width:80%}"})]})},ta=n(37529),na=n.n(ta),ra=function(e){var t=e.expected,n=e.actual;if(!t||!n)return null;var i=n.split("\n"),a=t.split("\n"),l=a.length>i.length?a:i,s=l.map((function(e,t){return[e,"".concat(t+1)]})),c=l.map((function(e,t){var n=t<i.length?i[t]:"",o=t<a.length?a[t]:"";return(0,r.BX)(r.HY,{children:[na()(n,o).map((function(e,t){var n;return-1===e[0]&&(n={backgroundColor:"var(--accent-negative-dimmer)",textDecoration:"line-through"}),1===e[0]&&(n={backgroundColor:"var(--accent-positive-dimmer)",textDecoration:"underline"}),(0,r.tZ)("span",{style:n,children:e[1]},t)})),(0,r.tZ)("br",{})]})}));return(0,r.BX)(Li.Ug,{children:[(0,r.tZ)("code",{className:"jsx-6ac664c130469a42 gutter",children:(0,r.tZ)("pre",{className:"jsx-6ac664c130469a42",children:s.map((function(e){var t=(0,o.Z)(e,2);t[0];return t[1]})).join("\n")})}),(0,r.tZ)("code",{className:"jsx-6ac664c130469a42 text",children:(0,r.tZ)("pre",{className:"jsx-6ac664c130469a42",children:c})}),(0,r.tZ)(d(),{id:"6ac664c130469a42",children:".gutter.jsx-6ac664c130469a42,.text.jsx-6ac664c130469a42{color:var(--foreground-default)}.gutter.jsx-6ac664c130469a42{min-width:1.5em}.text.jsx-6ac664c130469a42{max-width:80%}"})]})},ia=function(e){var t=e.test,n=e.actualOutput,i=e.isOpen,a=e.isResults,o=e.onRequestClose,l=e.didFail,s=e.error,c=t?Wi(t.type):"",u=null===n||void 0===n?void 0:n.split("\n"),f=null===t||void 0===t?void 0:t.output.split("\n"),p=null===t||void 0===t?void 0:t.output;return l=null!==l&&void 0!==l?l:"Failed"===(null===t||void 0===t?void 0:t.status),(0,r.BX)(Ui.Z,{onRequestClose:o,isOpen:i&&void 0!==t,children:[(0,r.BX)("div",{className:"jsx-c7ed87540f6ec33d test-info",children:[(0,r.BX)(Li.gC,{align:"center",spacing:1,children:[(0,r.BX)(O.Z,{level:4,children:[a&&"Test results: ",null===t||void 0===t?void 0:t.name]}),(0,r.BX)(Li.Ug,{spacing:1,children:[(0,r.tZ)("div",{role:"tooltip","data-microtip-position":"top","aria-label":c,className:"jsx-c7ed87540f6ec33d test-type",children:(0,r.tZ)(Gi.Z,{align:"center",size:"small",children:null===t||void 0===t?void 0:t.type})}),a&&(null===t||void 0===t?void 0:t.status)&&(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d "+"test-status ".concat(null===t||void 0===t?void 0:t.status),children:(0,r.tZ)(Gi.Z,{align:"center",size:"small",children:null===t||void 0===t?void 0:t.status})})]})]}),(0,r.tZ)(Pi.Z,{height:6}),(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-row",children:(0,r.BX)("div",{className:"jsx-c7ed87540f6ec33d test-io-section",children:[(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-label",children:a?(0,r.BX)(Li.Ug,{spacing:1,align:"center",children:[(0,r.tZ)(Gi.Z,{size:"medium",children:"Expected output"}),(0,r.tZ)(Gi.Z,{size:"xsmall",children:(0,r.tZ)("span",{"data-microtip-position":"top",role:"tooltip","aria-label":"Your program is expected to print this output.",className:"jsx-c7ed87540f6ec33d help",children:"?"})})]}):(0,r.tZ)(Gi.Z,{size:"medium",children:"Output"})}),(0,r.tZ)(Pi.Z,{height:"var(--space-8)"}),(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-box",children:(0,r.tZ)(ea,{text:null===t||void 0===t?void 0:t.output})})]})}),(0,r.tZ)(Pi.Z,{height:2}),(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-row",children:(0,r.BX)("div",{className:"jsx-c7ed87540f6ec33d test-io-section",children:[(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-label",children:a?(0,r.BX)(Li.Ug,{spacing:1,align:"center",children:[(0,r.tZ)(Gi.Z,{size:"medium",children:"Actual output"}),(0,r.tZ)(Gi.Z,{size:"xsmall",children:(0,r.tZ)("span",{"data-microtip-position":"top",role:"tooltip","aria-label":"Your program actually printed this output.",className:"jsx-c7ed87540f6ec33d help",children:"?"})})]}):(0,r.tZ)(Gi.Z,{size:"medium",children:"Input"})}),(0,r.tZ)(Pi.Z,{height:"var(--space-8)"}),(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-box",children:(0,r.tZ)(ea,{text:a?n:null===t||void 0===t?void 0:t.input})})]})}),a&&l&&(0,r.tZ)(r.HY,{children:s?(0,r.BX)(r.HY,{children:[(0,r.tZ)(Pi.Z,{height:2}),(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-row",children:(0,r.BX)("div",{className:"jsx-c7ed87540f6ec33d test-io-section",children:[(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-label",children:(0,r.tZ)(Gi.Z,{size:"medium",children:"Error(s)"})}),(0,r.tZ)(Pi.Z,{height:"var(--space-8)"}),(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-box",children:(0,r.tZ)(ea,{text:s.stderr||s.message})})]})})]}):(null===t||void 0===t?void 0:t.type)!==si.Fl.Regex&&f&&u&&(0,r.BX)(r.HY,{children:[(0,r.tZ)(Pi.Z,{height:2}),(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-row",children:(0,r.BX)("div",{className:"jsx-c7ed87540f6ec33d test-io-section",children:[(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-label",children:(0,r.BX)(Li.Ug,{spacing:1,align:"center",children:[(0,r.tZ)(Gi.Z,{size:"medium",children:"Difference"}),(0,r.tZ)(Gi.Z,{size:"xsmall",children:(0,r.tZ)("span",{"data-microtip-position":"top",role:"tooltip","aria-label":"Modify your output to match the expected output.",className:"jsx-c7ed87540f6ec33d help",children:"?"})})]})}),(0,r.tZ)(Pi.Z,{height:"var(--space-8)"}),(0,r.tZ)("div",{className:"jsx-c7ed87540f6ec33d test-io-box",children:(0,r.tZ)(ra,{expected:p,actual:n})})]})})]})})]}),(0,r.tZ)(d(),{id:"c7ed87540f6ec33d",children:".test-info.jsx-c7ed87540f6ec33d{padding:var(--space-24);display:relative}.test-io-line-spacing.jsx-c7ed87540f6ec33d{width:var(--space-8);-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.test-io-row.jsx-c7ed87540f6ec33d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.test-io-line-number.jsx-c7ed87540f6ec33d{display:inline-block;min-width:1.5em;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.test-io-line.jsx-c7ed87540f6ec33d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:start;font-family:var(--font-family-code)}.test-io-line-content.jsx-c7ed87540f6ec33d{display:inline-block}.test-io-label.jsx-c7ed87540f6ec33d{padding-bottom:var(--space-8);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.test-io-label.jsx-c7ed87540f6ec33d .text{color:var(--foreground-dimmer)}.test-io-section.jsx-c7ed87540f6ec33d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:start;-webkit-justify-content:start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:start;width:100%}.test-io-box.jsx-c7ed87540f6ec33d{height:100%;border:1px solid var(--outline-dimmest);-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;overflow-x:auto}.test-io-box.jsx-c7ed87540f6ec33d .text{white-space:nowrap}.test-type.jsx-c7ed87540f6ec33d,.test-status.jsx-c7ed87540f6ec33d{background-color:var(--background-highest);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-8);display:inline-block;spacing:1;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.test-status.jsx-c7ed87540f6ec33d .text{color:var(--white)}.test-status.Passed.jsx-c7ed87540f6ec33d{background-color:var(--accent-positive-default)}.test-status.Failed.jsx-c7ed87540f6ec33d{background-color:var(--accent-negative-default)}.help.jsx-c7ed87540f6ec33d{display:-webkit-inline-box;display:-webkit-inline-flex;display:-moz-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;border:1px solid var(--background-higher);-webkit-border-radius:100%;-moz-border-radius:100%;border-radius:100%;width:var(--space-16);height:var(--space-16);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}"})]})},aa=n(9556),oa=n(75240),la=function(){var e,t,n,l,s,c,u,f,p=(0,v.Z)(),h=p.iotester,m=p.dotReplit,g=p.container,b=(0,dt.Z)(),x=b.showError,Z=b.showConfirm,y=(0,o.Z)(i.useState([]),2),w=y[0],k=y[1],C=(0,o.Z)(i.useState(),2),j=C[0],_=C[1],T=(0,o.Z)(i.useState(g.getConnectionState()),2),S=T[0],z=T[1],B=(0,o.Z)(i.useState(h.state),2),R=B[0],E=B[1],G=(0,o.Z)(i.useState(),2),L=G[0],I=G[1],N=(0,kn.x)();i.useEffect((function(){return g.onConnectionStateChanged(z)}),[z,g]);var A=(0,ve.Z)(),D=(0,Yr.CH)({variables:{replId:A}}),X="Repl"===(null===(e=D.data)||void 0===e||null===(t=e.repl)||void 0===t?void 0:t.__typename)?D.data.repl:null,P="Team"===(null===X||void 0===X||null===(n=X.owner)||void 0===n?void 0:n.__typename)&&X.owner.id||null,M=(0,o.Z)((0,Yr.vk)({onCompleted:function(e){e&&e.saveIOTestResults&&x(e.saveIOTestResults.message)}}),1)[0];i.useEffect((function(){var e=[h.onStateChanged((function(e){E(e),P&&e===aa.Z.Idle&&k((function(e){var t;return M({variables:{replId:A,results:Object.values(e).map((function(e){var n;return{testId:e.testId,status:e.status,output:(null===(n=e.error)||void 0===n?void 0:n.stderr)?(null!==(t=e.output)&&void 0!==t?t:"")+e.error:e.output}})),teamId:P}}).catch((function(t){pi.Tb(t,(function(t){return t.setExtras({results:e,payload:L})}))})),e}))})),h.onError((function(e){x(e.message)})),h.onTestResult((function(e){k((function(t){var n=(0,Ft.Z)((0,ae.Z)({},t[e.testId]),{testId:e.testId,status:"passed"===e.body?si.kQ.Passed:si.kQ.Failed});return"error"===e.body&&(n.error=e.error),(0,Ft.Z)((0,ae.Z)({},t),(0,a.Z)({},e.testId,n))}))})),h.onInstructionResult((function(e){k((function(t){var n,r,i=Math.abs(e.instructionId),o="";switch(e.body){case"passed":var l;o+=null!==(l=e.passed.output)&&void 0!==l?l:"";break;case"failed":var s;o+=null!==(s=e.failed.output)&&void 0!==s?s:"";break;case"timeout":var c;o+=null!==(c=e.timeout.output)&&void 0!==c?c:"";break;case"error":o+=e.error.message}return(0,Ft.Z)((0,ae.Z)({},t),(0,a.Z)({},i,(0,Ft.Z)((0,ae.Z)({},t[i]),{testId:i,output:(null!==(r=null===(n=w[i])||void 0===n?void 0:n.output)&&void 0!==r?r:"")+o})))}))}))];return function(){return e.forEach((function(e){return e()}))}}),[w,x,E,h,A,P,L,M]),i.useEffect((function(){var e=function(e){(0,wn.Z)(e,Error)&&x(e.message),pi.Tb(e)};return Yi(m).then(_).catch(e),m.watch((function(){return Yi(m).then(_).catch(e)}))}),[m,_,x]);var F=null===X||void 0===X?void 0:X.ioTests,U=(0,o.Z)((0,Yr.Ne)({onError:function(e){return x(e)},onCompleted:function(e){var t;"UserError"===(null===(t=e.deleteTemplateTest)||void 0===t?void 0:t.__typename)?x(e.deleteTemplateTest.message):(Z("Test deleted!"),D.refetch())}}),2),W=U[0],H=U[1],V=(0,o.Z)((0,Yr.AA)({onError:function(e){return x(e)},onCompleted:function(e){var t;"UserError"===(null===(t=e.updateTemplateTest)||void 0===t?void 0:t.__typename)?x(e.updateTemplateTest.message):"ReplTemplateTest"===e.updateTemplateTest.__typename&&(Z("Test updated!"),N.writeFragment({fragment:Yr.Gg,data:e.updateTemplateTest}))}}),2),q=V[0],Y=V[1],K=(0,o.Z)((0,Yr.pV)({onError:function(e){return x(e)},onCompleted:function(e){var t;"UserError"===(null===(t=e.createTemplateTest)||void 0===t?void 0:t.__typename)?x(e.createTemplateTest.message):(Z("Test created!"),D.refetch())}}),2),Q=K[0],$=K[1],J=D.loading||H.called&&H.loading||Y.called&&Y.loading||$.called&&$.loading;i.useEffect((function(){J||I(j&&F&&F.length>0?{runInfo:j,tests:F.map(Vi)}:void 0)}),[F,j,I,J]);var ee=(0,o.Z)(i.useState(!1),2),te=ee[0],ne=ee[1],re=(0,o.Z)(i.useState(!1),2),ie=re[0],oe=re[1],le=(0,o.Z)(i.useState(!1),2),se=le[0],ce=le[1],de=(0,o.Z)(i.useState(),2),ue=de[0],fe=de[1],pe="undefined"!==typeof ue&&"Repl"===(null===(l=D.data)||void 0===l?void 0:l.repl.__typename)&&D.data.repl.ioTests[ue]||void 0,me="Repl"===(null===(s=D.data)||void 0===s?void 0:s.repl.__typename)&&D.data.repl.isProject;if(D.error)return(0,r.BX)("div",{className:"jsx-fb1466c53ace89ca wrapper",children:[(0,r.tZ)(Gi.Z,{align:"center",children:"Unable to fetch tests"}),(0,r.tZ)(d(),{id:"fb1466c53ace89ca",children:".wrapper.jsx-fb1466c53ace89ca{padding:var(--deprecated-spacing-2);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}"})]});var ge=function(e){var t;if(void 0!==(null===(t=w[e])||void 0===t?void 0:t.status))return w[e].status===si.kQ.Passed?"Passed":"Failed"};return(0,r.BX)("div",{className:"jsx-69bed4444090144f tests-panel",children:[(0,r.tZ)("div",{className:"jsx-69bed4444090144f tests-header",children:(0,r.tZ)(O.Z,{level:4,children:"Input/Output Tests"})}),D.loading?(0,r.tZ)("div",{className:"jsx-69bed4444090144f spinner",children:(0,r.tZ)(he.Z,{})}):(0,r.BX)("div",{className:"jsx-69bed4444090144f tests",children:[(0,r.BX)("div",{className:"jsx-69bed4444090144f button-bar",children:[me&&(0,r.tZ)(ji.Z,{color:"green",Icon:Kr.Z,className:"create-test-button",disabled:J||R!==aa.Z.Idle,onClick:function(){fe(void 0),ne(!0)},children:"Create test"}),!me&&F&&0===F.length?(0,r.tZ)(Gi.Z,{children:"This project has no tests "}):(0,r.tZ)(ji.Z,{color:"positive",Icon:hi.Z,onClick:function(){var e;if(!L||"Repl"!==(null===X||void 0===X?void 0:X.__typename)||"Team"!==(null===(e=X.owner)||void 0===e?void 0:e.__typename)||h.state!==aa.Z.Idle){var t=new Error("no tests or run info");throw pi.Tb(t,(function(e){return e.setExtra("payload",L)})),t}k({}),(0,ut.j)(ut.U3.AUTOGRADER_STARTED),h.run(L).catch((function(e){pi.Tb(e,(function(e){return e.setExtra("payload",L)})),x(e.message)}))},disabled:J||R!==aa.Z.Idle||!L||S!==oa.e.CONNECTED,children:"Run tests"})]}),null===F||void 0===F?void 0:F.map((function(e,t){return(0,r.tZ)(Ji,{test:e,onEdit:function(){fe(t),ne(!0)},onDelete:function(){W({variables:{testId:e.id}})},onView:function(){fe(t),oe(!0),ce(!1)},onShowFailed:function(){fe(t),oe(!0),ce(!0)},isRunning:R!==aa.Z.Idle&&void 0!==w[e.id]&&void 0===w[e.id].status,isTeacherView:me,status:ge(e.id),disableButtons:J||R!==aa.Z.Idle},e.id)})),(0,r.tZ)($i,{test:pe,isOpen:te,readOnly:!me,onRequestClose:function(){ne(!1),fe(void 0)},onCancel:function(){ne(!1),fe(void 0)},onSubmit:function(e){var t,n,r,i;void 0!==e.testId?(q({variables:{input:e}}),fe(void 0)):"Repl"===(null===(t=D.data)||void 0===t||null===(n=t.repl)||void 0===n?void 0:n.__typename)&&(null===(r=D.data)||void 0===r||null===(i=r.repl)||void 0===i?void 0:i.template)&&Q({variables:{input:(0,Ft.Z)((0,ae.Z)({},e),{templateId:D.data.repl.template.id})}}),ne(!1)}}),(0,r.tZ)(ia,{test:pe,isOpen:ie,actualOutput:"undefined"!==typeof pe?null===(c=w[pe.id])||void 0===c?void 0:c.output:void 0,error:pe&&(null===(u=w[pe.id])||void 0===u?void 0:u.error),didFail:pe&&(null===(f=w[pe.id])||void 0===f?void 0:f.status)===si.kQ.Failed,isResults:se,onRequestClose:function(){oe(!1),fe(void 0)}})]}),(0,r.tZ)(d(),{id:"69bed4444090144f",children:".flex-grow.jsx-69bed4444090144f{-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1}.spacer-1.jsx-69bed4444090144f{padding:var(--space-4)}.tests-header.jsx-69bed4444090144f{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;position:relative;padding:var(--space-4)0 var(--space-8)0;margin-bottom:var(--space-8);color:var(--foreground-default);width:100%;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.button-bar.jsx-69bed4444090144f{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;-moz-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-bottom:var(--space-8)}.button-bar.jsx-69bed4444090144f>button{margin-right:var(--space-8);margin-bottom:var(--space-8)}.spinner.jsx-69bed4444090144f{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-moz-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);-o-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.tests-panel.jsx-69bed4444090144f{min-width:200px;background-color:var(--background-default);color:var(--foreground-default);overflow:hidden auto}.section.jsx-69bed4444090144f{height:-webkit-calc(100% - 50px);height:-moz-calc(100% - 50px);height:calc(100% - 50px)}"})]})};function sa(){var e=(0,o.Z)(i.useState(null),2),t=e[0],n=e[1],a=i.useRef(Qi.None),l=(0,ve.Z)(),s=(0,Si.Z)(),c=s.language,u=s.isLoading,f=(0,Yr.CH)({variables:{replId:l}}),p=f.loading;return i.useEffect((function(){var e,t,r=null===(e=f.data)||void 0===e?void 0:e.repl;if("Repl"===(null===r||void 0===r?void 0:r.__typename)){var i=r.unitTests,o=r.ioTests,l=Qi.Choose;l=o.length>0?Qi.IO:(null===i||void 0===i?void 0:i.tests)&&(null===(t=i.tests)||void 0===t?void 0:t.length)>0||(null===i||void 0===i?void 0:i.meta)?Qi.Unit:r.currentUserPermissions.writeTests?a.current!==Qi.None?a.current:Qi.Choose:Qi.None,n(l)}}),[f.data]),p||u?(0,r.BX)("div",{className:"jsx-1652fb32f8a812d3",children:[(0,r.tZ)(he.Z,{size:32}),(0,r.tZ)(d(),{id:"1652fb32f8a812d3",children:"div.jsx-1652fb32f8a812d3{height:100%;width:100%;background-color:var(--background-default);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}"})]}):(0,r.BX)("div",{className:"jsx-ba2c7540ad19d138 testing-controller",children:[t===Qi.None&&(0,r.tZ)("div",{className:"jsx-ba2c7540ad19d138 empty",children:(0,r.tZ)(Gi.Z,{children:"No tests found"})}),t===Qi.Choose&&(0,r.BX)(Li.gC,{align:"center",spacing:2,children:[(0,r.tZ)(O.Z,{align:"center",level:3,children:"Choose a testing method"}),(0,r.BX)("div",{onClick:function(){n(Qi.Unit),a.current=Qi.Unit},className:"jsx-ba2c7540ad19d138 "+(Ei()("panel",{"is-disabled":!c})||""),children:[(0,r.tZ)(O.Z,{level:4,children:"Unit tests"}),(0,r.tZ)(Gi.Z,{align:"center",children:c?"A language specific framework that tests individual functions":"Unit tests are not currently supported for this language"})]}),(0,r.tZ)("div",{onClick:function(){n(Qi.IO),a.current=Qi.IO},className:"jsx-ba2c7540ad19d138 panel",children:(0,r.BX)(Li.gC,{spacing:1,align:"center",children:[(0,r.tZ)(O.Z,{level:4,children:"Input output tests"}),(0,r.tZ)(Gi.Z,{align:"center",children:"Test your program via standard in, and assert based on the result of standard out"})]})})]}),t===Qi.IO&&(0,r.tZ)(la,{}),t===Qi.Unit&&(0,r.tZ)(zi,{onBack:function(){return n(Qi.Choose)}}),(0,r.tZ)(d(),{id:"ba2c7540ad19d138",children:".empty.jsx-ba2c7540ad19d138{padding:var(--space-16);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);-webkit-box-shadow:var(--shadow-2);-moz-box-shadow:var(--shadow-2);box-shadow:var(--shadow-2);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.testing-controller.jsx-ba2c7540ad19d138{overflow-y:auto;padding:var(--space-8);height:100%;width:100%;background-color:var(--background-default);-webkit-box-shadow:var(--shadow-1);-moz-box-shadow:var(--shadow-1);box-shadow:var(--shadow-1)}.panel.jsx-ba2c7540ad19d138{width:100%;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);border:1px solid var(--background-higher);max-width:200px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;padding:var(--space-8)}.panel.jsx-ba2c7540ad19d138:hover{background-color:var(--background-root)}.panel.is-disabled.jsx-ba2c7540ad19d138{opacity:.5;pointer-events:none}"})]})}!function(e){e[e.None=0]="None",e[e.Choose=1]="Choose",e[e.Unit=2]="Unit",e[e.IO=3]="IO"}(Qi||(Qi={}));var ca={Content:function(){return(0,r.tZ)(sa,{})},Icon:function(e){var t=e.size;return(0,r.tZ)(qr.Z,{size:t})},getTitle:function(){return"Autograder"}},da=n(50319);function ua(){var e=(0,oe.Z)(["\n  fragment EducationPaneRepl on Repl {\n    id\n    title\n    url\n    timeCreated\n    slug\n  }\n"]);return ua=function(){return e},e}function fa(){var e=(0,oe.Z)(["\n  fragment EducationPaneTemplate on ReplTemplate {\n    id\n    dueDate\n    repl {\n      id\n      ...EducationPaneRepl\n    }\n  }\n  ","\n"]);return fa=function(){return e},e}function pa(){var e=(0,oe.Z)(["\n  fragment EducationPaneUser on User {\n    id\n    username\n    firstName\n    lastName\n    fullName\n    image\n  }\n"]);return pa=function(){return e},e}function ha(){var e=(0,oe.Z)(["\n  fragment EducationPaneReplSubmission on ReplSubmission {\n    id\n    timeSubmitted\n    timeLastReviewed\n    author {\n      id\n      ...EducationPaneUser\n    }\n    repl {\n      id\n      ...EducationPaneRepl\n    }\n    isGroupSubmission\n    submissionGroup {\n      users {\n        id\n        ...EducationPaneUser\n      }\n    }\n  }\n  ","\n  ","\n"]);return ha=function(){return e},e}function ma(){var e=(0,oe.Z)(["\n  fragment EducationPaneTemplateWithSubmissions on ReplTemplate {\n    id\n    ...EducationPaneTemplate\n    submissions {\n      id\n      ...EducationPaneReplSubmission\n    }\n  }\n  ","\n  ","\n"]);return ma=function(){return e},e}function va(){var e=(0,oe.Z)(['\n  fragment EducationPaneTeam on Team {\n    id\n    templates {\n      id\n      ...EducationPaneTemplate\n    }\n    username\n    displayName\n    image\n    students: members(permissions: "member") {\n      id\n      permissions\n      nickname\n      user {\n        id\n        ...EducationPaneUser\n      }\n    }\n  }\n  ',"\n  ","\n"]);return va=function(){return e},e}function ga(){var e=(0,oe.Z)(["\n  fragment EducationPaneReplAttachment on ReplAttachment {\n    id\n    fileName\n    mimeType\n    contents\n    timeCreated\n    timeUpdated\n  }\n"]);return ga=function(){return e},e}function ba(){var e=(0,oe.Z)(["\n  query EducationPane($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isProject\n        isProjectFork\n        ...EducationPaneRepl\n        owner {\n          ... on Team {\n            id\n            ...EducationPaneTeam\n          }\n        }\n        template {\n          id\n          ...EducationPaneTemplateWithSubmissions\n        }\n        submission {\n          id\n          ...EducationPaneReplSubmission\n        }\n        attachments {\n          id\n          ...EducationPaneReplAttachment\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return ba=function(){return e},e}function xa(){var e=(0,oe.Z)(["\n  mutation EducationPaneUploadReplAttachment(\n    $input: UploadReplAttachmentInput!\n  ) {\n    uploadReplAttachment(input: $input) {\n      ... on Repl {\n        id\n        attachments {\n          id\n          ...EducationPaneReplAttachment\n        }\n      }\n    }\n  }\n  ","\n"]);return xa=function(){return e},e}function Za(){var e=(0,oe.Z)(["\n  mutation MarkSubmissionReviewed($replId: String!, $status: Boolean!) {\n    reviewRepl(replId: $replId, status: $status) {\n      ... on UserError {\n        message\n      }\n      ... on Repl {\n        id\n        submission {\n          id\n          timeLastReviewed\n        }\n      }\n    }\n  }\n"]);return Za=function(){return e},e}function ya(){var e=(0,oe.Z)(["\n  mutation UnsubmitSubmission($replId: String!) {\n    unsubmitRepl(replId: $replId) {\n      ... on UserError {\n        message\n      }\n      ... on Repl {\n        id\n        submission {\n          id\n          timeSubmitted\n          timeLastReviewed\n        }\n      }\n    }\n  }\n"]);return ya=function(){return e},e}var wa={},ka=(0,le.Ps)(ua()),Ca=(0,le.Ps)(fa(),ka),ja=(0,le.Ps)(pa()),_a=(0,le.Ps)(ha(),ja,ka),Ta=(0,le.Ps)(ma(),Ca,_a),Sa=(0,le.Ps)(va(),Ca,ja),za=(0,le.Ps)(ga()),Ba=(0,le.Ps)(ba(),ka,Sa,Ta,_a,za);var Ra=(0,le.Ps)(xa(),za);var Ea=(0,le.Ps)(Za());var Ga=(0,le.Ps)(ya());var La,Ia=n(75301),Na=n(14994),Aa=n(96594),Da=function(){return(0,r.BX)(p.G7,{title:"late",css:[p.l0.fontSize("small"),p.l0.px(4),p.l0.borderRadius(4),p.l0.color.accentNegativeDefault,{border:"1px solid",borderColor:p.TV.accentNegativeDefault}],children:["late",(0,r.tZ)(d(),{id:"4b00beb7f87eecca",children:"span.jsx-4b00beb7f87eecca{color:var(--accent-negative-default)}"})]})},Xa=n(96084),Pa=n(64184),Ma=n(48869),Fa=p.KD.a,Oa=p.KD.div;function Ua(e){var t=La.NotStarted,n=La.Started,r=La.Submitted,i=La.Reviewed;switch(e){case t:return"Not Started";case n:return"Not submitted yet";case r:return"Submitted (waiting for review)";case i:return"Reviewed";default:return""}}function Wa(e){return e?e.timeSubmitted||e.timeLastReviewed?e.timeSubmitted&&!e.timeLastReviewed?La.Submitted:!e.timeSubmitted&&e.timeLastReviewed?La.Reviewed:e.timeSubmitted&&e.timeLastReviewed?new Date(e.timeSubmitted)>new Date(e.timeLastReviewed)?La.Submitted:La.Reviewed:void 0:La.Started:La.NotStarted}!function(e){e.NotStarted="not-started",e.Started="started",e.Submitted="submitted",e.Reviewed="reviewed"}(La||(La={}));var Ha,Va=function(e,t){var n=e.indexOf("?"),r=new URLSearchParams(-1===n?"":e.slice(n));r.append("submissionReview","true");var i=-1===n?e:e.slice(0,n);return t?"".concat(i,"?").concat(r.toString(),"#").concat(t):"".concat(i,"?").concat(r.toString())},qa=(Ha={},(0,a.Z)(Ha,La.Started,p.TV.blueDefault),(0,a.Z)(Ha,La.NotStarted,p.TV.foregroundDimmest),(0,a.Z)(Ha,La.Reviewed,p.TV.greenDefault),(0,a.Z)(Ha,La.Submitted,p.TV.yellowDefault),Ha);function Ya(e){var t=e.status,n=e.highlighted?p.TV.foregroundDefault:qa[t];return(0,r.tZ)(p.u,{tooltip:Ua(t),placement:"right",children:(0,r.BX)(p.G7,{children:[t===La.Submitted?(0,r.tZ)(Xa.Z,{color:n}):null,t===La.Reviewed?(0,r.tZ)(qr.Z,{color:n}):null,t===La.Started?(0,r.tZ)(Na.Z,{color:n}):null,t===La.NotStarted?(0,r.tZ)(Pa.Z,{color:n}):null]})})}function Ka(e){var t=e.result,n=e.highlighted,i=e.current,a=e.isLate,o=(0,k.Z)(),l=!i&&t.url?Va(t.url,o):"",s=(0,r.BX)(p.G7,{css:[p.l0.p(8),p.l0.rowWithGap(8),p.l0.justify.spaceBetween,p.l0.align.center,t.status===La.NotStarted&&{opacity:n?1:.4},n&&{backgroundColor:p.gU.listItem[":not([disabled])"][":not(textarea):active"].backgroundColor},i&&{backgroundColor:p.TV.accentPrimaryDimmer,color:p.TV.foregroundDefault}],children:[(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4),p.l0.align.center,p.l0.flex.growAndShrink(1)],children:[(0,r.tZ)(p.qE,{size:24,username:t.name,src:t.image}),(0,r.tZ)(p.xv,{css:p.l0.flex.growAndShrink(1),children:t.name}),a?(0,r.tZ)(Da,{}):null]}),t.status?(0,r.tZ)(Ya,{status:t.status,highlighted:n||i}):null]});return l?(0,r.tZ)(Fa,{href:l,style:{color:"inherit"},children:s}):s}var Qa=function(e){var t=e.team,n=e.submission,a=e.submissionList,l=e.template,s=(0,o.Z)(i.useState([]),2),c=s[0],d=s[1],u=(0,o.Z)(i.useState(""),2),f=u[0],h=u[1],m=(0,Aa.Kb)({items:c,defaultHighlightedIndex:0}),v=m.isOpen,g=m.getComboboxProps,b=m.getInputProps,x=m.getMenuProps,Z=m.getItemProps,y=m.getToggleButtonProps,w=m.highlightedIndex,k=m.openMenu,C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(n.isGroupSubmission){var r=a;0!==e.length&&(r=r.filter((function(t){var n;return null===(n=t.submissionGroup)||void 0===n?void 0:n.users.some((function(t){var n;return null===(n=(null===t||void 0===t?void 0:t.fullName)||(null===t||void 0===t?void 0:t.username))||void 0===n?void 0:n.toLocaleLowerCase().includes(e.toLocaleLowerCase())}))})));var i=r.map((function(e){var t,n,r,i,a=(null===e||void 0===e||null===(t=e.submissionGroup)||void 0===t?void 0:t.users.map((function(e){return(null===e||void 0===e?void 0:e.fullName)||(null===e||void 0===e?void 0:e.username)||""})).join(", "))||"";return{image:(null===(r=null===e||void 0===e||null===(n=e.submissionGroup)||void 0===n?void 0:n.users[0])||void 0===r?void 0:r.image)||"",name:a,url:null===(i=e.repl)||void 0===i?void 0:i.url,status:Wa(e),submissionId:e.id,timeSubmitted:null===e||void 0===e?void 0:e.timeSubmitted}}));d((0,re.Z)(i))}else{var o=t.students;o=0===e.length?o.filter((function(e){return e.user})).sort((function(e,t){var n,r,i,a;return(e.nickname||(null===(n=e.user)||void 0===n?void 0:n.fullName)||(null===(r=e.user)||void 0===r?void 0:r.username)||"").localeCompare(t.nickname||(null===(i=t.user)||void 0===i?void 0:i.fullName)||(null===(a=t.user)||void 0===a?void 0:a.username)||"")})):o.filter((function(t){var n,r,i;return null===(i=t.nickname||(null===(n=t.user)||void 0===n?void 0:n.fullName)||(null===(r=t.user)||void 0===r?void 0:r.username))||void 0===i?void 0:i.toLocaleLowerCase().includes(e.toLocaleLowerCase())}));var l=o.map((function(e){var t,n,r,i,o=a.find((function(t){var n,r;return(null===(n=t.author)||void 0===n?void 0:n.id)===(null===(r=e.user)||void 0===r?void 0:r.id)}));return{image:(null===(t=e.user)||void 0===t?void 0:t.image)||"",name:e.nickname||(null===(n=e.user)||void 0===n?void 0:n.fullName)||(null===(r=e.user)||void 0===r?void 0:r.username)||"",url:null===o||void 0===o||null===(i=o.repl)||void 0===i?void 0:i.url,status:Wa(o),submissionId:null===o||void 0===o?void 0:o.id,timeSubmitted:null===o||void 0===o?void 0:o.timeSubmitted}}));d((0,re.Z)(l))}};return(0,r.BX)(p.G7,{css:[p.l0.position.relative,{zIndex:2}],children:[(0,r.BX)(Oa,(0,Ft.Z)((0,ae.Z)({css:[p.l0.position.relative]},g()),{children:[(0,r.tZ)(p.II,(0,ae.Z)({},b({value:f,placeholder:"Switch submission",onKeyDown:function(e){"Escape"===e.key&&d([])},onChange:function(e){var t=e.target.value;C(t),h(t)},onFocus:function(){C(),k()}}))),(0,r.tZ)(p.G7,{css:[p.l0.position.absolute,p.l0.top(0),p.l0.right(0),p.l0.height("100%"),p.l0.center],children:f?(0,r.tZ)(p.G7,{css:[p.l0.reset.button,p.l0.cursor.pointer,p.l0.px(8)],onClick:function(){return h("")},tag:"button",children:(0,r.tZ)(di.Z,{})}):(0,r.tZ)(p.G7,(0,Ft.Z)((0,ae.Z)({css:[p.l0.reset.button,p.l0.cursor.pointer,p.l0.px(8)]},y({refKey:"innerRef"})),{tag:"button",children:(0,r.tZ)(Ma.Z,{})}))})]})),(0,r.tZ)(p.Tg,(0,Ft.Z)((0,ae.Z)({tag:"ul",elevated:!0,css:[{zIndex:1,position:"absolute",overflowY:"auto",width:"100%",left:0,top:"calc(100% + ".concat(p.TV.space8,")"),border:"1px solid",borderColor:p.TV.outlineDimmest,listStyle:"none"},!v&&{visibility:"hidden"},p.l0.borderRadius(8),p.l0.maxHeight(400)]},x({refKey:"innerRef"})),{children:c.map((function(e,t){var i=e.submissionId===n.id,a=!e.url;return(0,r.tZ)(p.G7,(0,Ft.Z)((0,ae.Z)({tag:"li",css:[!a&&p.l0.cursor.pointer]},Z({index:t,item:e,refKey:"innerRef",disabled:a,onClick:function(e){e.nativeEvent.preventDownshiftDefault=!0}})),{children:(0,r.tZ)(Ka,{result:e,highlighted:w===t,current:i,isLate:l.dueDate&&e.timeSubmitted&&l.dueDate<e.timeSubmitted})}),e.name)}))}))]})},$a=n(17847),Ja=n(67177),eo=function(e){return{short:(0,$a.Z)(e,"do MMM"),long:(0,$a.Z)(e,"do MMM, hh:mm a")}},to=function(e,t){var n=e.students.find((function(e){var n;return(null===(n=e.user)||void 0===n?void 0:n.id)===(null===t||void 0===t?void 0:t.id)}));return(null===n||void 0===n?void 0:n.nickname)||(null===t||void 0===t?void 0:t.fullName)||"@".concat(null===t||void 0===t?void 0:t.username)};function no(e){var t=e.submission,n=e.submissionList,i=(0,k.Z)(),a=n.findIndex((function(e){return e.id===t.id})),o=n[a-1],l=n[a+1],s=n.filter((function(e){return e.timeLastReviewed})).length;return(0,r.BX)(p.G7,{css:p.l0.rowWithGap(8),children:[n.length===s?(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4),p.l0.flex.growAndShrink(1)],children:[(0,r.tZ)(qr.Z,{color:p.TV.greenDefault}),(0,r.BX)(p.xv,{color:"dimmer",css:[p.l0.flex.growAndShrink(1)],children:["All ",s," submissions reviewed"]})]}):(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(8),p.l0.flex.growAndShrink(1),p.l0.align.center],children:[(0,r.tZ)(p.u,{tooltip:"Reviewed",children:(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4),p.l0.align.center],children:[(0,r.tZ)(qr.Z,{color:p.TV.greenDefault}),(0,r.tZ)(p.xv,{color:"dimmer",children:s})]})}),(0,r.tZ)(p.u,{tooltip:"Waiting for review",children:(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4),p.l0.align.center],children:[(0,r.tZ)(Xa.Z,{size:12,color:p.TV.yellowDefault}),(0,r.tZ)(p.xv,{variant:"small",color:"dimmer",children:n.length-s})]})})]}),(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4)],children:[(null===o||void 0===o?void 0:o.repl)?(0,r.tZ)(p.ZP,{small:!0,outlined:!0,href:Va(o.repl.url,i),text:"",iconLeft:(0,r.tZ)(Bn.Z,{})}):(0,r.tZ)(p.zx,{small:!0,outlined:!0,text:"",disabled:!0,iconLeft:(0,r.tZ)(Bn.Z,{})}),(null===l||void 0===l?void 0:l.repl)?(0,r.tZ)(p.ZP,{small:!0,outlined:!0,href:Va(l.repl.url,i),text:"",iconRight:(0,r.tZ)(Rn.Z,{})}):(0,r.tZ)(p.zx,{small:!0,outlined:!0,text:"",disabled:!0,iconRight:(0,r.tZ)(Rn.Z,{})})]})]})}function ro(e){var t,n=e.submission,i=e.dueDate,a=e.repl,o=e.team,l=Boolean(i&&i<n.timeSubmitted);return(0,r.BX)(p.Tg,{css:[p.l0.colWithGap(16),p.l0.p(16),p.l0.borderRadius(8)],elevated:!0,children:[n.isGroupSubmission&&n.submissionGroup?(0,r.tZ)(p.G7,{css:[p.l0.colWithGap(8),p.l0.maxHeight(400),p.l0.overflow("auto")],children:n.submissionGroup.users.map((function(e){var t;return(0,r.tZ)(p.G7,{children:(0,r.tZ)(p.n5,{src:(null===(t=n.author)||void 0===t?void 0:t.image)||null,username:to(o,n.author)})},null===e||void 0===e?void 0:e.id)}))}):(0,r.tZ)(r.HY,{children:(0,r.tZ)(p.n5,{src:(null===(t=n.author)||void 0===t?void 0:t.image)||null,username:to(o,n.author)})}),n.timeSubmitted?(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8)],children:[(0,r.tZ)(p.G7,{css:[p.l0.colWithGap(4)],children:(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4),p.l0.align.center],children:[(0,r.tZ)(qr.Z,{}),(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4),p.l0.align.center],children:[(0,r.tZ)(p.xv,{css:[p.l0.flex.growAndShrink(1)],children:"Submitted"}),l?(0,r.tZ)(Da,{}):null,n.timeLastReviewed?null:(0,r.tZ)(p.xv,{variant:"small",color:"dimmer",css:[p.l0.flex.growAndShrink(1)],children:"(waiting for review)"})]})]})}),(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4)],children:[(0,r.tZ)(Na.Z,{}),(0,r.tZ)(p.xv,{children:eo(new Date(n.timeSubmitted)).long})]})]}):(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8)],children:[(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4),p.l0.align.center],children:[(0,r.tZ)(Na.Z,{}),(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4),p.l0.align.center],children:[(0,r.tZ)(p.xv,{css:[p.l0.flex.growAndShrink(1)],children:"In progress"}),(0,r.tZ)(p.xv,{variant:"small",color:"dimmer",css:[p.l0.flex.growAndShrink(1)],children:"(not submitted)"})]})]}),n.repl?(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4)],children:[(0,r.tZ)(Ia.Z,{}),(0,r.BX)(p.xv,{children:["Forked"," ",eo(new Date(n.repl.timeCreated)).short]})]}):(0,r.tZ)(p.xv,{children:"Submission repl missing"})]}),(0,r.tZ)(p.ZP,{small:!0,target:"_blank",iconLeft:(0,r.tZ)(Ot.Z,{}),href:"".concat(a.url,"/history"),text:"See Repl history",css:{alignSelf:"start"}})]})}function io(e){var t=e.repl,n=e.submission,i=(0,Sn.H)(),a=(0,dt.Z)().showError,l=(0,o.Z)(function(e){var t=(0,ae.Z)({},wa,e);return da.D(Ea,t)}({onError:function(e){return a(e.message)},onCompleted:function(e){"UserError"===e.reviewRepl.__typename&&a(e.reviewRepl.message)}}),2),s=l[0],c=l[1].loading,d=(0,o.Z)(function(e){var t=(0,ae.Z)({},wa,e);return da.D(Ga,t)}(),1)[0],u=Boolean(n.timeLastReviewed);return(0,r.BX)(p.G7,{css:p.l0.colWithGap(16),children:[(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,r.tZ)(p.XZ,{id:i("reviewed-status"),disabled:c,checked:u,onChange:function(){return e=!u,void s({variables:{replId:t.id,status:e},optimisticResponse:{reviewRepl:(0,Ft.Z)((0,ae.Z)({},t),{submission:(0,Ft.Z)((0,ae.Z)({},n),{timeLastReviewed:e?(new Date).toJSON():null})})}});var e}}),(0,r.tZ)("label",{htmlFor:i("reviewed-status"),children:u?"Reviewed":"Mark as reviewed"})]}),n.timeSubmitted&&(0,r.tZ)(p.zx,{css:{alignSelf:"start"},iconLeft:(0,r.tZ)(Ja.Z,{}),onClick:function(){d({variables:{replId:t.id},optimisticResponse:{unsubmitRepl:(0,Ft.Z)((0,ae.Z)({},t),{submission:(0,Ft.Z)((0,ae.Z)({},n),{timeLastReviewed:null})})}})},text:"Unsubmit",small:!0})]})}function ao(e){var t=e.repl,n=e.submission,i=e.team,a=e.template,o=a.submissions;return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(16),p.l0.flex.growAndShrink(1)],children:[(0,r.BX)(p.G7,{css:[p.l0.colWithGap(16),p.l0.flex.grow(1)],children:[(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8)],children:[(0,r.tZ)(no,{submission:n,submissionList:o}),(0,r.tZ)(Qa,{team:i,template:a,submission:n,submissionList:o})]}),(0,r.tZ)(ro,{team:i,repl:t,submission:n,dueDate:a.dueDate}),(0,r.tZ)(io,{repl:t,submission:n})]}),(0,r.tZ)(p.ZP,{css:[{alignSelf:"start"}],small:!0,href:"/team/".concat(i.username,"/templates/").concat(a.repl.slug),iconLeft:(0,r.tZ)(Bn.Z,{}),text:"Return to submissions"})]})}var oo,lo=n(61668),so=function(e){var t=e.fileName,n=e.docRef,a=e.initialContents,o=(0,Mn.Z)({filePath:t,fontSize:14,indentSize:4,indentIsSpaces:!0}),l=o.view,s=o.ref;return i.useEffect((function(){if(l){var e=Vn.tk.updateListener.of((function(e){n.current=e.state.doc}));l.dispatch({effects:Qn.Py.appendConfig.of(e)}),l.focus()}}),[l,n]),i.useEffect((function(){l&&(l.state.doc.length||l.dispatch({changes:{from:0,insert:a}}))}),[l,a]),(0,r.BX)("div",{className:"jsx-d59ba8968f57599c editable-area",children:[(0,r.tZ)("div",{className:"jsx-d59ba8968f57599c editor-wrapper",children:(0,r.tZ)("div",{className:"jsx-d59ba8968f57599c editor",children:(0,r.tZ)("div",{ref:s,className:"jsx-d59ba8968f57599c"})})}),(0,r.tZ)(d(),{id:"d59ba8968f57599c",children:".editable-area.jsx-d59ba8968f57599c{width:100%;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;border:1px solid var(--background-higher);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:var(--space-8)0}.editor-wrapper.jsx-d59ba8968f57599c{height:450px;padding-bottom:var(--space-8);-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;position:relative}.editor.jsx-d59ba8968f57599c{overflow:auto;position:absolute;width:100%;height:100%}.loader.jsx-d59ba8968f57599c{height:100%;width:100%;z-index:5}"})]})},co=function(e){var t=e.title,n=e.fileName,a=e.initialContents,o=e.isOpen,l=e.onSave,s=e.onCancel,c=i.useRef(null);return(0,r.BX)(Fr.Z,{maxWidth:872,isOpen:o,onRequestClose:function(){},preventClose:!0,children:[(0,r.tZ)("div",{className:"jsx-c68269737c22d0ec editor-modal",children:(0,r.BX)(Li.gC,{align:"stretch",spacing:2,children:[(0,r.BX)(O.Z,{level:3,children:["Edit ",t.toLowerCase()]}),(0,r.tZ)(so,{docRef:c,fileName:n,initialContents:a}),(0,r.tZ)(Li.Ug,{justify:"end",align:"end",children:(0,r.BX)(Li.Ug,{justify:"end",align:"end",spacing:1,children:[(0,r.tZ)(ji.Z,{onClick:function(){return s()},children:"Cancel"}),(0,r.tZ)(ji.Z,{color:"primary",onClick:function(){var e;return c.current&&l(null===(e=c.current)||void 0===e?void 0:e.toString())},children:"Save"})]})})]})}),(0,r.tZ)(d(),{id:"c68269737c22d0ec",children:".editor-modal.jsx-c68269737c22d0ec{padding:var(--space-16)}"})]})};!function(e){e.LessonPlan="lessonplan.md",e.Instructions="instructions.md"}(oo||(oo={}));var uo=n(34115),fo=n(2916),po=n(88652),ho=n(25108);function mo(e){var t=e.attachments;return(0,r.tZ)("div",{className:"manage-attachments",children:(0,r.BX)(Li.gC,{spacing:2,children:[(0,r.tZ)(vo,{attachment:t.find((function(e){return e.fileName===oo.LessonPlan})),fileName:oo.LessonPlan,label:"Lesson plan",helpText:"Upload teacher facing materials"}),(0,r.tZ)(vo,{attachment:t.find((function(e){return e.fileName===oo.Instructions})),fileName:oo.Instructions,label:"Instructions",helpText:"Upload student facing materials"})]})})}function vo(e){var t,n=e.attachment,a=e.fileName,l=e.label,s=e.helpText,c=(0,fo.Z)(),d=(0,dt.Z)(),u=d.showConfirm,f=d.showError,p=(0,o.Z)(function(e){var t=(0,ae.Z)({},wa,e);return da.D(Ra,t)}({onCompleted:function(){return u("Updated "+a)},onError:function(e){ho.log(e),f("Error")}}),2),h=p[0],m=p[1],v=i.useCallback(function(){var e=(0,Ne.Z)(De().mark((function e(t){return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c&&h({variables:{input:{replId:c.id,fileName:a,contents:t,lastModified:(new Date).toISOString()}}});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[c,a,h]);return c&&(t=a===oo.LessonPlan?(0,uo.G)({language:c.language}):(0,uo.K)({language:c.language})),(0,r.tZ)(go,{loading:!c||m.loading,fileName:a,contents:null===n||void 0===n?void 0:n.contents,defaultContents:t,label:l,helpText:s,attachmentLastUploadedAgo:n?(0,po.Sy)(new Date(n.timeUpdated)):void 0,onUploadFile:v})}function go(e){var t=e.loading,n=e.fileName,a=e.contents,l=e.defaultContents,s=e.label,c=e.helpText,u=e.attachmentLastUploadedAgo,f=e.onUploadFile,p=(0,o.Z)(i.useState(!1),2),h=p[0],m=p[1];return(0,r.BX)("div",{className:"jsx-5b5c01bd3abb3f44 attachment",children:[(0,r.tZ)(co,{title:s,fileName:n,isOpen:h,initialContents:a||l,onCancel:function(){return m(!1)},onSave:function(e){m(!1),f(e)}}),(0,r.BX)(Li.Ug,{justify:"space-between",align:"center",wrap:"nowrap",children:[(0,r.BX)(Li.gC,{spacing:1,children:[(0,r.BX)(Li.Ug,{align:"center",spacing:1,wrap:"nowrap",children:[(0,r.tZ)(Gi.Z,{fontWeight:"medium",children:s}),(0,r.tZ)(lo.Z,{label:c})]}),u&&(0,r.BX)(Gi.Z,{size:"xsmall",children:["Uploaded ",u]})]}),t?(0,r.tZ)(he.Z,{size:16}):(0,r.tZ)(ji.Z,{border:!1,filled:!1,Icon:Et.Z,onClick:(0,Ne.Z)(De().mark((function e(){return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(!0);case 1:case"end":return e.stop()}}),e)})))})]}),(0,r.tZ)(d(),{id:"5b5c01bd3abb3f44",children:".attachment.jsx-5b5c01bd3abb3f44{padding:var(--space-8);background-color:var(--background-root);-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);width:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}"})]})}function bo(e){var t=e.attachments;return(0,r.BX)("div",{className:"jsx-ea2ca64296d8f56a project-view-container",children:[(0,r.tZ)("div",{className:"jsx-ea2ca64296d8f56a project-view-contents",children:(0,r.tZ)(mo,{attachments:t})}),(0,r.tZ)("div",{className:"jsx-ea2ca64296d8f56a bottom-dock",children:(0,r.tZ)(Gi.Z,{size:"small",children:(0,r.tZ)("a",{href:"/curriculum",target:"_blank",className:"jsx-ea2ca64296d8f56a",children:"Find more curriculum on Curriculum Hub"})})}),(0,r.tZ)(d(),{id:"ea2ca64296d8f56a",children:".project-view-container.jsx-ea2ca64296d8f56a{padding-top:var(--space-32);max-width:400px;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.bottom-dock.jsx-ea2ca64296d8f56a{display:grid;grid-gap:var(--space-8);margin-top:auto}"})]})}function xo(){var e,t=function(e){var t=(0,ae.Z)({},wa,e);return se.a(Ba,t)}({variables:{replId:(0,ve.Z)()}}),n=t.data,i=t.loading,a=t.error;if(i)return(0,r.tZ)(p.G7,{css:[p.l0.center,p.l0.flex.growAndShrink(1)],children:(0,r.tZ)(he.Z,{size:24})});if(a)return(0,r.tZ)(p.G7,{css:p.l0.center,children:(0,r.tZ)(p.xv,{children:"Something went wrong"})});var o="Repl"===(null===n||void 0===n?void 0:n.repl.__typename)?n.repl:null,l="Team"===(null===o||void 0===o||null===(e=o.owner)||void 0===e?void 0:e.__typename)?o.owner:null,s=null===o||void 0===o?void 0:o.template;return o&&l&&s?(0,r.BX)(p.G7,{css:[p.l0.height("100%")],children:[(0,r.tZ)(p.xv,{css:[p.l0.p(8)],variant:"subheadBig",children:o.submission?"Submissions":"Curriculum"}),(0,r.tZ)(p.G7,{css:[p.l0.px(8),p.l0.pb(8),p.l0.flex.growAndShrink(1),p.l0.overflowY("auto")],children:o.submission?(0,r.tZ)(ao,{repl:o,team:l,template:s,submission:o.submission}):(0,r.tZ)(bo,{attachments:o.attachments})})]}):(0,r.tZ)(p.G7,{css:p.l0.center,children:(0,r.tZ)(p.xv,{children:"Something went wrong"})})}var Zo={Content:function(){return(0,r.tZ)(xo,{})},Icon:function(e){var t=e.size;return(0,r.tZ)(U.Z,{size:t})},getTitle:function(){return"Submissions"}},yo=n(92350),wo=n(96711),ko=n(25108),Co=".lesson/".concat("instructions.md"),jo=function(e){var t=e.contents,n=(0,v.Z)().fs,i=(0,wo.l)(n,Co);return(0,r.BX)("div",{className:d().dynamic([["4a2a9dfc904beede",[l.j.tabletMin]]])+" root",children:[(0,r.tZ)("div",{className:d().dynamic([["4a2a9dfc904beede",[l.j.tabletMin]]])+" content",children:(0,r.tZ)(yo.ZP,{components:{img:i},sourcePos:!0,children:t})}),(0,r.tZ)(d(),{id:"4a2a9dfc904beede",dynamic:[l.j.tabletMin],children:".root.__jsx-style-dynamic-selector{height:100%;width:100%;overflow:auto;background:var(--background-default);z-index:2;position:relative}.content.__jsx-style-dynamic-selector{max-width:840px;margin:0 auto;padding:var(--space-32)var(--space-16)}@media only screen and (min-width:".concat(l.j.tabletMin,"px){.content.__jsx-style-dynamic-selector{padding:var(--space-48)var(--space-32)}}")})]})},_o=function(){var e=(0,ve.Z)(),t=(0,v.Z)().fs,n=(0,Fe.Z)(),a=(0,o.Z)(i.useState(null),2),l=a[0],s=a[1];return i.useEffect((function(){t.readFile(Co).then((function(e){if(n.current)return e.error?(ko.error(e.error),void pi.$e((function(t){t.setTag("instructions-viewer",!0),pi.Tb("Error loading instructions viewier: ".concat(e.error))}))):void s(e.content.toString())}))}),[t,n,e]),l?(0,r.tZ)(jo,{contents:l}):(0,r.tZ)(h,{preventHighlightBorder:!0})},To={Content:function(){return(0,r.tZ)(_o,{})},Icon:function(e){var t=e.size;return(0,r.tZ)(U.Z,{size:t})},getTitle:function(){return"Instructions"}},So=n(54774),zo=n(72466),Bo={Content:function(){return(0,r.tZ)(Ro,{})},Icon:function(){return(0,r.tZ)(So.Z,{})},getTitle:function(){return"Kaboom"}};function Ro(){var e=(0,v.Z)().session;return(0,r.tZ)(zo.Z,{onFileOpen:function(t){e.openFile(t)}})}function Eo(){var e=(0,oe.Z)(["\n  fragment AdminPanelRepl on Repl {\n    id\n    title\n    description\n    isProject\n    isPrivate\n    timeCreated\n    timeUpdated\n    origin {\n      id\n    }\n    slug\n    url\n    language\n    user {\n      id\n    }\n    config {\n      isServer\n      isVnc\n    }\n    isRenamed\n    isProjectFork\n    folderId\n    isOwner\n  }\n"]);return Eo=function(){return e},e}function Go(){var e=(0,oe.Z)(["\n  query AdminPanelReplView($replId: String!) {\n    repl(id: $replId) {\n      ...AdminPanelRepl\n    }\n  }\n  ","\n"]);return Go=function(){return e},e}var Lo={},Io=(0,le.Ps)(Eo()),No=(0,le.Ps)(Go(),Io);var Ao=n(81255),Do=n(69346),Xo=n(1144),Po=n(97648),Mo=n(29163),Fo=n(8527),Oo=n(78244),Uo=n(97992),Wo=n(60864),Ho=n(89596),Vo=n(15335),qo=n(35642),Yo=n(59077),Ko=n(6148),Qo=n(74454),$o=n(45435);var Jo=i.memo((function(e){var t=e.log,n=e.timeRef,i=e.setTimeRef,a=JSON.stringify(t.cmd,null,2),o=n?t.timestamp-n:t.timestamp;return(0,r.BX)("div",{className:"jsx-f9f1d3880ce11273 "+("log "+(t.highlighted?"highlighted ":"")+("in"===t.dir?"in":"")||0),children:[(0,r.BX)("div",{className:"jsx-f9f1d3880ce11273 direction",children:[(0,r.tZ)("div",{className:"jsx-f9f1d3880ce11273",children:t.dir}),(0,r.tZ)("div",{className:"jsx-f9f1d3880ce11273",children:"in"===t.dir?"\u25b6\ufe0f":"\u2b05\ufe0f"}),(0,r.tZ)("div",{className:"jsx-f9f1d3880ce11273",children:(0,r.tZ)(p.zx,{small:!0,colorway:"positive",onClick:function(){return i(t.timestamp)},text:o.toFixed(0)+"ms"})})]}),(0,r.tZ)("pre",{className:"jsx-f9f1d3880ce11273",children:a}),(0,r.tZ)(d(),{id:"f9f1d3880ce11273",children:".log.jsx-f9f1d3880ce11273{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;color:deepskyblue;border:1px solid;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.in.jsx-f9f1d3880ce11273{color:red}.highlighted.jsx-f9f1d3880ce11273{background:yellow}.direction.jsx-f9f1d3880ce11273{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;-moz-box-pack:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;text-align:center;min-width:30px;border-right:1px solid}.direction.jsx-f9f1d3880ce11273>div.jsx-f9f1d3880ce11273:not(:last-child){border-bottom:1px solid;width:100%}"})]},t.index)}),(function(e,t){return e.log.index===t.log.index&&e.log.highlighted===t.log.highlighted&&e.timeRef===t.timeRef})),el=function(e){var t=e.logs,n=e.timeRef,i=e.setTimeRef;return(0,r.BX)("div",{className:"jsx-ded4128a88e9355f log-list",children:[t.map((function(e){return(0,r.tZ)(Jo,{log:e,timeRef:n,setTimeRef:i},e.index)})),(0,r.tZ)("div",{className:"jsx-ded4128a88e9355f bottom-anchor"}),(0,r.tZ)(d(),{id:"ded4128a88e9355f",children:".log-list.jsx-ded4128a88e9355f{overflow:auto;height:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.log-list.jsx-ded4128a88e9355f *.jsx-ded4128a88e9355f{overflow-anchor:none}.bottom-anchor.jsx-ded4128a88e9355f{overflow-anchor:auto!important;min-height:1px}"})]})};function tl(e){return"in"===e||"out"===e||""===e}var nl,rl,il=function(e){var t=e.filters,n=e.updateFilters;return(0,r.BX)(p.G7,{css:p.l0.colWithGap(4),children:[(0,r.tZ)(p.xv,{variant:"subheadDefault",children:"Regex (regex,flags):"}),(0,r.tZ)(p.II,{id:"regex",onChange:function(e){var t=null;if(e.currentTarget.value){var r=(0,o.Z)(e.currentTarget.value.split(","),2),i=r[0],a=r[1];try{t=new RegExp(i,a)}catch(l){}}n({regexp:t})},placeholder:"\\w+,gi"}),(0,r.tZ)(p.xv,{variant:"subheadDefault",children:"Directions:"}),(0,r.tZ)(p.Ee,{css:p.l0.rowWithGap(16),name:"direction",value:t.direction,onChange:function(e){var t=e.target.value;n({direction:tl(t)?t:""})},children:[{val:"",text:"Both"},{val:"in",text:"In"},{val:"out",text:"Out"}].map((function(e){return(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(8)],children:[(0,r.tZ)(p.Y8,{id:e.val,value:e.val}),(0,r.tZ)("label",{htmlFor:e.val,children:e.text})]},e.val)}))}),(0,r.tZ)(p.xv,{variant:"subheadDefault",children:"Filter style:"}),(0,r.tZ)(p.Ee,{css:p.l0.rowWithGap(16),name:"filter-style",value:t.highlightOnly?"highlight":"filter",onChange:function(e){return n({highlightOnly:"highlight"===e.target.value})},children:[{val:"highlight",text:"Highlight"},{val:"filter",text:"Filter"}].map((function(e){return(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(8)],children:[(0,r.tZ)(p.Y8,{id:e.val,value:e.val}),(0,r.tZ)("label",{htmlFor:e.val,children:e.text})]},e.val)}))})]})};function al(e){var t=e.t,n=e.children;return(0,r.BX)("span",{css:{display:"flex",alignItems:"center",columnGap:"0.5rem"},children:[(0,r.BX)(p.xv,{children:[t,": "]}),(0,r.tZ)("span",{children:n})]})}function ol(e){var t=e.t,n=e.op;return n?(0,r.BX)(p.G7,{children:[(0,r.tZ)(p.h4,{level:1,children:t}),(0,r.tZ)(p.Tg,{elevated:!0,css:[p.l0.borderRadius(4)],children:(0,r.tZ)("pre",{css:[p.l0.py(12),p.l0.px(16),{overflowY:"auto",fontSize:"12px"}],children:(0,r.tZ)("code",{css:p.l0.font.code,children:sl(n.op)})})})]}):null}function ll(e){return e.replaceAll("\n","\\n").replaceAll("\r","\\r").replaceAll("\t","\\t")}function sl(e){var t=0,n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var l=a.value,s=1;"string"===typeof l&&(s=l.length),"number"===typeof l&&(s=l),"object"===typeof l&&(s=l.d);var c=String(s).length;c>t&&(t=c)}}catch(x){r=!0,i=x}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}var d="",u=!0,f=!1,p=void 0;try{for(var h,m=e[Symbol.iterator]();!(u=(h=m.next()).done);u=!0){var v=h.value;if(""!==d&&(d+="\n"),"string"===typeof v){var g=String(v.length).padEnd(t);d+="ins: ".concat(g,' "').concat(ll(v),'"')}if("number"===typeof v&&(d+="skp: ".concat(v)),"object"===typeof v){var b=String(v.d).padEnd(t);d+="del: ".concat(b)}}}catch(x){f=!0,p=x}finally{try{u||null==m.return||m.return()}finally{if(f)throw p}}return d}!function(e){e.Repl="repl",e.Logs="logs",e.LSP="lsp",e.AI="ai",e.AST="ast",e.History2="history2",e.Metadata="metadata",e.Override="override"}(nl||(nl={}));var cl=(rl={},(0,a.Z)(rl,nl.Repl,(function(){var e,t,n=(0,ve.Z)(),i=function(e){var t=(0,ae.Z)({},Lo,e);return se.a(No,t)}({variables:{replId:n}}).data,a="Repl"===(null===i||void 0===i?void 0:i.repl.__typename)?JSON.parse(JSON.stringify(i.repl)):void 0;a&&(delete a.__typename,null===(e=a.user)||void 0===e||delete e.__typename,null===(t=a.origin)||void 0===t||delete t.__typename,delete a.config.__typename);return(0,r.BX)(Do.Z,{css:[Ao.l0.colWithGap(16),Ao.l0.p(4)],children:[(0,r.BX)(Do.Z,{css:Ao.l0.rowWithGap(2),children:[(0,r.BX)(Xo.x,{children:["Repl ID: ",(0,r.tZ)(Po.Z,{children:n})]}),(0,r.tZ)(Mo.Z,{alt:"Copy to clipboard",onClick:function(){return(0,me.Z)(n)},children:(0,r.tZ)(Fo.Z,{})})]}),(0,r.tZ)("div",{className:"jsx-3187c500f6b377b0",children:a&&(0,r.tZ)(Oo.C,{json:a})}),(0,r.tZ)(d(),{id:"3187c500f6b377b0",children:"pre.jsx-3187c500f6b377b0{white-space:pre-wrap;word-wrap:break-word}"})]})})),(0,a.Z)(rl,nl.Logs,(function(){var e=(0,o.Z)((0,Qo.Z)(!1),2),t=e[0],n=e[1],a=(0,i.useState)(null),l=a[0],s=a[1],c=(0,Ut.Dv)($o.Sj),d=(0,o.Z)((0,Ut.KO)($o.a0),2),u=d[0],f=d[1],h=(0,o.Z)((0,Ut.KO)($o.ot),2),m=h[0],v=h[1],g=(0,Ut.b9)($o.UB);return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8)],children:[(0,r.BX)(p.G7,{css:[p.l0.colWithGap(8),p.l0.position.sticky,p.l0.top(0),p.l0.px(4),p.l0.pb(8),p.l0.backgroundColor.backgroundDefault],children:[(0,r.tZ)(p.zx,{colorway:u?void 0:"positive",onClick:function(){f((function(e){return!e}))},text:u?"Stop logging goval":"Start logging goval"}),(0,r.BX)(p.G7,{css:[p.l0.rowWithGap(4),p.l0.justify.spaceBetween],children:[(0,r.tZ)(p.zx,{onClick:n,text:t?"Hide filters":"Show filters"}),l&&(0,r.tZ)(p.zx,{onClick:function(){return s(null)},text:"Reset Time Ref"}),(0,r.tZ)(p.hU,{alt:"Download as JSON",onClick:function(){var e="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(c)),t=document.createElement("a");t.setAttribute("href",e);var n=(new Date).toISOString();t.setAttribute("download","logs-".concat(n.slice(0,n.indexOf(".")).replaceAll("-","").replaceAll(":",""),".json")),t.click()},size:32,children:(0,r.tZ)(Ko.Z,{})}),(0,r.tZ)(p.zx,{colorway:"negative",onClick:function(){return g()},text:"Clear logs"})]}),t?(0,r.tZ)(il,{filters:m,updateFilters:function(e){v((0,ae.Z)({},m,e))}}):null]}),(0,r.tZ)(p.G7,{css:[p.l0.flex.growAndShrink(1),p.l0.overflow("auto"),p.l0.height("100%")],children:(0,r.tZ)(el,{logs:c,timeRef:l,setTimeRef:s})})]})})),(0,a.Z)(rl,nl.LSP,Uo.L),(0,a.Z)(rl,nl.AI,Wo.h),(0,a.Z)(rl,nl.AST,On.Z),(0,a.Z)(rl,nl.History2,(function(){var e=(0,D.Z)(Wt.BI)();if(!e)return null;var t=e.filePath,n=e.ops,i=e.users,a=e.version,o=e.playing,l=e.count,s=n[a],c=i[s.userId],d=s.timestamp,u=n[a-1],f=n[a+1];return(0,r.BX)(p.G7,{css:[p.l0.colWithGap(16),p.l0.p(4)],children:[(0,r.BX)(p.G7,{css:[p.l0.colWithGap(4)],children:[(0,r.tZ)(al,{t:"File",children:t}),(0,r.BX)(al,{t:"Version",children:[a," / ",l-1]}),(0,r.tZ)(al,{t:"Playing",children:o?"true":"false"}),(0,r.tZ)(al,{t:"Date",children:(0,r.tZ)(p.EK,{date:d})})]}),c&&(0,r.BX)(p.G7,{children:[(0,r.tZ)(al,{t:"Author",children:c.username}),(0,r.BX)(p.G7,{css:[p.l0.pl(8),p.l0.colWithGap(4)],children:[(0,r.tZ)(al,{t:"ID",children:c.id}),(0,r.tZ)(al,{t:"Name",children:c.username}),(0,r.tZ)(al,{t:"Image",children:c.image})]})]}),(0,r.tZ)("hr",{}),(0,r.tZ)(ol,{t:"Current Operation",op:s}),(0,r.tZ)(ol,{t:"Previous Operation",op:u}),(0,r.tZ)(ol,{t:"Next Operation",op:f})]})})),(0,a.Z)(rl,nl.Metadata,(function(){var e=(0,v.Z)().container;(0,Vo.Z)();var t=e.getConnectionMetadata();if(!t)return(0,r.tZ)("div",{children:"no token yet, wait for connection"});var n=t.token,i=new URL(t.conmanURL).host,a='./conman-repl -t "'.concat(n,'" -u ').concat(i);return(0,r.BX)("div",{className:"jsx-2e9ac5ab034fc317 token-viewer",children:[(0,r.BX)(Do.Z,{css:Ao.l0.rowWithGap(2),children:[(0,r.BX)(Xo.x,{css:Ao.l0.flex.shrink(1),children:["conman Repl command: ",(0,r.tZ)(Po.Z,{children:a})]}),(0,r.tZ)(Mo.Z,{alt:"Copy to clipboard",onClick:function(){return(0,me.Z)(a)},children:(0,r.tZ)(Fo.Z,{})})]}),(0,r.BX)("div",{className:"jsx-2e9ac5ab034fc317",children:["metadata:",(0,r.tZ)("pre",{className:"jsx-2e9ac5ab034fc317",children:JSON.stringify(t,null,2)})]}),(0,r.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,r.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,r.BX)("div",{className:"jsx-2e9ac5ab034fc317",children:["parsed token:",(0,r.tZ)("pre",{className:"jsx-2e9ac5ab034fc317",children:JSON.stringify((0,Ho.h)(t.token),null,2)})]}),(0,r.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,r.tZ)("br",{className:"jsx-2e9ac5ab034fc317"}),(0,r.tZ)(d(),{id:"2e9ac5ab034fc317",children:".token-viewer.jsx-2e9ac5ab034fc317{height:100%;overflow:auto;padding:10px}pre.jsx-2e9ac5ab034fc317{white-space:pre-wrap;word-wrap:break-word}"})]})})),(0,a.Z)(rl,nl.Override,(function(){var e=(0,o.Z)(i.useState(qo.Z.get("gurl","string")||""),2),t=e[0],n=e[1];return(0,r.BX)("div",{style:{height:"100%",overflow:"auto"},children:[(0,r.tZ)(Ai.ZP,{label:"Custom gurl",placeholder:"ws://localhost:8080",value:t,onChange:function(e){return n(e.currentTarget.value)}}),(0,r.BX)("pre",{children:["metadata override preview:",JSON.stringify((0,Yo.t)(t),null,2)]}),(0,r.tZ)("br",{}),(0,r.BX)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,r.tZ)(ji.Z,{color:"positive",onClick:function(){qo.Z.set("gurl",t),window.location.reload()},children:"Set gurl and reload"}),(0,r.tZ)(ji.Z,{color:"orange",onClick:function(){qo.Z.remove("gurl"),window.location.reload()},children:"Unset gurl and reload"})]}),(0,r.tZ)("br",{}),(0,r.tZ)("br",{}),(0,r.tZ)("div",{children:qo.Z.get("gurl","string")?"currently in localStorage: ".concat(qo.Z.get("gurl","string")):'No gurl set in local storage, using default gurl for this user, check "Token" tab for details'}),(0,r.tZ)("br",{}),(0,r.tZ)("br",{}),"Gurl order of precedence:",(0,r.BX)("ol",{style:{margin:20},children:[(0,r.tZ)("li",{children:"\u2018gurl\u2019 in localStorage (set above)"}),(0,r.BX)("li",{children:["If in development webapp and a there\u2019s a response from",(0,r.tZ)("code",{children:"https://currenthost:4563"})," or",(0,r.tZ)("code",{children:"http://currenthost:4560"}),", then it will use that."]}),(0,r.BX)("li",{children:["default is ",(0,r.tZ)("code",{children:"wss://eval.<usercluster>.replit.com"})]})]})]})})),rl),dl=Object.values(nl);function ul(){var e=(0,i.useState)(nl.Repl),t=e[0],n=e[1],a=dl.map((function(e){return(0,r.tZ)(p.zx,{colorway:e===t?"primary":void 0,onClick:function(){return n(e)},text:e},e)}));return(0,r.BX)(p.Tg,{background:"default",css:[p.l0.colWithGap(8),p.l0.p(4),p.l0.height("100%")],children:[(0,r.tZ)(p.G7,{css:{flexWrap:"wrap",flexDirection:"row",gap:"4px"},children:a}),(0,r.tZ)(p.G7,{css:[p.l0.flex.growAndShrink(1),p.l0.overflow("auto")],children:Object.entries(cl).map((function(e){var n=(0,o.Z)(e,2),i=n[0],a=n[1];return(0,r.tZ)(p.G7,{css:i!==t&&p.l0.display.none,children:i===nl.Override&&t!==nl.Override?null:(0,r.tZ)(a,{})},i)}))})]})}var fl=n(86514),pl={Content:function(){return(0,r.tZ)(ul,{})},Icon:function(e){var t=e.size;return(0,r.tZ)(fl.Z,{size:t})},getTitle:function(){return"Debug"}},hl=n(39571);function ml(e){return(0,r.BX)(r.HY,{children:[(0,r.tZ)(O.Z,{truncate:!0,level:5,children:"Call stack"}),(0,r.tZ)(Li.gC,{align:"stretch",constrainWidth:!0,children:e.frames.map((function(t){return(0,r.tZ)(vl,{frame:t,onClick:e.onFrameClick},t.id)}))})]})}function vl(e){var t,n,i=e.frame,a=e.onClick,o=null===(t=i.source)||void 0===t?void 0:t.name,l=null===(n=i.source)||void 0===n?void 0:n.path,s=o&&(0,hl.om)(o),c=l&&(0,hl.om)(l),u=l&&(0,hl.IT)(l);return(0,r.BX)(r.HY,{children:[(0,r.BX)("div",{onClick:function(){return u&&a(u,i.line)},className:"jsx-c66d0af1ad52f929 frame",children:[(0,r.tZ)("div",{className:"jsx-c66d0af1ad52f929 label name",children:i.name}),(0,r.BX)("div",{className:"jsx-c66d0af1ad52f929 label path",children:[(0,r.tZ)("span",{className:"jsx-c66d0af1ad52f929 line",children:i.line}),s||c||o||l]})]}),(0,r.tZ)(d(),{id:"c66d0af1ad52f929",children:".frame.jsx-c66d0af1ad52f929{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;max-width:100%;height:var(--space-32);cursor:pointer;color:var(--foreground-dimmer);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);font-size:var(--font-size-small);font-family:var(--font-family-code)}.frame.jsx-c66d0af1ad52f929:hover{background-color:var(--background-higher);color:var(--foreground-default)}.label.jsx-c66d0af1ad52f929{font-size:var(--font-size-default);padding-left:var(--space-8);padding-right:var(--space-8);overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap}.name.jsx-c66d0af1ad52f929{-webkit-box-flex:0;-webkit-flex:0 0 auto;-moz-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;background-color:var(--background-higher);padding:1px 2px;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}.path.jsx-c66d0af1ad52f929{-webkit-box-flex:0;-webkit-flex:0 1 auto;-moz-box-flex:0;-ms-flex:0 1 auto;flex:0 1 auto}.line.jsx-c66d0af1ad52f929{display:inline-block;margin-right:var(--space-8);background-color:var(--background-higher);padding:1px 2px;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}"})]})}function gl(e){var t=[],n=!0,i=!1,a=void 0;try{for(var l,s=e.breakpoints[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var c=(0,o.Z)(l.value,2),u=c[0],f=c[1],p=!0,h=!1,m=void 0;try{for(var v,g=f[Symbol.iterator]();!(p=(v=g.next()).done);p=!0){var b=v.value;t.push((0,r.tZ)(bl,{breakpoint:b,file:u,line:b.line,verified:b.verified,onClick:e.onBreakpointClick,onRemove:e.onRemove},"".concat(u,":").concat(b.line,":").concat(b.pid1Id,":").concat(b.dapId)))}}catch(x){h=!0,m=x}finally{try{p||null==g.return||g.return()}finally{if(h)throw m}}}}catch(x){i=!0,a=x}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return(0,r.BX)(r.HY,{children:[(0,r.tZ)(O.Z,{truncate:!0,level:5,children:"Breakpoints"}),t.length>0?(0,r.tZ)(Li.gC,{align:"stretch",constrainWidth:!0,children:t}):(0,r.BX)(Gi.Z,{size:"xsmall",foreground:2,children:["To start, add a breakpoint ",(0,r.tZ)("span",{className:"jsx-223474dbb82a953c breakpoint"})," by clicking on the line number.",(0,r.tZ)(d(),{id:"223474dbb82a953c",children:".breakpoint.jsx-223474dbb82a953c{display:inline-block;background-color:var(--accent-primary-default);-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;width:8px;height:8px}"})]})]})}function bl(e){var t=e.breakpoint,n=e.file,i=e.line,a=e.verified,o=e.onClick,l=e.onRemove,s=(0,hl.om)(n);return(0,r.BX)(r.HY,{children:[(0,r.tZ)(Li.gC,{spacing:1,align:"stretch",children:(0,r.tZ)("div",{className:"jsx-3743f20b19d8f08d breakpoint",children:(0,r.BX)("div",{css:[{"&:hover":{backgroundColor:Ao.TV.backgroundHigher,color:Ao.TV.foregroundDefault},"&:focus-within":{color:Ao.TV.foregroundDefault},"&:hover .frameButton":{background:Ao.TV.backgroundHigher,backgroundColor:Ao.TV.backgroundHigher,opacity:1},"&:focus-within .frameButton":{opacity:1},"&:hover .frameButton:hover":{backgroundColor:Ao.TV.backgroundHighest}}],onClick:function(){o(n,i)},className:"jsx-3743f20b19d8f08d frame",children:[(0,r.tZ)("div",{className:"jsx-3743f20b19d8f08d "+(Ei()("circle",{verified:a})||"")}),(0,r.tZ)("div",{className:"jsx-3743f20b19d8f08d line",children:i}),(0,r.tZ)("div",{className:"jsx-3743f20b19d8f08d location",children:(0,r.tZ)("span",{className:"jsx-3743f20b19d8f08d path",children:s||n})}),(0,r.tZ)(p.hU,{className:"frameButton",alt:"Remove breakpoint",css:[{opacity:0}],onClick:function(){l({breakpoint:t})},children:(0,r.tZ)(di.Z,{})})]})})}),(0,r.tZ)(d(),{id:"3743f20b19d8f08d",children:".breakpoint.jsx-3743f20b19d8f08d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;max-width:100%;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.frame.jsx-3743f20b19d8f08d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex:1 1 auto;-moz-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;height:var(--space-32);cursor:pointer;color:var(--foreground-dimmer);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);font-size:var(--font-size-default)}.circle.jsx-3743f20b19d8f08d{-webkit-box-flex:0;-webkit-flex:0 0 auto;-moz-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;background-color:var(--accent-primary-default);-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;width:11px;height:11px;margin-left:var(--space-8);margin-right:var(--space-8);opacity:.5}.verified.jsx-3743f20b19d8f08d{opacity:1}.line.jsx-3743f20b19d8f08d{font-family:var(--font-family-code);background-color:var(--background-higher);padding:1px 2px;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}.location.jsx-3743f20b19d8f08d{font-family:var(--font-family-code);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex:1 1 auto;-moz-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;min-width:0;font-size:var(--font-size-default);padding-left:var(--space-8);padding-right:var(--space-8)}.path.jsx-3743f20b19d8f08d{overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap}"})]})}var xl=n(45826),Zl=n(4648),yl=n(15882),wl=n(94270),kl=n(76075),Cl=n(8633);function jl(e){var t=e.client,n=(0,D.Z)(null===t||void 0===t?void 0:t.state),i=(0,D.Z)(null===t||void 0===t?void 0:t.supportsStepBack);return(0,r.BX)(Do.Z,{css:Ao.l0.rowWithGap(2),children:[i&&(0,r.BX)(r.HY,{children:[(0,r.tZ)(Mo.Z,{size:40,disabled:!t||"paused"!==n,onClick:function(){(0,ut.j)(ut.U3.DEBUGGER_USED,{action:"lastBreakpoint"}),null===t||void 0===t||t.reverseContinue()},alt:"Last Breakpoint",tooltipText:"Last Breakpoint",tooltipPlacement:"bottom",children:(0,r.tZ)(Zl.Z,{})}),(0,r.tZ)(Mo.Z,{size:40,disabled:!t||"paused"!==n,onClick:function(){(0,ut.j)(ut.U3.DEBUGGER_USED,{action:"stepBack"}),null===t||void 0===t||t.back()},alt:"Step Back",tooltipText:"Step Back",tooltipPlacement:"bottom",children:(0,r.tZ)(Bn.Z,{})})]}),(0,r.tZ)(Tl,{stop:function(){(0,ut.j)(ut.U3.DEBUGGER_USED,{action:"stop"}),null===t||void 0===t||t.stop()},start:function(){(0,ut.j)(ut.U3.DEBUGGER_USED,{action:"start"}),null===t||void 0===t||t.start()},state:n}),(0,r.tZ)(Mo.Z,{size:40,disabled:!t||"paused"!==n,onClick:function(){(0,ut.j)(ut.U3.DEBUGGER_USED,{action:"nextStep"}),null===t||void 0===t||t.next()},alt:"Next Step",tooltipText:"Next Step",tooltipPlacement:"bottom",children:(0,r.tZ)(Rn.Z,{})}),(0,r.tZ)(Mo.Z,{size:40,disabled:!t||"paused"!==n,onClick:function(){(0,ut.j)(ut.U3.DEBUGGER_USED,{action:"skipStep"}),null===t||void 0===t||t.skip()},alt:"Skip Step",tooltipText:"Skip Step",tooltipPlacement:"bottom",children:(0,r.tZ)(yl.Z,{rotate:90})}),(0,r.tZ)(Mo.Z,{size:40,disabled:!t||"paused"!==n,onClick:function(){(0,ut.j)(ut.U3.DEBUGGER_USED,{action:"nextBreakpoint"}),null===t||void 0===t||t.continue()},alt:"Next Breakpoint",tooltipText:"Next Breakpoint",tooltipPlacement:"bottom",children:(0,r.tZ)(wl.Z,{})})]})}var _l=(0,Ht.F4)({"0%":{opacity:.2},"50%":{opacity:1},"100%":{opacity:.2}});function Tl(e){var t=e.state,n=e.start,i=e.stop;return"terminated"===t?(0,r.tZ)(Mo.Z,{css:Ao.l0.color.accentPrimaryDefault,size:40,onClick:n,alt:"Run",tooltipText:"Run",tooltipPlacement:"bottom",children:(0,r.tZ)(Cl.Z,{})}):"stopping"===t||null===t?(0,r.tZ)(Mo.Z,{size:40,disabled:!0,alt:"Loading",tooltipText:"Loading",tooltipPlacement:"bottom",children:(0,r.tZ)(he.Z,{})}):(0,r.tZ)(Mo.Z,{css:"initializing"===t||"preinitializing"===t?[Ao.l0.color.foregroundDimmer,{animationName:_l.toString(),animationDuration:"2s",animationIterationCount:"infinite"}]:Ao.l0.color.accentPrimaryDefault,size:40,onClick:i,alt:"Stop",tooltipText:"Stop",tooltipPlacement:"bottom",children:(0,r.tZ)(kl.Z,{})})}var Sl=n(93160);function zl(e){var t=e.children;return(0,r.BX)(Sl.Z,{background:"default",css:[Ao.l0.height("100%"),Ao.l0.width("100%"),Ao.l0.p(8),Ao.l0.overflow("auto"),{borderTopRightRadius:Ao.TV.borderRadius4}],children:[(0,r.BX)(Li.gC,{spacing:2,align:"stretch",justify:"center",constrainWidth:!0,children:[(0,r.tZ)(Li.Ug,{spacing:1,align:"center",justify:"space-between",constrainWidth:!0,children:(0,r.tZ)(O.Z,{truncate:!0,level:4,children:"Debugger"})}),(0,r.tZ)(Ze.Z,{feature:ye.l.Debugger}),t]}),(0,r.tZ)(d(),{id:"ffa04cbdbbf3badd",children:"a.jsx-ffa04cbdbbf3badd{font-size:var(--font-size-default);color:var(--accent-primary-default);font-weight:var(--font-weight-medium)}"})]})}function Bl(e){var t=(0,v.Z)().debuggest,n=(0,D.Z)(t.mainClient),i=(0,D.Z)(n?n.state:null),a=(0,D.Z)(n?n.stackFrames:null),o=(0,D.Z)(n?n.variables:null),l=(0,D.Z)(n?n.breakpoints:null),s=function(t,n){var r=(0,hl.om)(t);r&&e.onOpenFile({path:r,line:n})};return(0,r.BX)(zl,{children:[(0,r.tZ)(jl,{client:n}),l&&(0,r.tZ)(gl,{breakpoints:l,onBreakpointClick:s,onRemove:function(e){var t=e.breakpoint;n&&t.pid1Id&&n.removeBreakpoint(t.pid1Id)}}),o&&n&&"paused"===i&&(0,r.tZ)(xl.Z,{client:n,variables:o}),a&&"paused"===i&&(0,r.tZ)(ml,{frames:a,onFrameClick:s}),n&&(0,r.tZ)("div",{className:"jsx-98cfff378e1e6f5f logs-button",children:(0,r.tZ)(ji.Z,{size:"small",onClick:function(){return function(e){if("undefined"===typeof Blob)return;var t=new Blob([e],{type:"text/plain"}),n=document.createElement("a");n.download="debugger-logs.txt",n.href=URL.createObjectURL(t),n.dataset.downloadurl=["text/plain",n.download,n.href].join(":"),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n),setTimeout((function(){URL.revokeObjectURL(n.href)}),1500)}(n.getDebugLogs())},children:"Download Logs"})}),(0,r.tZ)(d(),{id:"98cfff378e1e6f5f",children:".instructions.jsx-98cfff378e1e6f5f{height:var(--space-16)}.logs-button.jsx-98cfff378e1e6f5f{position:absolute;bottom:var(--space-8);right:var(--space-8)}"})]})}var Rl={Content:function(){return(0,r.tZ)(El,{})},Icon:function(e){var t=e.size;return(0,r.tZ)(Vt.PlayPause,{size:t})},getTitle:function(){return"Debugger"}};function El(){var e=(0,v.Z)().session;return(0,r.tZ)(Bl,{onOpenFile:function(t){e.openFile(t.path),e.updateDeeplink(t)}})}var Gl=n(22371),Ll={Content:function(){return(0,r.tZ)(Gl.Z,{})},Icon:function(e){var t=e.size;return(0,r.tZ)(U.Z,{size:t})},getTitle:function(){return"Tutorial"}},Il=n(76505),Nl=n(36739),Al=n(88055),Dl={Content:function(e){var t=e.options.paneId,n=(0,Ut.b9)(Al.U);return(0,r.tZ)(Il.Z,{closeConfigPane:function(){return n(t)},useReadFile:Nl.Z})},Icon:function(){return null},getTitle:function(){return""}};var Xl=n(61193),Pl=n(95068),Ml=n(11731),Fl=n(71263),Ol=n(20934),Ul=n(6801),Wl=n(36764);function Hl(e,t){var n=t.onReceiveAnnotationUpdate,r=void 0===n?function(){}:n,a=(0,dt.Z)().showError,l=(0,o.Z)(i.useState(null),2),s=l[0],c=l[1],d=(0,Ul.xT)({variables:{replId:e}}),u=function(){var e,t=null===(e=d.data)||void 0===e?void 0:e.currentUser;return t?{user:{__typename:"User",id:t.id,username:t.username,image:t.image}}:{}},f=function(t,n){var r=t.readQuery({query:Ul.yi,variables:{replId:e}}),i=[],a=r.repl.annotationAnchors,o=a.findIndex((function(e){return e.id===n.id}));i=-1===o?(0,re.Z)(a).concat([n]):(0,re.Z)(a.slice(0,o)).concat([n],(0,re.Z)(a.slice(o+1))),t.writeQuery({query:Ul.yi,variables:{replId:e},data:(0,Ft.Z)((0,ae.Z)({},r),{repl:(0,Ft.Z)((0,ae.Z)({},r.repl),{annotationAnchors:i})})})},p=(0,o.Z)((0,Ul.AS)({onError:function(e){return a(e.message)},update:function(e,t){var n;if(t.errors)t.errors.forEach((function(e){return a(e.message)}));else{var r=null===(n=t.data)||void 0===n?void 0:n.createAnnotationAnchor;r&&("UserError"===r.__typename?a(r.message):"AnnotationAnchor"===r.__typename&&f(e,r))}}}),1),h=p[0],m=(0,o.Z)((0,Ul.gE)({onError:function(e){return a(e.message)},update:function(e,t){var n;if(t.errors)t.errors.forEach((function(e){return a(e.message)}));else{var r=null===(n=t.data)||void 0===n?void 0:n.createAnnotationMessage;r&&("UserError"===r.__typename?a(r.message):"AnnotationAnchor"===r.__typename&&f(e,r))}}}),1),v=m[0],g=(0,o.Z)((0,Ul.Rp)({onError:function(e){return a(e.message)},update:function(e,t){var n;if(t.errors)t.errors.forEach((function(e){return a(e.message)}));else{var r=null===(n=t.data)||void 0===n?void 0:n.updateAnnotationAnchor;r&&("UserError"===r.__typename?a(r.message):"AnnotationAnchor"===r.__typename&&f(e,r))}}}),1),b=g[0],x=(0,o.Z)((0,Wl.n)(),1)[0],Z=(0,o.Z)((0,Ul.Hj)(),1)[0];(0,Ul.Tt)({variables:{replId:e},onData:function(e){var t=e.data.data,n=e.client,i=null===t||void 0===t?void 0:t.updatedAnnotation;i&&(f(n,i),r(i))}});var y=(0,o.Z)(i.useState([]),2),w=y[0],k=y[1];i.useEffect((function(){var e,t,n=[];"Repl"===(null===(e=d.data)||void 0===e?void 0:e.repl.__typename)&&(t=n).push.apply(t,(0,re.Z)(d.data.repl.annotationAnchors));s&&n.push((0,Ft.Z)((0,ae.Z)({},s),{isGeneral:Boolean(s.isGeneral),messages:[],isResolved:!1,__typename:"AnnotationAnchor"})),k(n)}),[d,s]);var C=i.useMemo((function(){return w.find((function(e){return e.isGeneral}))}),[w]),j=i.useMemo((function(){return w.reduce((function(e,t){return t.isResolved?e:t.messages.some((function(e){return!1===e.seen}))?e+1:e}),0)}),[w]),_=function(e){var t=e.annotationAnchor,n=e.annotationMessage,r=e.highlight;h({variables:{annotationAnchor:t,annotationMessage:n,highlight:r},optimisticResponse:{createAnnotationAnchor:(0,Ft.Z)((0,ae.Z)({},u(),t),{isGeneral:Boolean(t.isGeneral),__typename:"AnnotationAnchor",messages:n?[(0,Ft.Z)((0,ae.Z)({},u(),n),{content:{text:n.text,__typename:"TextMessageContentType"},anchor:{id:t.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:Date.now(),currentUserIsAuthor:!0,seen:!0})]:[],isResolved:!1})}})};return{annotations:w,loading:d.loading,generalThread:C,unreadThreadCount:j,placeholderAnchorId:null===s||void 0===s?void 0:s.id,createAnnotationAnchorPlaceholder:function(e){var t=e.annotationAnchor;c(t)},deleteAnnotationAnchorPlaceholder:function(){c(null)},createAnnotationAnchor:_,createAnnotationMessage:function(t){var n=t.anchor,r=t.annotationMessage,i=t.highlight;(null===s||void 0===s?void 0:s.id)===n.id?(c(null),_({annotationAnchor:(0,ae.Z)({},s),annotationMessage:r,highlight:i})):v({variables:{replId:e,anchorId:n.id,annotationMessage:r,highlight:i},optimisticResponse:{createAnnotationMessage:(0,Ft.Z)((0,ae.Z)({},n),{messages:(0,re.Z)(n.messages.filter((function(e){return!e.id.startsWith("chat-")}))).concat([(0,Ft.Z)((0,ae.Z)({},u(),r),{content:{text:r.text,__typename:"TextMessageContentType"},anchor:{id:n.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:Date.now(),currentUserIsAuthor:!0,seen:!0})])})}})},updateAnnotationAnchor:function(e){var t=e.annotationAnchor,n=e.changes;b({variables:{id:t.id,changes:n},optimisticResponse:{updateAnnotationAnchor:(0,Ft.Z)((0,ae.Z)({},t,n),{isResolved:"boolean"===typeof n.isResolved?n.isResolved:t.isResolved})}})},updateThreadPreview:function(e){var t=e.threadId,n=e.messageId,r=e.message;Z({variables:{threadId:t,messageId:n,message:r}})},markAllMessagesInReplAsSeenByUser:function(){x({variables:{replId:e}})}}}var Vl=n(95984),ql=n(30827),Yl=n(9583);function Kl(){var e=(0,oe.Z)(["\n  query Threads2Inbox {\n    currentUser {\n      id\n      username\n      image\n    }\n  }\n"]);return Kl=function(){return e},e}var Ql={},$l=(0,le.Ps)(Kl());var Jl=function(){return(0,r.BX)("svg",{width:"100%",height:"100%",viewBox:"0 0 691 691",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.BX)("g",{clipPath:"url(#clip0_954_4340)",children:[(0,r.tZ)("path",{d:"M636.55 403.04H44.91C26.7564 403.04 12.04 417.756 12.04 435.91V643.79C12.04 661.944 26.7564 676.66 44.91 676.66H636.55C654.704 676.66 669.42 661.944 669.42 643.79V435.91C669.42 417.756 654.704 403.04 636.55 403.04Z",fill:"url(#paint0_linear_954_4340)"}),(0,r.tZ)("path",{opacity:"0.71",d:"M526.02 663.9L545.86 602.08C559.46 568.34 534.62 531.54 498.24 531.54H186.98C149.55 531.54 124.7 570.3 140.32 604.31L159.12 663.89H526.02V663.9Z",fill:"url(#paint1_linear_954_4340)"}),(0,r.tZ)("path",{d:"M217.38 314.61C290.392 314.61 349.58 255.422 349.58 182.41C349.58 109.398 290.392 50.21 217.38 50.21C144.368 50.21 85.1802 109.398 85.1802 182.41C85.1802 255.422 144.368 314.61 217.38 314.61Z",fill:"url(#paint2_linear_954_4340)"}),(0,r.tZ)("path",{d:"M120.75 510.55C123.39 538.19 143.97 556.13 170.18 561.75C176.42 563.19 182.79 563.92 189.17 564.39L195.57 564.67C178.54 565.03 160.79 562.34 146.09 553.2C131.43 544.2 121.34 527.81 120.75 510.55Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M225.69 564.67C308.15 564.06 400.65 564.05 483.1 564.67C400.64 565.29 308.14 565.28 225.69 564.67Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M531.57 560.9C546.58 551.84 559.07 537.22 562.44 519.7C563.59 513.9 563.68 507.95 563.1 502.07C564.1 507.91 564.19 513.95 563.19 519.84C560.19 537.61 547.3 552.72 531.57 560.9Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M571.57 554.78C560.27 579.78 532.93 594.05 506.36 595.88C502.53 596.17 498.69 596.24 494.86 596.19C502.52 595.98 510.16 595.18 517.62 593.54C539.86 588.88 561.06 575.34 571.57 554.78Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M448.75 600.43C417.61 601.09 382.98 601.08 351.81 600.43C382.98 599.78 417.6 599.77 448.75 600.43Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M125.93 579.25C113.2 574.83 101.21 564.64 98.6401 550.91C99.2401 552.44 99.6901 554.2 100.47 555.66C105.36 566.51 115.41 574.21 125.94 579.25H125.93Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M122.63 550.92C108.27 541.02 104.78 521.86 109.84 505.93C110.54 503.67 111.36 501.44 112.27 499.26C111.63 501.28 110.78 504.03 110.31 506.06C106.06 522.06 109.3 540.13 122.62 550.92H122.63Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M122.63 485.44C124.51 481.11 128.99 478.25 133.45 477.14C129.54 479.57 125.68 481.91 122.63 485.44Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M576.75 531.49C580.41 516.24 580.52 498.93 571.57 485.44C572.81 487 573.96 488.66 574.93 490.42C581.64 502.91 581.19 518.32 576.74 531.49H576.75Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M579.54 579.25C588.53 567.19 594.92 552.91 596.84 537.95C597.2 535.85 597.23 533.61 597.45 531.49C597.99 548.88 590.98 566.28 579.54 579.25Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M543.81 611.25C558.06 608.69 572.57 604.12 583.9 594.81C585.59 593.57 586.95 591.97 588.5 590.55C577.81 603.74 560.26 609.73 543.81 611.26V611.25Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M85.9304 495.96C90.9804 479.18 105.88 466.78 121.97 460.96L125.73 459.62C127.97 458.93 131.16 458.23 133.45 457.63C130.93 458.48 128.38 459.19 125.88 460.08C108.67 466.24 92.5304 478.4 85.9204 495.95L85.9304 495.96Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M547.63 445.61C564.65 447.41 582.07 454.4 593.27 467.75C594.84 469.66 596.22 471.72 597.46 473.85C586.24 457.4 566.67 449.06 547.63 445.61Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M620.51 510.55C624.76 522.88 625.03 536.26 623.91 549.15C622.85 558.77 620.66 568.49 617.6 577.67C616.52 580.73 615.33 583.76 614.16 586.78C615.59 582.33 617.26 577.4 618.43 572.84C623.74 552.84 625.91 530.74 620.51 510.54V510.55Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M563.68 629.84C552.03 637.13 538.71 642.29 524.93 643.51C509.26 644.08 485.5 643.54 469.79 643.5L456.01 643.25L469.79 643C485.45 642.69 509.25 642.98 524.86 642.6C538.55 641.45 551.78 636.6 563.68 629.83V629.84Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M324.24 653.84C278.39 654.5 227.42 654.49 181.53 653.84C227.42 653.19 278.38 653.18 324.24 653.84Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M240.04 611.25C231.6 611.93 223.06 611.93 214.63 611.25C223.07 610.57 231.61 610.57 240.04 611.25Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M125.93 619.96C101.27 616.41 77.6502 599.76 69.9302 575.49C71.1602 578.36 72.3902 581.22 73.9702 583.91C84.5302 603.14 104.8 615.53 125.93 619.96Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M130.16 565.09C144.25 571.77 159.29 576.91 174.84 578.69C177.05 579.04 179.29 579.04 181.53 579.26C163.55 579.7 145.67 573.97 130.16 565.09Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M200.28 579.25C206.55 578.57 212.83 578.56 219.1 579.25C212.83 579.94 206.55 579.93 200.28 579.25Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M304.75 579.25C349.87 578.59 400.02 578.6 445.17 579.25C400.01 579.9 349.88 579.91 304.75 579.25Z",fill:"#8A98FF"}),(0,r.tZ)("path",{d:"M545.86 480.38C559.46 514.12 534.62 550.92 498.24 550.92H186.98C149.55 550.92 124.7 512.16 140.32 478.15L182.03 345.94L182.32 346C177.45 369.9 195.61 393.77 221.52 393.77H463.7C488.78 393.77 506.81 371.3 503.23 347.91L503.33 347.89L545.86 480.38Z",fill:"#A88C5A"}),(0,r.tZ)("path",{d:"M503.23 347.91C506.81 371.3 488.78 393.77 463.7 393.77H221.52C195.61 393.77 177.45 369.9 182.32 346C182.91 343.04 183.87 340.07 185.21 337.15L218.53 264.59L222.63 255.66L225 250.51C231.51 236.33 245.69 227.23 261.3 227.23H418.49C418.49 227.23 438.63 226.14 449.92 233.29C456.92 237.72 462.6 244.22 465.83 252.25L500.75 338.89C501.95 341.88 502.77 344.9 503.23 347.91ZM336.66 258.5L338.12 253.56C336.37 252.69 333.03 251.74 329.25 251.74C317.76 251.74 310.35 259.59 310.35 270.42C310.35 281.25 317.25 288.38 327.87 288.38C332.59 288.38 336.3 287.22 337.97 286.34L336.88 281.55C335.06 282.35 332.66 283.29 329.03 283.29C322.05 283.29 316.82 278.28 316.82 270.13C316.82 262.79 321.18 256.83 329.25 256.83C332.74 256.83 335.14 257.63 336.66 258.5ZM301.84 258.5L303.44 253.85C301.48 252.69 298.35 251.67 294.79 251.67C287.23 251.67 282.65 256.32 282.65 261.99C282.65 266.21 285.63 269.7 291.96 271.95C296.68 273.7 298.5 275.37 298.5 278.42C298.5 281.47 296.32 283.66 291.67 283.66C288.47 283.66 285.12 282.35 283.23 281.11L281.63 285.98C284.11 287.44 287.67 288.38 291.52 288.38C299.88 288.38 304.68 284.02 304.68 277.84C304.68 272.61 301.55 269.55 295.45 267.23C290.87 265.48 288.76 264.17 288.76 261.27C288.76 258.65 290.87 256.47 294.65 256.47C297.92 256.47 300.46 257.63 301.84 258.5ZM275.97 271.22C276.04 270.57 276.18 269.55 276.18 268.24C276.18 261.77 273.13 251.67 261.65 251.67C251.4 251.67 245.14 260.03 245.14 270.64C245.14 281.25 251.61 288.38 262.45 288.38C268.04 288.38 271.89 287.22 274.15 286.2L273.06 281.62C270.66 282.64 267.9 283.44 263.32 283.44C256.92 283.44 251.4 279.87 251.25 271.22H275.97Z",fill:"#E5CF98"}),(0,r.tZ)("path",{d:"M338.12 253.56L336.66 258.5C335.14 257.63 332.74 256.83 329.25 256.83C321.18 256.83 316.82 262.79 316.82 270.13C316.82 278.28 322.05 283.29 329.03 283.29C332.66 283.29 335.06 282.35 336.88 281.55L337.97 286.34C336.3 287.22 332.59 288.38 327.87 288.38C317.25 288.38 310.35 281.18 310.35 270.42C310.35 259.66 317.76 251.74 329.25 251.74C333.03 251.74 336.37 252.69 338.12 253.56Z",fill:"#1B2332"}),(0,r.tZ)("path",{d:"M303.44 253.85L301.84 258.5C300.46 257.63 297.92 256.47 294.65 256.47C290.87 256.47 288.76 258.65 288.76 261.27C288.76 264.17 290.87 265.48 295.45 267.23C301.55 269.55 304.68 272.61 304.68 277.84C304.68 284.02 299.88 288.38 291.52 288.38C287.67 288.38 284.11 287.44 281.63 285.98L283.23 281.11C285.12 282.35 288.47 283.66 291.67 283.66C296.32 283.66 298.5 281.33 298.5 278.42C298.5 275.51 296.68 273.7 291.96 271.95C285.63 269.7 282.65 266.21 282.65 261.99C282.65 256.32 287.23 251.67 294.79 251.67C298.35 251.67 301.48 252.69 303.44 253.85Z",fill:"#1B2332"}),(0,r.tZ)("path",{d:"M276.18 268.24C276.18 269.55 276.04 270.57 275.97 271.22H251.25C251.4 279.87 256.92 283.44 263.32 283.44C267.9 283.44 270.66 282.64 273.06 281.62L274.15 286.2C271.89 287.22 268.04 288.38 262.45 288.38C251.61 288.38 245.14 281.26 245.14 270.64C245.14 260.02 251.4 251.67 261.65 251.67C273.13 251.67 276.18 261.77 276.18 268.24ZM270 266.65C270.08 262.57 268.33 256.25 261.14 256.25C254.67 256.25 251.83 262.21 251.32 266.65H270Z",fill:"#1B2332"}),(0,r.tZ)("path",{d:"M261.14 256.25C268.33 256.25 270.08 262.57 270 266.65H251.32C251.83 262.21 254.67 256.25 261.14 256.25Z",fill:"#E5CF98"}),(0,r.tZ)("path",{d:"M182.32 346C182.91 343.04 183.87 340.07 185.21 337.15L218.53 264.59L222.63 255.66L225 250.51C231.51 236.33 245.69 227.23 261.3 227.23H418.49C418.49 227.23 438.63 226.14 449.92 233.29C456.92 237.72 462.6 244.22 465.83 252.25L500.75 338.89C501.95 341.88 502.77 344.9 503.23 347.91C506.81 371.3 488.78 393.77 463.7 393.77H221.52C195.61 393.77 177.45 369.9 182.32 346Z",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M503.33 347.89L545.86 480.38C559.46 514.12 534.62 550.92 498.24 550.92H186.98C149.55 550.92 124.7 512.16 140.32 478.15L182.03 345.94",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M532.22 117.06C568.71 135.84 566.03 170.99 566.03 170.99C566.03 170.99 520.16 155.31 503.35 152.12C502.3 151.93 501.36 151.78 500.56 151.68L491.44 151L491.14 151.08C489.53 145.31 484.24 141.08 477.96 141.08C477.57 141.08 477.18 141.09 476.8 141.13C476.71 141.03 476.61 140.93 476.51 140.84L469.81 134.72C469.37 134.31 468.87 134 468.34 133.78H468.23C468.03 131.83 467.45 129.99 466.55 128.33L466.79 128.2C467.59 126.89 471.05 121.89 471.05 121.89C471.05 121.89 474.48 118.6 480.68 115.46C491.1 110.18 509.34 105.28 532.22 117.06Z",fill:"#029831"}),(0,r.tZ)("path",{d:"M516.66 20.2C516.66 20.2 516.77 36.8799 514.97 53.32L500.7 58.3699L513.33 64.8C512.46 69.56 511.35 73.9199 509.95 77.3499C505.71 87.7999 491.29 104.17 480.64 115.38L480.68 115.46C474.48 118.6 471.05 121.89 471.05 121.89C471.05 121.89 467.59 126.89 466.79 128.2L466.55 128.33C464.1 123.82 459.31 120.75 453.81 120.75C452.89 120.75 452 120.83 451.13 121L451.09 120.75C451.09 120.75 449.58 90.2299 458.71 68.5C467.83 46.77 516.66 20.2 516.66 20.2Z",fill:"#029831"}),(0,r.tZ)("path",{d:"M503.35 152.12L503.31 152.35C503.31 152.35 511.56 177.9 499.49 209.9C486.01 203.46 471.92 180.52 471.32 167.44L471.62 166.88C473.51 167.88 475.67 168.44 477.96 168.44C485.51 168.44 491.64 162.32 491.64 154.76C491.64 153.48 491.47 152.25 491.14 151.08L491.44 151L500.56 151.68C501.36 151.78 502.3 151.93 503.35 152.12Z",fill:"#029831"}),(0,r.tZ)("path",{d:"M491.14 151.08C491.47 152.25 491.64 153.48 491.64 154.76C491.64 162.32 485.51 168.44 477.96 168.44C475.67 168.44 473.51 167.88 471.62 166.88C469.84 165.96 468.28 164.64 467.07 163.05L466.89 162.92C467.01 162.78 467.12 162.64 467.22 162.49L477.3 147.3C478.58 145.36 478.36 142.81 476.8 141.13C477.18 141.09 477.57 141.08 477.96 141.08C484.24 141.08 489.53 145.31 491.14 151.08Z",fill:"#685128"}),(0,r.tZ)("path",{d:"M476.8 141.13C478.36 142.81 478.58 145.36 477.3 147.3L467.22 162.49C467.12 162.64 467.01 162.78 466.89 162.92C465.75 164.3 464.01 164.9 462.33 164.65C460.29 164.68 458.04 162.21 458.04 162.21L456.02 161C450.39 158.08 447.1 151.11 447.1 151.11C446.74 150.11 446.71 149.04 446.99 148.03C449.03 149.12 451.35 149.73 453.81 149.73C461.81 149.73 468.3 143.24 468.3 135.24C468.3 134.75 468.28 134.27 468.23 133.79H468.34C468.87 134 469.37 134.31 469.81 134.72L476.51 140.84C476.61 140.93 476.71 141.03 476.8 141.13Z",fill:"#685128"}),(0,r.tZ)("path",{d:"M468.23 133.79C468.28 134.27 468.3 134.75 468.3 135.24C468.3 143.24 461.81 149.73 453.81 149.73C451.35 149.73 449.03 149.12 446.99 148.03C442.43 145.59 439.32 140.78 439.32 135.24C439.32 128.47 443.96 122.78 450.24 121.2C450.53 121.12 450.83 121.05 451.13 121C452 120.83 452.89 120.75 453.81 120.75C459.31 120.75 464.1 123.82 466.55 128.33C467.45 129.99 468.03 131.83 468.23 133.79Z",fill:"#685128"}),(0,r.tZ)("path",{d:"M458.04 162.21C458.04 162.21 460.29 164.68 462.33 164.65C462.23 165.05 462.1 165.44 461.91 165.81L452.32 185.18C451.48 186.87 449.96 187.95 448.27 188.32C445.25 188.58 442.24 186.45 442.24 186.45L439.82 185.55C435.9 184.24 428.23 176.44 428.23 176.44C425.77 174.18 425.62 170.26 428.09 167.85L437.54 158.68L443.68 152.72C444.64 151.79 445.85 151.26 447.1 151.11C447.1 151.11 450.39 158.08 456.02 161L458.04 162.21Z",fill:"#685128"}),(0,r.tZ)("path",{d:"M447.55 120.06C448.48 120.4 449.37 120.76 450.22 121.13L450.24 121.2C443.96 122.78 439.32 128.47 439.32 135.24C439.32 140.78 442.43 145.59 446.99 148.03C446.71 149.04 446.74 150.11 447.1 151.11C445.85 151.26 444.64 151.79 443.68 152.72L437.54 158.68L437.38 158.52C423.69 160.13 367.64 177.97 367.64 177.97C367.64 177.97 364.96 142.82 401.45 124.04C405 122.22 408.44 120.79 411.75 119.7C426.47 114.88 438.74 116.77 447.55 120.06Z",fill:"#029831"}),(0,r.tZ)("path",{d:"M448.27 188.32C448.39 189.38 448.3 190.48 447.9 191.54L439.06 215.11C438.07 217.74 435.69 219.37 433.12 219.57C431.54 219.48 428.86 218.55 428.86 218.55L426.74 217.54C421.31 216.84 410.15 207.9 410.15 207.9C406.97 205.58 406.34 200.98 408.94 197.88L425.23 178.51C426.05 177.53 427.1 176.84 428.23 176.44C428.23 176.44 435.9 184.24 439.82 185.55L442.24 186.45C442.24 186.45 445.25 188.58 448.27 188.32Z",fill:"#685128"}),(0,r.tZ)("path",{d:"M377.41 34.96C431.47 55.96 446.9 117.38 447.55 120.06C438.74 116.77 426.47 114.88 411.75 119.7L411.69 119.51C378.14 87.88 377.41 34.96 377.41 34.96Z",fill:"#029831"}),(0,r.tZ)("path",{d:"M379.56 289.59C376.08 287.46 374.5 282.98 376.25 279L388.72 250.7C389.72 248.43 391.63 246.8 393.87 246.08C389.59 244.14 387.99 238.83 390.57 234.84L405.98 211.06C406.99 209.51 408.48 208.42 410.15 207.9C410.15 207.9 421.31 216.84 426.74 217.54L428.86 218.55C428.86 218.55 431.54 219.48 433.12 219.57C433.24 220.49 433.21 221.45 432.98 222.4L426.42 249.82C425.62 253.19 422.75 255.44 419.56 255.72C419.74 256.52 419.84 257.36 419.77 258.22L417.48 288.9C417.2 292.65 414.53 295.56 411.16 296.43L414.65 318.75V318.94C401.28 318.01 391.44 322.04 391.44 322.04C383.19 317.7 374.4 318.07 366.89 320.06L366.78 319.63L378.59 292.2C378.77 291.26 379.1 290.39 379.56 289.59Z",fill:"#685128"}),(0,r.tZ)("path",{d:"M414.65 318.75L411.16 296.43C414.53 295.56 417.2 292.65 417.48 288.9L419.77 258.22C419.84 257.36 419.74 256.52 419.56 255.72C422.75 255.44 425.62 253.19 426.42 249.82L432.98 222.4C433.21 221.45 433.24 220.49 433.12 219.57C435.69 219.37 438.07 217.74 439.06 215.11L447.9 191.54C448.3 190.48 448.39 189.38 448.27 188.32C449.96 187.95 451.48 186.87 452.32 185.18L461.91 165.81C462.1 165.44 462.23 165.05 462.33 164.65C464.01 164.9 465.75 164.3 466.89 162.92C467.01 162.78 467.12 162.64 467.22 162.49L477.3 147.3C478.58 145.36 478.36 142.81 476.8 141.13C476.71 141.03 476.61 140.93 476.51 140.84L469.81 134.72C469.37 134.31 468.87 134 468.34 133.78",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M446.99 148.03C446.71 149.04 446.74 150.11 447.1 151.11C445.85 151.26 444.64 151.79 443.68 152.72L437.54 158.68L428.09 167.85C425.62 170.26 425.77 174.18 428.23 176.44C427.1 176.84 426.05 177.53 425.23 178.51L408.94 197.88C406.34 200.98 406.97 205.58 410.15 207.9C408.48 208.42 406.99 209.51 405.98 211.06L390.57 234.84C387.99 238.83 389.59 244.14 393.87 246.08C391.63 246.8 389.72 248.43 388.72 250.7L376.25 279C374.5 282.98 376.08 287.46 379.56 289.59C379.1 290.39 378.77 291.26 378.59 292.2L366.78 319.63",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M393.18 245.42C393.18 245.42 402.04 251.33 409.43 252.81",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M410.15 207.9C410.15 207.9 421.31 216.84 426.74 217.54",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M428.23 176.44C428.23 176.44 435.9 184.24 439.82 185.55",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M447.1 151.11C447.1 151.11 450.39 158.08 456.02 161",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M379.56 289.59C379.56 289.59 386.2 296.23 400.68 295.62",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M413.06 254.27C413.06 254.27 416.7 255.46 419.56 255.72",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M428.86 218.55C428.86 218.55 431.54 219.48 433.12 219.57",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M442.24 186.45C442.24 186.45 445.25 188.58 448.27 188.32",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M458.04 162.21C458.04 162.21 460.29 164.68 462.33 164.65",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M404.99 295.66C405.48 295.66 408.99 297.7 411.16 296.43",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M468.23 133.79C468.28 134.27 468.3 134.75 468.3 135.24C468.3 143.24 461.81 149.73 453.81 149.73C451.35 149.73 449.03 149.12 446.99 148.03C442.43 145.59 439.32 140.78 439.32 135.24C439.32 128.47 443.96 122.78 450.24 121.2C450.53 121.12 450.83 121.05 451.13 121C452 120.83 452.89 120.75 453.81 120.75C459.31 120.75 464.1 123.82 466.55 128.33C467.45 129.99 468.03 131.83 468.23 133.79V133.79Z",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M476.54 141.15C476.63 141.14 476.71 141.13 476.8 141.13C477.18 141.09 477.57 141.08 477.96 141.08C484.24 141.08 489.53 145.31 491.14 151.08C491.47 152.25 491.64 153.48 491.64 154.76C491.64 162.32 485.51 168.44 477.96 168.44C475.67 168.44 473.51 167.88 471.62 166.88C469.84 165.96 468.28 164.64 467.07 163.05",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M451.09 120.75C451.09 120.75 449.58 90.2299 458.71 68.5C467.83 46.77 516.66 20.2 516.66 20.2C516.66 20.2 516.77 36.8799 514.97 53.32L500.7 58.3699L513.33 64.8C512.46 69.56 511.35 73.9199 509.95 77.3499C505.71 87.7999 491.29 104.17 480.64 115.38",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M466.79 128.2C467.59 126.89 471.05 121.89 471.05 121.89C471.05 121.89 474.48 118.6 480.68 115.46C491.1 110.18 509.34 105.28 532.22 117.06C568.71 135.84 566.03 170.99 566.03 170.99C566.03 170.99 520.16 155.31 503.35 152.12C502.3 151.93 501.36 151.78 500.56 151.68L491.44 151",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M450.22 121.13C449.37 120.76 448.48 120.4 447.55 120.06C438.74 116.77 426.47 114.88 411.75 119.7C408.44 120.79 405 122.22 401.45 124.04C364.96 142.82 367.64 177.97 367.64 177.97C367.64 177.97 423.69 160.13 437.38 158.52",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M447.57 120.15C447.57 120.15 447.56 120.12 447.55 120.06C446.9 117.38 431.47 55.96 377.41 34.96C377.41 34.96 378.14 87.88 411.69 119.51",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M503.31 152.35C503.31 152.35 511.56 177.9 499.49 209.9C486.01 203.46 471.92 180.52 471.32 167.44",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M347.6 329.26C347.6 329.26 355.89 322.95 366.89 320.06C374.4 318.07 383.19 317.7 391.44 322.04C391.44 322.04 401.28 318.01 414.64 318.94C423.84 319.58 434.7 322.58 445.17 330.86",stroke:"#1B2332",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M414.16 207.9C414.16 207.9 410.04 203.49 411.16 200.9C411.98 199 420.75 189.21 425.39 184.1C425.97 183.46 427 184.11 426.68 184.91L419.47 203.21C418.8 204.92 418.64 206.79 419.03 208.58L419.6 211.24L414.16 207.88V207.9Z",fill:"#A88C5A"}),(0,r.tZ)("path",{d:"M433.66 175.75C433.61 175.71 433.56 175.67 433.52 175.63C433.06 175.09 430.27 171.7 431.24 169.74C432.01 168.19 439.85 160.38 444.05 156.26C444.59 155.73 445.47 156.33 445.16 157L438.42 171.79C437.73 173.31 437.51 175 437.8 176.65L437.89 177.16C437.99 177.74 437.33 178.15 436.83 177.82L433.67 175.74L433.66 175.75Z",fill:"#A88C5A"}),(0,r.tZ)("path",{d:"M396.92 244.43C396.85 244.38 396.79 244.32 396.74 244.24C396.14 243.42 392.45 238.19 393.57 235.02C394.45 232.5 403.89 219.55 408.94 212.71C409.58 211.84 410.73 212.72 410.38 213.82L402.69 237.82C401.9 240.29 401.72 243 402.17 245.6L402.31 246.41C402.47 247.32 401.66 248.02 401.01 247.53L396.93 244.43H396.92Z",fill:"#A88C5A"}),(0,r.tZ)("path",{d:"M383.51 287.24C383.44 287.18 383.38 287.1 383.33 287.01C382.73 286.03 379.04 279.8 380.16 276.01C381.04 273.01 390.48 257.56 395.53 249.4C396.17 248.36 397.32 249.42 396.97 250.72L389.28 279.34C388.49 282.29 388.31 285.52 388.76 288.61L388.9 289.57C389.06 290.66 388.25 291.5 387.6 290.91L383.52 287.22L383.51 287.24Z",fill:"#A88C5A"}),(0,r.tZ)("path",{d:"M371.16 171.08C371.45 170.56 378.51 139.82 405.63 126.99C393.15 143.74 385.12 165.49 385.12 165.49L371.16 171.08Z",fill:"#51FF53"}),(0,r.tZ)("path",{d:"M410.97 113.84C410.97 113.84 389.61 99.02 379.94 39.72C397.81 75.72 404.21 98.85 422.51 113.84C417.92 113.84 409.31 112.43 410.97 113.84Z",fill:"#51FF53"}),(0,r.tZ)("path",{d:"M456.02 113.84C456.02 113.84 456.71 81.3099 466.79 66.9199C476.87 52.5299 507.71 29.5699 507.71 29.5699C507.71 29.5699 474.47 57.3299 468.3 89.1899C464.53 114.55 463.85 120.75 463.85 120.75L456.03 113.84H456.02Z",fill:"#51FF53"}),(0,r.tZ)("path",{d:"M449.34 124.58C447.22 130.96 444.74 136.08 450.22 145.43C445.46 141.72 438.14 133.78 449.34 124.58Z",fill:"#A88C5A"}),(0,r.tZ)("path",{d:"M471.31 126.55C471.31 126.55 485.49 111.02 506.06 113.84C492.04 118.78 474.04 133.78 474.04 133.78L471.31 126.55Z",fill:"#51FF53"})]}),(0,r.BX)("defs",{children:[(0,r.BX)("linearGradient",{id:"paint0_linear_954_4340",x1:"340.73",y1:"676.66",x2:"340.73",y2:"403.04",gradientUnits:"userSpaceOnUse",children:[(0,r.tZ)("stop",{offset:"0.3",stopColor:"#1B2332",stopOpacity:"0"}),(0,r.tZ)("stop",{offset:"0.37",stopColor:"#1C2437",stopOpacity:"0.03"}),(0,r.tZ)("stop",{offset:"0.45",stopColor:"#202845",stopOpacity:"0.1"}),(0,r.tZ)("stop",{offset:"0.56",stopColor:"#262F5E",stopOpacity:"0.22"}),(0,r.tZ)("stop",{offset:"0.67",stopColor:"#2E397F",stopOpacity:"0.38"}),(0,r.tZ)("stop",{offset:"0.8",stopColor:"#3946AB",stopOpacity:"0.59"}),(0,r.tZ)("stop",{offset:"0.93",stopColor:"#4655DE",stopOpacity:"0.84"}),(0,r.tZ)("stop",{offset:"1",stopColor:"#4F5FFF"})]}),(0,r.BX)("linearGradient",{id:"paint1_linear_954_4340",x1:"342.61",y1:"663.9",x2:"342.61",y2:"531.55",gradientUnits:"userSpaceOnUse",children:[(0,r.tZ)("stop",{stopColor:"#1B2332",stopOpacity:"0"}),(0,r.tZ)("stop",{offset:"0.15",stopColor:"#2F333A",stopOpacity:"0.12"}),(0,r.tZ)("stop",{offset:"0.47",stopColor:"#635D4F",stopOpacity:"0.43"}),(0,r.tZ)("stop",{offset:"0.93",stopColor:"#B6A070",stopOpacity:"0.92"}),(0,r.tZ)("stop",{offset:"1",stopColor:"#C4AB76"})]}),(0,r.BX)("linearGradient",{id:"paint2_linear_954_4340",x1:"217.38",y1:"314.6",x2:"217.38",y2:"50.21",gradientUnits:"userSpaceOnUse",children:[(0,r.tZ)("stop",{stopColor:"#1B2332",stopOpacity:"0"}),(0,r.tZ)("stop",{offset:"0.19",stopColor:"#4B4A35",stopOpacity:"0.22"}),(0,r.tZ)("stop",{offset:"0.48",stopColor:"#92843B",stopOpacity:"0.55"}),(0,r.tZ)("stop",{offset:"0.73",stopColor:"#C7AE3F",stopOpacity:"0.79"}),(0,r.tZ)("stop",{offset:"0.91",stopColor:"#E7C942",stopOpacity:"0.94"}),(0,r.tZ)("stop",{offset:"1",stopColor:"#F4D343"})]}),(0,r.tZ)("clipPath",{id:"clip0_954_4340",children:(0,r.tZ)("rect",{width:"690.9",height:"690.9",fill:"white"})})]})]})},es=n(38137),ts=n(1138),ns=n(14016),rs=n(18622),is=n(33279),as={title:"Threads",filters:{inbox:{key:"toggle-inbox",label:"Inbox",icon:(0,r.tZ)(ts.Z,{})},unread:{key:"toggle-unread",label:"Unread",icon:(0,r.tZ)(es.Z,{})},participating:{key:"toggle-participating",label:"Participating",icon:(0,r.tZ)(rs.Z,{})},resolved:{key:"toggle-resolved",label:"Resolved",icon:(0,r.tZ)(qr.Z,{})}},sorts:{chronological:{key:"toggle-chronological",label:"Chronological",icon:(0,r.tZ)(Na.Z,{})},codeOrder:{key:"toggle-codeOrder",label:"Code order",icon:(0,r.tZ)(ns.Z,{})}},search:{placeholder:"Search threads\u2026"},markAsRead:"Mark as read",empty:{image:{alt:"an illustration of an escape key that resembles a sunny beach, with an umbrella and palm tree"},noThreadsCreated:{text:{primary:"You haven\u2019t started any threads yet.",secondary:function(e){return(0,r.BX)(r.HY,{children:["Select code and press"," ",(0,r.tZ)(is.Z,{shortcut:e,small:!0})," to get started."]})}}},noThreadsFound:{text:{primary:"No threads found.",secondary:"Try adjusting your search or filters."}}}},os=n(7842),ls=n(83223),ss=n(55877),cs=n.n(ss),ds=n(90725),us=n(27184),fs=n(23038);function ps(e){var t=e.unreadCount;return(0,r.BX)("div",{className:"jsx-7452becc48d76305 count-container",children:[t>0?(0,r.tZ)("div",{className:"jsx-7452becc48d76305 count",children:t}):null,(0,r.tZ)(d(),{id:"7452becc48d76305",children:".count-container.jsx-7452becc48d76305{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;height:15px}.count.jsx-7452becc48d76305{background:var(--accent-primary-default);color:var(--white);font-size:var(--font-size-small);height:15px;padding:0 5px;-webkit-border-radius:20px;-moz-border-radius:20px;border-radius:20px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}"})]})}function hs(e){var t=e.generalThreadsOpen,n=e.setGeneralThreadsOpen,a=e.generalThread,o=e.handleChangeMessage,l=void 0===o?function(){}:o,s=e.handleFinalizeMessage,c=void 0===s?function(){}:s,u=e.createAnnotationAnchorPlaceholder,f=void 0===u?function(){}:u,p=e.isChatOnly,h=(0,ve.Z)(),m=i.useMemo((function(){if(!a)return[];var e=(0,re.Z)(a.messages).sort((function(e,t){return new Date(e.timeCreated).getTime()-new Date(t.timeCreated).getTime()}));return(0,os.Z)(e)}),[a]);i.useEffect((function(){a||f({annotationAnchor:{id:cs()(),replId:h,isGeneral:!0,indexStart:null,indexEnd:null,isResolved:!1,otVersion:null,path:null}})}),[a,h,f]),i.useEffect((function(){a||f({annotationAnchor:{id:cs()(),replId:h,isGeneral:!0,indexStart:null,indexEnd:null,isResolved:!1,otVersion:null,path:null}})}),[a,h,f]);var v=i.useMemo((function(){return a?a.messages.filter((function(e){return!1===e.seen})).length:0}),[a]),g=i.useRef(null);(0,ls.Z)(t&&a||null);return i.useEffect((function(){g.current&&(g.current.scrollTop=g.current.scrollHeight)}),[g,a]),a?(0,r.BX)("div",{onClick:function(){return n(!0)},className:"jsx-".concat(ds.Q.__hash)+" "+d().dynamic([["3fe56862c5ae111e",[!p&&"border-top: 1px solid var(--background-higher);",!p&&"position: absolute;\n          bottom: 0;\n          left: 0;\n          right: 0;",p?"100%":"7.5em"]]])+" "+(Ei()("general-thread",{"is-open":t})||""),children:[(0,r.BX)("div",{onClick:function(e){p||(n(!t),e.stopPropagation())},className:"jsx-".concat(ds.Q.__hash)+" "+d().dynamic([["3fe56862c5ae111e",[!p&&"border-top: 1px solid var(--background-higher);",!p&&"position: absolute;\n          bottom: 0;\n          left: 0;\n          right: 0;",p?"100%":"7.5em"]]])+" general-thread-header",children:[(0,r.BX)(Li.Ug,{spacing:1,align:"center",children:[(0,r.tZ)(O.Z,{level:5,children:"Chat"}),(0,r.tZ)(ps,{unreadCount:v})]}),p?null:(0,r.tZ)(Li.Ug,{spacing:1,align:"center",children:(0,r.tZ)(ji.Z,{onClick:function(e){n(!t),e.stopPropagation()},filled:!1,Icon:function(){return(0,r.tZ)($r.Z,{rotate:t?0:180})},border:!1,size:"small"})})]}),(0,r.tZ)("div",{className:"jsx-".concat(ds.Q.__hash)+" "+d().dynamic([["3fe56862c5ae111e",[!p&&"border-top: 1px solid var(--background-higher);",!p&&"position: absolute;\n          bottom: 0;\n          left: 0;\n          right: 0;",p?"100%":"7.5em"]]])+" message-group-container-container",children:(0,r.tZ)("div",{ref:g,className:"jsx-".concat(ds.Q.__hash)+" "+d().dynamic([["3fe56862c5ae111e",[!p&&"border-top: 1px solid var(--background-higher);",!p&&"position: absolute;\n          bottom: 0;\n          left: 0;\n          right: 0;",p?"100%":"7.5em"]]])+" message-group-container",children:m.map((function(e){return(0,r.tZ)(fs.ZP,{messageGroup:e},e.messages[0].id)}))})}),(0,r.tZ)("div",{className:"jsx-".concat(ds.Q.__hash)+" "+d().dynamic([["3fe56862c5ae111e",[!p&&"border-top: 1px solid var(--background-higher);",!p&&"position: absolute;\n          bottom: 0;\n          left: 0;\n          right: 0;",p?"100%":"7.5em"]]])+" thread-input-container",children:(0,r.tZ)(us.Z,{placeholder:"Send message",annote:a,onChangeMessage:function(e){l({anchor:a,message:e.message,messageId:e.messageId}),n(!0)},onFinalizeMessage:function(e){c({anchor:a,message:e.message,messageId:e.messageId}),n(!0),(0,ut.j)(ut.U3.MESSAGE_SENT,{replId:h,source:"chat",newThread:0===a.messages.length})}})}),(0,r.tZ)(d(),{id:ds.Q.__hash,children:ds.Q}),(0,r.tZ)(d(),{id:"3fe56862c5ae111e",dynamic:[!p&&"border-top: 1px solid var(--background-higher);",!p&&"position: absolute;\n          bottom: 0;\n          left: 0;\n          right: 0;",p?"100%":"7.5em"],children:".general-thread.__jsx-style-dynamic-selector{margin:1px;padding:var(--space-16);-webkit-border-radius:var(--border-radius-8)var(--border-radius-8)0 0;-moz-border-radius:var(--border-radius-8)var(--border-radius-8)0 0;border-radius:var(--border-radius-8)var(--border-radius-8)0 0;".concat(!p&&"border-top: 1px solid var(--background-higher);","\n          box-shadow: rgba(2, 2, 3, 0.16) 0px -4px 8px 0px;z-index:100;").concat(!p&&"position: absolute;\n          bottom: 0;\n          left: 0;\n          right: 0;","\n          background: var(--background-default);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex:1 1 0;-moz-box-flex:1;-ms-flex:1 1 0px;flex:1 1 0;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;overflow:hidden;grid-template-rows:-webkit-min-content 1fr -webkit-min-content;grid-template-rows:min-content 1fr min-content;grid-gap:var(--space-8);cursor:pointer;-webkit-transition:.2s height;-moz-transition:.2s height;-o-transition:.2s height;transition:.2s height;height:").concat(p?"100%":"7.5em","}.general-thread.is-open.__jsx-style-dynamic-selector{height:100%;cursor:unset}.general-thread-header.__jsx-style-dynamic-selector{cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;width:100%}.message-group-container-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;overflow:hidden;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;height:0;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1}.general-thread.is-open.__jsx-style-dynamic-selector .message-group-container-container.__jsx-style-dynamic-selector{height:100%}.message-group-container.__jsx-style-dynamic-selector{display:grid;grid-row-gap:var(--space-16);overflow-y:auto;padding-bottom:0}.thread-input-container.__jsx-style-dynamic-selector{width:100%}")})]}):null}var ms=n(98284),vs=n(24949),gs=n(65632),bs=n(64614),xs=n(24957),Zs=n(2230),ys=function(e){var t=(0,Zs.Z)(e,null,null).updateThread;return{handleToggleResolved:function(e){return t({changes:{isResolved:e}})}}};var ws,ks,Cs=function(e){var t=e.thread,n=e.onClick,a=t.messages.filter((function(e){return!e.seen})).length,o=function(e){var t=(0,xs.Vy)(e.path?e:null);return null===t||void 0===t?void 0:t.getSnippet()}(t),l=(0,Zs.Z)(t.id,null,null).thread,s=(0,Ut.Dv)(Ol.Q),c=ys(t.id).handleToggleResolved,d="Jump to code",u="Resolve this thread",f="Re-open",h=function(e,t){var n=function(e){return 1===e?"reply":"replies"};return e<=1?"View ".concat(1===t?"unread":""," thread"):t?"View ".concat(t," unread ").concat(n(t)):"View ".concat(e-1," ").concat(n(e-1))},m=function(e,t){return"Opened ".concat(e," by ").concat(t)},v=t.messages[0],g=i.useMemo((function(){return(null===v||void 0===v?void 0:v.timeCreated)?(0,bs.Z)(v.timeCreated)+" ago":"some time ago"}),[v]);return t.user?(0,r.BX)(p.Tg,{css:[p.gU.filled,p.l0.overflow("hidden"),s===t.id&&{borderColor:p.TV.accentPrimaryDefault}],onClick:function(){n(t)},children:[(0,r.BX)(p.Tg,{elevated:!0,css:[p.l0.flex.row,p.l0.align.center,p.l0.justify.spaceBetween,p.l0.flex.grow(1),p.l0.px(8),p.l0.py(8)],children:[(0,r.tZ)(p.G7,{css:[p.l0.flex.row,p.l0.align.center,p.l0.rowWithGap(4)],children:(0,r.tZ)(p.xv,{color:"dimmer",variant:"small",children:m(g,t.user.username)})}),(0,r.BX)(p.G7,{css:[p.l0.flex.row,p.l0.align.center,p.l0.rowWithGap(4)],children:[o&&t.path?(0,r.tZ)(p.hU,{alt:d,onClick:function(){return n(t)},children:(0,r.tZ)(ci.Z,{})}):null,t.isResolved?(0,r.tZ)(p.zx,{text:f,small:!0,colorway:"primary",onClick:function(){c(!1)}}):(0,r.tZ)(p.hU,{alt:u,onClick:function(){c(!0)},children:(0,r.tZ)(qr.Z,{})})]})]}),o&&t.path?(0,r.tZ)(ms.Fy,{elevation:"root",path:t.path,snippet:o,fontSize:12,maxHeight:"42px",minHeight:"42px",allowScroll:!1}):null,v&&(0,r.tZ)(p.G7,{css:[p.l0.p(8),p.l0.py(12)],children:(0,r.tZ)(vs.Z,{thread:l,message:v},v.id)}),t.messages.length>1&&(0,r.BX)(p.G7,{css:[p.l0.pb(12),p.l0.px(8),p.l0.flex.row,p.l0.align.center,p.l0.rowWithGap(4),p.l0.color.foregroundDimmer],children:[(0,r.tZ)(p.G7,{css:[p.l0.position.relative],children:(0,r.tZ)(gs.Z,{unreadDot:a>0})}),(0,r.tZ)(p.xv,{variant:"small",children:h(t.messages.length,a)})]})]}):null},js=function(e){var t=e.path,n=e.threads,i=e.onThreadClick,a=n.some((function(e){return e.messages.some((function(e){return!e.seen}))}));return(0,r.tZ)(p.G7,{css:[p.l0.pb(8)],children:(0,r.tZ)(p.Qd,{css:[p.TV.singleLine,p.l0.px(8)],headerContent:(0,r.BX)(p.G7,{css:[p.l0.flex.row,p.l0.align.center,p.l0.justify.spaceBetween,p.l0.flex.growAndShrink(1),p.l0.mr(8)],children:[(0,r.BX)(p.G7,{css:[p.l0.flex.row,p.l0.align.center,p.l0.rowWithGap(8),p.l0.flex.growAndShrink(1)],children:[(0,r.tZ)(Nt.Z,{path:t,size:20}),(0,r.tZ)(p.xv,{css:[p.l0.flex.shrink(1)],children:t})]}),a&&(0,r.tZ)("div",{css:[p.l0.flex.shrink(0),p.l0.width(8),p.l0.height(8),p.l0.backgroundColor.redStronger,p.l0.borderRadius("full")]})]}),children:(0,r.tZ)("div",{css:[p.l0.mt(8),p.l0.colWithGap(8)],children:n.map((function(e){return(0,r.tZ)(Cs,{thread:e,onClick:i},e.id)}))})})})};function _s(e){var t=e.primary,n=e.secondary;return(0,r.tZ)(p.G7,{css:[p.l0.align.center,p.l0.justify.center,p.l0.flex.grow(1)],children:(0,r.BX)(p.G7,{css:[p.l0.align.center,p.l0.justify.center,p.l0.flex.grow(1)],children:[(0,r.tZ)(p.G7,{css:[p.l0.maxWidth(140),p.l0.maxHeight(140),p.l0.position.relative,p.l0.align.center,p.l0.justify.center,{pointerEvents:"none"}],children:(0,r.tZ)(Jl,{})}),(0,r.tZ)(p.xv,{variant:"subheadDefault",css:p.l0.mt(32),children:t}),(0,r.tZ)("div",{css:[p.l0.color.foregroundDimmest],children:(0,r.tZ)(p.xv,{variant:"text",css:p.l0.mt(8),children:n})})]})})}!function(e){e.CHRONOLOGICAL="chronological",e.CODE_ORDER="codeOrder"}(ws||(ws={})),function(e){e.PARTICIPATING="participating",e.RESOLVED="resolved",e.UNREAD="unread",e.INBOX="inbox"}(ks||(ks={}));var Ts=function(e){var t=e.isPane,n=e.isChatOnly,a=(0,ve.Z)(),l=(0,Xl.c)("flag-typing-presence"),s=l.enabled,c=(l.loading,Hl(a,{onReceiveAnnotationUpdate:function(){}})),u=c.annotations,f=c.loading,h=c.generalThread,m=c.createAnnotationAnchorPlaceholder,g=c.createAnnotationMessage,b=c.updateThreadPreview,x=function(e){var t=(0,ae.Z)({},Ql,e);return se.a($l,t)}(),y=x.data,w=x.loading,C=f||w,j=(0,o.Z)(i.useState(!1),2),_=j[0],T=j[1],S=(0,k.Z)(),z=(0,Ut.b9)(Ol.Q),B=(0,v.Z)(),R=B.container,E=B.session,G=(0,o.Z)(i.useState(""),2),L=G[0],I=G[1],N=(0,o.Z)(i.useState("INBOX"),2),A=N[0],D=N[1],X=(0,o.Z)(i.useState("CHRONOLOGICAL"),2),P=X[0],M=X[1],F=i.useMemo((function(){var e,t=null===y||void 0===y||null===(e=y.currentUser)||void 0===e?void 0:e.id,n=u.filter((function(e){if("INBOX"===A)return!e.isResolved;if("RESOLVED"===A)return e.isResolved;if("PARTICIPATING"===A)return!t||function(e,t){var n;return(null===(n=e.user)||void 0===n?void 0:n.id)===t||e.messages.some((function(e){var n=e.user;return(null===n||void 0===n?void 0:n.id)===t}))}(e,t);if("UNREAD"===A){var n=e.messages.some((function(e){return!e.seen}));return n}return!0}));return n}),[y,u,A]),O=i.useMemo((function(){return F.filter((function(e){var t,n;return 0===L.length||null!==(n=null===(t=e.path)||void 0===t?void 0:t.toLowerCase().includes(L.toLowerCase()))&&void 0!==n&&n}))}),[L,F]),U=i.useMemo((function(){return(0,re.Z)(O).sort((function(e,t){if("CHRONOLOGICAL"===P){var n,r,i=new Date(null===(n=e.messages[0])||void 0===n?void 0:n.timeCreated),a=new Date(null===(r=t.messages[0])||void 0===r?void 0:r.timeCreated);return i&&a?i<a?1:-1:0}return"CODE_ORDER"===P?(0,Z.IV)(e.path,t.path):0})).reduce((function(e,t){var n=t.path;return n&&"undefined"!==typeof n?(e[n]=e[n]||[],e[n].push(t),e):e}),{})}),[O,P]),W=i.useMemo((function(){var e=(0,ae.Z)({},U),t=Object.values(e).map((function(e){return(0,re.Z)(e).sort((function(e,t){if("CHRONOLOGICAL"===P){var n,r,i=new Date(null===(n=e.messages[0])||void 0===n?void 0:n.timeCreated),a=new Date(null===(r=t.messages[0])||void 0===r?void 0:r.timeCreated);return i&&a?i<a?1:-1:0}var o,l,s,c;return"CODE_ORDER"===P?(null!==(l=null!==(o=e.indexStart)&&void 0!==o?o:e.indexEnd)&&void 0!==l?l:0)<(null!==(c=null!==(s=t.indexStart)&&void 0!==s?s:t.indexEnd)&&void 0!==c?c:0)?-1:1:0}))}));return t.reduce((function(e,t,n){return e[Object.keys(U)[n]]=t,e}),{})}),[U,P]),H=(0,ql.Z)().map((function(e){return e.username})),V=function(e){var t=(0,o.Z)((0,Wl.n)(),1)[0];return function(){t({variables:{replId:e}})}}(a),q=function(){var e=(0,Ne.Z)(De().mark((function e(t){return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.path){e.next=2;break}return e.abrupt("return");case 2:if(S===t.path){e.next=14;break}return e.prev=3,e.next=6,R.exec("test","-f",t.path);case 6:if(null===e.sent.error){e.next=9;break}return e.abrupt("return");case 9:e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(3),e.abrupt("return");case 14:E.openFile(t.path),z(t.id);case 16:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}(),Y=Vl.Wo.StartThread.keyboardShortcut;return n?(0,r.tZ)(hs,{isChatOnly:!0,generalThreadsOpen:_,setGeneralThreadsOpen:T,generalThread:h,handleChangeMessage:function(e){var t=e.anchor,n=e.message,r=e.messageId;b({threadId:t.id,message:s?n:null,messageId:r})},handleFinalizeMessage:function(e){var t=e.anchor,n=e.message,r=e.messageId,i=(0,Yl.kW)(n,{users:(0,re.Z)(H).concat(["everyone"])});g({anchor:t,annotationMessage:{id:r,text:n,mentions:i.mentions}})},createAnnotationAnchorPlaceholder:m}):(0,r.BX)(p.Tg,{className:"threads-inbox",elevated:!t,css:[!t&&[p.l0.borderRadius(8),p.l0.pb(8),p.l0.shadow(2),{borderWidth:p.TV.borderWidthDefault,borderStyle:"solid",borderColor:p.TV.outlineDimmest}],p.l0.height("100%"),p.l0.width("100%"),p.l0.overflow("hidden"),p.l0.position.relative],"aria-busy":C,children:[C?(0,r.tZ)(p.G7,{css:[p.l0.display.flex,p.l0.align.center,p.l0.justify.center,p.l0.height("100%")],children:(0,r.tZ)(he.Z,{size:24})}):(0,r.BX)(r.HY,{children:[(0,r.BX)(p.G7,{className:"threads-inbox-header",css:[p.l0.py(12),p.l0.px(8),p.l0.position.sticky,p.l0.top(0),p.l0.backgroundColor.backgroundDefault,{zIndex:10}],children:[t?null:(0,r.tZ)(p.G7,{css:[p.l0.pb(12)],children:(0,r.tZ)(p.xv,{variant:"subheadDefault",children:as.title})}),(0,r.BX)(p.G7,{css:[p.l0.flex.row,p.l0.align.center,p.l0.flex.wrap,{gap:8}],children:[(0,r.tZ)(p.II,{placeholder:as.search.placeholder,value:L,onChange:function(e){return I(e.target.value)},css:[p.l0.flex.grow(1)]}),(0,r.BX)(p.G7,{css:[p.l0.flex.row,p.l0.maxWidth("100%"),{gap:8}],children:[(0,r.tZ)(p.G7,{css:[p.l0.flex.shrink(1)],children:(0,r.tZ)(p.ZE,{cssProps:[p.l0.flex.shrink(1),{span:p.l0.flex.shrink(1)}],icon:as.filters[ks[A]].icon,suffix:(0,r.tZ)(Vt.ChevronDown,{}),label:as.filters[ks[A]].label,onAction:function(e){switch(e){case"toggle-inbox":D("INBOX");break;case"toggle-unread":D("UNREAD");break;case"toggle-participating":D("PARTICIPATING");break;case"toggle-resolved":D("RESOLVED")}},children:Object.entries(as.filters).map((function(e){var t=(0,o.Z)(e,2),n=(t[0],t[1]);return(0,r.tZ)(Fl.ck,{"aria-label":n.label,children:(0,r.BX)(p.G7,{css:p.l0.rowWithGap(8),children:[n.icon,(0,r.tZ)(p.xv,{children:n.label})]})},n.key)}))})}),(0,r.tZ)(p.G7,{css:[p.l0.flex.shrink(1)],children:(0,r.tZ)(p.ZE,{cssProps:[p.l0.flex.shrink(1),{span:p.l0.flex.shrink(1)}],icon:as.sorts[ws[P]].icon,suffix:(0,r.tZ)(Vt.ChevronDown,{}),label:as.sorts[ws[P]].label,onAction:function(e){switch(e){case as.sorts.chronological.key:M("CHRONOLOGICAL");break;case as.sorts.codeOrder.key:M("CODE_ORDER")}},children:Object.entries(as.sorts).map((function(e){var t=(0,o.Z)(e,2),n=(t[0],t[1]);return(0,r.tZ)(Fl.ck,{"aria-label":n.label,children:(0,r.BX)(p.G7,{css:p.l0.rowWithGap(8),children:[n.icon,(0,r.tZ)(p.xv,{children:n.label})]})},n.key)}))})}),(0,r.tZ)(p.G7,{css:[p.l0.flex.shrink(1)],children:(0,r.tZ)(p.zx,{iconLeft:(0,r.tZ)(qr.Z,{}),text:as.markAsRead,onClick:V,css:{span:p.l0.flex.shrink(1)}})})]})]})]}),0===u.length?(0,r.tZ)(_s,{primary:as.empty.noThreadsCreated.text.primary,secondary:as.empty.noThreadsCreated.text.secondary(Y)}):(0,r.tZ)(r.HY,{children:Object.keys(W).length>0?(0,r.tZ)(p.G7,{css:[p.l0.flex.growAndShrink(1),p.l0.overflowY("auto")],children:Object.keys(W).map((function(e,t){return(0,r.tZ)(js,{path:e||"-",threads:Object.values(W)[t],onThreadClick:function(e){q(e)}},e)}))}):(0,r.tZ)(_s,{primary:as.empty.noThreadsFound.text.primary,secondary:as.empty.noThreadsFound.text.secondary})})]}),(0,r.tZ)(d(),{id:ds.Q.__hash,children:ds.Q})]})},Ss=n(71171),zs=n.n(Ss),Bs=n(93604),Rs=n(90700),Es=n(2666),Gs=n(722),Ls=n(28898);function Is(e){var t=e.users;if(0===t.length)return null;if(1===t.length){var n=(0,o.Z)(t,1)[0];return(0,r.tZ)(Ls.Z,{size:"m",url:n.image})}if(2===t.length){var i=(0,o.Z)(t,2),a=i[0],l=i[1];return(0,r.BX)("div",{children:[(0,r.tZ)(Ls.Z,{size:"s",url:a.image,style:{left:"25%",top:"3px",width:"20px",height:"20px"}}),(0,r.tZ)(Ls.Z,{size:"s",url:l.image,style:{left:"-25%",top:"-3px",width:"20px",height:"20px"}})]})}if(t.length>=3){var s=(0,o.Z)(t.slice(0,3),3),c=s[0],d=s[1],u=s[2];return(0,r.BX)("div",{style:{position:"relative"},children:[(0,r.tZ)(Ls.Z,{size:"s",url:c.image,style:{left:"35%",top:"3px",zIndex:"2"}}),(0,r.tZ)(Ls.Z,{size:"s",url:d.image,style:{left:"5%",top:"-3px",zIndex:"3"}}),(0,r.tZ)(Ls.Z,{size:"s",url:u.image,style:{left:"-25%",top:"3px",position:"absolute",zIndex:"1"}})]})}return null}function Ns(){var e=(0,oe.Z)(["\n  query Conversations($replId: String!) {\n    currentUser {\n      id\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        slug\n        user {\n          id\n          username\n        }\n      }\n    }\n  }\n"]);return Ns=function(){return e},e}var As={},Ds=(0,le.Ps)(Ns());var Xs,Ps=n(81979),Ms=n(4972);function Fs(e){var t,n=e.annotation,a=e.onChangeMessage,o=void 0===a?function(){}:a,l=e.onFinalizeMessage,s=void 0===l?function(){}:l,c=e.onCloseThread,u=void 0===c?function(){}:c,f=e.scrollToAnchor,p=void 0===f?function(){}:f,h=e.markThreadResolved,m=void 0===h?function(){}:h,v=e.markThreadUnresolved,g=void 0===v?function(){}:v,b=(0,Xl.c)("flag-thread-snippets"),x=b.enabled,Z=b.loading,y=(0,Gs.Z)(n.id),w=(0,xs.Vy)(n),k=i.useMemo((function(){var e,t=(0,re.Z)(n.messages).sort((function(e,t){return new Date(e.timeCreated).getTime()-new Date(t.timeCreated).getTime()}));return(e=t).push.apply(e,(0,re.Z)(y.filter((function(e){return!t.slice(-5).find((function(t){return t.id===e.id}))})))),(0,os.Z)(t)}),[n,y]),C=i.useMemo((function(){if(w)return null===w||void 0===w?void 0:w.getSnippet()}),[w]),j=i.useRef(null);(0,ls.Z)(n);i.useEffect((function(){j.current&&(j.current.scrollTop=j.current.scrollHeight)}),[j,n]);var _=(null===w||void 0===w||null===(t=w.anchor)||void 0===t?void 0:t.path)||n.path||"";return(0,r.BX)(r.HY,{children:[(0,r.BX)("div",{className:"jsx-f601ef3cc045c3e6 header",children:[(0,r.tZ)("span",{className:"jsx-f601ef3cc045c3e6",children:(0,r.tZ)(ji.Z,{filled:!1,border:!1,onClick:u,children:(0,r.tZ)($r.Z,{rotate:90})})}),(0,r.tZ)("span",{className:"jsx-f601ef3cc045c3e6 separator"}),(0,r.BX)(Li.Ug,{children:[!n.isResolved&&n.path&&(0,r.tZ)(ji.Z,{filled:!1,border:!1,"aria-label":"Jump to code",role:"tooltip","data-microtip-position":"left",onClick:function(){return p(n.id)},children:(0,r.tZ)(ci.Z,{})}),!n.isResolved&&!n.isGeneral&&(0,r.tZ)(ji.Z,{filled:!1,border:!1,"aria-label":"Resolve thread",role:"tooltip","data-microtip-position":"left",onClick:function(){return m(n)},children:(0,r.tZ)(qr.Z,{})}),n.isResolved&&!n.isGeneral&&(0,r.tZ)(ji.Z,{filled:!1,border:!1,"aria-label":"Unresolve thread",role:"tooltip","data-microtip-position":"left",onClick:function(){return g(n)},children:(0,r.tZ)(rs.Z,{})})]}),(0,r.tZ)(d(),{id:"f601ef3cc045c3e6",children:".separator.jsx-f601ef3cc045c3e6{-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1}.header.jsx-f601ef3cc045c3e6{padding:var(--space-8);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;min-height:32px}"})]}),(0,r.BX)("div",{className:"jsx-e771b3432a43458d "+"jsx-".concat(ds.Q.__hash)+" thread",children:[(0,r.tZ)("div",{className:"jsx-e771b3432a43458d "+"jsx-".concat(ds.Q.__hash)+" message-group-container-container",children:(0,r.BX)("div",{ref:j,className:"jsx-e771b3432a43458d "+"jsx-".concat(ds.Q.__hash)+" message-group-container",children:[!Z&&x&&n.path&&(0,r.tZ)(ms.u5,{path:_,snippet:C,onNavigateToCode:function(){return p(n.id)}}),k.map((function(e){return(0,r.tZ)(fs.ZP,{messageGroup:e},e.messages[0].id)}))]})}),(0,r.tZ)(us.Z,{annote:n,onChangeMessage:o,onFinalizeMessage:s}),(0,r.tZ)(d(),{id:ds.Q.__hash,children:ds.Q}),(0,r.tZ)(d(),{id:"e771b3432a43458d",children:".thread.jsx-e771b3432a43458d{position:relative;display:grid;grid-row-gap:var(--space-16);-webkit-box-pack:stretch;-webkit-justify-content:stretch;-moz-box-pack:stretch;-ms-flex-pack:stretch;justify-content:stretch;overflow:hidden;padding:var(--space-16);padding-top:0;grid-template-rows:1fr -webkit-min-content;grid-template-rows:1fr min-content;height:100%}.message-group-container-container.jsx-e771b3432a43458d{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;overflow:hidden;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.message-group-container.jsx-e771b3432a43458d{display:grid;grid-row-gap:var(--space-16);overflow-y:auto;padding:var(--space-8);padding-bottom:0}"})]})]})}function Os(e){var t=e.unreadCount;return(0,r.BX)("div",{className:"jsx-7452becc48d76305 count-container",children:[t>0?(0,r.tZ)("div",{className:"jsx-7452becc48d76305 count",children:t}):null,(0,r.tZ)(d(),{id:"7452becc48d76305",children:".count-container.jsx-7452becc48d76305{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;height:15px}.count.jsx-7452becc48d76305{background:var(--accent-primary-default);color:var(--white);font-size:var(--font-size-small);height:15px;padding:0 5px;-webkit-border-radius:20px;-moz-border-radius:20px;border-radius:20px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}"})]})}function Us(e){var t=e.annotation,n=e.onClick,a=t.messages.some((function(e){return!e.seen})),o=(0,xs.Vy)(t),l=i.useMemo((function(){return t.messages.filter((function(e){return!1===e.seen})).length}),[t]),s=(0,Es.Z)(t),c=s.map((function(e){return e.username})).join(", "),u=t.messages[0],f=t.messages[t.messages.length-1],p=(null===o||void 0===o?void 0:o.anchor.path)||(null===t||void 0===t?void 0:t.path)||void 0,h=i.useMemo((function(){if(o)return null===o||void 0===o?void 0:o.getSnippet()}),[o]),m=(null===t||void 0===t?void 0:t.user)?{src:t.user.image,name:t.user.username}:void 0,v="TextMessageContentType"===(null===t||void 0===t?void 0:t.messages[0].content.__typename)?t.messages[0].content.text:void 0,g=i.useMemo((function(){if(!(null===f||void 0===f?void 0:f.timeCreated))return"";var e=new Date(f.timeCreated),t=e.getTime();return Date.now()-t<1e3?"just now":"".concat((0,Bs.F)(e,!0)," ago")}),[f]);return u?t.path?(0,r.tZ)(ms.dp,{path:p,snippet:h,timeString:g,onClick:n,avatar:m,message:v}):(0,r.BX)("button",{onClick:n,tabIndex:0,className:"jsx-e71b06328d0d68b1 "+(Ei()("thread",{unread:a})||""),children:[(0,r.tZ)("div",{className:"jsx-e71b06328d0d68b1 profile",children:(0,r.tZ)(Is,{users:s})}),(0,r.BX)("div",{className:"jsx-e71b06328d0d68b1 message-preview",children:[(0,r.tZ)("div",{className:"jsx-e71b06328d0d68b1 thread-title",children:c}),"TextMessageContentType"===u.content.__typename&&(0,r.tZ)("div",{className:"jsx-e71b06328d0d68b1 thread-preview",children:u.content.text})]}),(0,r.BX)("div",{className:"jsx-e71b06328d0d68b1 info",children:[(0,r.tZ)(Os,{unreadCount:l}),(0,r.tZ)("div",{className:"jsx-e71b06328d0d68b1 time",children:g})]}),(0,r.tZ)(d(),{id:"e71b06328d0d68b1",children:".thread.jsx-e71b06328d0d68b1{background:var(--background-default);padding:var(--space-8);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);display:grid;grid-auto-flow:column;grid-template-columns:-webkit-min-content minmax(0,1fr)-webkit-min-content;grid-template-columns:min-content minmax(0,1fr)min-content;grid-gap:var(--space-8);width:100%;max-height:52px;overflow:hidden;cursor:pointer;-webkit-transition:.1s all ease-in-out;-moz-transition:.1s all ease-in-out;-o-transition:.1s all ease-in-out;transition:.1s all ease-in-out;border:none;text-align:left}.thread.unread.jsx-e71b06328d0d68b1 .thread-title.jsx-e71b06328d0d68b1{font-weight:var(--font-weight-bold)}.thread.jsx-e71b06328d0d68b1:hover{-webkit-transform:scale(1.05);-moz-transform:scale(1.05);-ms-transform:scale(1.05);-o-transform:scale(1.05);transform:scale(1.05);-webkit-transition:.2s all;-moz-transition:.2s all;-o-transition:.2s all;transition:.2s all}.thread.jsx-e71b06328d0d68b1:focus{outline:none;outline-offset:2px;-webkit-box-shadow:0 0 0 3px var(--accent-primary-dimmer);-moz-box-shadow:0 0 0 3px var(--accent-primary-dimmer);box-shadow:0 0 0 3px var(--accent-primary-dimmer)}.thread-title.jsx-e71b06328d0d68b1,.thread-preview.jsx-e71b06328d0d68b1{white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}.thread-title.jsx-e71b06328d0d68b1{color:var(--foreground-default);font-size:var(--font-size-default)}.thread-preview.jsx-e71b06328d0d68b1{color:var(--foreground-dimmer);font-size:var(--font-size-small)}.profile.jsx-e71b06328d0d68b1{width:25px;height:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.time.jsx-e71b06328d0d68b1{white-space:pre;font-size:var(--font-size-small);color:var(--foreground-dimmest)}.info.jsx-e71b06328d0d68b1{display:grid;grid-gap:var(--space-4);-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:end;-webkit-align-items:flex-end;-moz-box-align:end;-ms-flex-align:end;align-items:flex-end}"})]}):null}function Ws(e){var t=e.generalThreadsOpen,n=e.setGeneralThreadsOpen,a=(0,ve.Z)(),o=i.useContext(Ps.Z),l=o.generalThread,s=o.handleChangeMessage,c=o.handleFinalizeMessage,u=o.createAnnotationAnchorPlaceholder,f=i.useMemo((function(){if(!l)return[];var e=(0,re.Z)(l.messages).sort((function(e,t){return new Date(e.timeCreated).getTime()-new Date(t.timeCreated).getTime()}));return(0,os.Z)(e)}),[l]);i.useEffect((function(){l||u({annotationAnchor:{id:zs()(),replId:a,isGeneral:!0,indexStart:null,indexEnd:null,isResolved:!1,otVersion:null,path:null}})}),[l,a,u]);var p=i.useMemo((function(){return l?l.messages.filter((function(e){return!1===e.seen})).length:0}),[l]),h=i.useRef(null);(0,ls.Z)(t&&l||null);return i.useEffect((function(){h.current&&(h.current.scrollTop=h.current.scrollHeight)}),[h,l]),l?(0,r.BX)("div",{onClick:function(){return n(!0)},className:"jsx-f2c7b6e2655edf19 "+"jsx-".concat(ds.Q.__hash)+" "+(Ei()("general-thread",{"is-open":t})||""),children:[(0,r.BX)("div",{className:"jsx-f2c7b6e2655edf19 "+"jsx-".concat(ds.Q.__hash)+" general-thread-header",children:[(0,r.BX)(Li.Ug,{spacing:1,align:"center",children:[(0,r.tZ)(O.Z,{level:5,children:"Chat"}),(0,r.tZ)(Os,{unreadCount:p})]}),(0,r.tZ)(Li.Ug,{spacing:1,align:"center",children:(0,r.tZ)(ji.Z,{onClick:function(e){n(!t),e.stopPropagation()},filled:!1,Icon:function(){return(0,r.tZ)($r.Z,{rotate:t?0:180})},border:!1,size:"small"})})]}),(0,r.tZ)("div",{className:"jsx-f2c7b6e2655edf19 "+"jsx-".concat(ds.Q.__hash)+" message-group-container-container",children:(0,r.tZ)("div",{ref:h,className:"jsx-f2c7b6e2655edf19 "+"jsx-".concat(ds.Q.__hash)+" message-group-container",children:f.map((function(e){return(0,r.tZ)(fs.ZP,{messageGroup:e},e.messages[0].id)}))})}),(0,r.tZ)("div",{className:"jsx-f2c7b6e2655edf19 "+"jsx-".concat(ds.Q.__hash)+" thread-input-container",children:(0,r.tZ)(us.Z,{placeholder:"Send message",annote:l,onChangeMessage:function(e){s({anchor:l,message:e.message,messageId:e.messageId}),n(!0)},onFinalizeMessage:function(e){c({anchor:l,message:e.message,messageId:e.messageId}),n(!0),(0,ut.j)(ut.U3.MESSAGE_SENT,{replId:a,source:"chat",newThread:0===l.messages.length})}})}),(0,r.tZ)(d(),{id:ds.Q.__hash,children:ds.Q}),(0,r.tZ)(d(),{id:"f2c7b6e2655edf19",children:".general-thread.jsx-f2c7b6e2655edf19{margin:1px;padding:var(--space-16);-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);border-top:1px solid var(--background-higher);-webkit-box-shadow:var(--shadow-2);-moz-box-shadow:var(--shadow-2);box-shadow:var(--shadow-2);z-index:100;position:absolute;bottom:0;left:0;right:0;background:var(--background-default);display:grid;overflow:hidden;grid-template-rows:-webkit-min-content 1fr -webkit-min-content;grid-template-rows:min-content 1fr min-content;grid-gap:var(--space-8);cursor:pointer;-webkit-transition:.2s height;-moz-transition:.2s height;-o-transition:.2s height;transition:.2s height;height:7.5em}.general-thread.is-open.jsx-f2c7b6e2655edf19{height:100%;cursor:unset}.general-thread-header.jsx-f2c7b6e2655edf19{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;width:100%}.message-group-container-container.jsx-f2c7b6e2655edf19{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;overflow:hidden;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;height:0}.general-thread.is-open.jsx-f2c7b6e2655edf19 .message-group-container-container.jsx-f2c7b6e2655edf19{height:100%}.message-group-container.jsx-f2c7b6e2655edf19{display:grid;grid-row-gap:var(--space-16);overflow-y:auto;padding:var(--space-8);padding-bottom:0}.thread-input-container.jsx-f2c7b6e2655edf19{width:100%}"})]}):null}function Hs(e,t){var n,r,i=null===(n=e.messages)||void 0===n?void 0:n[e.messages.length-1],a=null===(r=t.messages)||void 0===r?void 0:r[t.messages.length-1];return i||a?i?a?new Date(a.timeCreated).getTime()-new Date(i.timeCreated).getTime():1:-1:0}function Vs(e){var t=e.annotations,n=e.inboxMode,a=e.generalThreadsOpen,l=e.setInboxMode,s=e.onThreadClick,c=e.onMarkAllAsReadClick,u=e.onClose,f=e.setGeneralThreadsOpen,p=(0,o.Z)(i.useState(!1),2),h=p[0],m=p[1],g=(0,v.Z)().session,b=i.useMemo((function(){return t.filter((function(e){return!e.isGeneral&&(n===Xs.ACTIVE?!e.isResolved:e.isResolved)})).sort(Hs)}),[t,n]),x=(0,o.Z)(i.useState(3),2),Z=x[0],y=x[1],w=(0,Ms.Z)({onLoadMore:function(){y((function(e){return e+3}))}}).targetRef,k=i.useMemo((function(){var e={},t=!0,n=!1,r=void 0;try{for(var i,a=b[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o,l=i.value,s=l.messages[l.messages.length-1];if(s){var c=l.path||-1,d=e[c]||{threads:[],unreadCount:0,lastMessageTime:null,path:c,lang:null===(o=l.path)||void 0===o?void 0:o.split(".").slice(-1)[0]};d.threads.push(l),d.unreadCount+=l.messages.filter((function(e){return!1===e.seen})).length,d.lastMessageTime?d.lastMessageTime=new Date(Math.max(d.lastMessageTime.getTime(),new Date(s.timeCreated).getTime())):d.lastMessageTime=new Date(s.timeCreated),e[c]=d}}}catch(u){n=!0,r=u}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return Object.values(e).sort((function(e,t){return t.lastMessageTime.getTime()-e.lastMessageTime.getTime()}))}),[b]);return(0,r.BX)("div",{className:"jsx-10034a93e516db1e "+"jsx-".concat(ds.Q.__hash)+" threads-feed",children:[(0,r.BX)("div",{className:"jsx-10034a93e516db1e "+"jsx-".concat(ds.Q.__hash)+" header",children:[(0,r.BX)(Li.Ug,{align:"center",spacing:1,children:[(0,r.tZ)(O.Z,{level:4,style:{marginLeft:"var(--space-8)"},children:"Threads"}),(0,r.tZ)(Ni.Z,{isMenuOpen:h,renderAnchorComponent:function(){return(0,r.tZ)(ji.Z,{filled:!0,border:!1,onClick:function(){return m(!h)},Icon:$r.Z,iconOnRight:!0,children:n})},renderItemChildComponent:function(e){return(0,r.tZ)("div",{className:"jsx-10034a93e516db1e "+"jsx-".concat(ds.Q.__hash),children:e.label})},onClick:function(e){l(e.mode),m(!1)},items:[{label:"Active",mode:Xs.ACTIVE},{label:"Resolved",mode:Xs.RESOLVED}]}),(0,r.tZ)(ji.Z,{border:!1,filled:!1,Icon:Rs.Z,onClick:c,"aria-label":"Mark all as read",role:"tooltip","data-microtip-position":"bottom"})]}),(0,r.tZ)("span",{className:"jsx-10034a93e516db1e "+"jsx-".concat(ds.Q.__hash),children:(0,r.tZ)(ji.Z,{filled:!1,border:!1,onClick:u,children:(0,r.tZ)(di.Z,{})})})]}),(0,r.tZ)("div",{className:"jsx-10034a93e516db1e "+"jsx-".concat(ds.Q.__hash)+" threads-container",children:(0,r.BX)(Li.gC,{spacing:6,align:"stretch",children:[(0,r.BX)(r.HY,{children:[k.slice(0,Z).map((function(e){return(0,r.BX)("div",{className:"jsx-10034a93e516db1e "+"jsx-".concat(ds.Q.__hash)+" thread-group",children:[-1!==e.path&&(0,r.tZ)("button",{onClick:function(){"string"===typeof e.path&&g.openFile(e.path)},className:"jsx-10034a93e516db1e "+"jsx-".concat(ds.Q.__hash)+" group-header",children:(0,r.BX)("div",{className:"jsx-10034a93e516db1e "+"jsx-".concat(ds.Q.__hash)+" left",children:[(0,r.tZ)(Nt.Z,{path:"number"!==typeof e.path?e.path:"",size:20}),(0,r.tZ)("span",{className:"jsx-10034a93e516db1e "+"jsx-".concat(ds.Q.__hash)+" path",children:e.path}),(0,r.tZ)(Os,{unreadCount:e.unreadCount})]})}),e.threads.map((function(e){return(0,r.tZ)(Us,{annotation:e,onClick:function(){return s(e.id)}},e.id)}))]},e.path)})),Z<k.length&&(0,r.tZ)("div",{ref:w,style:{height:"100px"},className:"jsx-10034a93e516db1e "+"jsx-".concat(ds.Q.__hash)})]}),(0,r.tZ)("div",{className:"jsx-10034a93e516db1e "+"jsx-".concat(ds.Q.__hash)+" general-threads-buffer"})]})}),(0,r.tZ)(Ws,{generalThreadsOpen:a,setGeneralThreadsOpen:f}),(0,r.tZ)(d(),{id:ds.Q.__hash,children:ds.Q}),(0,r.tZ)(d(),{id:"6bd29fae0c26abbe",children:"::-webkit-scrollbar-track{background:transparent!important}"}),(0,r.tZ)(d(),{id:"ca620c0fa3049fc0",children:".feedback.jsx-10034a93e516db1e{text-decoration:none}.threads-feed.jsx-10034a93e516db1e .list-wrapper{z-index:1}.threads-feed.jsx-10034a93e516db1e{height:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.threads-container.jsx-10034a93e516db1e{position:relative;padding:var(--space-16);overflow-y:auto;overflow-y:overlay}.header.jsx-10034a93e516db1e{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;padding:var(--space-8);padding-top:var(--space-16);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;min-height:32px}.thread-group.jsx-10034a93e516db1e{max-width:100%;display:grid;grid-gap:var(--space-16)}.group-header.jsx-10034a93e516db1e{color:var(--foreground-default);font-size:var(--font-size-subhead-default);cursor:pointer;display:grid;border:none;background-color:transparent;grid-gap:var(--space-8);grid-auto-flow:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;font-weight:var(--font-weight-medium);max-width:100%;overflow:hidden}.group-header.jsx-10034a93e516db1e:hover{color:var(--accent-primary-stronger)}.group-header.jsx-10034a93e516db1e .left.jsx-10034a93e516db1e{display:grid;grid-auto-flow:column;grid-template-columns:-webkit-min-content 1fr -webkit-max-content;grid-template-columns:min-content 1fr max-content;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;grid-gap:var(--space-8)}.path.jsx-10034a93e516db1e{text-align:left;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}.general-threads-buffer.jsx-10034a93e516db1e{height:104px}"})]})}function qs(){var e,t,n=(0,ve.Z)(),a=function(e){var t=(0,ae.Z)({},As,e);return se.a(Ds,t)}({variables:{replId:n}}).data,l=(0,Ut.b9)(Ol.c),s=i.useRef(null),c=(0,o.Z)(i.useState(null),2),u=c[0],f=c[1],p=(0,o.Z)(i.useState(Xs.ACTIVE),2),h=p[0],m=p[1],v=(0,o.Z)(i.useState(!1),2),g=v[0],b=v[1],x=i.useContext(Ps.Z),Z=x.annotations,y=x.jumpToThread,w=x.handleFinalizeMessage,k=x.handleChangeMessage,C=x.setResolvedAnnotation,j=x.createAnnotationAnchorPlaceholder,_=x.markAllMessagesInReplAsSeenByUser;if(i.useEffect((function(){var e=function(e){var t;if("Escape"===e.key&&s.current){var n=document.querySelectorAll(":hover"),r=Array.from(n).filter((function(e){var t;return null===(t=s.current)||void 0===t?void 0:t.contains(e)})).length>0,i=e.target&&(null===(t=s.current)||void 0===t?void 0:t.contains(e.target));(r||i)&&(u?f(null):g?b(!1):l(!1))}};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[s,u,g,b,f,l]),"Repl"!==(null===a||void 0===a||null===(e=a.repl)||void 0===e?void 0:e.__typename)||!(null===(t=a.repl)||void 0===t?void 0:t.user)||!a.currentUser)return null;var T=Z.find((function(e){return e.id===u}));return(0,r.BX)("div",{ref:s,className:"jsx-ff646b2cd36de159 "+"jsx-".concat(ds.Q.__hash)+" conversations-container",children:[!T&&(0,r.tZ)(Vs,{annotations:Z,onThreadClick:function(e){f(e),"Repl"===a.repl.__typename&&(0,ut.j)(ut.U3.THREAD_SELECTED,{replId:n,source:"threads",general:!1,variant:"replace-chat"})},onNewThreadClick:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=zs()();j({annotationAnchor:{id:t,replId:n,path:null,otVersion:null,indexStart:null,indexEnd:null,isGeneral:e}}),f(t)}()},onMarkAllAsReadClick:_,inboxMode:h,onClose:function(){return l(!1)},setInboxMode:function(e){return m(e)},generalThreadsOpen:g,setGeneralThreadsOpen:function(e){e!==g&&(b(e),"Repl"===a.repl.__typename&&e&&(0,ut.j)(ut.U3.THREAD_SELECTED,{replId:n,source:"threads",general:!0,variant:"replace-chat"}))}}),T&&(0,r.tZ)(Fs,{annotation:T,onCloseThread:function(){return f(null)},onFinalizeMessage:function(e){w({anchor:T,message:e.message,messageId:e.messageId}),"Repl"===a.repl.__typename&&(0,ut.j)(ut.U3.MESSAGE_SENT,{replId:n,source:"inbox",newThread:0===T.messages.length})},onChangeMessage:function(e){k({anchor:T,message:e.message,messageId:e.messageId})},markThreadResolved:function(e){C(e,!0),f(null)},markThreadUnresolved:function(e){C(e,!1)},scrollToAnchor:y}),(0,r.tZ)(d(),{id:ds.Q.__hash,children:ds.Q}),(0,r.tZ)(d(),{id:"ff646b2cd36de159",children:".conversations-container.jsx-ff646b2cd36de159{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;height:575px;width:350px;-webkit-border-radius:var(--border-radius-8);-moz-border-radius:var(--border-radius-8);border-radius:var(--border-radius-8);border-color:var(--background-higher);border-width:1px;border-style:solid;-webkit-box-shadow:var(--shadow-1);-moz-box-shadow:var(--shadow-1);box-shadow:var(--shadow-1);background-color:var(--background-default)}@media only screen and (max-height:672px){.conversations-container.jsx-ff646b2cd36de159{height:450px;width:300px}}"})]})}function Ys(){var e=(0,ve.Z)(),t=(0,k.Z)(),n=(0,ql.Z)(),i=(0,Xl.c)("flag-typing-presence"),a=i.enabled,o=(i.loading,n.map((function(e){return e.username}))),l=(0,Ut.b9)(Ol.Q),s=(0,Ut.b9)(Ol.c),c=(0,v.Z)(),d=c.session,u=c.container,f=Hl(e,{onReceiveAnnotationUpdate:function(){}}),p=f.annotations,h=f.generalThread,m=f.placeholderAnchorId,g=f.createAnnotationAnchorPlaceholder,b=f.deleteAnnotationAnchorPlaceholder,x=f.createAnnotationMessage,Z=f.updateAnnotationAnchor,y=f.updateThreadPreview,w=f.markAllMessagesInReplAsSeenByUser,C=function(){var e=(0,Ne.Z)(De().mark((function e(n){var r;return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=p.find((function(e){return e.id===n})))&&r.path){e.next=3;break}return e.abrupt("return");case 3:if(t===r.path){e.next=15;break}return e.prev=4,e.next=7,u.exec("test","-f",r.path);case 7:if(null===e.sent.error){e.next=10;break}return e.abrupt("return");case 10:e.next=15;break;case 12:return e.prev=12,e.t0=e.catch(4),e.abrupt("return");case 15:d.openFile(r.path),l(n),s(!1);case 18:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}();return(0,r.tZ)(Ps.Z.Provider,{value:{activeFile:t,users:n,annotations:p,generalThread:h,jumpToThread:C,onRequestCloseThread:function(){l(null),b(),d.focusEditor()},handleFinalizeMessage:function(e){var t=e.anchor,n=e.resolvedAnchor,r=e.message,i=e.messageId,a=(0,Yl.kW)(r,{users:(0,re.Z)(o).concat(["everyone"])}),l=null===n||void 0===n?void 0:n.getHighlight();x({anchor:t,annotationMessage:{id:i,text:r,mentions:a.mentions},highlight:l})},handleChangeMessage:function(e){var t=e.anchor,n=e.message,r=e.messageId;y({threadId:t.id,message:a?n:null,messageId:r})},setResolvedAnnotation:function(e,t){m===e.id?b():Z({annotationAnchor:e,changes:{isResolved:t}})},createAnnotationAnchorPlaceholder:g,markAllMessagesInReplAsSeenByUser:w},children:(0,r.tZ)(qs,{})})}!function(e){e.ACTIVE="Active",e.RESOLVED="Resolved"}(Xs||(Xs={}));var Ks=n(76743);function Qs(e){var t=e.isPane,n=(0,i.useRef)(null);return t?(0,r.tZ)(Ts,{isPane:!0}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(Ks.Z,{in:!0,timeout:300,appear:!0,transitionEnter:!1,transitionLeave:!0,classNames:"fade",children:(0,r.tZ)("div",{css:[p.l0.transition.chill,{width:"350px",height:"575px",bottom:52,right:0,position:"absolute","@media only screen and (max-height: 672px)":{height:"450px",width:"300px"}}],ref:n,className:d().dynamic([["197e86f98dc04d0d",[p.TV.transitionDurationSnappy,p.TV.transitionTimingFunctionSnappy]]]),children:(0,r.tZ)("div",{css:[p.l0.width("100%"),p.l0.height("100%")],className:d().dynamic([["197e86f98dc04d0d",[p.TV.transitionDurationSnappy,p.TV.transitionTimingFunctionSnappy]]]),children:(0,r.tZ)(Ts,{})})})}),(0,r.tZ)(d(),{id:"197e86f98dc04d0d",dynamic:[p.TV.transitionDurationSnappy,p.TV.transitionTimingFunctionSnappy],children:".fade-appear.__jsx-style-dynamic-selector{opacity:0;bottom:-20px}.fade-appear.fade-appear-active.__jsx-style-dynamic-selector{opacity:1;bottom:52px;-webkit-transition:".concat(p.TV.transitionDurationSnappy," all ").concat(p.TV.transitionTimingFunctionSnappy,";-moz-transition:").concat(p.TV.transitionDurationSnappy," all ").concat(p.TV.transitionTimingFunctionSnappy,";-o-transition:").concat(p.TV.transitionDurationSnappy," all ").concat(p.TV.transitionTimingFunctionSnappy,";transition:").concat(p.TV.transitionDurationSnappy," all ").concat(p.TV.transitionTimingFunctionSnappy,"}")})]})}function $s(e){var t=e.isPane,n=e.isChatOnly,a=(0,Xl.c)("flag-threads-2"),o=a.enabled,l=a.loading,s=(0,Xl.c)("flag-threads-pane"),c=s.enabled,d=s.loading,u=(0,Ut.Dv)(Pl.g4),f=(0,Ut.b9)(Ml.ao);return i.useEffect((function(){l||d||o||(f({type:"threadInbox"}),f({type:"chat"}))}),[l,d,o,c,u,f]),l?null:o?n?(0,r.tZ)(Ts,{isPane:!0,isChatOnly:!0}):(0,r.tZ)(Qs,{isPane:t}):(0,r.tZ)(Ys,{})}var Js,ec,tc={Content:function(){return(0,r.tZ)($s,{isPane:!0})},Icon:function(e){var t=e.size;return(0,r.tZ)(ts.Z,{size:t})},getTitle:function(){return"Threads"}},nc=n(4368),rc=n(83241),ic=n(89101);!function(e){e.RAW="RAW",e.PROXY="PROXY",e.THROW="THROW",e.HANDLER="HANDLER"}(Js||(Js={})),function(e){e.GET="GET",e.SET="SET",e.APPLY="APPLY",e.CONSTRUCT="CONSTRUCT",e.ENDPOINT="ENDPOINT",e.RELEASE="RELEASE"}(ec||(ec={}));var ac=Symbol("Comlink.proxy"),oc=Symbol("Comlink.endpoint"),lc=Symbol("Comlink.releaseProxy"),sc=Symbol("Comlink.thrown"),cc=function(e){return"object"===typeof e&&null!==e||"function"===typeof e},dc=new Map([["proxy",{canHandle:function(e){return cc(e)&&e[ac]},serialize:function(e){var t=new MessageChannel,n=t.port1,r=t.port2;return uc(e,n),[r,[r]]},deserialize:function(e){return e.start(),hc(e,[],t);var t}}],["throw",{canHandle:function(e){return cc(e)&&sc in e},serialize:function(e){var t=e.value;return[(0,wn.Z)(t,Error)?{isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:{isError:!1,value:t},[]]},deserialize:function(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function uc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self,n=arguments.length>2?arguments[2]:void 0;function r(i){if(i&&i.data&&(!n||i.origin===n.origin&&i.source===n.source)){var l,s=(0,ae.Z)({path:[]},i.data),c=s.id,d=s.type,u=s.path,f=(i.data.argumentList||[]).map(Zc);try{var p=u.slice(0,-1).reduce((function(e,t){return e[t]}),e),h=u.reduce((function(e,t){return e[t]}),e);switch(d){case ec.GET:l=h;break;case ec.SET:p[u.slice(-1)[0]]=Zc(i.data.value),l=!0;break;case ec.APPLY:l=h.apply(p,f);break;case ec.CONSTRUCT:l=bc((0,ic.Z)(h,(0,re.Z)(f)));break;case ec.ENDPOINT:var m=new MessageChannel,v=m.port1,g=m.port2;uc(e,g),l=gc(v,[v]);break;case ec.RELEASE:l=void 0;break;default:return}}catch(b){l=(0,a.Z)({value:b},sc,0)}Promise.resolve(l).catch((function(e){return(0,a.Z)({value:e},sc,0)})).then((function(e){var n=(0,o.Z)(xc(e),2),i=n[0],a=n[1];t.postMessage((0,Ft.Z)((0,ae.Z)({},i),{id:c}),a),d===ec.RELEASE&&(t.removeEventListener("message",r),fc(t))}))}}return t.addEventListener("message",r),t.start&&t.start(),function(){t.removeEventListener("message",r),fc(t)}}function fc(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function pc(e){if(e)throw new Error("Proxy has been released and is not useable")}function hc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=!1,i=new Proxy(n,{get:function(n,a){if(pc(r),a===lc)return function(){return yc(e,{type:ec.RELEASE,path:t.map((function(e){return e.toString()}))}).then((function(){fc(e),r=!0}))};if("then"===a){if(0===t.length)return{then:function(){return i}};var o=yc(e,{type:ec.GET,path:t.map((function(e){return e.toString()}))}).then(Zc);return o.then.bind(o)}return hc(e,(0,re.Z)(t).concat([a]))},set:function(n,i,a){pc(r);var l=(0,o.Z)(xc(a),2),s=l[0],c=l[1];return yc(e,{type:ec.SET,path:(0,re.Z)(t).concat([i]).map((function(e){return e.toString()})),value:s},c).then(Zc)},apply:function(n,i,a){pc(r);var l=t[t.length-1];if(l===oc)return yc(e,{type:ec.ENDPOINT}).then(Zc);if("bind"===l)return hc(e,t.slice(0,-1));var s=(0,o.Z)(mc(a),2),c=s[0],d=s[1];return yc(e,{type:ec.APPLY,path:t.map((function(e){return e.toString()})),argumentList:c},d).then(Zc)},construct:function(n,i){pc(r);var a=(0,o.Z)(mc(i),2),l=a[0],s=a[1];return yc(e,{type:ec.CONSTRUCT,path:t.map((function(e){return e.toString()})),argumentList:l},s).then(Zc)}});return i}function mc(e){var t,n=e.map(xc);return[n.map((function(e){return e[0]})),(t=n.map((function(e){return e[1]})),Array.prototype.concat.apply([],t))]}var vc=new WeakMap;function gc(e,t){return vc.set(e,t),e}function bc(e){return Object.assign(e,(0,a.Z)({},ac,!0))}function xc(e){var t=!0,n=!1,r=void 0;try{for(var i,a=dc[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var l=(0,o.Z)(i.value,2),s=l[0],c=l[1];if(c.canHandle(e)){var d=(0,o.Z)(c.serialize(e),2),u=d[0],f=d[1];return[{type:Js.HANDLER,name:s,value:u},f]}}}catch(p){n=!0,r=p}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return[{type:Js.RAW,value:e},vc.get(e)||[]]}function Zc(e){switch(e.type){case Js.HANDLER:return dc.get(e.name).deserialize(e.value);case Js.RAW:return e.value}}function yc(e,t,n){return new Promise((function(r){var i=new Array(4).fill(0).map((function(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)})).join("-");e.addEventListener("message",(function t(n){n.data&&n.data.id&&n.data.id===i&&(e.removeEventListener("message",t),r(n.data))})),e.start&&e.start(),e.postMessage((0,ae.Z)({id:i},t),n)}))}var wc=n(93803),kc=n(17780);function Cc(e){var t=e.extensionIframe,n=e.services,r=new URL(t.src).origin;function i(e){return a.apply(this,arguments)}function a(){return(a=(0,Ne.Z)(De().mark((function e(n){return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.contentWindow){e.next=3;break}return alert("No contentWindow"),e.abrupt("return");case 3:t.contentWindow.postMessage(n,r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(){return(o=(0,Ne.Z)(De().mark((function e(t){return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i({id:t.id,payload:{success:!0}});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return s.apply(this,arguments)}function s(){return(s=(0,Ne.Z)(De().mark((function e(t){return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i({id:t.id,payload:{error:"commandNotFound",command:t.payload.type}});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var c=(0,ae.Z)({},function(e){var t=e.fs;function n(){return(n=(0,Ne.Z)(De().mark((function e(n,r){var i,a;return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof r){e.next=5;break}i=r,e.next=14;break;case 5:if(!(0,wn.Z)(r,Blob)){e.next=13;break}return e.t0=Ve.Z,e.next=9,r.arrayBuffer();case 9:e.t1=e.sent,i=e.t0.from.call(e.t0,e.t1),e.next=14;break;case 13:i=Ve.Z.from(r);case 14:return e.next=16,t.writeFile(n,i);case 16:return a=e.sent.error,e.abrupt("return",a);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function r(){return(r=(0,Ne.Z)(De().mark((function e(n){var r;return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.readFile(n);case 2:if(!(r=e.sent).error){e.next=5;break}return e.abrupt("return",{error:r.error});case 5:return e.abrupt("return",{content:r.content.toString()});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(){return(i=(0,Ne.Z)(De().mark((function e(n){var r;return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.readDir(n);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function a(){return(a=(0,Ne.Z)(De().mark((function e(n){var r;return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.createDir(n);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(){return(o=(0,Ne.Z)(De().mark((function e(n){var r;return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.deleteDir(n);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=(0,Ne.Z)(De().mark((function e(n){var r;return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.deleteFile(n);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(){return(s=(0,Ne.Z)(De().mark((function e(n,r){var i,a,o;return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.stat(n);case 2:if((i=e.sent).exists){e.next=5;break}return e.abrupt("return",{error:"File or directory does not exist"});case 5:if(i.type!==w.Tv.File){e.next=12;break}return e.next=8,t.moveFile(n,r);case 8:return a=e.sent,e.abrupt("return",a);case 12:return e.next=14,t.moveDir(n,r);case 14:return o=e.sent,e.abrupt("return",o);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(){return(c=(0,Ne.Z)(De().mark((function e(n,r){var i;return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.copyFile(n,r);case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{readFile:function(e){return r.apply(this,arguments)},readDir:function(e){return i.apply(this,arguments)},createDir:function(e){return a.apply(this,arguments)},deleteDir:function(e){return o.apply(this,arguments)},writeFile:function(e,t){return n.apply(this,arguments)},deleteFile:function(e){return l.apply(this,arguments)},copyFile:function(e,t){return c.apply(this,arguments)},move:function(e,t){return s.apply(this,arguments)},watchFile:function(e,n){if((0,Z.Mb)(e)){var r=t.watchOtFile(e,{onChange:function(e){var t=e.latestContent;n.onChange(t.toString())},onError:function(e){n.onError(e.message)},onMoveOrDelete:function(e){n.onMoveOrDelete({eventType:e.eventType,node:e.node})}});return bc((function(){r()}))}var i=t.watchFile(e,{onChange:function(e){n.onChange(e.toString())},onError:function(e){n.onError(e.message)},onMoveOrDelete:function(e){n.onMoveOrDelete({eventType:e.eventType,node:e.node})}});return bc((function(){i()}))}}}({fs:n.fs}),function(e){var t=e.container,n=null;function r(){return i.apply(this,arguments)}function i(){return(i=(0,Ne.Z)(De().mark((function e(){var r;return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.exec("bash","-c","echo $REPLIT_DB_URL");case 4:if(!(r=e.sent).error&&r.output){e.next=7;break}throw new Error("unable to find REPLIT_DB_URL");case 7:n=r.output.trim();case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function a(){return(a=(0,Ne.Z)(De().mark((function e(i,a){return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r();case 2:return e.next=4,t.exec("curl",n,"-s","-d","".concat(i,"=").concat(a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(){return(o=(0,Ne.Z)(De().mark((function e(i){var a;return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r();case 2:return e.next=4,t.exec("curl","-s","".concat(n,"/").concat(i));case 4:return a=e.sent,e.abrupt("return",a.output);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=(0,Ne.Z)(De().mark((function e(i){var a;return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r();case 2:return e.next=4,t.exec("curl","-s","".concat(n,"?prefix=").concat(i));case 4:if(!(a=e.sent).error&&a.output){e.next=7;break}return e.abrupt("return",{error:a.error});case 7:return e.abrupt("return",{keys:a.output.split("\n")});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{setReplDbValue:function(e,t){return a.apply(this,arguments)},getReplDbValue:function(e){return o.apply(this,arguments)},listReplDbKeys:function(e){return l.apply(this,arguments)}}}({container:n.container})),d=(0,ae.Z)({handshake:function(e){return o.apply(this,arguments)}},function(e){var t=e.send;return{queryGraphql:function(){var e=(0,Ne.Z)(De().mark((function e(n){var r;return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===kc.l||void 0===kc.l?void 0:kc.l.query({query:(0,le.ZP)(n.payload.query),variables:n.payload.variables});case 2:r=e.sent,t({id:n.id,payload:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),mutateGraphql:function(){var e=(0,Ne.Z)(De().mark((function e(n){var r;return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===kc.l||void 0===kc.l?void 0:kc.l.mutate({mutation:(0,le.ZP)(n.payload.mutation),variables:n.payload.variables});case 2:r=e.sent,t({id:n.id,payload:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}({send:i}),(0,wc.Z)({send:i,services:n}));function u(){return(u=(0,Ne.Z)(De().mark((function e(t){var n,r;return De().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.payload.type,!(r=d[n])){e.next=4;break}return e.abrupt("return",r(t));case 4:return e.abrupt("return",l(t));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var f=function(e){if(e.origin===r&&t.contentWindow===e.source){var n=e.data;n.payload&&function(e){u.apply(this,arguments)}(n)}};if(!t.contentWindow)throw new Error("No contentWindow");var p=uc(c,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*";return{postMessage:function(t,r){e.postMessage(t,n,r)},addEventListener:t.addEventListener.bind(t),removeEventListener:t.removeEventListener.bind(t)}}(t.contentWindow,self,r),{origin:r,source:t.contentWindow});return window.addEventListener("message",f),function(){p(),window.removeEventListener("message",f)}}function jc(e){var t=e.extensionUrl,n=i.useRef(null),a=(0,v.Z)();return(0,i.useEffect)((function(){if(n.current)return Cc({extensionIframe:n.current,services:a})}),[a]),(0,r.tZ)(p.G7,{className:"extension-pane",css:[p.l0.backgroundColor.backgroundDefault,p.l0.height("100%"),p.l0.borderRadius(4),{overflow:"hidden"}],children:(0,r.tZ)("iframe",(0,ae.Z)({css:{width:"100%",height:"100%",border:"none"},title:"extension",ref:n,src:t},rc.Z))})}var _c={Content:function(e){var t=e.pane;return(0,r.tZ)(jc,{extensionUrl:t.data.url})},Icon:function(e){var t=e.size;return(0,r.tZ)(nc.Z,{size:t})},getTitle:function(e){return e.data.name}},Tc={Content:function(){return(0,r.tZ)(jc,{extensionUrl:"https://docs.replit.com/"})},Icon:function(e){var t=e.size;return(0,r.tZ)(ui.Z,{size:t})},getTitle:function(){return"Docs"}},Sc={Content:function(e){var t=e.pane.data;return(0,r.tZ)(zc,{title:t.title,embedUrl:t.embedUrl})},Icon:function(e){var t=e.size;return(0,r.tZ)(hi.Z,{size:t})},getTitle:function(e){return e.data.title}};function zc(e){return(0,r.tZ)("iframe",{title:e.title,src:e.embedUrl,frameBorder:"0",css:[p.l0.coverContainer,p.l0.borderRadius(0,0,8,8)]})}var Bc=n(75026),Rc={Content:function(){return(0,r.tZ)(p.Tg,{background:"default",css:p.l0.flex.growAndShrink(1),children:(0,r.tZ)($s,{isPane:!0,isChatOnly:!0})})},Icon:function(e){var t=e.size;return(0,r.tZ)(Bc.Z,{size:t})},getTitle:function(){return"Chat"}};function Ec(){return{filetree:G,codeEditor:I.D,webview:gt.R,media:At,pedit:Vr,vnc:yt,unitTests:Bi,autograder:ca,education:Zo,instructions:To,preferences:$,adminPanel:pl,runnerOutput:P,shell:zt,packager:te,envEditor:q,commands:bt,draw:Gt,git:Mt,history:Dr,database:Ie,replAuth:vt,markdown:z,kaboombar:Bo,debugger:Rl,tutorial:Ll,config:Dl,threadInbox:tc,extension:_c,docs:Tc,videoPlayer:Sc,chat:Rc}}}}]);
//# sourceMappingURL=4522-c3e0789800d70ee8.js.map